<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ModuleNotFoundError:No module named 'numpy' in pyCharm]]></title>
    <url>%2F2018%2F04%2F08%2FPython%2Fnumpy_not_found%2F</url>
    <content type="text"><![CDATA[è¿™ä¸ªé”™è¯¯æŠ˜ç£¨äº†æˆ‘ä¸‰å¤©â€¦.å„ç§æŠ˜ç£¨â€¦.ç»ˆäºŽåœ¨ä»Šå¤©ç»™è§£å†³äº†ã€‚ ä¸ºä»€ä¹ˆä¼šå‡ºçŽ°è¿™ä¸ªé—®é¢˜ï¼Ÿ æœ‰ä¸¤ç§åŽŸå› ï¼š æ²¡æœ‰è£…NumPy å·²ç»è£…äº†NumPyä½†æ˜¯è¿è¡Œçš„è„šæœ¬ä½¿ç”¨çš„è§£é‡Šå™¨ä¸æ˜¯è£…äº†NumPyçš„è§£é‡Šå™¨ã€‚ 1å¦‚æžœä½ çŽ°åœ¨å·²ç»è‡ªå·±ä»ŽPythonå®˜ç½‘ä¸‹è½½å®‰è£…äº†PythonçŽ¯å¢ƒï¼Œå»ºè®®çŽ°åœ¨å¸è½½æŽ‰ï¼Œæ–¹æ³•å¾ˆç®€å•ï¼ŒWin10ç›´æŽ¥åŽ»ä¸­çš„è®¾ç½®-&gt;åº”ç”¨ä¸­å¸è½½å°±è¡Œã€‚å› ä¸ºå¦‚æžœä¸å¸è½½æŽ‰ï¼Œä½ çš„ç”µè„‘ä¸­å¯èƒ½åœ¨ä¸‹åˆ—æ“ä½œä¹‹åŽå­˜åœ¨å¤šä¸ªpython.exeï¼Œæ‰“å¼€ä¸åŒçš„python.exeï¼Œå®‰è£…çš„ä¸œè¥¿å°±ä¸ä¸€æ ·ï¼Œèƒ½ç”¨çš„æ¨¡å—ä¹Ÿä¸ä¸€æ ·ã€‚å¦‚æžœä»€ä¹ˆåº”ç”¨é»˜è®¤ä½¿ç”¨äº†ä½ ä¸æƒ³ä½¿ç”¨çš„é‚£ä¸ªpythonï¼Œå°±å¾ˆéº»çƒ¦ã€‚ å¥½äº†ï¼ŒçŽ°åœ¨å¯ä»¥è£…NumPyäº†ã€‚å…¶å®žå¯ä»¥ç›´æŽ¥å†cmdé‡Œé¢pip3 insatll numpyï¼ˆç”¨äºŽpython3ï¼‰æˆ–pip install pythonï¼ˆç”¨äºŽpython2ï¼‰ï¼Œä½†æ˜¯æˆ‘çœ‹ç½‘ä¸Šå„åšå®¢è®ºå›ä¸Šçš„å¤§ä½¬éƒ½ä¸æŽ¨èè¿™ä¹ˆåšï¼Œæœ€å¥½æ˜¯ç›´æŽ¥ä½¿ç”¨Anacondaï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸€äº›ç‰ˆæœ¬ä¸å…¼å®¹å¸¦æ¥çš„å¹ºè›¾å­ã€‚ å¦‚æžœä½ å·²ç»è£…äº†NumPyï¼ŒåŒæ ·ï¼Œå»ºè®®å¸è½½ã€‚åªéœ€è¦åœ¨cmdé‡Œé¢pip3 unintsall numpyï¼ˆpy3ï¼‰æˆ–æ˜¯pip unintall numpyï¼ˆpy2ï¼‰ã€‚ åŽ»ä¸‹è½½Anacondaçš„å®‰è£…åŒ…ï¼Œä¸æŽ¨èå®˜ç½‘ï¼Œå› ä¸ºåœ¨å›½å†…å®˜ç½‘å¥‡æ…¢ã€‚æŽ¨èåŽ»æ¸…åŽå¤§å­¦é•œåƒç½‘ç«™ä¸‹è½½ï¼Œæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚çš„è¯çœ‹æ¸…å¹³å°ä¸Ž32/64ï¼Œé€‰æ‹©æœ€æ–°ç‰ˆä¼¼ä¹Žå°±è¡Œï¼ˆå› ä¸ºæˆ‘æ˜¯å…¨æ–°çš„çŽ¯å¢ƒï¼Œpycharm2018.1communityã€‚ ç„¶åŽå®‰è£…anacondaï¼Œè‡ªå·±é€‰ä¸€ä¸ªå®‰è£…è·¯å¾„ï¼Œä¸ç”¨å¿…é¡»å®‰è£…åˆ°Cç›˜ï¼Œä¹Ÿä¸ç”¨è§‰å¾—å®‰è£…åˆ°Cç›˜æ¯”è¾ƒæ–¹ä¾¿ï¼ˆåæ­£éƒ½é€ƒä¸è¿‡çŽ¯å¢ƒå˜é‡ã€‚ åˆ°è¿™é‡ŒpythonçŽ¯å¢ƒå°±æ²¡æœ‰é—®é¢˜äº†ï¼ŒæŽ¥ä¸‹æ¥å¦‚æžœè¿˜æ˜¯ä¼šæœ‰notfoundçš„é—®é¢˜ï¼Œå°±æ˜¯pycharmçš„é…ç½®é—®é¢˜äº†ã€‚ 2å¦‚æžœä½ æ˜¯åœ¨pyCharmä¸­æ–°å»ºçš„é¡¹ç›®ï¼Œè¿™é‡Œä¸€å®šè¦æç¤ºï¼šæ–°å»ºé¡¹ç›®çš„æ—¶å€™ä¸€å®šè‡ªå·±é€‰æ‹©pythonè§£é‡Šå™¨ï¼ï¼ï¼ï¼Œå› ä¸ºï¼Œå¦‚æžœä½ ä¸è‡ªå·±åŽ»é€‰ï¼Œé»˜è®¤æ˜¯â€œæ–°çš„è§£é‡Šå™¨â€ï¼Œè¿™ä¸ªæ–°çš„è§£é‡Šå™¨ä¸ä»…ä¼šåœ¨é¡¹ç›®ä¸‹å»ºä¸€äº›ä¸å¿…è¦çš„ä¸œè¥¿ï¼Œè¿˜æœ‰å¯èƒ½éœ€è¦ä¸ºä¹‹å®‰è£…jupyter noteã€‚æ€»ä¹‹ï¼Œä¸æŽ¨èã€‚æŽ¨èä½¿ç”¨å·²ç»å­˜åœ¨çš„è§£é‡Šå™¨ï¼Œä¹Ÿå°±æ˜¯ä½ åˆšåˆšå®‰è£…anacondaé€‰æ‹©çš„é‚£ä¸ªç›®å½•ä¸‹çš„python.exeï¼š è¿™æ ·è¿›åŽ»ä¹‹åŽåŸºæœ¬æ²¡ä»€ä¹ˆé—®é¢˜äº†ã€‚ æ’ä¸€å¥ï¼Œå¦‚æžœå‡ºçŽ°è¿™ç§æ‰¾ä¸åˆ°moduleçš„é—®é¢˜ï¼ŒåŽ»çœ‹ä¸€çœ‹è¿™ä¸ªè¿è¡Œçš„ç¨‹åºä½¿ç”¨çš„æ˜¯å“ªä¸ªè§£é‡Šå™¨ï¼Œè¿™ä¸ªä¿¡æ¯ä¼šå‡ºçŽ°åœ¨åº•éƒ¨çš„è¾“å‡ºçª—å£ã€‚æˆ‘å°±æ˜¯å› ä¸ºå‘çŽ°jupyterçš„è§£é‡Šå™¨ä¸€ç›´æ˜¯åŽŸæ¥çš„é‚£ä¸ªæ–°å»ºçš„è§£é‡Šå™¨æ‰å†³å®šæ¯æ¬¡åˆ›å»ºé¡¹ç›®éƒ½ä½¿ç”¨å·²ç»å­˜åœ¨çš„anacondaè§£é‡Šå™¨ã€‚ å…³äºŽè¿è¡Œé…ç½®ï¼Œå¯ä»¥è‡ªå·±é…ç½®ï¼Œåªéœ€è¦æ³¨æ„é€‰æ‹©è§£é‡Šå™¨çš„æ—¶å€™é€‰æ‹©anacondaä¸‹çš„è§£é‡Šå™¨å°±å¥½ã€‚æŽ¨èç›´æŽ¥åœ¨file-&gt;default settingä¸­è®¾ç½®é¡¹ç›®çš„é»˜è®¤è§£é‡Šå™¨ï¼Œæˆ–æ˜¯åœ¨file-&gt;settingä¸­ä¸ºè¿™ä¸ªé¡¹ç›®è®¾ç½®è‡ªå·±çš„é»˜è®¤è§£é‡Šå™¨ã€‚ æœ€åŽæä¸€ä¸‹ï¼Œjupyter bookéœ€è¦åœ¨serverä¸Šè¿è¡Œï¼Œç¬¬ä¸€æ¬¡è¿è¡Œéšä¾¿ç»™ä¸€ä¸ªtokenï¼Œç„¶åŽåº•éƒ¨ç»™å‡ºä¸€ä¸ªé“¾æŽ¥ï¼Œè¿™å°±æ˜¯å¯ä»¥è¿è¡Œäº†ï¼ŒéšåŽä½¿ç”¨shift+enterå°±å¯ä»¥è¿è¡Œä¸€æ®µä»£ç äº†ã€‚è¿è¡Œæ–¹å¼æ„Ÿè§‰åƒæ˜¯IDLEçš„æ”¹è‰¯ã€‚å¦‚æžœjupyterè¿è¡Œçš„æ—¶å€™æç¤ºerroréœ€è¦å®‰è£…jupyterï¼Œå°±å®‰è£…ä¸€ä¸‹å°±å¥½ã€‚ä¹Ÿä¸ç”¨è‡ªå·±åŽ»æœç´¢ï¼Œå°±æŒ‰æ—è¾¹çš„fixå°±å¥½ã€‚ python fileå’Œjupyter noteéƒ½å¯ä»¥ä½¿ç”¨ï¼š]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¼–è¯‘å¤ä¹ è¯¾]]></title>
    <url>%2F2018%2F01%2F17%2F%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%2F%E7%BC%96%E8%AF%91%E5%A4%8D%E4%B9%A0%E8%AF%BE%2F</url>
    <content type="text"><![CDATA[è¯æ³•åˆ†æžè¯­æ³•åˆ†æžè¯­ä¹‰åˆ†æžï¼šåˆ†æžé˜¶æ®µä¸­é—´â€¦ç»¼åˆé˜¶æ®µ ä½¿ç”¨ç®—æ³•æž„é€ å¯¹åº”æ¨¡å—ç¨‹åº å„ä¸ªé˜¶æ®µåšä»€ä¹ˆäº‹ï¼Ÿé€šå¸¸å€’è¿‡æ¥é—®ï¼šæŸä¸ªäº‹æƒ…åœ¨å“ªä¸ªé˜¶æ®µåšï¼Ÿ è¯æ³•ï¼šå°†å­—ç¬¦æµåˆ‡æˆå•è¯æµè¯­æ³•ï¼šå°†å•è¯æµæž„å»ºè¯­æ³•æ ‘è¯­ä¹‰ï¼šç±»åž‹æ£€æŸ¥ã€å˜é‡å®šä¹‰ä¸Žä½¿ç”¨è§„åˆ™ä¸­é—´ä»£ç ç”Ÿæˆï¼šè¯­æ³•æ ‘-&gt;ä¸­é—´ä»£ç ä»£ç ä¼˜åŒ–ï¼šåŸºæœ¬å—ã€æµå›¾ã€åŸºæœ¬å—å†…æ•°æ®æµåˆ†æžã€è·¨åŸºæœ¬å¿«æ•°æ®æµåˆ†æžä»£ç ç”Ÿæˆï¼šä¸‰åœ°å€å—è½¬åŒ–æ±‡ç¼–ä»£ç  é¢„å¤„ç†å™¨ï¼šæ–‡æœ¬æ›¿æ¢ï¼ˆå®ã€åŒ…å«æ–‡ä»¶ æ±‡ç¼–å™¨ã€é“¾æŽ¥å™¨ï¼šåŠ è½½å™¨ï¼šå°†ç¨‹åºloadåˆ°å†…å­˜ä¸­-ã€‹ä¿®æ”¹ç¨‹åºä¸­çš„åœ°å€ï¼ˆå•Šå•Šå•Šå•Šæˆ‘åˆæƒ³åˆ°osäº†ðŸ˜­ ç¬¦å·è¡¨ç®¡ç†ï¼šè¯æ³•ã€è¯­æ³•ã€ä»¥åŽé”™è¯¯å¤„ç†ï¼šè¯­æ³•é˜¶æ®µ å‡ ä¸ªé˜¶æ®µå¦‚ä½•ç»„ç»‡ï¼Ÿ å‰å››ä¸ªé˜¶æ®µåŒ…æ‹¬ä¸­é—´ä»£ç ï¼Œä¹‹å‰ï¼Œä¸»è¦é¢å‘é«˜çº§è¯­è¨€åŽé¢çš„åŒ…æ‹¬ä¼˜åŒ–éƒ½æ˜¯åŽç«¯ è¯æ³•åˆ†æžåŸºæœ¬æ¦‚å¿µå•è¯ï¼šç±»åˆ«ã€ç¬¦å·ä¸²åˆ†ç»„æ¨¡å¼ï¼šå•è¯è¯ç´ è¯ç´ æ˜¯å…·ä½“å­—ç¬¦ä¸² å•è¯æ˜¯ä¸€ç§ç±»åž‹(NUMBER)æ¨¡å¼æ˜¯å¯¹ä¸€ç§å•è¯çš„æè¿° ä¸å¯èƒ½ç”¨è‡ªç„¶è¯­è¨€æè¿°ç»„ç»‡ï¼š æ­£åˆ™è¡¨è¾¾å¼â€”â€”æ¨¡å¼ç¬¦å·ä¸²é›†åˆã€‚æœ‰ç©·é›†ã€æ— ç©·é›†-ã€‹å¤„ç†æ— ç©·é›† ä½¿ç”¨ç®€å•è¯­è¨€ï¼ˆç¬¦å·ä¸²é›†åˆï¼‰çš„è¿ç®—æè¿°å¤æ‚è¯­è¨€ å®šä¹‰ï¼š 1. ç¬¦å·è¡¨ä¸­çš„ç¬¦å·ï¼ˆè¡¨ç¤ºé•¿åº¦ä¸ºä¸€çš„ç¬¦å·ä¸²é›†åˆ 2. $\epsilon$ 3. A|B 4. AB 5. A* 6.(A) lexæ”¯æŒæ›´å¤šå½¢å¼ï¼Œä½†æ˜¯è¿™å››ç§è¿ç®—å·²ç»æ˜¯å®Œå¤‡çš„äº†ã€‚ å­—æ¯è¡¨ã€ç¬¦å·ä¸²ã€è¯­è¨€ è¿ç®—æ³•åˆ™ï¼šæœä»Žé›†åˆä¸Žç¬¦å·ä¸² ç­‰ä»·ï¼šè¿ç®—å‡ºçš„ç¬¦å·ä¸²é›†åˆç›¸åŒ æ­£åˆ™å®šä¹‰ï¼šç±»ä¼¼äºŽä¸Šä¸‹æ–‡æ— å…³æ–‡æ³• ç¬¦å·ç®€å†™ï¼š+ï¼šæ­£åˆ™é—­åŒ…ï¼Ÿï¼šæœ‰æˆ–æ²¡æœ‰ã€0æˆ–1æ¬¡è¿žæŽ¥[]ï¼šæˆ– åŸºæœ¬æ¦‚å¿µæ­£åˆ™è¡¨è¾¾å¼çš„è®¾è®¡ æœ‰é™è‡ªåŠ¨æœºéžç¡®å®šæœ‰é™è‡ªåŠ¨æœºNFAäº”å…ƒç»„{çŠ¶æ€é›†åˆï¼Œå­—æ¯è¡¨ï¼Œåˆæƒ³å˜ï¼ˆè¿ç§»å‡½æ•°ï¼‰ï¼Œé¡¶ç‚¹ï¼ˆåˆæ€ï¼‰ï¼Œç»ˆæ€é›†åˆ} DFAæ— epsilonè¾¹ï¼ŒNFAå‘å‡ºç›¸åŒç¬¦å·è¾¹è½¬åˆ°ä¸åŒçŠ¶æ€===NFAä¸ç¡®å®šä½†æ˜¯DFAç¡®å®š epsilonä½“çŽ°åœ¨çŠ¶æ€è¿ç§»å‡½æ•°çš„å®šä¹‰åŸŸï¼Œå¤šæ¡è¾¹ä½“çŽ°åœ¨å€¼åŸŸ ç¡®å®šæœ‰é™è‡ªåŠ¨æœºDFA ä¸€ä¸ªçŠ¶æ€ä¸€ä¸ªç¬¦å·å”¯ä¸€ç¡®å®šä¸‹ä¸€ä¸ªçŠ¶æ€ äº”å…ƒç»„çŠ¶æ€è½¬æ¢å›¾çŠ¶æ€è½¬æ¢çŸ©é˜µï¼šè¡Œæ˜¯çŠ¶æ€ï¼Œåˆ—æ˜¯å­—ç¬¦è¡¨ä¸­ç¬¦å·==ã€‹è®¡ç®—æœºå®¹æ˜“å­˜å‚¨ åˆ¤æ–­ç­‰ä»·===ã€‹ç›¸åŒæ­£åˆ™ ç­‰ä»·çš„nfaä¸Ždfaï¼Œdfaæ—¶é—´å¤æ‚æ€§ä¸€å®šæ˜¯æ›´ä¼˜çš„ã€‚ æ­£åˆ™å¼-ã€‹NFA æ±¤å§†æ£®æž„é€ æ³•ï¼šæ­£åˆ™-&gt;NFA æ˜¯è¯­æ³•åˆ¶å¯¼ç¿»è¯‘çš„æ–¹æ³• NFA-&gt;DFAâ€”â€”å­é›†æž„é€ æ³• ç›®æ ‡æ˜¯æž„é€ ä¸ŽNFAç­‰ä»·çš„DFAã€‚ç­‰ä»·ï¼šè¯†åˆ«çš„å­—ç¬¦ä¸²é›†åˆæ˜¯ä¸€æ ·çš„åŠ¨æ€æè¿°ï¼šäºŒè€…å¯¹ç›¸åŒçš„å­—ç¬¦ä¸²ç»“æžœç›¸åŒã€‚åœ¨NFAé‡Œé¢åœä¸‹çš„ä¸€å †çŠ¶æ€ä¸ŽDFAä¸­çš„æŸä¸ªçŠ¶æ€ç­‰ä»·ã€‚ éšœç¢ï¼šæ— ç©·ã€‚ æœ€å°åŒ–DFAï¼šæ¦‚å¿µâ€”â€”åŒºåˆ† æ‘¸ä¸ªç¬¦å·ä¸²åŒºåˆ†ä¸¤ä¸ªçŠ¶æ€ï¼šåœä¸‹çš„çŠ¶æ€ä¸€ä¸ªæ˜¯accä¸€ä¸ªæ˜¯å…¶ä»–ã€‚è‹¥åˆ†æ•£åœ¨ä¸¤ä¸ªçŽ°æœ‰é›†åˆâ€”â€”åˆ†å¼€ã€‚åŠ æ­»çŠ¶æ€ï¼šçŠ¶æ€è¿ç§»çŸ©é˜µä¸èƒ½æœ‰é¡¹æ˜¯ç©ºï¼šéžç»ˆæ€ è¯­æ³•åˆ†æžæ¦‚å¿µ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼šCFGï¼šå››å…ƒå¼ï¼ˆç»ˆç»“ç¬¦ã€éžç»ˆç»“ç¬¦ã€å¼€å§‹ç¬¦å·ã€äº§ç”Ÿå¼é›†åˆï¼‰ å½¢å¼åŒ–åœ°æè¿°ï¼šA-&gt;Î± æŽ¨å¯¼ã€è¯­è¨€ã€å¥åž‹ã€å¥å­æœ€èµ°æŽ¨åˆ°ã€æœ€å³æŽ¨å¯¼è¯­æ³•æ ‘ã€äºŒä¹‰æ€§æ–‡æ³•CFGç­‰ä»· CFGä¸Žæ­£åˆ™å¼ è‡ªé¡¶å‘ä¸‹è¯­æ³•åˆ†æž ç®—ç¬¦æ–‡æ³•ï¼šæ²¡æœ‰è¿žç»­çš„éžç»ˆç»“ç¬¦ã€ä¸èƒ½æœ‰Îµäº§ç”Ÿå¼ ä¼˜å…ˆçº§è®¡ç®—ï¼š å¥æŸ„ç¡®å®š&lt;=&gt; æ´»å‰ç¼€ï¼šå‰ç¼€æœ«ç«¯ä¸è¶…è¿‡æœ€å³å¥æŸ„çš„æœ«ç«¯ æž„é€ è¯†åˆ«æ´»å‰ç¼€çš„DFAã€‚closure goto æ¦‚å¿µã€åˆ†æžè¡¨ é¢„æµ‹åˆ†æž SLRã€LR è¯­æ³•åˆ¶å¯¼ç¿»è¯‘Så±žæ€§ã€Lå±žæ€§ è®¾è®¡ ç»“åˆï¼šè‡ªé¡¶å‘ä¸‹ ç»§æ‰¿ï¼›è‡ªåº•å‘ä¸Š ç»¼åˆ ç»“æž„ç­‰ä»·ï¼šè¡¨è¾¾å¼æ ‘ç­‰ä»·åå­—ç­‰ä»·ï¼šè™Žå¤ªéƒŽæŠ«ä¸Šç¾Šçš®å°±ä¸æ˜¯ç°å¤ªç‹¼ ç±»åž‹è¡¨è¾¾å¼çš„ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³• ä¸­é—´ä»£ç ç”Ÿæˆï¼šä¸´æ—¶åå­—çš„é‡ç”¨ä¸‰åœ°å€ç ç”Ÿæˆï¼šæŒ‰ç…§ç®—æ³•æž„é€  è¡¨è¾¾å¼-&gt;ä¸‰åœ°å€ç  ä»£ç ä¼˜åŒ– åŸºæœ¬å—ã€æµå›¾ã€ä»ŽåŸºæœ¬å¿«å£å¾ªçŽ¯ ä¸‹æ¬¡å¼•ç”¨ ä¼˜åŒ–æ–¹æ³• ç›®æ ‡ä»£ç ç”ŸæˆåŸºæœ¬å—å†…å±€éƒ¨æœ€ä¼˜]]></content>
      <categories>
        <category>ç¼–è¯‘</category>
      </categories>
      <tags>
        <tag>ç¼–è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[chap5-è®¾å¤‡]]></title>
    <url>%2F2018%2F01%2F16%2FOS%2Fchap5-%E8%AE%BE%E5%A4%87%2F</url>
    <content type="text"><![CDATA[è®¾å¤‡åŸºç¡€è®¾å¤‡ç±»åž‹ æŒ‰åŠŸèƒ½åˆ†ç±» å­˜å‚¨è®¾å¤‡ï¼šæš‚æ—¶æˆ–æ°¸ä¹… I / Oè®¾å¤‡ï¼šäººæœºäº¤äº’ é€šä¿¡è®¾å¤‡ï¼šæ•°æ®äº¤æ¢å’Œä¼ è¾“æŒ‰æ•°æ®ç®¡ç†æ–¹å¼åˆ†ç±» å—æµï¼šä½¿ç”¨ä¸åŒå¤§å°çš„å—ä½œä¸ºæ•°æ®ç®¡ç†çš„åŸºæœ¬å•ä½ å­—èŠ‚æµï¼šä½¿ç”¨å­—èŠ‚ä½œä¸ºDMçš„åŸºæœ¬å•ä½ æŒ‰è®¾å¤‡åˆ†é…è¿›è¡Œåˆ†ç±» ç‹¬å è®¾å¤‡ï¼šä½Žé€ŸI / Oè®¾å¤‡ å…±äº«è®¾å¤‡ï¼šé«˜é€ŸI / Oè®¾å¤‡ è™šæ‹Ÿè®¾å¤‡ï¼šé€šè¿‡è½¯ä»¶æ¨¡æ‹Ÿç¡¬ä»¶ æŒ‰å·¥ä½œæ¨¡å¼åˆ†ç±» é€»è¾‘è®¾å¤‡ï¼šç”±OSç»´æŠ¤çš„æ•°æ®ç»“æž„ ç‰©ç†è®¾å¤‡ï¼šä¸åŒç§ç±»çš„ç¡¬ä»¶ è®¾å¤‡ç®¡ç†è®¨è®º è®¾å¤‡çš„å¤æ‚æ€§ï¼šä¸åŒçš„è®¾å¤‡æœ‰ä¸åŒçš„å·¥ä½œæ¨¡å¼ä¸åŒè®¾å¤‡ä½¿ç”¨ä¸åŒçš„æ•°æ®æ ¼å¼ä¸åŒçš„è®¾å¤‡æ”¯æŒä¸åŒçš„æŽ¥å£ æœ‰å…³è®¾å¤‡çš„é‡è¦é—®é¢˜ï¼šé€Ÿåº¦ï¼šç”µè„‘çš„ç“¶é¢ˆHCIï¼šç”¨æˆ·é€ æˆçš„æ“ä½œé”™è¯¯å…¼å®¹æ€§ï¼šç‹¬ç«‹äºŽè®¾å¤‡ï¼Œç‹¬ç«‹äºŽæ“ä½œç³»ç»Ÿ è®¾å¤‡ç®¡ç†çš„å…³é”®ç­–ç•¥ï¼šé«˜æ•ˆåˆç†ï¼šåè°ƒCPUï¼ŒRAMå’Œè®¾å¤‡ä¹‹é—´çš„é€Ÿåº¦å·®å¼‚ã€‚ ä»¥æ›´é«˜æ•ˆçš„æ–¹å¼æŽ§åˆ¶å’Œç®¡ç†è®¾å¤‡ã€‚æ–¹ä¾¿ï¼šå…¼å®¹ï¼Œå®‰å…¨ï¼Œç¨³å®šæ ‡å‡†åŒ–ï¼šITè¡Œä¸šçš„åŸºç¡€ è®¾å¤‡ç®¡ç†ç›®çš„ ç‹¬ç«‹äºŽè®¾å¤‡çš„ç¼–ç¨‹æŽ¥å£ï¼š éšè—ç¡¬ä»¶ç»„ä»¶ä¹‹é—´çš„å·®å¼‚ ä¸ºç”¨æˆ·æä¾›ç®€å•è€Œé€šç”¨çš„æŽ§åˆ¶æ–¹æ³• ä¿æŒç”¨æˆ·è¿›ç¨‹çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ é«˜æ•ˆçš„ç®¡ç†ç­–ç•¥ åˆ†é…å’Œé‡Šæ”¾ï¼šåƒè¿›ç¨‹è°ƒåº¦ä¸€æ · æ€§èƒ½å¢žå¼ºï¼šæé«˜æ•°æ®ä¼ è¾“é€Ÿåº¦ï¼Œä½¿è®¾å¤‡æ›´é€‚åº”CPUå’ŒRAM ä¿æŠ¤ï¼šå†…éƒ¨å’Œå¤–éƒ¨ä¿æŠ¤ï¼Œæ­»é” è®¾å¤‡ç®¡ç†çš„å›°éš¾ ç«¯å£åœ°å€ç®¡ç† æŽ§åˆ¶æ¨¡å¼è®¾è®¡ æ­»é”ï¼šä¸åˆç†çš„è®¾å¤‡è¯·æ±‚æˆ–åˆ†é… ç¡¬ä»¶ä»‹ç»å»ºæž„ï¼š ç‰©ç†ç»„ä»¶ï¼šç”±æ¨¡æ‹Ÿä¿¡å·é©±åŠ¨çš„è®¾å¤‡ ç”µå­éƒ¨ä»¶ï¼šå¯ä»¥å“åº”å’Œæ‰§è¡Œæ•°å­—æŒ‡ä»¤çš„æŽ§åˆ¶å™¨æˆ–é€‚é…å™¨ æŽ§åˆ¶å™¨/é€‚é…å™¨ ä¸»æ¿æ‰©å±•æ’æ§½ é€‚é…å™¨ä¸­çš„å¯„å­˜å™¨å’Œæ•°æ®ç¼“å†²åŒº é€‚é…å™¨çš„è´£ä»» åœ°å€è½¬æ¢ï¼šå°†é€»è¾‘åœ°å€æ˜ å°„åˆ°è®¾å¤‡ç«¯å£ æ•°æ®ä¼ è¾“ï¼šæŽ¥æ”¶æˆ–å‘é€æ‰€éœ€çš„æ•°æ® å‘½ä»¤æ‰§è¡Œï¼šå°†æ•°å­—æŒ‡ä»¤è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·æ¥é©±åŠ¨ç‰©ç†ç»„ä»¶ æ€§èƒ½å¢žå¼ºï¼šåº”ç”¨ç¼“å­˜å’Œå…¶ä»–æ–¹æ³•æ¥æé«˜è®¾å¤‡çš„æ€§èƒ½ ç”µé˜»å¼è§¦æ‘¸å±å·¥ä½œåŽŸç†ï¼šp7 è®¾å¤‡çš„å·¥ä½œæµç¨‹ç¡¬ä»¶å·¥ä½œå‘¨æœŸçš„æ­¥éª¤ï¼šå¯åŠ¨ï¼Œè‡ªæ£€ï¼Œè¿è¡Œï¼Œç»“æžœæ£€æŸ¥å’Œé”™è¯¯å¤„ç† è®¾å¤‡ç«¯å£ çŠ¶æ€å¯„å­˜å™¨ï¼šå­˜å‚¨è®¾å¤‡çš„å½“å‰çŠ¶æ€ æŒ‡ä»¤å¯„å­˜å™¨ï¼šå­˜å‚¨æ”¶åˆ°çš„æŒ‡ä»¤ æ•°æ®ç¼“å†²åŒºï¼šå­˜å‚¨æ‰€éœ€çš„æ•°æ® CPUå’Œè®¾å¤‡ä¹‹é—´çš„é€šä¿¡æœºåˆ¶ è®¾ç½®çŠ¶æ€å’ŒæŒ‡ä»¤å¯„å­˜å™¨çš„å†…å®¹ è®¾å¤‡æ‰§è¡ŒæŒ‡ä»¤ï¼Œæˆ–å®Œæˆæ•°æ®é€šä¿¡ å·¥ä½œå®ŒæˆåŽï¼Œè®¾å¤‡é€šè¿‡ä¸­æ–­é€šçŸ¥CPU ç¤ºä¾‹ï¼šIBMè½¯ç›˜é©±åŠ¨å™¨ æŒ‡ä»¤é›†ï¼šè¯»å–ï¼Œå†™å…¥ï¼ŒæŸ¥æ‰¾ï¼Œæ ¼å¼åŒ–ç­‰ å‚æ•°ï¼šç”±CPUè®¾ç½®ï¼Œå­˜å‚¨åœ¨è®¾å¤‡å¯„å­˜å™¨ä¸­ ä½æµï¼šCPUé€ä½å‘é€æ•°æ®ï¼Œè½¯é©±å°†æ•°æ®ç¼“å†²åŒºä¸­çš„ä½æŽ’åˆ—æˆå­—èŠ‚ï¼Œå¹¶è¿›è¡Œå¿…è¦çš„æ£€æŸ¥ CPUä¸Žè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ï¼šå‚è§æŽ¥å£ å¦‚ä½•è®¿é—®è®¾å¤‡ï¼Ÿ I / Oç«¯å£ è®¾å¤‡çš„å¯„å­˜å™¨çš„ID è®¡ç®—æœºç»´æŠ¤I / Oé€šä¿¡çš„I / Oç«¯å£åˆ—è¡¨ ç¼ºç‚¹ï¼šåˆ†ç¦»å†…å­˜ç©ºé—´å’Œè®¾å¤‡çš„å¯„å­˜å™¨å…¶å®žè¿˜æœ‰ï¼Œç”¨äºŽç«¯å£çš„æŒ‡ä»¤ä¸å¦‚ç”¨äºŽå†…å­˜è®¿é—®çš„æŒ‡ä»¤å¤š å†…å­˜æ˜ å°„I / O æ‰€æœ‰å™¨ä»¶çš„å¯„å­˜å™¨éƒ½æ˜ å°„åˆ°å†…å­˜ç©ºé—´ æ¯ä¸ªå¯„å­˜å™¨éƒ½åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„å†…å­˜åœ°å€ å†…å­˜IOæ˜ å°„ä¼˜ç‚¹ å°†I / Oåœ°å€è§†ä¸ºå†…å­˜åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œä¼šç”Ÿæˆå…¨å±€åœ°å€ç©ºé—´ I / Oå’Œå†…å­˜çš„åŒºåˆ«æ˜¯éšè—çš„ï¼Œç¨‹åºå‘˜å¯ä»¥è®¾è®¡å¤æ‚çš„I / Oç¨‹åº I / Oåœ°å€å¯ä»¥è¢«æœ‰æ•ˆåœ°ä¿æŠ¤(?)åå¤„ç¡¬ä»¶å¾ˆéš¾åŒºåˆ†å†…å­˜å’ŒI / Oè®¾å¤‡çš„åœ°å€ç®¡ç†æˆæœ¬è¾ƒé«˜ï¼Œåœ¨åŒå…¬äº¤æˆ–å¤šæ¯çº¿æž¶æž„ä¸‹æ›´ä¸ºå¤æ‚ å®žé™…ä¸Šå­˜åœ¨æ··åˆç¼–å€æ–¹æ¡ˆï¼šè®¾å¤‡çš„æ•°æ®ç¼“å­˜è¢«mapåˆ°å†…å­˜ï¼Œå¯„å­˜å™¨ç”±ioç«¯å£æŒ‡å®šã€‚ æ€»çº¿ï¼šä¸Žå‰é¢çš„å¹¶ä¸æ˜¯å¹¶åˆ—å…³ç³» è®¾å¤‡å·¥ä½œæ¨¡å¼å¿™ç­‰å¾… ç‰¹æ®Šå†…æ ¸è¿›ç¨‹å°†æ•°æ®å‘é€åˆ°è®¾å¤‡ç«¯å£;è¿›ç¨‹é‡å¤æ£€æŸ¥ç«¯å£ï¼Œç›´åˆ°ç«¯å£å¯ç”¨å¹¶å‘é€å…¶ä½™æ•°æ®;å†…æ ¸è¿›ç¨‹å®ŒæˆåŽï¼Œç”¨æˆ·è¿›ç¨‹ç»§ç»­è¿è¡Œ;ç¼ºç‚¹ï¼šCPUæµªè´¹å¤ªå¤šâ€”â€”æŽ¥å£ä¸­çš„æŸ¥è¯¢æ–¹å¼ ä¸­æ–­ ç‰¹æ®Šå†…æ ¸è¿›ç¨‹å°†æ•°æ®å‘é€åˆ°è®¾å¤‡ç«¯å£;è¿›ç¨‹è¿›å…¥ä¼‘çœ çŠ¶æ€ï¼ŒCPUå°†è¿è¡Œå…¶ä»–è¿›ç¨‹;æ•°æ®ç¼“å†²åŒºä¸ºç©ºåŽï¼Œè®¾å¤‡å‘CPUå‘é€ä¸­æ–­;å†…æ ¸è¿›ç¨‹è¢«å”¤é†’å¹¶å‘é€å…¶ä½™çš„æ•°æ®ç¼ºç‚¹ï¼šé¢‘ç¹çš„ä¸­æ–­æ˜¯è€—æ—¶çš„â€”â€”æŽ¥å£ä¸­çš„ä¸­æ–­è¾“å‡ºæ–¹å¼ DMA ç”¨æˆ·è¿›ç¨‹å¯¼è‡´CPUé™·é˜±ï¼Œç‰¹æ®Šå†…æ ¸è¿›ç¨‹è®¾ç½®è®¾å¤‡ä¸­çš„å¯„å­˜å™¨å¹¶é€€å‡ºtrap;è®¾å¤‡ç›´æŽ¥ä»Žå†…å­˜ä¸­è¯»å–æ•°æ®;å·¥ä½œå®ŒæˆåŽï¼Œè®¾å¤‡å‘CPUå‘é€ä¸­æ–­;ç”¨æˆ·è¿›ç¨‹è¢«å”¤é†’å¹¶ç»§ç»­è¿è¡Œâ€”â€”åªéœ€ä¸€æ¬¡ä¸­æ–­å°±å¯ä»¥ DMAå®žçŽ°ç»†èŠ‚ï¼šè¯·å‚è€ƒä¹¦ä¸Šp187 DMAçš„å†…éƒ¨ç»“æž„ï¼š å•è·¯å¾„ï¼šåªæœ‰ä¸€å¥—å¯„å­˜å™¨ï¼Œåªèƒ½æŽ§åˆ¶ä¸€ä¸ªI / Oè®¾å¤‡ å¤šè·¯å¾„ï¼šå¤šå¥—å¯„å­˜å™¨ï¼Œå¯åŒæ—¶æŽ§åˆ¶å¤šä¸ªI / Oè®¾å¤‡ DMAè°ƒåº¦ï¼šåœ¨å¤šä¸ªé€šé“ä¹‹é—´åˆ‡æ¢ DMAçš„å·¥ä½œæ¨¡å¼ï¼š 1. æ•°æ®ä¼ è¾“æ¨¡å¼ï¼šä¸€æ¬¡ä¸€ä¸ªå­—VSå—æ¨¡å¼ å‘¨æœŸçªƒå–ï¼šDMAè¯·æ±‚ä¸€ä¸ªå­—çš„æ€»çº¿å¹¶å¾—åˆ°å®ƒ çªå‘æ¨¡å¼ï¼šDMAèŽ·å–æ€»çº¿å¹¶å¯åŠ¨ä¸€ç³»åˆ—çš„æ•°æ®ä¼ è¾“ Fly-byæ¨¡å¼ï¼šDMAå‘Šè¯‰è®¾å¤‡æŽ§åˆ¶å™¨ç›´æŽ¥å°†æ•°æ®å‘é€åˆ°å†…å­˜ è®¾å¤‡åˆ°è®¾å¤‡å’Œå­˜å‚¨å™¨åˆ°å­˜å‚¨å™¨ï¼šDMAä»Žè®¾å¤‡/å­˜å‚¨å™¨èŽ·å–å­—å¹¶å°†å…¶å‘é€åˆ°ç›®æ ‡åœ°å€ DMAä¸­ä½¿ç”¨çš„åœ°å€ï¼š ç‰©ç†åœ°å€ï¼šMMUä½äºŽCPUä¸­ï¼ŒCPUå°†å¯¹åº”å†…å­˜çš„è™šæ‹Ÿåœ°å€è½¬æ¢ä»¥åŽç»™DMAåœ°å€å¯„å­˜å™¨ è™šæ‹Ÿåœ°å€ï¼šMMUä½äºŽå†…å­˜ä¸­ï¼Œè¿™ç§æƒ…å†µå¾ˆå°‘ ç¼“å†²ï¼šæ¶ˆé™¤è®¾å¤‡ä¹‹é—´çš„é€Ÿåº¦å·®å¼‚ ä¸ºäº†é¿å…DMAè¿‡äºŽå¤æ‚ï¼Œç£ç›˜è¯»å…¥æ•°æ®ä¹‹åŽå°†æ•°æ®å­˜åœ¨è‡ªå·±çš„ç¼“å†²åŒºï¼Œä¸€æ˜¯ä¸ºäº†æ£€éªŒæ ¡éªŒå’Œï¼ŒäºŒæ˜¯ä¸ºäº†å‡å°‘æ€»çº¿ä½¿ç”¨å‡å°‘DMAå¤æ‚åº¦ã€‚ DMAè¯·æ±‚CPUå¯¹DMAæŽ§åˆ¶å™¨åˆå§‹åŒ–ï¼Œå¹¶å‘I/OæŽ¥å£å‘å‡ºæ“ä½œå‘½ä»¤ï¼ŒI/OæŽ¥å£æå‡ºDMAè¯·æ±‚ã€‚DMAå“åº”DMAæŽ§åˆ¶å™¨å¯¹DMAè¯·æ±‚åˆ¤åˆ«ä¼˜å…ˆçº§åŠå±è”½ï¼Œå‘æ€»çº¿è£å†³é€»è¾‘æå‡ºæ€»çº¿è¯·æ±‚ã€‚å½“CPUæ‰§è¡Œå®Œå½“å‰æ€»çº¿å‘¨æœŸå³å¯é‡Šæ”¾æ€»çº¿æŽ§åˆ¶æƒã€‚æ­¤æ—¶ï¼Œæ€»çº¿è£å†³é€»è¾‘è¾“å‡ºæ€»çº¿åº”ç­”ï¼Œè¡¨ç¤ºDMAå·²ç»å“åº”ï¼Œé€šè¿‡DMAæŽ§åˆ¶å™¨é€šçŸ¥I/OæŽ¥å£å¼€å§‹DMAä¼ è¾“ã€‚DMAä¼ è¾“DMAæŽ§åˆ¶å™¨èŽ·å¾—æ€»çº¿æŽ§åˆ¶æƒåŽï¼ŒCPUå³åˆ»æŒ‚èµ·æˆ–åªæ‰§è¡Œå†…éƒ¨æ“ä½œï¼Œç”±DMAæŽ§åˆ¶å™¨è¾“å‡ºè¯»å†™å‘½ä»¤ï¼Œç›´æŽ¥æŽ§åˆ¶RAMä¸ŽI/OæŽ¥å£è¿›è¡ŒDMAä¼ è¾“ã€‚åœ¨DMAæŽ§åˆ¶å™¨çš„æŽ§åˆ¶ä¸‹ï¼Œåœ¨å­˜å‚¨å™¨å’Œå¤–éƒ¨è®¾å¤‡ä¹‹é—´ç›´æŽ¥è¿›è¡Œæ•°æ®ä¼ é€ï¼Œåœ¨ä¼ é€è¿‡ç¨‹ä¸­ä¸éœ€è¦ä¸­å¤®å¤„ç†å™¨çš„å‚ä¸Žã€‚å¼€å§‹æ—¶éœ€æä¾›è¦ä¼ é€çš„æ•°æ®çš„èµ·å§‹ä½ç½®å’Œæ•°æ®é•¿åº¦ã€‚DMAç»“æŸå½“å®Œæˆè§„å®šçš„æˆæ‰¹æ•°æ®ä¼ é€åŽï¼ŒDMAæŽ§åˆ¶å™¨å³é‡Šæ”¾æ€»çº¿æŽ§åˆ¶æƒï¼Œå¹¶å‘I/OæŽ¥å£å‘å‡ºç»“æŸä¿¡å·ã€‚å½“I/OæŽ¥å£æ”¶åˆ°ç»“æŸä¿¡å·åŽï¼Œä¸€æ–¹é¢åœ æ­¢I/Oè®¾å¤‡çš„å·¥ä½œï¼Œå¦ä¸€æ–¹é¢å‘CPUæå‡ºä¸­æ–­è¯·æ±‚ï¼Œä½¿CPUä»Žä¸ä»‹å…¥çš„çŠ¶æ€è§£è„±ï¼Œå¹¶æ‰§è¡Œä¸€æ®µæ£€æŸ¥æœ¬æ¬¡DMAä¼ è¾“æ“ä½œæ­£ç¡®æ€§çš„ä»£ç ã€‚æœ€åŽï¼Œå¸¦ç€æœ¬æ¬¡æ“ä½œç»“æžœåŠçŠ¶æ€ç»§ç»­æ‰§è¡ŒåŽŸæ¥çš„ç¨‹åºã€‚ DMAæ˜¯å¿…éœ€çš„å—ï¼Ÿ IOé€šé“DMAçš„ç¼ºç‚¹ ç¼“æ…¢è€Œç®€å•ï¼Œä¸èƒ½æ”¯æŒå¤æ‚çš„I / Oç¼–ç¨‹I / Oé€šé“ç®€ä»‹ ç‰¹æ®ŠèŠ¯ç‰‡ï¼ˆPUï¼‰ç”¨äºŽç®¡ç†I / Oè®¾å¤‡ å­—ç¬¦å¤ç”¨ä¿¡é“ï¼Œé€‰æ‹©å¤ç”¨ä¿¡é“ï¼Œç»„å¤ç”¨ä¿¡é“ I / Oé€šé“ä¸ŽCPUå…±äº«å†…å­˜ï¼Œå¹¶ä¸ŽCPUåˆ†åˆ«å·¥ä½œI / Oé€šé“çš„ç»“æž„ CAWï¼šåœ°å€å¯„å­˜å™¨ï¼Œå°†I / Oé€šé“ç¨‹åºçš„åœ°å€å­˜å‚¨åœ¨å†…å­˜ä¸­ CCWï¼šå‘½ä»¤å¯„å­˜å™¨ï¼Œå­˜å‚¨å½“å‰çš„I / Oå‘½ä»¤ CSWï¼šçŠ¶æ€å¯„å­˜å™¨ï¼Œç”¨äºŽå­˜å‚¨I / Oæ“ä½œç»“æžœçš„çŠ¶æ€ CDWï¼šæ•°æ®å¯„å­˜å™¨ï¼Œæ•°æ®ç¼“å†²åŒº ![](http://oysmkdi7t.bkt.clouddn.com/18-1-17/67957883.jpg) IOè½¯ä»¶åŒæ­¥é˜»å¡žVSå¼‚æ­¥ä¼ è¾“ é˜»å¡žï¼šç”¨æˆ·ç¨‹åºå°†æš‚åœï¼ˆæŒ‚èµ·ï¼‰ï¼Œç›´åˆ°I / Oæ“ä½œå®Œæˆ æ•°æ®ä¼ è¾“ï¼šä¸­æ–­åˆ°æ¥ä¹‹å‰ï¼ŒCPUæ­£åœ¨å¼‚æ­¥å·¥ä½œï¼ˆå¯¹ç¨‹åºæ¥è¯´æ˜¯é˜»å¡žï¼‰é”™è¯¯å¤„ç† ç¡¬ä»¶çº§é”™è¯¯å¤„ç†ï¼šç”±è®¾å¤‡æ‰§è¡Œï¼ˆå°½é‡åœ¨åº•å±‚æ‰§è¡Œï¼‰ é«˜çº§é”™è¯¯å¤„ç†ï¼šå°†çŠ¶æ€è¿”å›žåˆ°æ›´é«˜çº§åˆ«å¹¶ç”±å†…æ ¸/ç”¨æˆ·ç¨‹åºå¤„ç†ç»Ÿä¸€å‘½åï¼šä¸€ä¸ªæ–‡ä»¶æˆ–ä¸€ä¸ªè®¾å¤‡çš„åå­—åº”è¯¥æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²æˆ–æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œä¸åº”ä¾èµ–äºŽè®¾å¤‡ï¼š è®¾å¤‡ç‹¬ç«‹çš„æ¦‚å¿µï¼šè®¿é—®ä»»æ„IOè®¾å¤‡è€Œæ— é¡»äº‹å…ˆåˆ¶å®šè®¾å¤‡ ä½¿ç”¨I / Oè®¾å¤‡åœ°å€æ˜ å°„åç§°ç¼“å†² å¦‚ä½•æ ¹æ®ç¼“å†²åŒºç»´æŠ¤æ•°æ®ç¼“å†²åŒºå’ŒæŽ§åˆ¶æ•°æ®ä¼ è¾“ï¼šæ•°æ®ç¦»å¼€è®¾å¤‡é€šå¸¸ä¸ä¼šç›´æŽ¥åˆ°è¾¾ç›®çš„åœ°ã€‚ï¼ˆå®žæ—¶çº¦æŸï¼‰è®¾å¤‡çš„åˆ†é…å’Œé‡Šæ”¾ å¦‚ä½•å®žçŽ°I / Oè®¾å¤‡å…±äº«ï¼Ÿ å¦‚ä½•é¿å…æ­»é”ï¼Ÿ IOè½¯ä»¶å±‚æ¬¡ ä¸­æ–­å¦‚ä½•ç”±ç”¨æˆ·æŽ§åˆ¶I / Oè®¾å¤‡ï¼Ÿ ç”¨æˆ·è¿›ç¨‹è¯·æ±‚I / Oå¹¶è¢«é˜»æ­¢ è®¾å¤‡é©±åŠ¨ç¨‹åºå¯åŠ¨I / Oæ“ä½œå¹¶è¢«é˜»æ­¢ I / Oè®¾å¤‡å®Œæˆæ“ä½œå¹¶å‘é€ä¸­æ–­ è®¾å¤‡é©±åŠ¨ç¨‹åºå®Œæˆå¹¶ä¸”ç”¨æˆ·è¿›ç¨‹è¢«å”¤é†’ä¸­æ–­çš„å·¥ä½œæµç¨‹ ç¡¬ä»¶çº§é”™è¯¯å¤„ç†ï¼šç”±è®¾å¤‡æ‰§è¡Œ é«˜çº§é”™è¯¯å¤„ç†ï¼šå°†çŠ¶æ€è¿”å›žåˆ°æ›´é«˜çº§åˆ«å¹¶ç”±å†…æ ¸/ç”¨æˆ·ç¨‹åºå¤„ç† åœ¨ç»ˆç«¯å½¢æˆä¹‹åŽï¼Œåœ¨è½¯ä¸­æ–­ä¸­ï¼šä¿å­˜æ²¡è¢«ç¡¬ä»¶ä¿å­˜çš„æ‰€æœ‰å¯„å­˜å™¨ä¸ºä¸­æ–­æœåŠ¡ç¨‹åºè®¾ç½®ä¸Šä¸‹æ–‡ï¼ˆè¿è¡ŒçŽ¯å¢ƒï¼‰ä¸ºä¸­æ–­æœåŠ¡ç¨‹åºè®¾ç½®æ ˆåº”ç­”ä¸­æ–­æŽ§åˆ¶å™¨, å†æ¬¡å¼€æ”¾ä¸­æ–­å¯„å­˜å™¨ä»Žè¢«ä¿å­˜çš„åœ°æ–¹å¤åˆ¶åˆ°è¿›ç¨‹è¡¨ä¸­è¿è¡Œä¸­æ–­æœåŠ¡ç¨‹åºä¸ºä¸‹æ¬¡è¦è¿è¡Œè¿›ç¨‹è®¾ç½®ï¼­ï¼­ï¼µä¸Šä¸‹æ–‡è£…è½½æ–°çš„è¿›ç¨‹å¯„å­˜å™¨å¼€å§‹è¿è¡Œæ–°è¿›ç¨‹ è®¾å¤‡é©±åŠ¨ç¨‹åº å¯¹è®¾å¤‡æ‰§è¡Œæ“ä½œè¿›è¡ŒæŽ§åˆ¶çš„ä»£ç æ˜¯è®¾å¤‡é©±åŠ¨ç¨‹åº è®¾å¤‡é©±åŠ¨ç¨‹åºçš„é€»è¾‘ä½ç½®è¢«æŒ‡æ˜Žé©±åŠ¨ç¨‹åºä¸Žè®¾å¤‡æŽ§åˆ¶å™¨ä¹‹é—´é€šè¿‡æ€»çº¿å®Œæˆé€šä¿¡ è®¾å¤‡é©±åŠ¨ç¨‹åºä»‹ç» æŽ§åˆ¶è®¾å¤‡æŽ§åˆ¶å™¨çš„è¯´æ˜Žï¼šæ›´ä¸Šå±‚ï¼Œå¿½è§†äº†è®¾å¤‡ä¹‹é—´çš„åŒºåˆ« è®¾å¤‡é©±åŠ¨ç¨‹åºå§‹ç»ˆè§†ä¸ºå†…æ ¸è¿›ç¨‹ï¼šè¿™æ ·æ‰èƒ½è®¿é—®è®¾å¤‡æŽ§åˆ¶çš„å¯„å­˜å™¨ï¼ˆå¯ä»¥ä½œä¸ºç”¨æˆ·è¿›ç¨‹ï¼Œéœ€è¦ç³»ç»Ÿè°ƒç”¨ï¼Œæ¶ˆé™¤ç³»ç»Ÿå´©æºƒçš„ä¸€ä¸ªæºå¤´ï¼‰ OSä¸ºæŠ½è±¡é©±åŠ¨ç¨‹åºæä¾›ç»Ÿä¸€çš„æŽ¥å£ï¼šå¦‚ä¸Šå›¾ è®¾å¤‡é©±åŠ¨ç¨‹åºï¼šé™æ€åº“æˆ–åŠ¨æ€åº“ï¼ˆç›®å‰ä¸»æµæ˜¯åŠ¨æ€ï¼‰è®¾å¤‡é©±åŠ¨ç¨‹åºçš„å·¥ä½œæµç¨‹ æŽ¥æ”¶å¹¶æ£€æŸ¥é«˜çº§è¿›ç¨‹å‘é€çš„å‚æ•° æ£€æŸ¥è®¾å¤‡å¹¶å¯åŠ¨è®¾å¤‡ï¼ˆå½“å‰æ˜¯ä¸æ˜¯åœ¨ä½¿ç”¨ï¼Ÿåˆå§‹åŒ–è®¾å¤‡ï¼Œç”µæºéœ€æ±‚ï¼Œæ—¥å¿—ç­‰ï¼‰ é…ç½®è®¾å¤‡çš„å¯„å­˜å™¨ï¼ˆå°†å‘è®¾å¤‡å‘é€çš„æŒ‡ä»¤å­˜è¿›è®¾å¤‡æŽ§åˆ¶å™¨çš„æŽ§åˆ¶å¯„å­˜å™¨ï¼Œæ£€æŸ¥æŽ§åˆ¶å™¨æ˜¯ä¸æ˜¯å·²ç»æŽ¥æ”¶å‘½ä»¤å¹¶å‡†å¤‡æŽ¥å—ä¸‹ä¸€ä¸ªå‘½ä»¤ï¼Œç›´åˆ°æ‰€æœ‰å‘½ä»¤éƒ½é€å‡ºï¼‰ æŽ¥æ”¶I / Oæ“ä½œçš„çŠ¶æ€è®¾å¤‡é©±åŠ¨ç¨‹åºçš„é‡è¦é—®é¢˜ åŒæ­¥é˜»å¡žVSæ— å»¶è¿Ÿè¿è¡Œï¼ˆéœ€è¦é•¿æ—¶é—´å¤„ç†ï¼Œè®¾å¤‡é©±åŠ¨ç¨‹åºè¿›ç¨‹é˜»å¡žè‡ªå·±ï¼Œç›´åˆ°ä¸­æ–­åˆ°æ¥å”¤é†’ï¼›ä¸éœ€è¦é•¿æ—¶é—´ï¼Œå®ŒæˆåŽåº”æ£€æŸ¥é”™è¯¯ã€‚éšåŽå¯èƒ½ä¼šå°†æ•°æ®å‘ç»™æŸä¸ªè®¾å¤‡æ— å…³è½¯ä»¶ï¼Œè¿”å›žä¸€ä¸ªä¿¡æ¯ã€‚å¦‚æžœè¿˜æœ‰å‘½ä»¤å°±æ‰§è¡Œï¼Œæ²¡æœ‰çš„è¯å°±é˜»å¡žè‡ªå·±ï¼‰ å¯é‡å…¥ï¼šé©±åŠ¨ç¨‹åºçš„å¤æ‚æ€§ï¼ˆç¬¬ä¸€æ¬¡è°ƒç”¨å®Œæˆä¹‹å‰ç¬¬äºŒæ¬¡åˆ°æ¥ å¯çƒ­æ’æ‹”çš„ç³»ç»Ÿå’Œå†…å­˜è¯·æ±‚ï¼šä¼ é€å¿…é¡»è¢«ç»ˆæ­¢ï¼Œè¯·æ±‚åº”è¯¥è¢«æŠ¹åŽ»ã€‚æœ‰æ—¶å€™æ–°è®¾å¤‡çš„åˆ°æ¥å¯èƒ½å¤ºèµ°æ—§è®¾å¤‡çš„èµ„æº è®¾å¤‡é©±åŠ¨ç¨‹åºä»¥é˜¿å¸ƒå¹´ä¸å…è®¸ç³»ç»Ÿè°ƒç”¨ï¼Œä½†æ˜¯å¯ä»¥è°ƒç”¨å†…æ ¸çš„æŸäº›è¿‡ç¨‹ã€‚æ¯”å¦‚DMAã€å®šæ—¶å™¨ã€åˆ†é…é‡Šæ”¾ç¡¬æŽ¥çº¿çš„å†…å­˜é¡µé¢ç­‰ã€‚ ä¸Žè®¾å¤‡æ— å…³çš„ioè½¯ä»¶ è®¾å¤‡é©±åŠ¨ç¨‹åºçš„ç»Ÿä¸€æŽ¥å£ å¼•å…¥ç¼“å†²çš„æ–¹å¼ (a) æ— ç¼“å†²è¾“å…¥(b) ç¼“å†²åŒºæ”¾åœ¨ç”¨æˆ·ç©ºé—´(c) ç¼“å†²åŒºåœ¨æ ¸å¿ƒç©ºé—´ï¼Œç„¶åŽè¢«å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´(d) åœ¨å†…æ ¸ç©ºé—´æœ‰åŒç¼“å†²åŒº é€‚å½“çš„ä½¿ç”¨ç¼“å†² ç¼“å†²æŠ€æœ¯åœ¨ioä¸­å¾ˆæ™®éï¼Œä½†æ˜¯æ•°æ®ä¼ é€’ä¸­å¤ªå¤šçš„ç¼“å†²ä¼šå½±å“ç³»ç»Ÿæ€§èƒ½ IOä¸­é”™è¯¯æŠ¥å‘Šï¼š å»ºç«‹ioçš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå°½é‡åœ¨åº•å±‚å¤„ç†é”™è¯¯ åˆ†åˆ«å¤„ç†ä¸åŒé”™è¯¯ï¼šå¦‚ç¼–ç¨‹/io åˆ†é…ä¸Žé‡Šæ”¾ä¸“ç”¨è®¾å¤‡ æ ¹æ®è®¾å¤‡ä½¿ç”¨ç‰¹æ€§å»ºç«‹åˆ†é…ä¸Žé‡Šæ”¾åŽŸåˆ™ï¼ˆç‹¬äº«è®¾å¤‡ï¼å…±äº«è®¾å¤‡ï¼‰ï¼Œç›´æŽ¥é‡Šæ”¾æˆ–é˜Ÿåˆ—ç®¡ç†ï¼Ž å»ºç«‹ä¸Žè®¾å¤‡æ— å…³çš„æ•°æ®ä¼ é€’æ ¼å¼ ä¸åŒè®¾å¤‡æ•°æ®ä¼ é€’æ ¼å¼ä¸åŒï¼Œä½†é¡»ç”¨è½¯ä»¶éš”ç¦»æ­¤ç‰¹æ€§ï¼Œä½¿ä¸Šå±‚è½¯ä»¶ä¸å¿…è€ƒè™‘è®¾å¤‡è®¿é—®ä¸­çš„è¿™ä¸€ç‰¹æ€§ï¼Œå¦‚è®¿é—®å—å¤§å°çš„è½¬æ¢ã€‚ ç”¨æˆ·ç©ºé—´çš„IO SDK / DDKæˆ–ç¼–ç¨‹åº“ éšè—è®¾å¤‡é©±åŠ¨ç¨‹åºçš„ç»†èŠ‚ï¼Œä½¿ç”¨æˆ·è®¿é—®I / Oè®¾å¤‡å˜å¾—ç®€å• å¦‚â€œcoutâ€ï¼Œâ€œprintâ€â€¦â€¦åŽå°ç¨‹åºå’Œå®ˆæŠ¤è¿›ç¨‹ ç”¨æˆ·çš„è™šæ‹Ÿè®¾å¤‡ è®¾å¤‡å…±äº«çš„ç¼“å†²å’Œè°ƒåº¦ spooling é¢„è¾“å…¥æ¨¡å—ï¼šå°†ä½œä¸šè¾“å…¥åˆ°è¾“å…¥äº•ä¸­ï¼›ç¼“è¾“å‡ºæ¨¡å—ï¼šå°†ä½œä¸šç»“æžœç¼“å†²å¼è¾“å‡ºåˆ°ç‹¬äº«è®¾å¤‡ä¸Šï¼›ä½œä¸šè°ƒåº¦æ¨¡å—ï¼šæŽ§åˆ¶ä½œä¸šä»Žè¾“å…¥äº•ä¸­å–æ•°ï¼Œå‘è¾“å‡ºäº•ä¸­é€æ•°ï¼›è¾“å…¥ã€è¾“å‡ºäº•ï¼šåœ¨ç£ç›˜ä¸Šå¼€è¾Ÿçš„ä¸¤ä¸ª â€œäº•â€åŒºåŸŸã€‚ ç£ç›˜ç®¡ç†ç£ç›˜æ˜¯ä¸€ç§å¤–è®¾ï¼ŒCPUå’Œå†…å­˜è®¿é—®é€Ÿåº¦æ¯”ç£ç›˜å¿«è‹¥å¹²ä¸ªæ•°é‡çº§ï¼Œç£ç›˜ç³»ç»Ÿçš„æ€§èƒ½å¯¹æ•´ä¸ªç³»ç»Ÿæ€§èƒ½æœ‰é‡è¦å½±å“ï¼Œç£ç›˜è®¾å¤‡ç®¡ç†çš„ç›®æ ‡å°±æ˜¯æé«˜ç£ç›˜çš„è®¿é—®é€Ÿåº¦å’Œå®‰å…¨æ€§ã€‚ä»Žä»¥ä¸‹å‡ æ–¹é¢è®²ï¼š 1. ç£ç›˜ç¡¬ä»¶åŠè®¿é—®æ€§èƒ½ 2.RAID 3.CD-ROM 4.å¯åˆ»å½•ï¼å¯é‡å†™ï¼£ï¼¤ 5.ï¼¤ï¼¶ï¼¤ 6. ç£ç›˜æ ¼å¼åŒ–é—®é¢˜ 7.ç£ç›˜è®¿é—®è°ƒåº¦ç­–ç•¥ æŸ±é¢å®šä½æ—¶é—´ï¼šç£å¤´ç§»åŠ¨åˆ°æŒ‡å®šæŸ±é¢çš„æœºæ¢°è¿åŠ¨æ—¶é—´ï¼›æ—‹è½¬å»¶è¿Ÿæ—¶é—´ï¼šç£ç›˜æ—‹è½¬åˆ°æŒ‡å®šæ‰‡åŒºçš„æœºæ¢°è¿åŠ¨æ—¶é—´ï¼›å®ƒä¸Žç£ç›˜è½¬é€Ÿç›¸å…³ï¼Œå¦‚ï¼šè½¯ç›˜è½¬é€Ÿå¯ä¸º600r/m(æ¯åˆ†é’Ÿè½¬é€Ÿ)ï¼Œç¡¬ç›˜å¯ä¸º10000r/mã€‚æ•°æ®ä¼ é€æ—¶é—´ï¼šä»ŽæŒ‡å®šæ‰‡åŒºè¯»å†™æ•°æ®çš„æ—¶é—´ã€‚ æŸ±é¢å®šä½ï¼ˆå¯»é“ï¼‰æ—¶é—´åœ¨è®¿é—®æ—¶é—´ä¸­æ˜¯ä¸»é¡¹ï¼Œåˆç†ç»„ç»‡ç£ç›˜æ•°æ®çš„å­˜å‚¨ä½ç½®å¯æé«˜ç£ç›˜I/Oæ€§èƒ½ã€‚ ä¾‹ï¼šè¯»ä¸€ä¸ª128KBå¤§å°çš„æ–‡ä»¶ï¼š(1)æ–‡ä»¶è‹¥ç”±8ä¸ªè¿žç»­ç£é“(æ¯ç£é“32ä¸ªæ‰‡åŒº)ä¸Šçš„256ä¸ªæ‰‡åŒºæž„æˆï¼š 20ms+(8.3ms+16.7ms)8=220ms;å…¶ä¸­ï¼ŒæŸ±é¢å®šä½æ—¶é—´ä¸º20msï¼Œæ—‹è½¬å»¶è¿Ÿæ—¶é—´ä¸º8.3msï¼Œ32æ‰‡åŒºæ•°æ®ä¼ é€æ—¶é—´ä¸º16.7msï¼›(2)æ–‡ä»¶è‹¥ç”±256ä¸ªéšæœºåˆ†å¸ƒçš„æ‰‡åŒºæž„æˆï¼š (20ms+8.3ms+0.5ms)256=7373ms;å…¶ä¸­ï¼Œ1æ‰‡åŒºæ•°æ®ä¼ é€æ—¶é—´ä¸º0.5msï¼›éšæœºåˆ†å¸ƒæ—¶çš„è®¿é—®æ—¶é—´ä¸ºè¿žç»­åˆ†å¸ƒæ—¶çš„33.5å€ã€‚ ç®—æ³•çŸ­æŸ¥æ‰¾æ—¶é—´ä¼˜å…ˆç®—æ³•ï¼ˆSSTFï¼‰ï¼šæŒ‰ç£å¤´è‡‚ç§»åŠ¨æœ€å°è·ç¦»ä¼˜å…ˆåˆ†é…ç£ç›˜ã€‚ç£ç›˜ä½¿ç”¨çŽ‡é«˜ï¼Œåˆ†é…å¿«ã€‚ æ‰«æ(SCAN)ç®—æ³•ï¼šç£å¤´æ²¿ä¸€ä¸ªæ–¹å‘ç§»åŠ¨ï¼Œå¹¶ä¸ºè¯·æ±‚è¿›ç¨‹åˆ†é…ç£ç›˜ï¼Œç„¶åŽåæ–¹å‘ç§»åŠ¨å†è¿›è¡Œåˆ†é…ã€‚ä¿è¯é˜Ÿåˆ—ä¸­ä¸å‡ºçŽ°é¥¿æ­»æƒ…å†µã€‚ï¼ˆæˆ–ç§°ç”µæ¢¯æ³•ï¼‰ å¾ªçŽ¯æ‰«æ(C-SCAN)ç®—æ³•ï¼šç£å¤´æ²¿ä¸€ä¸ªæ–¹å‘ç§»åŠ¨ï¼Œå¹¶ä¸ºè¯·æ±‚è¿›ç¨‹åˆ†é…ç£ç›˜ï¼Œåˆ°å¤´åŽè¿”å›žé‡æ–°ç§»åŠ¨ã€‚å¯å‡å°‘ç­‰å¾…æ—¶é—´ã€‚ Næ­¥æ‰«æ(N-step-SCAN)ç®—æ³•ï¼šæŠŠç£ç›˜I/Oè¯·æ±‚é˜Ÿåˆ—åˆ†æˆé•¿åº¦ä¸ºNçš„æ®µï¼Œæ¯æ¬¡ä½¿ç”¨æ‰«æç®—æ³•å¤„ç†è¿™Nä¸ªè¯·æ±‚ã€‚å½“N=1æ—¶ï¼Œè¯¥ç®—æ³•é€€åŒ–ä¸ºFIFOç®—æ³•ã€‚ åŒé˜Ÿåˆ—æ‰«æ(FSCAN)ç®—æ³•ï¼šè¯·æ±‚é˜Ÿåˆ—åˆ†æˆä¸¤ä¸ªï¼Œä¸€ä¸ªç”¨åšå¤„ç†ï¼Œä¸€ä¸ªç”¨åšå­˜æ”¾æ–°åˆ°è¯·æ±‚ã€‚]]></content>
      <categories>
        <category>OS</category>
        <category>è¯¾</category>
      </categories>
      <tags>
        <tag>OS</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[chap6-æ­»é”]]></title>
    <url>%2F2018%2F01%2F16%2FOS%2Fchap6-%E6%AD%BB%E9%94%81%2F</url>
    <content type="text"><![CDATA[æ­»é”æ¦‚å¿µæ­»é”ï¼šå¦‚æžœä¸€ä¸ªè¿›ç¨‹é›†åˆä¸­çš„æ¯ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…åªèƒ½ç”±è¯¥è¿›ç¨‹é›†åˆä¸­çš„å…¶ä»–è¿›ç¨‹æ‰èƒ½å¼•å‘çš„äº‹ä»¶ï¼Œè¯¥è¿›ç¨‹é›†åˆæ˜¯æ­»é”çš„ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯åœ¨ç­‰å¦å¤–çš„è¿›ç¨‹æ”¾å¼ƒæ‰€å çš„èµ„æºï¼Œä½†æ˜¯ç”±äºŽæ‰€æœ‰çš„è¿›ç¨‹éƒ½ä¸èƒ½è¿è¡Œï¼Œä»–ä»¬æ°¸è¿œä¹Ÿç­‰ä¸åˆ°è‡ªå·±éœ€è¦çš„èµ„æº æ­»é”äº§ç”Ÿæ¡ä»¶ï¼š äº’æ–¥æ¡ä»¶ï¼šæ¯ä¸ªèµ„æºè¦ä¹ˆå·²ç»åˆ†é…äº†ä¸€ä¸ªè¿›ç¨‹ï¼Œè¦ä¹ˆå°±æ˜¯å¯ç”¨çš„ å æœ‰å’Œç­‰å¾…æ¡ä»¶ï¼šå·²ç»å¾—åˆ°äº†æŸä¸ªèµ„æºçš„è¿›ç¨‹å¯ä»¥è¯·æ±‚æ–°çš„èµ„æº ä¸å¯æŠ¢å æ¡ä»¶ï¼šå·²ç»åˆ†é…ç»™ä¸€ä¸ªè¿›ç¨‹çš„èµ„æºä¸èƒ½å¼ºåˆ¶æ€§è¢«æŠ¢å ï¼Œåªèƒ½è¢«å æœ‰å®ƒçš„è¿›ç¨‹æ˜¾å¼é‡Šæ”¾ çŽ¯è·¯ç­‰å¾…æ¡ä»¶ï¼šæ­»é”å‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿä¸­ä¸€å®šæœ‰ä¸¤ä¸ªæˆ–è€…ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹ç»„æˆçš„ä¸€æ¡çŽ¯è·¯ï¼Œè¯¥æ¢è·¯ä¸­çš„æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åœ¨ç­‰å¾…ä¸‹ä¸€ä¸ªè¿›ç¨‹å æœ‰çš„èµ„æºã€‚ æ­»é”çš„å±å®³ï¼šæ­»é”è¿›ç¨‹æ°¸è¿œä¸èƒ½æ´»åŠ¨ï¼Œè¢«æŒæœ‰çš„èµ„æºæ°¸è¿œä¸å¯ä»¥è®¿é—®-&gt;ä¸åˆç†çš„èµ„æºèŽ·å–å¯èƒ½ä¼šäº§ç”Ÿæ­»é”ï¼ˆé—­çŽ¯ï¼Œåƒæ•°æ®åº“ä¸€æ ·ï¼‰ è§£å†³ ç ´å4ä¸ªæ¡ä»¶ï¼Œé˜»ç¢æ­»é”å‘ç”Ÿ é¿å…æ­»é”å‘ç”Ÿ æ­»é”æ£€æµ‹ä¸Žæ¢å¤ é¸µé¸Ÿ preventionç ´åå››ä¸ªæ¡ä»¶ äº’æ–¥æ¡ä»¶ï¼šè™šæ‹Ÿå…±äº«èµ„æº é¿å…åˆ†é…é‚£äº›ä¸æ˜¯ç»å¯¹å¿…é¡»çš„èµ„æºï¼Œå°½é‡åšåˆ°å°½å¯èƒ½å°‘çš„è¿›ç¨‹å¯ä»¥çœŸæ­£è¯·æ±‚èµ„æº egï¼šä½¿ç”¨æ‰“å°æœºå®ˆæŠ¤è¿›ç¨‹ä»¥åŠå‡è„±æ‰“å°æœºæŠ€æœ¯ å æœ‰å’Œç­‰å¾…æ¡ä»¶ï¼šç¦æ­¢å·²æŒæœ‰èµ„æºçš„è¿›ç¨‹ç­‰å¾…å…¶ä»–èµ„æº åœ¨ä¸€æ¬¡åˆ†é…ä¸­æ»¡è¶³ä¸€ä¸ªè¿›ç¨‹çš„æ‰€æœ‰èµ„æºéœ€æ±‚ï¼Œå¦åˆ™è¿›ç¨‹å°†è¢«é˜»å¡žï¼Œç›´åˆ°æ‰€æœ‰éœ€è¦çš„èµ„æºéƒ½å¯ç”¨ ä¸å¯æŠ¢å æ¡ä»¶ï¼šå¤ºå–æ­»é”è¿›ç¨‹çš„èµ„æºå¹¶ç»™å…¶ä»–è¿›ç¨‹ é¿å…å¼•å‘æ··ä¹±ï¼Œä½¿ç”¨è™šæ‹ŸåŒ–æŠ€æœ¯ çŽ¯è·¯ç­‰å¾…æ¡ä»¶ï¼šä¸ºæ¯ç§èµ„æºåˆ†é…ç±»åž‹æ ‡è¯†ï¼Œè¿›ç¨‹å¿…é¡»æŒ‰ç…§å‡åº/é™åºæ¥è¯·æ±‚èµ„æºã€‚ ä¸€ç§å˜ä½“æ˜¯ä¸éœ€è¦ä¸€å®šå‡åºï¼Œä½†æ˜¯éœ€è¦ä¸å…è®¸è¿›ç¨‹è¯·æ±‚æ¯”å½“å‰æ‰€å æœ‰èµ„æºç¼–å·ä½Žçš„èµ„æºã€‚ æ­»é”é¿å…preventationä¸åˆç†ã€‚ ç³»ç»Ÿå¿…é¡»åˆ¤æ–­è¿™æ¬¡è¯·æ±‚èµ„æºæ˜¯ä¸æ˜¯å®‰å…¨çš„ï¼Œå¹¶ä¸”åªèƒ½åœ¨å®‰å…¨çš„æƒ…å†µä¸‹å¾—åˆ°èµ„æºã€‚ å®‰å…¨çŠ¶æ€ï¼šå­˜åœ¨ä¸€ä¸ªåˆç†çš„èµ„æºåˆ†é…åºåˆ—ä¸å®‰å…¨çŠ¶æ€ï¼šä¸å­˜åœ¨å¯ä»¥é¿å…æ­»é”çš„èµ„æºåˆ†é…åºåˆ— é¿å…æ­»é”çš„æœºåˆ¶ï¼šosåªåœ¨å®‰å…¨çš„æƒ…å†µä¸‹åˆ†é…èµ„æºã€‚ é˜´å½±éƒ¨åˆ†ä¸èƒ½è¿›ã€‚ é“¶è¡Œå®¶ç®—æ³•å•èµ„æº æŸ¥çœ‹æ˜¯å¦æœ‰è¿›ç¨‹è¿˜éœ€è¦çš„èµ„æºæ•°å°äºŽç³»ç»Ÿå‰©ä½™çš„èµ„æºæ•°ï¼Œå¦‚æžœæœ‰ï¼Œå°±åˆ†ç»™ä»–ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œä¼šäº§ç”Ÿæ­»é”ã€‚ ä¹Ÿå¯ä»¥è¿™æ ·è¯´ï¼šå¦‚æžœä¸€ä¸ªè¿›ç¨‹è¯·æ±‚èµ„æºï¼Œæ£€æŸ¥æ˜¯ä¸æ˜¯å¯ä»¥ç»™ä»–ã€‚ å¤šèµ„æºä¸Žå•èµ„æºå·®ä¸å¤šï¼Œä½†æ˜¯éœ€è¦æ¯ä¸€ä¸ªè¿˜éœ€è¦çš„èµ„æºæ•°éƒ½æ˜¯å°äºŽå‰©ä½™çš„èµ„æºæ•°ï¼Œå¦‚æžœå­˜åœ¨ï¼Œå°±ç»™ï¼Œç„¶åŽæ”¶å›žè¿™ä¸ªå·²ç»å®Œæˆçš„èµ„æºï¼Œå¦‚æžœæ²¡æœ‰ï¼Œå°±ä¸å¯èƒ½æˆåŠŸäº†ã€‚ å®‰å…¨çŠ¶æ€ä¸Žæ­»é”ç³»ç»Ÿå®‰å…¨-&gt;æ²¡æœ‰æ­»é”æ²¡æœ‰æ­»é”ä¸ä¸€å®šæ˜¯ç³»ç»Ÿå®‰å…¨ã€‚ä½†æ˜¯åªè¦ç¡®ä¿ç³»ç»Ÿæ˜¯å®‰å…¨çš„ï¼Œå°±ä¸€å®šä¸ä¼šæ­»é”ã€‚ æ­»é”æ£€æµ‹ä¸Žæ¢å¤å®ˆæŠ¤è¿›ç¨‹åˆ¤æ–­è¿è¡ŒçŠ¶æ€ï¼Œé•¿æ—¶é—´ä¸è¿è¡Œåˆ™è®¤ä¸ºè¿›å…¥æ€ç´¢ã€‚ å¯ä»¥ä½¿ç”¨å›¾ã€é›†åˆã€å‘é‡ã€çŸ©é˜µç­‰è®°å½•èµ„æºåˆ†é…çŠ¶æ€ï¼Œè¯•å›¾æ‰¾åˆ°çŽ¯è·¯ã€‚ è¯·æ±‚çŸ©é˜µä¸­çš„å‘é‡å®šä¹‰æˆqijï¼Œè¡¨ç¤ºè¿›ç¨‹iè¯·æ±‚ç±»åž‹jçš„èµ„æºé‡ï¼Œä»£è¡¨å½“å‰è¿›ç¨‹äº§ç”Ÿçš„èµ„æºè¯·æ±‚åˆå§‹æ€æ‰€æœ‰è¿›ç¨‹æ— æ ‡è®°ï¼Œé€šè¿‡ç®—æ³•æ ‡è®°è¿›ç¨‹æœ€åŽæŸ¥çœ‹ï¼šè‹¥æœ‰æ— æ ‡è®°çš„è¿›ç¨‹ï¼Œåˆ™è¯´æ˜Žæœ‰æ­»é”çŽ° è±¡å­˜åœ¨ ç®—æ³•ï¼š1ï¼‰åœ¨åˆ†é…çŸ©é˜µä¸­æ ‡è®°ä¸€è¡Œå…¨ä¸º0çš„è¿›ç¨‹2ï¼‰å‘é‡Wåˆå§‹åŒ–æˆå¯ç”¨å‘é‡Available3ï¼‰æŒ‰ä¸‹æ ‡iæŸ¥æ‰¾ï¼Œè¿›ç¨‹iæœªæ ‡è®°å¹¶ä¸”è¯¥è¿›ç¨‹çš„è¯·æ±‚å‘é‡å°äºŽç­‰äºŽWï¼Œå°±è¿›è¡Œæ ‡è®°ï¼›è‹¥æ‰¾ä¸åˆ°è¿™æ ·çš„è¡Œï¼Œç®—æ³•ç»ˆæ­¢ã€‚4ï¼‰è‹¥æ‰¾åˆ°è¿™æ ·çš„è¡Œï¼Œæ ‡è®°è¿›ç¨‹iåŽï¼Œå†æŠŠåˆ†é…çŸ©é˜µä¸­çš„ç›¸åº”è¡ŒåŠ åˆ°Wä¸­ï¼Œè¿”å›žæ­¥éª¤3ã€‚ å…¶å®žå°±æ˜¯é“¶è¡Œå®¶ç®—æ³• æ¢å¤ï¼š æŠ¢å  Backdatingï¼šè®¾ç½®æ£€æŸ¥ç‚¹åœ¨è¿›ç¨‹ä¸­ï¼Œå½“æ£€æµ‹åˆ°æ­»é”æ—¶ï¼Œè¿›ç¨‹å°†è¿”å›žåˆ°æ£€æŸ¥ç‚¹ã€‚ è¿›ç¨‹æŸ¥æ€ï¼šç›´æŽ¥æ€æ­»è¿›ç¨‹ã€‚ éžèµ„æºæ­»é” ä¸¤é˜¶æ®µåŠ é”å¯¹éœ€è¦ä¿®æ”¹çš„æ•°æ®ï¼šå…ˆè¯·æ±‚åŠ é”ï¼Œå†ä¿®æ”¹æ•°æ®ï¼›è‹¥æœ‰ä¸€ä¸ªæ•°æ®å·²åŠ é”ï¼Œè¿›ç¨‹åˆ™é‡Šæ”¾æ‰€æœ‰åŠ é”çš„è®°å½•ã€‚ï¼ˆåƒcsmacaä¸€æ · é€šä¿¡æ­»é”é€šä¿¡ä¸­å¤šä¸ªè¿›ç¨‹å‘é€ä¿¡æ¯ï¼Œä½†éœ€è¦é˜»å¡žå½“å‰è¿›ç¨‹ç­‰å¾…å¯¹æ–¹å›žå¤ã€‚è‹¥å‘é€ä¿¡æ¯ä¸¢å¤±ï¼Œåˆ™æ­»é”ã€‚è§£å†³åŠžæ³•ï¼šè¶…æ—¶ä¸­æ–­ï¼› æ´»é”æ‰€è°“æ´»é”æ—¢æ˜¯ï¼šè¿›ç¨‹æ²¡æœ‰æ­»é”ï¼Œä½†å´æ— æ³•è¿è¡Œä¸‹åŽ»ï¼Œåªæ˜¯åœ¨ä¸æ–­çš„é‡å¤å°è¯•ï¼Œå¦‚å†²çªæ£€æµ‹ã€‚ è¿›ç¨‹é¥¿æ­»ç”±äºŽæ¡ä»¶é™åˆ¶ä½¿æœ‰äº›è¿›ç¨‹è¯·æ±‚æ°¸è¿œæ— æ³•å¾—åˆ°æœåŠ¡ï¼Œè¿›ç¨‹è¢«é¥¿æ­»ã€‚ä»Žé¥¿æ­»è¿›ç¨‹è§’åº¦çœ‹ï¼Œåƒæ˜¯å‘ç”Ÿäº†æ­»é”ã€‚]]></content>
      <categories>
        <category>OS</category>
        <category>è¯¾</category>
      </categories>
      <tags>
        <tag>OS</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æµå…‰]]></title>
    <url>%2F2017%2F12%2F16%2F%E6%B5%81%E5%85%89%2F</url>
    <content type="text"><![CDATA[ç”Ÿæ­»æ¡¥æ€€çŽ‰å¿ƒæƒ³ï¼Œæ€Žçš„æ¯ä¸ªäººéƒ½è¦å¬ä»–çš„å¿ƒé‡Œè¯å‘¢ï¼Ÿåˆ°åº•å¿ƒé‡Œæœ‰æ²¡æœ‰è¯ï¼Ÿç®€ç®€å•å•çš„ä¸€æ¡©äº‹å„¿ï¼Œè‡ªå®¶çš„äº‹å„¿ï¼Œå“ªæœ‰ä»€ä¹ˆï¼Ÿä¸–ä¸Šå„äººéƒ½çˆ±å°äº‹åŒ–å¤§ã€‚]]></content>
      <categories>
        <category>å› å¯„æ‰€æ‰˜</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Lab4_Document]]></title>
    <url>%2F2017%2F12%2F12%2FOS%2FLab4_Document%2F</url>
    <content type="text"><![CDATA[Lab4-Document1511266 æ¨é¢– Part A: Multiprocessor Support and Cooperative MultitaskingMultiprocessor Supportåœ¨æœ¬å®žéªŒçš„å¼€å§‹éƒ¨åˆ†ï¼Œé¦–å…ˆå°†ä¸ºjosæ·»åŠ å¤šæ ¸æ”¯æŒã€‚åœ¨å¤šæ ¸æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰CPUåœ°ä½å¹³ç­‰ï¼Œæœ‰ç›¸åŒçš„ç³»ç»Ÿèµ„æºä¸ŽIOæ€»çº¿è®¿é—®æƒã€‚ä½†æ˜¯ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œå¤šCPUå¯ä»¥è¢«åˆ†ä¸ºä¸¤ç±»ï¼šBSPä¸ŽAPã€‚BSPåœ¨ç³»ç»Ÿä¸Šç”µæ—¶æŽ¥ç®¡æœºå™¨ï¼Œå®Œæˆç³»ç»Ÿçš„åˆå§‹åŒ–ï¼ŒéšåŽï¼Œå‡ºäºŽæŸç§éœ€è¦ï¼ŒBSPå°†ä¼šå”¤é†’APï¼ŒAPä¹Ÿå¯ä»¥ä½œä¸ºç‹¬ç«‹çš„CPUæ‰§è¡ŒæŒ‡ä»¤ã€‚ åœ¨è¿™ç§ç³»ç»Ÿä¹‹ä¸­ï¼Œæ¯ä¸ªCPUéƒ½æœ‰ä¸€ä¸ªæ¨¡å—æ˜¯LAPICï¼Œå®ƒè´Ÿè´£ç³»ç»Ÿçš„ä¸­æ–­ä¼ é€’ï¼Œä¸ºæ¯ä¸ªCPUæä¾›ä¸€ä¸ªç‹¬ç‰¹çš„ç¼–å·ã€‚ LAPICæ˜¯Local Advanced Programmable Interrupt Controllerï¼Œlocalé«˜çº§å¯ç¼–ç¨‹ä¸­æ–­æŽ§åˆ¶å™¨ã€‚LAPICä¸€èˆ¬ç”±ä¸­æ–­ä¿¡å·ã€PRTã€ä¸€ç»„å¯„å­˜å™¨ä¸Žå…¶ä»–ä¸€äº›éƒ¨ä»¶ç»„æˆï¼Œå¯ä»¥å¤„ç†ç¡¬ä»¶çš„ä¸­æ–­è¯·æ±‚ä¿¡æ¯ï¼Œå¹¶é€šçŸ¥CPUè¿›è¡Œå¤„ç†ã€‚ åœ¨æœ¬æ¬¡å®žéªŒä¸­ï¼Œæˆ‘ä»¬å°†ä¼šç”¨åˆ°LAPICæ¨¡å—çš„å¦‚ä¸‹åŠŸèƒ½å‡½æ•°ï¼š cpunum()ï¼š è¯¥å‡½æ•°ä¸­ï¼Œé€šè¿‡è®¿é—®lapic[ID]å¯¹åº”å­—æ®µèŽ·å¾—å½“å‰çš„cpuç¼–å·ã€‚ lapic_startap(): è¿™ä¸ªå‡½æ•°ä¸­ï¼ŒBSPè´Ÿè´£å¯¹å°šæœªå·¥ä½œçš„APè¿›è¡Œåˆå§‹åŒ–ä¸Žå”¤é†’æ“ä½œã€‚é¦–å…ˆè®¾ç½®å‘é‡ï¼Œç„¶åŽå‘é€INITä¸­æ–­æ¥é‡ç½®å…¶ä»–CPUï¼Œæœ€ç»ˆå‘é€STRARTUPä¿¡å·ä¸Žå¼€å§‹æ‰§è¡Œçš„ä½ç½®ï¼Œä½¿ä¸€ä¸ªCPUæ­£å¼å¼€å§‹å·¥ä½œã€‚ lapic_init(): 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273voidlapic_init(void)&#123; if (!lapicaddr) return; // lapicaddr is the physical address of the LAPIC's 4K MMIO // region. Map it in to virtual memory so we can access it. //lapiaddræ˜¯LAPICçš„4Kçš„MIMOåŒºåŸŸçš„ç‰©ç†åœ°å€ //æŠŠä»–æ˜ å°„åˆ°è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå°±å¯ä»¥è®¿é—®äº† lapic = mmio_map_region(lapicaddr, 4096); //enable LAPICï¼›è®¾ç½®ä¼ªä¸­æ–­å‘é‡ // Enable local APIC; set spurious interrupt vector. //#define SVR (0x00F0/4) // Spurious Interrupt Vector //#define ENABLE 0x00000100 // Unit Enable //in inc/trap.c //#define IRQ_OFFSET 32 // IRQ 0 corresponds to int IRQ_OFFSET //// Hardware IRQ numbers. We receive these as (IRQ_OFFSET+IRQ_WHATEVER) //#define IRQ_SPURIOUS 7 lapicw(SVR, ENABLE | (IRQ_OFFSET + IRQ_SPURIOUS)); // The timer repeatedly counts down at bus frequency // from lapic[TICR] and then issues an interrupt. //å®šæ—¶å™¨é‡å¤ä»Žlapic [TICR]çš„æ€»çº¿é¢‘çŽ‡å€’è®¡æ•°ï¼Œç„¶åŽå‘å‡ºä¸­æ–­ã€‚ // If we cared more about precise timekeeping, // TICR would be calibrated using an external time source. //å¦‚æžœæˆ‘ä»¬æ›´å…³å¿ƒç²¾ç¡®çš„è®¡æ—¶ï¼ŒTICRå°†ä½¿ç”¨å¤–éƒ¨æ—¶é—´æºè¿›è¡Œæ ¡å‡†ã€‚ lapicw(TDCR, X1);//in this:å‘lapicæ•°ç»„å†™å…¥ä¸œè¥¿lapic[TDCR]=X1; lapicw(TIMER, PERIODIC | (IRQ_OFFSET + IRQ_TIMER)); lapicw(TICR, 10000000); // Leave LINT0 of the BSP enabled so that it can get // interrupts from the 8259A chip. //å§BSPçš„LINT0ï¼ˆå‘é‡è¡¨0ï¼‰enableï¼Œè¿™æ ·å°±å¯ä»¥ä»Ž8259AèŠ¯ç‰‡å¾—åˆ°ä¸­æ–­ // According to Intel MP Specification, the BIOS should initialize // BSP's local APIC in Virtual Wire Mode, in which 8259A's // INTR is virtually connected to BSP's LINTIN0. In this mode, // we do not need to program the IOAPIC. //æ ¹æ®è‹±ç‰¹å°”MPè§„èŒƒï¼ŒBIOSåº”åœ¨è™šæ‹Ÿçº¿è·¯æ¨¡å¼ä¸‹åˆå§‹åŒ–BSPçš„æœ¬åœ°APICï¼Œ //å…¶ä¸­8259Açš„INTRè™šæ‹Ÿè¿žæŽ¥åˆ°BSPçš„LINTIN0ã€‚ //åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç¼–ç¨‹IOAPICã€‚ //å¦‚æžœå½“å‰cpuä¸æ˜¯å¯åŠ¨cpuï¼Œå®ƒçš„ä¸­æ–­è¡¨0 è¢«mask if (thiscpu != bootcpu) lapicw(LINT0, MASKED); // Disable NMI (LINT1) on all CPUs //ä¸­æ–­è¡¨1éƒ½è¢«mask lapicw(LINT1, MASKED); // Disable performance counter overflow interrupts // on machines that provide that interrupt entry. //åœ¨ä¸€äº›ç‰¹å®šçš„ç‰ˆæœ¬ï¼ˆæä¾›äº†ä¸­æ–­å…¥å£ï¼‰çš„æœºå™¨ä¸Šï¼Œ //disable PCINTï¼ˆæ€§èƒ½è®¡æ•°å™¨æº¢å‡ºï¼Ÿï¼Ÿï¼Ÿï¼‰ if (((lapic[VER]&gt;&gt;16) &amp; 0xFF) &gt;= 4) lapicw(PCINT, MASKED); // Map error interrupt to IRQ_ERROR. lapicw(ERROR, IRQ_OFFSET + IRQ_ERROR); // Clear error status register (requires back-to-back writes). lapicw(ESR, 0); lapicw(ESR, 0); // Ack any outstanding interrupts. lapicw(EOI, 0); // Send an Init Level De-Assert to synchronize arbitration ID's. //#define ICRHI (0x0310/4) // Interrupt Command [63:32] //#define INIT 0x00000500 // INIT/RESET //#define DELIVS 0x00001000 // Delivery status //#define LEVEL 0x00008000 // Level triggered //#define BCAST 0x00080000 // Send to all APICs, including self. lapicw(ICRHI, 0); lapicw(ICRLO, BCAST | INIT | LEVEL); while(lapic[ICRLO] &amp; DELIVS) ; // Enable interrupts on the APIC (but not on the processor). //TPR ä»»åŠ¡ä¼˜å…ˆçº§ lapicw(TPR, 0);&#125; è¯¥å‡½æ•°åˆå§‹åŒ–LAPICã€‚åƒå…¶ä»–ç»“æž„ä¸€æ ·ï¼Œlapicè¢«æ˜ å°„åˆ°å›ºå®šçš„ç‰©ç†åœ°å€ï¼ŒéšåŽè¿›è¡Œå„ç§ä¸­æ–­å‘é‡çš„è®¾ç½®ä»¥åŠå‘é‡è¡¨çš„maskæ“ä½œï¼Œè®¾ç½®é”™è¯¯çŠ¶æ€å¯„å­˜å™¨çš„å€¼ï¼Œæœ€åŽè®¾ç½®ä»»åŠ¡ä¼˜å…ˆçº§ã€‚ åƒVGAè®¾å¤‡ä¸€æ ·ï¼Œç‰©ç†åœ°å€ç©ºé—´ä¸Šä¹Ÿä¸ºLAPICè®¾å¤‡ç•™äº†ä¸€ä¸ªæ´žï¼Œå®ƒå°†ä¼šè¢«mapåˆ°è™šæ‹Ÿåœ°å€çš„MMIOBASEã€‚è¿™ç§è®¿é—®æ–¹å¼ä½¿å¾—CPUå¯ä»¥åƒè®¿é—®å†…å­˜ä¸€æ ·è®¿é—®è®¾å¤‡ã€‚ Exercise 1 å®Œæˆmmio_map_regionå‡½æ•°ï¼Œå®ƒå°†ä¼šå®ŒæˆæŠŠLAPICè®¾å¤‡æ‰€å æ®çš„ç‰©ç†åœ°å€mapåˆ°é¢„ç•™çš„è™šæ‹Ÿåœ°å€éƒ¨åˆ†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344void *mmio_map_region(physaddr_t pa, size_t size)&#123; // Where to start the next region. Initially, this is the // beginning of the MMIO region. Because this is static, its // value will be preserved between calls to mmio_map_region // (just like nextfree in boot_alloc). //è¿™æ˜¯mmioå¼€å§‹çš„åœ°æ–¹ static uintptr_t base = MMIOBASE; // Reserve size bytes of virtual memory starting at base and // map physical pages [pa,pa+size) to virtual addresses // [base,base+size). Since this is device memory and not // regular DRAM, you'll have to tell the CPU that it isn't // safe to cache access to this memory. Luckily, the page // tables provide bits for this purpose; simply create the // mapping with PTE_PCD|PTE_PWT (cache-disable and // write-through) in addition to PTE_W. (If you're interested // in more details on this, see section 10.5 of IA32 volume // 3A.) //ä¿ç•™è™šæ‹Ÿå†…å­˜çš„çš„sizeå­—èŠ‚ï¼Œå¹¶æŠŠç‰©ç†åœ°å€paï¼Œpa+sizeç»™mapåˆ°base,base+sizeï¼Œ //ç”±äºŽè¿™æ˜¯è®¾å¤‡çš„å†…å­˜ï¼Œå¹¶ä¸æ˜¯dramï¼Œéœ€è¦å‘Šè¯‰cpuç¼“å­˜åˆ°è¿™é‡Œçš„accessæ˜¯ä¸å®‰å…¨çš„ï¼Œ //å¹¸è¿çš„æ˜¯ï¼Œé¡µè¡¨æä¾›äº†è¿™æ ·çš„ä½ //åªéœ€è¦ä½¿ç”¨PTE_PCD|PTE_PWT|PTE_Wå³å¯ //å¦‚æžœä½ å¯¹è¿™ä¸ªå¾ˆæœ‰å…´è¶£ï¼Œå¯ä»¥åŽ»çœ‹10.5èŠ‚ï¼ŒIA32 å·3A // Be sure to round size up to a multiple of PGSIZE and to // handle if this reservation would overflow MMIOLIM (it's // okay to simply panic if this happens). //ç¡®ä¿ä½ roundsizeup //ç¡®ä¿ä½ æ£€æµ‹æ˜¯ä¸æ˜¯ä¼šè¶…è¿‡MMIOLIMï¼Œå¦‚æžœè¶…è¿‡äº†ï¼Œpanic // Hint: The staff solution uses boot_map_region. //ä½¿ç”¨boot_map_region // Your code here: //Note:pa=5 size=7 pgsize=10 //actually endsp shall be 20 uint32_t endsp=ROUNDUP(size+pa,PGSIZE); pa=ROUNDDOWN(pa,PGSIZE); size=endsp-pa; if(base+size&gt;MMIOLIM)panic("the reservation would overflow MMIOLIM"); boot_map_region(kern_pgdir,base,size,pa,PTE_PCD|PTE_PWT|PTE_W); //panic("mmio_map_region not implemented"); // base+=size; return (void*)(base-size);&#125; &gt; è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯sizeä¸Žpaddrçš„å…³ç³»ã€‚ç”±äºŽæœ€ç»ˆè¦†ç›–åˆ°çš„åœ°å€åº”è¯¥åœ¨size+paddrï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨ROUNDDOWN(paddr)ä¸ŽROUNDUP(size)ç›´æŽ¥åšè¿ç®—ï¼Œå¦åˆ™å¯èƒ½ä¼šäº§ç”Ÿç¼ºé¡µçš„æƒ…å†µã€‚ Application Processor Bootstrapåœ¨i386_initå‡½æ•°ä¸­ï¼Œæœ¬å®žéªŒåˆå¢žåŠ äº†æ–°çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼š åœ¨å¯åŠ¨APä¹‹å‰ï¼ŒBSPå°†ä¼šé¦–å…ˆåŽ»èŽ·çŸ¥å¤šå¤„ç†å™¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚CPUæ€»æ•°ï¼Œä»–ä»¬å„è‡ªçš„APICç¼–å·ä»¥åŠLAPICçš„MMIOåœ°å€ã€‚kern/mpconfig.cä¸­çš„mp_initå‡½æ•°é€šè¿‡è®¿é—®MPé…ç½®è¡¨æ¥èŽ·çŸ¥è¿™äº›ä¿¡æ¯ã€‚éšåŽï¼Œlapic_initåˆå§‹åŒ–LAPICè®¾å¤‡ï¼Œpic_initåœ¨æ›´åº•å±‚çš„éƒ¨åˆ†åˆå§‹åŒ–8259Açš„ä¸­æ–­æŽ§åˆ¶å™¨ã€‚æœ€åŽboot_apså‡½æ•°(kern/init.c)å°†ä¼šå¯åŠ¨å„ä¸ªAPï¼Œä½¿ä»–ä»¬ä»ŽMPENTRY_PADDRå¼€å§‹è¿è¡Œã€‚ boot_apså‡½æ•°å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒBSPé¦–å…ˆå°†APå¯åŠ¨åŽæ‰§è¡Œçš„ä»£ç æ¬åˆ°APçš„å¯åŠ¨ä½ç½®codeï¼ŒéšåŽé€ä¸ªå”¤é†’APã€‚å¯¹æ¯ä¸€ä¸ªAPï¼Œå°†ä¼šå‘Šè¯‰å®ƒå®ƒçš„å†…æ ¸æ ˆçš„ä½ç½®ï¼ŒéšåŽè°ƒç”¨lapic_statrap(kern/lapic.c)ã€‚lapic_startapçš„ä»£ç åœ¨ä¸Šæ–¹å·²ç»è´´å‡ºï¼Œå®ƒä¸ºCPUè®¾ç½®å„ç§ä¸­æ–­ä¿¡æ¯å¹¶æœ€ç»ˆç»™å‡ºSTRATUPä¿¡å·è¡¨æ˜ŽAPå·²ç»è®¾ç½®å®Œæˆï¼ŒéšåŽAPå¼€å§‹ä»Žç»™å®šåœ°å€å¼€å§‹è¿è¡Œã€‚è¿›å…¥mpentry.Sçš„è¿è¡Œï¼Œè®¾ç½®initialé¡µè¡¨å¹¶è½¬å…¥è‡ªå·±çš„å†…æ ¸æ ˆï¼ŒéšåŽè°ƒç”¨mp_mainå‡½æ•°ï¼Œè®¾ç½®é¡µè¡¨ï¼Œåˆå§‹åŒ–LAPICã€GDTä»¥åŠtrapï¼ŒéšåŽå‘Šè¯‰boot_apsè¿™ä¸ªCPUè®¾ç½®å®Œæ¯•ï¼Œboot_apsæŽ¥æ”¶åˆ°APçš„ä¿¡æ¯ä¹‹åŽï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªAPçš„åˆå§‹åŒ–ã€‚ éšåŽå°±åƒåœ¨Lab3ä¸­çš„é‚£æ ·ï¼Œè°ƒç”¨ç”¨æˆ·ç¨‹åºã€‚ Exercise 2 ä¿®æ”¹page_initå‡½æ•°ï¼Œä¸å†å°†ä»ŽMPENTRY_PADDRå¼€å§‹çš„è™šæ‹Ÿåœ°å€æ·»åŠ åˆ°å¯ç”¨é¡µä¸Šï¼Œç»™å‡ºæ›´æ–°åŽçš„å‡½æ•°ï¼š Question Compare kern/mpentry.S side by side with boot/boot.S. Bearing in mind that kern/mpentry.S is compiled and linked to run above KERNBASE just like everything else in the kernel, what is the purpose of macro MPBOOTPHYS? Why is it necessary in kern/mpentry.S but not in boot/boot.S? In other words, what could go wrong if it were omitted in kern/mpentry.S? Hint: recall the differences between the link address and the load address that we have discussed in Lab 1. MPBOOTYPHYSçš„ç›®çš„æ˜¯è®¡ç®—åº”è¯¥è®¿é—®çš„åœ°å€ã€‚ä¸Žboot.Sä¸åŒï¼Œåœ¨mpentry.Sä¸­å¯åŠ¨çš„APï¼Œå…¶loadè¿›çš„åœ°å€å¹¶ä¸æ˜¯åƒbootä¸€æ ·ä¸Žå‡è®¾è‡ªå·±è¢«åŠ è½½è¿›æ¥çš„åœ°å€ç›¸åŒï¼Œè€Œæ˜¯è¢«BSPåŠ è½½åˆ°MPENTRY_PADDRã€‚ä¸ºäº†è®¿é—®åˆ°æ­£ç¡®çš„ç‰©ç†åœ°å€ï¼Œåº”è¯¥æ¢ç®—æˆå¸Œæœ›åŠ è½½è¿›æ¥çš„åœ°å€å†è¿›è¡Œå¯¹åœ°å€çš„æ“ä½œã€‚ Per-CPU State and Initializationåœ¨å¤šCPUçš„ç³»ç»Ÿä¸­ï¼Œéœ€è¦æ˜Žç¡®æ¯ä¸ªCPUç§æœ‰çš„çŠ¶æ€ä»¥åŠå…±æœ‰çš„èµ„æºåˆ’åˆ†ã€‚åœ¨kern/cpu.hä¸­å®šä¹‰çš„CpuInfoç»“æž„å­˜å‚¨æœ‰å¤§éƒ¨åˆ†çš„ç§æœ‰ä¿¡æ¯ã€‚thiscpuæŒ‡å‘å½“å‰cpuçš„CpuInfoç»“æž„ã€‚ Exercise 3ä¿®æ”¹mem_init_mpå‡½æ•°ï¼Œä¸ºæ¯ä¸ªCPU mapä¸€ä¸ªå†…æ ¸æ ˆã€‚ åƒåœ¨memlayout.hä¸­å®šä¹‰çš„é‚£æ ·ï¼Œè¡¥å……åŽçš„ä»£ç æ˜¯ï¼š Exercise 4 ä¿®æ”¹trap_init_percpuä½¿å¾—åœ¨å¤šCPUçŽ¯å¢ƒä¸‹å¯ä»¥è¿è¡Œ ä»£ç ï¼š è¿™æ®µä»£ç ä¸­ä¸€å…±æœ‰å››ä¸ªéœ€è¦ä¿®æ”¹çš„åœ°æ–¹ï¼Œä¸€æ˜¯æ‰€æœ‰çš„tsåº”è¯¥ä¿®æ”¹ä¸ºthiscpu-&gt;tsï¼Œè€Œæ˜¯æ ˆé¡¶åº”è¯¥ç”±KSTACKTOP-(KSTKSIZE + KSTKGAP)å˜ä¸ºKSTACKTOP-i*(KSTKSIZE + KSTKGAP)ï¼Œä¸‰æ˜¯gdtä¸­tssè¡¨é¡¹ä½ç½®åº”è¯¥ç”±[(GD_TSS0 &gt;&gt; 3)å˜ä¸º[(GD_TSS0 &gt;&gt; 3)+iï¼Œå››æ˜¯loadé€‰æ‹©å­çš„æ—¶å€™åº”è¯¥ä¿®æ”¹ä¸ºå¯¹åº”cpuçš„é€‰æ‹©å­ltr(GD_TSS0+i*8);ã€‚ è¿™æ ·å°±å®Œæˆäº†ä¸åŒCPUçš„trapåˆå§‹åŒ–ã€‚ å®Œæˆè¿™é‡Œçš„æ“ä½œä¹‹åŽï¼Œmake qemu CPUS=4ï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰å‡½æ•°æ£€æŸ¥é€šè¿‡ï¼ŒCPUä¿¡æ¯è¾“å‡ºã€‚ Lockingä¸Šè¿°å®Œæˆä¹‹åŽï¼Œä»£ç å°†ä¼šåœåœ¨åŽŸåœ°ã€‚ä¸ºäº†ä½¿å¾—APèƒ½å¤Ÿè¿›ä¸€æ­¥è¿è¡Œï¼Œéœ€è¦é¦–å…ˆè§£å†³å¤šä¸ªCPUåŒæ—¶è¿è¡Œå†…æ ¸ä»£ç çš„ç«žäº‰çŠ¶å†µã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‡‡ç”¨å†…æ ¸é”æœºåˆ¶ã€‚å½“æœ‰è¿›ç¨‹åœ¨å†…æ ¸ç©ºé—´æ—¶ï¼Œå†…æ ¸å°†ä¼šä¸Šä¸€ä¸ªé”ï¼Œå›žåˆ°ç”¨æˆ·ç©ºé—´åŽï¼Œé”è¢«é‡Šæ”¾ã€‚ åœ¨kern/spinlock.hä¸­å®šä¹‰äº†ä¸€ä¸ªkernel_lockï¼Œæä¾›äº†lock_kernelä¸Žunlock_kernelå‡½æ•°ã€‚éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥å†³å®šåŠ é”è§£é”çš„ä½ç½®ã€‚ Exercise 5åŠ é”ä¸Žè§£é” åœ¨i386_initä¸­ï¼Œåœ¨BSPå”¤é†’å…¶ä»–CPUä¹‹å‰åŠ é”ï¼š åœ¨mp_mainä¸­ï¼Œåœ¨APåˆå§‹åŒ–ä¹‹åŽåŠ é”ï¼Œç„¶åŽè°ƒç”¨sched_yieldæ¥å¼€å§‹è°ƒåº¦ã€‚ åœ¨trapä¸­ï¼Œå¦‚æžœæ˜¯ä»Žç”¨æˆ·æ¨¡å¼æ¥çš„trapï¼Œå°±èŽ·å¾—é”ã€‚ åœ¨env_runä¸­ï¼Œåœ¨è¿›å…¥ç”¨æˆ·æ¨¡å¼çš„æ—¶å€™é‡Šæ”¾é” Question It seems that using the big kernel lock guarantees that only one CPU can run the kernel code at a time. Why do we still need separate kernel stacks for each CPU? Describe a scenario in which using a shared kernel stack will go wrong, even with the protection of the big kernel lock. è¿™æ˜¯å› ä¸ºåœ¨lab3ä¸­å·²ç»å†™è¿‡ï¼Œå½“ç”¨æˆ·è¿›ç¨‹å‘ç”Ÿä¸­æ–­çš„æ—¶å€™ï¼Œæ‰§è¡Œçš„ä»£ç ä¸­æœ‰ï¼šè¿™æ®µä»£ç æ˜¯äº§ç”Ÿä¸­æ–­ä¹‹åŽç¡¬ä»¶è‡ªå·±å°±ä¼šæ‰§è¡Œçš„ï¼Œåœ¨è¿™ä¸ªæ—¶å€™ä»æœªè°ƒç”¨trapï¼Œè‡ªç„¶è¿˜æ²¡æœ‰ä¸ºå†…æ ¸åŠ é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœä½¿ç”¨åŒä¸€ä¸ªæ ˆï¼Œå½“ä¸¤ä¸ªcpuåŒæ—¶å‘ç”Ÿä¸­æ–­çš„æ—¶å€™ï¼Œè¿™æ®µä»£ç å¾ˆå¯èƒ½ä¼šè¢«æ‰“æ–­æ‰§è¡Œé¡ºåºï¼Œä»Žè€Œå¯¼è‡´å†…æ ¸æ ˆçš„æ··ä¹±ã€‚ Round-Robin SchedulingæŽ¥ä¸‹æ¥ï¼Œå°†ä¼šä¿®æ”¹è°ƒåº¦è¿‡ç¨‹çš„ä»£ç ï¼Œæ¥ä¸ºjosæ·»åŠ è°ƒåº¦çš„åŠŸèƒ½ã€‚ åœ¨è¿™é‡Œï¼Œè¿™ä¸ªåŠŸèƒ½ä¼šè¢«æè¿°ä¸ºï¼š å‡½æ•°shced_yieldè´Ÿè´£é€‰æ‹©ä¸€ä¸ªæ–°è¿›ç¨‹è¿è¡Œï¼Œå®ƒä»Žå½“å‰è¿è¡Œè¿›ç¨‹çš„ç¼–å·å¼€å§‹å¯»æ‰¾ï¼Œæ‰¾ç¬¬ä¸€ä¸ªæœ‰ç€ENV_RUNNABLEçš„è¿›ç¨‹æŠŠè¿è¡Œæƒäº¤ä»˜ç»™å®ƒã€‚å¦‚æžœæ²¡æœ‰å…¶ä»–è¿›ç¨‹æ˜¯ENV_RUNNABLEçŠ¶æ€è€Œä¸”çŽ°åœ¨çš„è¿›ç¨‹è¿˜å¯ä»¥è¿è¡Œï¼Œé‚£å°±è¿˜è®©çŽ°åœ¨çš„è¿›ç¨‹è¿è¡Œã€‚ Exercise 6 ä¿®æ”¹è¯¥sched_yieldå‡½æ•°ï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™æ—¶syscallå‡½æ•°ä»æœªè¢«å®Œæˆï¼Œéœ€è¦åœ¨æ­¤åŽé™†ç»­æ·»åŠ æ›´å¤šçš„SYS_*æ¥å…è®¸ç”¨æˆ·ç©ºé—´çš„ç³»ç»Ÿè°ƒç”¨ã€‚ éšåŽå¯ä»¥æµ‹è¯•ï¼Œä¿®æ”¹i386_initå‡½æ•°ï¼Œåˆ›å»º3ä¸ªè¿›ç¨‹ï¼š ä½¿ç”¨make qemu CPUS=2ï¼Œå¯ä»¥å¾—åˆ°ç»“æžœï¼š Question In your implementation of env_run() you should have called lcr3(). Before and after the call to lcr3(), your code makes references (at least it should) to the variable e, the argument to env_run. Upon loading the %cr3 register, the addressing context used by the MMU is instantly changed. But a virtual address (namely e) has meaning relative to a given address contextâ€“the address context specifies the physical address to which the virtual address maps. Why can the pointer e be dereferenced both before and after the addressing switch? eæ‰€æŒ‡ç¤ºçš„ç©ºé—´æ˜¯åœ¨mem_initä¸­è¢«ç”³è¯·çš„ç‰©ç†ç©ºé—´ï¼Œå®ƒå¹¶ä¸ä¼šå­˜åœ¨äºŽæ¯ä¸ªè¿›ç¨‹çš„å¯ç”¨é¡µè¡¨é‡Œä¾›è¿›ç¨‹è‡ªå·±å†³å®šmapçš„è™šæ‹Ÿåœ°å€ï¼Œè€Œæ˜¯å¯¹æ¯ä¸ªè¿›ç¨‹è€Œè¨€éƒ½æ˜¯ä¸€æ ·çš„ã€‚ Whenever the kernel switches from one environment to another, it must ensure the old environmentâ€™s registers are saved so they can be restored properly later. Why? Where does this happen? åªæœ‰è¿™æ ·åšï¼Œæ‰èƒ½ä¿å­˜ä¸Šä¸€ä¸ªè¿›ç¨‹çš„è¿è¡ŒçŠ¶æ€ä¿¡æ¯ï¼Œæ¢å¤è¿›ç¨‹è¿è¡Œæ—¶æ‰ä¸ä¼šå‡ºé”™ã€‚è¿™ä¸ªæ“ä½œå‘ç”Ÿåœ¨trapå‡½æ•°ä¸­ï¼Œä»£ç æ˜¯è¿™æ ·çš„ï¼šå®ƒä¿å­˜äº†å‘ç”Ÿtrapçš„è¿›ç¨‹çš„tfã€‚ç„¶è€Œï¼Œè¿›ç¨‹ä¹‹é—´åˆ‡æ¢ç”±kernelå†³å®šã€‚æ¯æ¬¡å‘ç”Ÿè¿›ç¨‹è°ƒåº¦ï¼Œéƒ½ä¼šå‘ç”Ÿtrapï¼ˆè¿™é‡Œå°†syscallä¸»åŠ¨æ”¾å¼ƒcpuä¹Ÿé€šè¿‡trapå®Œæˆï¼‰ System Calls for Environment Creationä¸‹é¢å°†å…è®¸ç”¨æˆ·è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹å¹¶æ‰§è¡Œã€‚ åœ¨Unixä¸­ï¼Œforkå‡½æ•°å¯ä»¥ç”¨æ¥åˆ›å»ºå­è¿›ç¨‹ã€‚è¿™ä¸ªå­è¿›ç¨‹å®Œå…¨copyäº†çˆ¶è¿›ç¨‹çš„åœ°å€ç©ºé—´ï¼ŒäºŒè€…å”¯ä¸€ä¸åŒçš„æ˜¯åœ¨çˆ¶è¿›ç¨‹ä¸­forkè¿”å›žå­è¿›ç¨‹çš„ç¼–å·è€Œåœ¨å­è¿›ç¨‹ä¸­è¿”å›žçš„æ˜¯0ã€‚ æˆ‘ä»¬å°†å®žçŽ°ä¸€ä¸ªæ›´åŠ åŽŸå§‹çš„forkï¼Œé¦–å…ˆéœ€è¦å®Œæˆä¸€äº›ç³»ç»Ÿè°ƒç”¨å‡½æ•°ã€‚åœ¨è¿™äº›ä¸ªå‡½æ•°ä¹‹ä¸­ï¼Œéœ€è¦é¢‘ç¹ç”¨åˆ°å‡½æ•°envid2envæ¥æ£€æŸ¥è¿›ç¨‹æ“ä½œæ˜¯å¦åˆæ³•ï¼Œé¦–å…ˆæ¥åˆ†æžè¿™ä¸ªenvid2envå‡½æ•°ï¼š å¦‚æžœenvidæ˜¯0ï¼Œè¯´æ˜Žæ˜¯å½“å‰è¿›ç¨‹å¸Œæœ›èŽ·å¾—è‡ªå·±çš„envç»“æž„ï¼Œç›´æŽ¥å…è®¸èŽ·å¾—ï¼Œè¿”å›žcurenvï¼Œå‡½æ•°æˆåŠŸã€‚å¦‚æžœç»™çš„envidä¸åˆæ³•æˆ–è€…æŒ‡å®šè¿›ç¨‹æ˜¯freeè¿›ç¨‹ï¼Œæ— æ³•å¾—åˆ°è¿›ç¨‹ç»“æž„ï¼Œè¿”å›žbad environmentã€‚å¦åˆ™å¦‚æžœæŒ‡å®šéœ€è¦æ£€æŸ¥æƒé™ï¼Œé‚£ä¹ˆç»™å®šçš„envidå¿…é¡»æ˜¯å½“å‰è¿›ç¨‹çš„å­è¿›ç¨‹ï¼Œå¦‚æžœæ»¡è¶³è¦æ±‚è¿”å›žæˆåŠŸï¼Œå¦åˆ™è¿”å›žå¤±è´¥ï¼šbad environmentã€‚ Exercise 7ï¼š åªéœ€è¦æŒ‰ç…§è¦æ±‚å®Œæˆä»£ç ï¼š sys_exoforkï¼šåˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ï¼Œå…¶ä¸­ï¼Œç”¨æˆ·åœ°å€ç©ºé—´æ²¡æœ‰ä»»ä½•mapï¼Œä¸å¯ä»¥è¿è¡Œã€‚å­è¿›ç¨‹å°†ä¼šæ‹¥æœ‰å’Œçˆ¶è¿›ç¨‹ä¸€æ ·çš„å¯„å­˜å™¨çŠ¶æ€å€¼ï¼Œè¯¥å‡½æ•°åœ¨å­è¿›ç¨‹ä¸­è¿”å›ž0ï¼Œåœ¨çˆ¶è¿›ç¨‹ä¸­è¿”å›žå­è¿›ç¨‹çš„idã€‚ï¼ˆç”±äºŽå­è¿›ç¨‹åˆšåˆšè¢«åˆ›å»ºçš„æ—¶å€™æ˜¯æ²¡æœ‰æ‰§è¡Œèƒ½åŠ›çš„ï¼Œå› æ­¤å®žé™…ä¸Šï¼Œåœ¨å­è¿›ç¨‹ä¸­æ˜¯æ— æ³•è¿”å›žçš„ï¼Œç›´åˆ°å…¶çˆ¶è¿›ç¨‹ç”¨ä¸‹é¢çš„å‡½æ•°å°†å­è¿›ç¨‹æ ‡è®°ä¸ºå¯è¿è¡Œï¼‰ä»£ç ï¼š sys_env_set_statusï¼šè®¾ç½®ä¸€ä¸ªè¿›ç¨‹çš„çŠ¶æ€ä¸ºENV_RUNNABLEæˆ–è€…æ˜¯ENV_NOT_RUNNABLEã€‚ä»£ç ï¼š sys_page_allocï¼šç”³è¯·ä¸€ä¸ªç‰©ç†é¡µå¹¶æŠŠå®ƒmapåœ¨ç»™å®šè¿›ç¨‹çš„ç»™å®šåœ°å€ã€‚ä»£ç ï¼š sys_page_mapï¼šæŠŠç»™å®šè¿›ç¨‹çš„æŸä¸€ä¸ªé¡µçš„æ˜ å°„åŒæ ·æ˜ å°„åˆ°å¦ä¸€ä¸ªè¿›ç¨‹çš„ç»™å®šåœ°å€ï¼Œè¿™æ ·ï¼Œè¿™ä¸¤ä¸ªè¿›ç¨‹äº«æœ‰äº†å…±äº«çš„ä¸€ä¸ªç‰©ç†é¡µã€‚ä»£ç ï¼š sys_page_unmapï¼šæŠŠæŸä¸€ä¸ªé¡µä»ŽæŸä¸€ä¸ªè¿›ç¨‹çš„å¯¹åº”åœ°å€ä¸Šunmapã€‚ä»£ç ï¼š å®Œæˆè¿™äº›ä¹‹åŽï¼ŒpartAçš„dumbforkæµ‹è¯•å°±å¯ä»¥é€šè¿‡äº†ã€‚ Part B: Copy-on-Write Forkåƒåœ¨å‰é¢æåˆ°çš„ä¸€æ ·ï¼ŒUnixæä¾›äº†forkå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°†ä¼šå¤åˆ¶æ•´ä¸ªçˆ¶è¿›ç¨‹çš„åœ°å€ç©ºé—´ã€‚xv6 Unixçš„forkå°†ä¼šå¤åˆ¶çˆ¶è¿›ç¨‹çš„æ‰€æœ‰é¡µåˆ°æ–°çš„é¡µï¼Œè¿™ä¹Ÿæ˜¯åœ¨dumbforké‡Œé¢åšçš„ã€‚ä½†æ˜¯ï¼Œè¿™æ ·çš„æ“ä½œè€—æ—¶è€Œä¸”é€šå¸¸éƒ½æ˜¯æ— ç”¨åŠŸï¼šåˆ›å»ºå‡ºçš„å­è¿›ç¨‹å¯èƒ½å¾ˆå¿«å°±ä¼šè¢«çˆ¶è¿›ç¨‹å§”æ´¾åŽ»åšå…¶ä»–çš„å·¥ä½œï¼Œå­è¿›ç¨‹çš„åœ°å€ç©ºé—´å¾ˆå¿«ä¼šè¢«æ–°çš„æ•°æ®å–ä»£ã€‚ å‡ºäºŽè¿™ç§è€ƒè™‘ï¼ŒçŽ°åœ¨æ¥å®žçŽ°ä¸€ç§æ–°çš„ç‰¹æ€§ï¼Œå­è¿›ç¨‹ä¸Žçˆ¶è¿›ç¨‹å°†äº«æœ‰åŒä¸€å¥—åœ°å€ç©ºé—´ï¼Œç›´åˆ°æœ‰è¿›ç¨‹çœŸçš„è¦åŽ»ä¿®æ”¹è¿™å—ç©ºé—´ã€‚è¿™æ ·çš„æŠ€æœ¯å«åšcopy-on-writeã€‚ åœ¨è¿™ç§ç‰¹æ€§ä¹‹ä¸‹ï¼Œå½“åˆ›å»ºå­è¿›ç¨‹çš„æ—¶å€™ï¼Œçˆ¶è¿›ç¨‹ä»…ä»…å°†è‡ªå·±çš„æ˜ å°„å…³ç³»ç»™å­è¿›ç¨‹ï¼ŒåŒæ—¶æŠŠè‡ªå·±å…±äº«å‡ºåŽ»çš„é¡µéƒ½æ ‡è®°ä¸ºåªè¯»ã€‚å½“æœ‰ä¸€æ–¹æƒ³è¦ä¿®æ”¹è¯¥è™šæ‹Ÿåœ°å€ç©ºé—´æ—¶è§¦å‘ä¸€ä¸ªpage faultï¼Œè¿™æ—¶ï¼Œå†…æ ¸æ‰çœŸæ­£æ„è¯†åˆ°éœ€è¦ä¸€ä¸ªæ–°çš„é¡µï¼Œè¿™æ—¶æ‰ä¼šåŽ»ä¸ºå‘ç”Ÿé”™è¯¯çš„è¿›ç¨‹ç”³è¯·ä¸€ä¸ªè‡ªå·±çš„é¡µã€‚è¿™æ ·çš„è®¾è®¡ä½¿å¾—å­è¿›ç¨‹åœ¨æ‰§è¡Œä¹‹å‰èŠ±è´¹çš„ä»£ä»·å¾ˆå°‘ï¼Œä¸€èˆ¬åªä¼šæœ‰ä¸€ä¸ªæ ˆçš„é¡µã€‚ User-level page fault handlingç”¨æˆ·å±‚é¢çš„ç¼ºé¡µå¼‚å¸¸æœ‰å¾ˆå¤šç§å¼•èµ·çš„å¯èƒ½ï¼Œcowåªæ˜¯å…¶ä¸­çš„ä¸€ç§ã€‚å†…æ ¸å¿…é¡»èƒ½å¤Ÿå†³å®šä¸ºä¸åŒç¨‹åºç©ºé—´å¼•èµ·çš„ç¼ºé¡µå¼‚å¸¸æä¾›ä¸ä¸€æ ·çš„è§£å†³æ–¹å¼ï¼Œæ¯”å¦‚ï¼Œåœ¨æ ˆä¸­å‘ç”Ÿçš„ç¼ºé¡µå¼‚å¸¸éœ€è¦ç”³è¯·å¹¶mapä¸€ä¸ªç‰©ç†é¡µï¼Œåœ¨bssåŒºåŸŸå¼•èµ·çš„ç¼ºé¡µä¸­æ–­ä¼šç”³è¯·ä¸€ä¸ªå…¨0çš„ç‰©ç†é¡µç„¶åŽæ˜ å°„ã€‚ å¯¹å†…æ ¸æ¥è¯´ï¼Œæœ‰å¾ˆå¤šä¿¡æ¯éƒ½å¯ä»¥ä½œä¸ºåˆ¤æ–­ä¾æ®ï¼ŒæŽ¥ä¸‹æ¥ï¼Œå°†å®Œæˆæˆ‘ä»¬çš„pgfaultå¤„ç†å‡½æ•°ã€‚ Setting the Page Fault Handlerä¸ºäº†å¤„ç†ç¼ºé¡µä¸­æ–­ï¼Œç”¨æˆ·è¿›ç¨‹éœ€è¦å‘å†…æ ¸æ³¨å†Œå¹¶å­˜å‚¨è‡ªå·±çš„ç¼ºé¡µä¸­æ–­å¤„ç†å‡½æ•°çš„å…¥å£ç‚¹ã€‚ä¸ºäº†å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼Œåœ¨Envç»“æž„ä¸­æ–°åŠ äº†æˆå‘˜env_pgfault_upcallã€‚ Exercise 8ï¼šå®Œæˆå‡½æ•°sys_env_set_pgfault_upcallï¼Œç¡®ä¿è¿›è¡Œäº†æƒé™æ£€æŸ¥ã€‚ æ ¹æ®æç¤ºï¼Œè¯¥å‡½æ•°ä¸ºç‰¹å®šè¿›ç¨‹è®¾ç½®ä¸€ä¸ªç¼ºé¡µä¸­æ–­å¤„ç†å‡½æ•°ã€‚è¿™ä¸ªè¿›ç¨‹å¿…é¡»æ˜¯è‡ªå·±æˆ–è€…æ˜¯è‡ªå·±çš„å­è¿›ç¨‹ã€‚å†™å‡ºä»£ç ï¼š Normal and Exception Stacks in User Environmentsåœ¨æ­£å¸¸çš„æ‰§è¡Œä¸­ï¼Œç”¨æˆ·è¿›ç¨‹å°†ä¼šåœ¨ç”¨æˆ·æ ˆä¸­æ‰§è¡Œï¼ŒespæŒ‡å‘æ ˆé¡¶ï¼Œå½“ä¸€ä¸ªç¼ºé¡µä¸­æ–­å‘ç”Ÿçš„æ—¶å€™ï¼Œå†…æ ¸å°†ä¼šä½¿ç”¨æˆ·è¿›ç¨‹é‡æ–°åœ¨å¦ä¸€ä¸ªæ ˆä¸­è¿è¡Œç¼ºé¡µä¸­æ–­çš„å¤„ç†å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ä½¿å†…æ ¸èƒ½å¤Ÿè‡ªåŠ¨æ¢æ ˆã€‚ å¼‚å¸¸æ ˆæœ‰ä¸€ä¸ªpageå¤§å°ï¼Œæœ€é¡¶ç«¯æ˜¯UXSTACKTOPã€‚å› æ­¤ï¼Œç¬¬ä¸€ä¸ªä¸­æ–­å‘ç”ŸåŽå°†ä¼šç©ºé—´UXSTACKTOP-PGSIZEåˆ°UXSTACKTOPä¹‹é—´ä½œä¸ºå¼‚å¸¸æ ˆã€‚åœ¨å¤„ç†å‡½æ•°ä¸­å¯ä»¥é€šè¿‡å„ç§è°ƒç”¨æ¢å¤åŽŸè¿›ç¨‹çš„æ­£ç¡®æ‰§è¡Œï¼ŒéšåŽè¯¥å‡½æ•°è¿”å›žï¼Œå›žåˆ°ä¸Šæ¬¡å‘ç”Ÿä¸­æ–­çš„åœ°æ–¹ï¼Œé‡æ–°æ‰§è¡Œå‡ºé”™ä»£ç ã€‚æ¯ä¸€ä¸ªå¸Œæœ›æœ‰ç”¨æˆ·å±‚æ¬¡çš„ç¼ºé¡µä¸­æ–­å¤„ç†å‡½æ•°çš„è¿›ç¨‹éƒ½å¿…é¡»æ”¯æŒç”³è¯·æ–°é¡µæ¥ä½œä¸ºä»–è‡ªå·±çš„å¼‚å¸¸æ ˆã€‚ Invoking the User Page Fault HandleræŽ¥ä¸‹æ¥æˆ‘ä»¬è¦ä¿®æ”¹trapä¸­çš„ä»£ç ï¼Œä½¿å®ƒæœ‰ä»¥ä¸‹çš„åŠŸèƒ½ã€‚ å¦‚æžœè¿™ä¸ªç”¨æˆ·è¿›ç¨‹å¹¶æ²¡æœ‰è‡ªå·±çš„ç¼ºé¡µä¸­æ–­å¤„ç†å‡½æ•°ï¼Œå½“ä»–æœ‰ç¼ºé¡µä¸­æ–­å‘ç”Ÿçš„æ—¶å€™ï¼Œå°±é”€æ¯è¿™ä¸ªè¿›ç¨‹ç„¶åŽé€€å‡ºï¼Œå¦åˆ™ã€‚ å¼‚å¸¸æ ˆä¸­çš„æƒ…å†µæ˜¯è¿™æ ·çš„ï¼š UXSTTACKTOPæ˜¯æ ˆåº•ï¼Œä¾æ¬¡pushè¿›äº†è®¸å¤šå˜é‡ï¼Œä»–ä»¬ä¸Žç»“æž„UTrapframeå»åˆã€‚å‡½æ•°æ‰§è¡Œç»“æŸåŽï¼Œéœ€è¦ä»Žå¼‚å¸¸æ ˆè¿”å›žåŽŸæœ¬çš„ç”¨æˆ·æ ˆã€‚ å®žé™…æƒ…å†µä¸­å¯èƒ½æ›´åŠ å¤æ‚ï¼šç¼ºé¡µä¸­æ–­é¢å¤„ç†å‡½æ•°æœ¬èº«è¿˜å¯èƒ½ä¼šå‘ç”Ÿä¸­æ–­ï¼Œè¿™æ—¶ï¼Œç»§ç»­å¾€æ ˆé¡¶pushæ•°æ®ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼Œç”±äºŽä¸€äº›åŽŸå› ï¼Œéœ€è¦å…ˆpushä¸€ä¸ª32bitçš„ç©ºä½ã€‚è¿™ä¸ªå°†ä¼šåœ¨åŽé¢è¿›è¡Œè§£é‡Šã€‚å¦‚æžœtf-&gt;tf_espåœ¨ä¸Šè¿°åŒºåŸŸä¹‹ä¸­ï¼Œé‚£ä¹ˆå°±æ˜¯åœ¨å¼‚å¸¸æ ˆä¸­å‘ç”Ÿçš„ç¼ºé¡µä¸­æ–­ï¼Œå¦åˆ™å°±æ˜¯åœ¨åŽŸæœ¬çš„ç”¨æˆ·è¿›ç¨‹ä¸­å‘ç”Ÿçš„ä¸­æ–­ã€‚ Exercise 9 å®Œæˆå‡½æ•°page_fault_handlerã€‚ä»–éœ€è¦å°†ç”¨æˆ·ç©ºé—´çš„ç¼ºé¡µä¸­æ–­ç»™ç”¨æˆ·çš„å¤„ç†å‡½æ•°ã€‚ é¦–å…ˆï¼Œåªæœ‰æœ‰å¤„ç†å‡½æ•°æ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥çš„æ“ä½œï¼Œå¦åˆ™å°†ä¼šfreeæŽ‰è¿™ä¸ªè¿›ç¨‹ã€‚éšåŽç¡®å®šå°†è¦pushçš„ç»“æž„çš„é¦–åœ°å€ã€‚å¦‚æžœå½“å‰è¿›ç¨‹å¯ä»¥è®¿é—®è¿™ä¸ªåœ°å€ï¼Œé‚£ä¹ˆå°±æŠŠå¯¹åº”çš„åœ°å€å†™ä¸ºå¯¹åº”çš„å€¼ï¼Œä¿å­˜å¥½ä¹‹å‰æ‰§è¡ŒçŠ¶æ€çš„ä¿¡æ¯ã€‚ä¿å­˜å®Œä¹‹åŽï¼Œå°†ç¨‹åºçš„ä¸‹ä¸€ä¸ªæ‰§è¡Œåœ°å€è®¾ç½®ä¸ºå‡½æ•°çš„å…¥å£åœ°å€ï¼Œå°†è¯¥è¿›ç¨‹çš„æ ˆé¡¶è®¾ç½®ä¸ºå¼‚å¸¸æ ˆçš„æ ˆé¡¶ï¼Œè¿è¡Œã€‚ User-mode Page Fault EntrypointæŽ¥ä¸‹æ¥ï¼Œéœ€è¦æˆ‘ä»¬å®Œæˆæ‰§è¡ŒCç¨‹åºå¹¶ä¸”è¿”å›žåˆ°åŽŸæ‰§è¡ŒçŠ¶æ€çš„æ±‡ç¼–æŒ‡ä»¤ï¼Œè¯¥æ±‡ç¼–æŒ‡ä»¤æ˜¯sys_env_set_pgfault_upcallçš„å¤„ç†è¿‡ç¨‹ã€‚ Exercise 10ï¼šå®Œæˆlib/pfentry.Sä¸­çš„_pgfault_upcallè¿‡ç¨‹ã€‚ åªéœ€è¦æ ¹æ®æç¤ºï¼Œç»“åˆä¸Šè¿°çš„å¼‚å¸¸æ ˆåŠ¨ä½œï¼š æœ€åŽï¼Œå®ŒæˆCç¨‹åºåº“éƒ¨åˆ†çš„ç¼ºé¡µå¼‚å¸¸å¤„ç†æœºåˆ¶ï¼š Exercise 11ï¼šå®Œæˆlib/pgfault.cä¸­çš„set_pgfault_handlerå‡½æ•°ï¼š Implementing Copy-on-Write Forkforkå‡½æ•°æ˜¯ä¸€ä¸ªcowçš„å­è¿›ç¨‹åˆ›å»ºå‡½æ•°ï¼Œå®ƒçš„æŽ§åˆ¶æµç¨‹æ˜¯è¿™æ ·çš„ï¼š ä½¿ç”¨set_pgfault_handleræ¥ç¡®å®šä¸­æ–­å¤„ç†å‡½æ•°Cç¨‹åºå±‚é¢çš„å…¥å£ è°ƒç”¨sys_exoforkåˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ å¯¹æ¯ä¸€ä¸ªå¯å†™çš„æˆ–æ˜¯cowçš„åœ¨UTOPä¹‹ä¸‹çš„é¡µï¼Œçˆ¶è¿›ç¨‹ä¸ºä¹‹è°ƒç”¨duppageå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°†ä¼šæŠŠcowçš„é¡µmapåˆ°å­è¿›ç¨‹åœ°å€ç©ºé—´ï¼Œç„¶åŽé‡æ–°åœ¨è‡ªå·±çš„åœ°å€ç©ºé—´mapè¿™äº›é¡µã€‚ çˆ¶è¿›ç¨‹ä¸ºå­è¿›ç¨‹è®¾ç½®ç¼ºé¡µä¸­æ–­å¤„ç†å‡½æ•°å…¥å£ç‚¹ å­è¿›ç¨‹å¯ä»¥è¿è¡Œäº†ï¼Œçˆ¶è¿›ç¨‹å°†å…¶æ ‡å¿—ä¸ºRUNNABLE ä¹‹åŽï¼Œæ¯æ¬¡æƒ³è¦ä¿®æ”¹cowé¡µé¢éƒ½ä¼šè§¦å‘ç¼ºé¡µä¸­æ–­ï¼Œè§¦å‘ä¹‹åŽè¿‡ç¨‹å¦‚ä¸‹ï¼š kernelæŠŠpagefaultå‘Šè¯‰_pgfault_upcallï¼Œæ‰§è¡Œå…¥å£è°ƒç”¨pgfaultå‡½æ•° pgfaultæ£€æŸ¥é”™è¯¯æ˜¯å†™é”™è¯¯è€Œä¸”é¡µé¢æ˜¯cowï¼Œå¦åˆ™panic pgfaultç”³è¯·æ–°çš„é¡µï¼Œmapåˆ°ä¸€ä¸ªä¸´æ—¶åœ°å€ï¼ŒæŠŠå‡ºé”™çš„é¡µé¢ä¿¡æ¯copyåˆ°æ–°çš„é¡µé¢ï¼ŒéšåŽæŠŠæ–°é¡µmapåˆ°ä¸€ä¸ªåˆé€‚çš„åœ°å€ã€‚ kernleä¼šæŠŠè¿›ç¨‹çš„é¡µè¡¨éƒ½mapåˆ°UVPTé¡µç›®å½•mapåˆ°UVPDï¼Œæ–¹ä¾¿æ ¹æ®è™šæ‹Ÿåœ°å€èŽ·å–å¯¹åº”é¡µçš„æƒé™ä¿¡æ¯ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€çœ‹è¿™ä¸ªå°æŠ€å·§ã€‚ åœ¨å†…æ ¸ä¸­å¯ä»¥ä½¿ç”¨å‡½æ•°pgdir_walkèŽ·å¾—æƒé™ä¿¡æ¯ï¼Œä½†æ˜¯åœ¨ç”¨æˆ·ç©ºé—´ï¼Œè™šæ‹Ÿåœ°å€çš„ç¿»è¯‘å†³å®šäº†è‡ªèº«çš„é¡µè¡¨ä¸Žé¡µç›®å½•æ˜¯ä¸å¯è§çš„ã€‚ä¸ºäº†æ–¹ä¾¿çš„èŽ·å–æƒé™ä¿¡æ¯ï¼Œæˆ‘ä»¬å‘ç”¨æˆ·è¿›ç¨‹çš„é¡µç›®å½•ä¸­æ’å…¥ä¸€ä¸ªç‰¹æ®Šçš„entryã€‚è¿™ä¸ªentryæŒ‡å‘é¡µç›®å½•çš„é¦–éƒ¨ã€‚ è¿™æ ·ï¼Œå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªPDXä¸ŽPTXå‡æ˜¯ç‰¹å®šæ•°å€¼Vçš„è™šæ‹Ÿåœ°å€æ—¶ï¼Œæˆ‘ä»¬è®¿é—®åˆ°äº†é¡µç›®å½•ã€‚è¿™ä¸ªåœ°å€ä½œä¸ºæŒ‡é’ˆæ•°ç»„çš„å¼€å¤´ï¼Œä½¿ç”¨æŸè™šæ‹Ÿåœ°å€çš„PDXä½œä¸ºç´¢å¼•ï¼Œä½¿æˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°é¡µç›®å½•çš„å„é¡¹ã€‚ å½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªPDXæ˜¯Vä½†æ˜¯PTXä¸æ˜¯Vçš„è™šæ‹Ÿåœ°å€æ—¶ï¼Œæˆ‘ä»¬è®¿é—®åˆ°äº†é¡µè¡¨ã€‚åŒæ ·åœ°æˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°å„ä¸ªé¡µè¡¨é¡¹ã€‚ ä¸Šè¿°æåˆ°çš„ä¸¤ä¸ªè™šæ‹Ÿåœ°å€åˆ†åˆ«æ˜¯UVPDä¸ŽUVPTã€‚åœ¨memlayout.hä¸­å®šä¹‰ã€‚ Exercise 12ï¼šå®Œæˆfrokï¼Œduppageä»¥åŠpgfaultã€‚ partBåˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œåœ¨è¿›å…¥partCä¹‹å‰ï¼Œé¦–å…ˆæ¥æ¢³ç†ä¸€ä¸‹ä»Žforkå¼€å§‹çš„æ•´ä¸ªè¿è¡Œè¿‡ç¨‹ã€‚ å½“ä¸€ä¸ªç”¨æˆ·è¿›ç¨‹è°ƒç”¨forkå‡½æ•°åˆ›å»ºå­è¿›ç¨‹ï¼Œåœ¨forkä¸­å°†ç”³è¯·ä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œå¤åˆ¶çˆ¶è¿›ç¨‹çš„åœ°å€ç©ºé—´æ˜ å°„ç»™å­è¿›ç¨‹å¹¶æŠŠäºŒè€…ç©ºé—´ä¸­çš„å¯¹åº”é¡µéƒ½æ ‡è®°ä¸ºcowï¼ŒéšåŽçˆ¶è¿›ç¨‹ä¸ºå­è¿›ç¨‹ç”³è¯·ç”¨æˆ·æ ˆï¼Œè®¾ç½®ç¼ºé¡µå¤„ç†è¿‡ç¨‹å…¥å£ç‚¹ï¼Œæœ€ç»ˆå°†å­è¿›ç¨‹çš„çŠ¶æ€æ ‡è®°ä¸ºå¯è¿è¡Œã€‚forké€€å‡ºåŽå°†å¾—åˆ°ä¸¤ä¸ªå¯è¿è¡Œçš„è¿›ç¨‹ï¼Œåœ¨å­è¿›ç¨‹ä¸­forkå‡½æ•°è¿”å›žçš„æ˜¯0ï¼Œåœ¨çˆ¶è¿›ç¨‹ä¸­è¿”å›žçš„æ˜¯å­è¿›ç¨‹çš„è¿›ç¨‹idï¼ŒéšåŽäºŒè€…å¯ä»¥åŒºåˆ†å¼€å¼€å§‹è¿è¡Œã€‚ å­è¿›ç¨‹å¼€å§‹è¿è¡Œå…¶ä»–ä¸œè¥¿æˆ–æ˜¯çˆ¶è¿›ç¨‹éœ€è¦å†™æ•°æ®çš„æ—¶å€™ï¼Œå…¶ä¸­ä¸€ä¸ªå¿…ç„¶ä¼šè§¦å‘ä¸€ä¸ªcowçš„ç¼ºé¡µä¸­æ–­ã€‚è¿™ä¸ªè¿›ç¨‹çš„ç¼ºé¡µä¸­æ–­ç»è¿‡å†…æ ¸dispatchï¼Œå°†ä¼šæ‰§è¡Œæˆ‘ä»¬åœ¨trapä¸­å®Œæˆçš„å¤„ç†å‡½æ•°ï¼Œå‡è®¾å®ƒå·²ç»è®¾ç½®äº†è‡ªå·±çš„å¤„ç†å‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºä¸€ä¸ªå¼‚å¸¸æ ˆï¼Œå¼€å§‹æ‰§è¡Œåœ¨pfentry.Sä¸­çš„æ±‡ç¼–ä»£ç ï¼Œæ‰§è¡Œå®Œæ¯•ä¹‹åŽè¿”å›žåŽŸæ¥å‘ç”Ÿé”™è¯¯çš„æ‰§è¡Œä½ç½®ï¼Œç»§ç»­æ‰§è¡Œã€‚ Part C: Preemptive Multitasking and Inter-Process communication (IPC)Clock Interrupts and Preemptionåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸åŒè¿›ç¨‹ä¹‹é—´çš„è°ƒåº¦éƒ½æ˜¯è‡ªæ„¿çš„ã€‚ä¸‹é¢å°†é€šè¿‡å¼•å…¥æ—¶é’Ÿä¸­æ–­æ¥å¼ºåˆ¶è¿›è¡Œè°ƒåº¦ã€‚ Interrupt disciplineå¤–éƒ¨ä¸­æ–­åœ¨æœ¬å®žéªŒä¸­ä¸€å…±æœ‰16ä¸ªï¼Œæ ‡å·æ˜¯32-47ã€‚åœ¨æœ¬å®žéªŒä¸­ï¼Œå†…æ ¸ä¸­çš„å¤–éƒ¨ä¸­æ–­è¢«å¿½ç•¥ï¼Œåœ¨ç”¨æˆ·ç©ºé—´ä¸­é€šè¿‡è®¾ç½®FL_IFæ¥è®¾ç½®å…è®¸å¤–éƒ¨ä¸­æ–­ã€‚ Exercise 13ï¼šä¿®æ”¹trapentry.Sä»¥åŠtrap.cæ¥åˆå§‹åŒ–ä¸Šè¿°çš„ä¸­æ–­ï¼Œç„¶åŽä¿®æ”¹è¯¥env_allocå…è®¸ç”¨æˆ·ç©ºé—´çš„å¤–éƒ¨ä¸­æ–­ åƒä¸Šä¸€ä¸ªå®žéªŒä¸€æ ·å³å¯ï¼š åªéœ€åœ¨æŒ‡å®šçš„ä½ç½®å°†æ–°å»ºçš„envçš„tf_eflagsä¿®æ”¹ä¸ºFL_IFå…è®¸å³å¯ã€‚ Handling Clock Interruptsåœ¨lapic_initä»¥åŠpic_initä¸­ï¼Œå·²ç»è®¾ç½®å¥½äº†äº§ç”Ÿæ—¶é’Ÿä¸­æ–­ï¼Œä¸‹é¢éœ€è¦å¤„ç†æ—¶é’Ÿä¸­æ–­ã€‚ Exercise 14ï¼šä¿®æ”¹trap_dispatchï¼Œå®ƒè°ƒç”¨sched_yieldã€‚ç›´æŽ¥ç»™å‡ºä»£ç ï¼š Inter-Process communication (IPC)è¿›ç¨‹é—´çš„é€šä¿¡æœ‰å¾ˆå¤šç§æ¨¡åž‹ï¼Œè¿™é‡Œåªå®žçŽ°ç®€å•çš„ä¸€ç§ã€‚ IPC in JOSè¿™é‡Œè¿›ç¨‹å¯ä»¥ç›¸äº’å‘é€æˆ–æŽ¥æ”¶çš„ä¿¡æ¯æœ‰ï¼šä¸€ä¸ª32bitçš„æ•°æ®æˆ–æ˜¯ä¸€æ•´ä¸ªé¡µã€‚æ•´ä¸ªé¡µçš„å‘é€æ˜¯é€šè¿‡å…±äº«å†…å­˜æ¥å®žçŽ°çš„ï¼Œè¿™åœ¨ä¸‹é¢å°†å…·ä½“è¯´æ˜Žã€‚ Sending and Receiving Messagesä¸ºäº†æŽ¥æ”¶æ•°æ®ï¼Œè¿›ç¨‹å°†è°ƒç”¨sys_ipc_recvã€‚è¿™ä¸ªç³»ç»Ÿè°ƒç”¨ä½¿è¿™ä¸ªè¿›ç¨‹ä¸å¯è¿è¡Œï¼Œç›´åˆ°æ”¶åˆ°æ•°æ®ã€‚å½“è¿›ç¨‹ç­‰å¾…æŽ¥æ”¶æ¶ˆæ¯æ—¶ï¼Œä»»ä½•å…¶ä»–è¿›ç¨‹éƒ½å¯ä»¥å‘å…¶å‘é€æ¶ˆæ¯ä¸ä¼šæ£€æŸ¥æƒé™ã€‚ ä¸ºäº†å°è¯•å‘é€ä¸€ä¸ªå€¼ï¼Œä¸€ä¸ªçŽ¯å¢ƒè°ƒç”¨sys_ipc_try_sendä¸ŽæŽ¥æ”¶è€…çš„çŽ¯å¢ƒIDå’Œè¦å‘é€çš„å€¼ã€‚å¦‚æžœæŒ‡å®šçš„çŽ¯å¢ƒå®žé™…ä¸Šæ­£åœ¨æŽ¥æ”¶ï¼ˆå®ƒå·²ç»è°ƒç”¨sys_ipc_recvå¹¶ä¸”è¿˜æ²¡æœ‰èŽ·å¾—å€¼ï¼‰ï¼Œåˆ™å‘é€é€’é€æ¶ˆæ¯å¹¶è¿”å›ž0.å¦åˆ™å‘é€è¿”å›ž-E_IPC_NOT_RECVä»¥æŒ‡ç¤ºç›®æ ‡çŽ¯å¢ƒå½“å‰ä¸æœŸæœ›æŽ¥æ”¶å€¼ã€‚ Transferring Pageså½“è¿›ç¨‹ä½¿ç”¨å°äºŽUTOPçš„dstvaè°ƒç”¨sys_ipc_recvæ—¶ï¼Œè¡¨æ˜Žå®ƒæ„¿æ„æŽ¥æ”¶é¡µé¢æ˜ å°„ã€‚å¦‚æžœå‘é€è€…å‘é€ä¸€ä¸ªé¡µé¢ï¼Œé‚£ä¹ˆè¯¥é¡µé¢åº”è¯¥è¢«æ˜ å°„åˆ°æŽ¥æ”¶è€…åœ°å€ç©ºé—´ä¸­çš„dstvaã€‚å¦‚æžœæŽ¥æ”¶è€…å·²ç»æœ‰äº†ä¸€ä¸ªæ˜ å°„åˆ°dstvaçš„é¡µé¢ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡µé¢è¢«unmapã€‚ å½“çŽ¯å¢ƒä½¿ç”¨å°äºŽUTOPçš„srcvaè°ƒç”¨sys_ipc_try_sendæ—¶ï¼Œè¯´æ˜Žå‘é€è€…æƒ³è¦å‘é€å½“å‰æ˜ å°„åˆ°srcvaï¼ˆå‘é€è€…ï¼‰çš„é¡µé¢åˆ°æŽ¥æ”¶è€…ï¼Œå…·æœ‰æƒé™permã€‚åœ¨ä¸€ä¸ªæˆåŠŸçš„IPCä¹‹åŽï¼Œå‘é€è€…åœ¨srcvaçš„åœ°å€ç©ºé—´ä¿ç•™å…¶åŽŸå§‹çš„æ˜ å°„ï¼Œä½†æ˜¯æŽ¥æ”¶è€…ä¹Ÿåœ¨æŽ¥æ”¶è€…çš„åœ°å€ç©ºé—´ä¸­èŽ·å¾—äº†åŽŸæ¥ç”±æŽ¥æ”¶è€…æŒ‡å®šçš„dstvaçš„åŒä¸€ç‰©ç†é¡µé¢çš„æ˜ å°„ã€‚ç»“æžœè¿™ä¸ªé¡µé¢åœ¨å‘é€è€…å’ŒæŽ¥æ”¶è€…ä¹‹é—´è¢«å…±äº«ã€‚ å¦‚æžœå‘é€è€…æˆ–æŽ¥æ”¶è€…ä¸æŒ‡ç¤ºåº”è¯¥ä¼ é€é¡µé¢ï¼Œåˆ™ä¸ä¼ é€é¡µé¢ã€‚åœ¨ä»»ä½•IPCä¹‹åŽï¼Œå†…æ ¸å°†æŽ¥æ”¶æ–¹çš„Envç»“æž„ä¸­çš„æ–°å­—æ®µenv_ipc_permè®¾ç½®ä¸ºæ‰€æŽ¥æ”¶é¡µé¢çš„æƒé™ï¼Œå¦‚æžœæ²¡æœ‰æ”¶åˆ°é¡µé¢ï¼Œåˆ™ä¸ºé›¶ã€‚ Implementing IPC Exercise 15ï¼šæ ¹æ®è¯´æ˜Žè¡¥å……syscallä¸Žipcä¸­çš„å‡½æ•°ï¼š æœ¬å®žéªŒç»“æŸã€‚]]></content>
      <categories>
        <category>OS</category>
        <category>MIT Lab</category>
      </categories>
      <tags>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F12%2F04%2FOS%2F%E4%B8%B2%E8%AE%B2%2F</url>
    <content type="text"><![CDATA[æ–‡ä»¶å†™å…¥æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„inodeèŠ‚ç‚¹æˆ–è€…ç´¢å¼•èŠ‚ç‚¹ï¼Œå¦‚æžœå­˜åœ¨ï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æ‰¾åˆ°å¯¹åº”çš„inodeã€‚ ä¿®æ”¹æ–‡ä»¶å¤¹å¯¹åº”çš„æ•°æ®èŠ‚ç‚¹ã€‚æœ€åˆåªåœ¨å†…å­˜ä¸­ä¿®æ”¹å¹¶æ ‡è®°è¿™å—æ•°æ®å·²ç»è¢«ä¿®æ”¹äº†ï¼Œä½ è®°å¾—å¸®æˆ‘å†™å›žåŽ»ã€‚ closeå¹¶ä¸èƒ½ä½¿æ•°æ®ç«‹å³å›žåˆ°ç¡¬ç›˜ä¸Šã€‚pagebufferå¯ä»¥è¢«ç¦ç”¨ã€‚fsyncå¯ä»¥å¼ºåˆ¶ç«‹å³å†™å›žç£ç›˜ã€‚ //sqliteå°†æ”¶åˆ°æ–‡ä»¶ç³»ç»Ÿç¼“å­˜å½±å“ã€‚ å…ˆå†™æ•°æ®è¿˜æ˜¯å…ˆå†™ç´¢å¼•ï¼Ÿæ›´åå‘äºŽå…ˆå†™æ•°æ®ï¼Œè¿™æ ·é¡¶å¤šä¿®æ”¹å†…å®¹å­˜ä¸ä¸Šï¼Œå¦‚æžœå…ˆå†™ç´¢å¼•ï¼Œå¯èƒ½å¯¼è‡´æ–‡ä»¶ç³»ç»Ÿå°†æ— æ•ˆæ•°æ®è¯¯è®¤ä¸ºæ˜¯æ–‡ä»¶æ•°æ®ã€‚ æ–‡ä»¶åˆ é™¤æ—¶å‘ç”Ÿäº†ä»€ä¹ˆæ‰¾åˆ°å¯¹åº”çš„inodeï¼šè¿™æ—¶åœ¨cacheå†…å­˜ï¼ˆpagecacheï¼‰ä»¥åŠæ–‡ä»¶ç³»ç»Ÿä¸Šéƒ½å­˜æœ‰è¯¥æ–‡ä»¶çš„æ•°æ®ã€‚ åœ¨å†…å­˜ä¸­åˆ é™¤inodeï¼Œæ¸…é™¤é¡µé¢ã€‚æŠŠç¡¬ç›˜ä¸­çš„inodeæ¸…é™¤ï¼Œå¯¹åº”æ•°æ®å—æ¸…é™¤ï¼Œç¡¬ç›˜ä¸­çš„å—æ ‡è®°ä¸ºæœªä½¿ç”¨ï¼Œæ–‡ä»¶å¤¹ä¸­çš„é¡¹åˆ é™¤ã€‚ ä¸€ä¸ªæ–‡ä»¶ï¼ˆå¤¹ï¼‰æ€Žæ ·å«åšå­˜åœ¨ï¼Ÿ1.åœ¨æŸä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹æœ‰å¥¹çš„æ ‘æ ¹çš„ç´¢å¼• 2.åœ¨å ç”¨æœªå ç”¨ä½å›¾ä¸­å­˜åœ¨æ•°æ®å—å ç”¨æ ‡å¿—ã€‚ å¦‚ä½•æ¢å¤ä¸€ä¸ªè¢«è¯¯åˆ çš„æ–‡ä»¶ï¼Ÿå¯»æ‰¾æ ‘æ ¹ã€‚è€Œæ ‘æ ¹æ˜¯æœ‰ç‰¹ç‚¹çš„ã€‚ä¸€ä¸ªæ–‡ä»¶æ¢å¤éœ€è¦æ‰«æä½å›¾ä¸­æ˜¾ç¤ºçš„æœªä½¿ç”¨çš„æ•°æ®å—ï¼Œæ‰¾åˆ°æ ‘æ ¹ï¼Œç„¶åŽé¡ºç€æ ‘æ ¹æ‰¾åˆ°æ‰€æœ‰æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œä¸€æ—¦è¯¯åˆ ï¼Œå°±ä¸èƒ½å†åŠ¨ç¡¬ç›˜äº†ï¼Œå†åŠ¨ç¡¬ç›˜å¯èƒ½ä¼šç ´ååŽŸæ¥çš„æ•°æ®ï¼Œå¯¼è‡´æ–‡ä»¶ç›´æŽ¥æ‰¾ä¸åˆ°æˆ–è€…ç¼ºå¤±æˆ–è€…ï¼Ÿï¼ˆä¸ä¼šä¹±ç å’©ï¼‰ æ€Žæ ·å¿«é€Ÿåˆ é™¤æ–‡ä»¶å¹¶ä¸”ä¸å¯æ¢å¤ï¼Ÿåˆ é™¤ä¸Žè¦†ç›–ã€ä¸Žæ–‡ä»¶ç³»ç»Ÿç›¸å…³ã€æŠŠæˆ‘çš„ç©ºlab5ç»™ä»–å¤åˆ¶è¿‡åŽ»hhhã€‚ å…³æœºæ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿinitåœ¨æŽ¥æ”¶åˆ°ç‰¹å®šä¿¡å·æ—¶å‘èµ·å…³æœº ä½¿ç”¨SIGSTOPæç¤ºå…³æœºï¼Œä½¿ç”¨SIGKILLå¼ºåˆ¶å…³æœº å„ç§å†…å­˜æ•°æ®å›žå†™ã€‚ æ„å¤–æ–­ç”µï¼Ÿ1.å¯èƒ½æ•°æ®åœ¨å†…å­˜ä¸­æ²¡æœ‰è¢«å›žå†™ 2.ç£å¤´æ­£åœ¨é£žè¡Œï¼ˆå¯èƒ½ä¼šæœ‰ä¿æŠ¤æœºåˆ¶ï¼‰ 3.ç£å¤´æ­£åœ¨å†™å…¥å¦‚æžœæžåäº†ç£ä»‹è´¨å¯èƒ½åªæ˜¯è¿™ä¸ªåœ°æ–¹ä¸èƒ½è¯»å†™ï¼Œä½†æ˜¯RAID1å¤šåœ°æœºæˆ¿ã€‚ æ„å¤–æ–­ç”µé˜²æŠ¤ï¼šä½¿ç”¨é‡åŠ›ä¼ æ„Ÿå™¨ï¼Œï¼ˆç£å¤´ï¼‰å¤±é‡æ—¶å°†ä¼šå°½å¿«å†™å…¥æ•°æ®ã€‚ å¼€æœºæ—¶å‘ç”Ÿäº†ä»€ä¹ˆè·³è½¬åˆ°æŒ‡å®šåœ°å€å–æŒ‡ä»¤ï¼ˆ0xfffff0æˆ–0x00000000ï¼ˆæ‰‹æœºï¼‰ï¼‰ï¼šbiosä¸­å­˜åœ¨ä¸€äº›åŸºæœ¬æŒ‡ä»¤ï¼šå…¼å®¹æœºçš„æ ‡å‡†åŒ–ä½¿å¾—BIOSå¯ä»¥é€‚é…å¤§é‡ç¡¬ä»¶ ç¡¬ç›˜æ•°æ®è½½å…¥å†…å­˜ è¿™æ˜¯å› ä¸ºç¡¬ç›˜çš„è¯»å–æ¨¡å¼ä¹Ÿå…¼å®¹ç»™biosçš„è¯»å†™ã€‚ æ ¼å¼åŒ–Cç›˜å†å¤åˆ¶å›žåŽ»ï¼šNTLDR missingï¼šNTFSç³»ç»Ÿè‡ªèº«çš„ä»£ç ã€‚VBRï¼šntfsæ–‡ä»¶ç³»ç»Ÿçš„åŠ è½½å™¨ï¼ŒåŒ…å«æ–‡ä»¶ç³»ç»Ÿçš„è¯»å–æ–¹å¼ä¸Žæ“ä½œç³»ç»Ÿã€‚ä½¿ç”¨vbræŠŠæ–‡ä»¶loadè¿›æ¥ã€‚ æ“ä½œç³»ç»ŸæŽ¥ç®¡è¿è¡Œï¼Œä¸ºè¿›ç¨‹å‡†å¤‡çŽ¯å¢ƒã€‚ initè¿›ç¨‹åˆ›å»ºç”¨æˆ·äº¤äº’è¿›ç¨‹ã€‚winlogonã€‚initä¸åšä»»ä½•æ“ä½œåªç­‰å…³æœºï¼Œå…¶ä»–ä»»åŠ¡éƒ½æ˜¯initçš„å­è¿›ç¨‹çš„å·¥ä½œã€‚ ä¸ºä»€ä¹ˆä¸æ‹·è´ä¸€ä»½æ–°çš„è€Œæ˜¯ä½¿ç”¨çˆ¶è¿›ç¨‹çš„ï¼Ÿå­è¿›ç¨‹ç›´æŽ¥è‡ªå·±è°ƒç”¨execï¼Œç›´æŽ¥è°ƒç”¨ï¼ˆfreertosï¼‰ã€‚æ‹·è´æ‰§è¡Œï¼Ÿï¼Ÿï¼Ÿå­è¿›ç¨‹åœ¨å‡ºæ¥ä¹‹åŽå°±å·²ç»æ˜¯ä¸€ä¸ªå®Œæ•´çš„pcbäº†ã€‚ çˆ¶è¿›ç¨‹å¯ä»¥æŽ¥æ”¶å­è¿›ç¨‹çš„mainå‡½æ•°çš„è¿”å›žå€¼ã€‚çˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹é€€å‡ºï¼Œç”±çˆ¶è¿›ç¨‹æ›¿å­è¿›ç¨‹æ”¶æ‹¾æ®‹å±€ï¼šæ‰¾åˆ°ä»–åˆ†é…çš„é¡µé¢ï¼Œè½¬ä¸ºå¯ç”¨é¡µé¢ã€‚SIGCHILDã€‚å¦‚æžœä¸€ä¸ªè¿›ç¨‹çš„çˆ¶è¿›ç¨‹å…ˆè‡ªå·±é€€å‡ºäº†ï¼Œè¿™ä¸ªå­è¿›ç¨‹çš„çˆ¶è¿›ç¨‹å°±å˜æˆinitã€‚ execæ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æ‰¾åˆ°æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶ç›®å½•æ ‘ å°†æ–‡ä»¶æ˜ å°„å…¥å†…å­˜ ç¨‹åºæ‰§è¡Œ]]></content>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘çš„ç¼–è¯‘å™¨]]></title>
    <url>%2F2017%2F12%2F02%2F%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%2F%E6%88%91%E7%9A%84%E7%BC%96%E8%AF%91%E5%99%A8%2F</url>
    <content type="text"><![CDATA[æˆ‘çš„ç¼–è¯‘å™¨password: password çŽ¯å¢ƒé…ç½®PGçš„é…ç½®VSå±žæ€§çš„é…ç½®å¥½äº†ï¼Œè¿™æ—¶åœ¨PGä¸­çš„ä»»åŠ¡å·²ç»å®Œæˆäº†ï¼ŒæŽ¥ä¸‹æ¥æƒ³è¦ä½¿ç”¨VSæ¥æ‰§è¡ŒPGç”Ÿæˆçš„ç¨‹åºï¼Œè¿˜éœ€è¦è¿›è¡Œä¸€äº›å±žæ€§çš„é…ç½®ã€‚å¤šç§ç»„åˆå¯è¡Œã€‚è¿™é‡Œåªè¯´æ˜Žäº†æˆ‘è‡ªå·±ç”¨çš„ä¸€ç§ç»„åˆï¼Œè·¯å¾„ä¹Ÿä»¥æˆ‘çš„ç”µè„‘ä¸ºå‡†ã€‚æˆ‘çš„æœºå™¨VS2015ï¼Œwin10ã€‚ åœ¨å±žæ€§é¡µé¢æ·»åŠ ï¼š é…ç½®å±žæ€§ -&gt; VC++ç›®å½• -&gt; åŒ…å«ç›®å½•ï¼šD:/Program Filesï¼ˆx86ï¼‰/Parser Generator 2/Cpp/Include é…ç½®å±žæ€§ -&gt; VC++ç›®å½• -&gt; åº“ç›®å½•ï¼šD:/Program Filesï¼ˆx86ï¼‰/Parser Generator 2/Cpp/Lib C/C++ -&gt; é¢„å¤„ç†å™¨ -&gt; é¢„å¤„ç†å™¨å®šä¹‰ï¼šYYDEBUG,_MBCS; C/C++ -&gt; ä»£ç ç”Ÿæˆ -&gt;è¿è¡Œåº“ï¼šå¤šçº¿ç¨‹è°ƒè¯•(/MTd) é“¾æŽ¥å™¨ -&gt; è¾“å…¥ -&gt; é™„åŠ ä¾èµ–é¡¹ï¼šylmtd.lib; æ˜¯YYDEBUG,_MBCS;ä¸­é—´æ˜¯é€—å·ã€‚ $$\color{red}{æ³¨æ„ï¼ä¸Šè¿°é™¤äº†â€œå¤šçº¿ç¨‹è°ƒè¯•â€ï¼Œå…¶ä»–å‡æ˜¯åœ¨åŽŸæœ‰çš„åŸºç¡€ä¸Šæ·»åŠ ã€‚}$$ è¯­æ³•åˆ†æžéƒ¨åˆ†lexä¸Žyaccçš„ç»“åˆlipengçš„ç»“åˆå‚è€ƒç®—äº†ã€‚æ²¡ä»€ä¹ˆç‰¹åˆ«å¤§çš„å‚è€ƒä»·å€¼ï¼Œä»–çš„ç€é‡ç‚¹ä¸Žæˆ‘çš„ä¸åŒã€‚ oracleçš„æ–‡æ¡£ï¼šlex IBMçš„æ–‡æ¡£ï¼šlexâ€“æœ€ç»ˆé—®é¢˜åœ¨è¿™é‡Œé¢è§£å†³ã€‚æŸ¥çœ‹å…¶â€œç»“åˆâ€éƒ¨åˆ†ã€‚ åœ¨lexä¸­æ²¡æœ‰mainå‡½æ•°ï¼Œyylvalæ˜¯åœ¨lexä¸­å®šä¹‰çš„ä¸€ä¸ªå˜é‡ï¼Œä½¿ç”¨extern YYSTYPE yylvalåœ¨yaccä¸­ä½¿ç”¨ã€‚ â€œdefaultâ€æ ‡ç­¾è·³è¿‡â€œ â€çš„åˆå§‹åŒ–æ“ä½œç¼–è¯‘å™¨é”™è¯¯C2361:â€œdefaultâ€æ ‡ç­¾è·³è¿‡â€œ â€çš„åˆå§‹åŒ–æ“ä½œ&amp;rd=true)â€œdefaultâ€æ ‡ç­¾è·³è¿‡â€œ â€çš„åˆå§‹åŒ–æ“ä½œè§£å†³ å‡ºçŽ°â€œdefaultâ€æ ‡ç­¾è·³è¿‡yylvalçš„åˆå§‹åŒ–æ“ä½œçš„åŽŸå› æ˜¯ï¼šåœ¨lexä¸­ï¼Œæˆ‘æŠŠrule sectionçš„æ­£åˆ™è¯­ä¹‰åŠ¨ä½œå®šä¹‰æ®µå†™åœ¨äº†å¯¹yylvalçš„extractä¹‹å‰ã€‚åªè¦æŒªåˆ°åŽé¢ï¼Œè¿™ä¸ªé”™è¯¯å°±ä¸è§äº†ã€‚ï¼ˆè¿™ä¸ªçœ‹ä¸€çœ‹åœ¨cppä¸­çš„é”™è¯¯ä»£ç å°±èƒ½å‘çŽ°å¼‚å¸¸ã€‚ï¼‰ yylvalï¼šæ— æ³•è§£æžçš„å¤–éƒ¨ç¬¦å·å†™é”™åœ°æ–¹äº†ã€‚yylvalæ˜¯åœ¨yaccé‡Œé¢çš„ï¼Œå†™externåº”è¯¥åœ¨lexé‡Œé¢å†™ã€‚ åœ¨yaccä¸­æ— éœ€ç”¨åˆ°yylvalï¼Œè¿™æ˜¯å› ä¸ºåœ¨è¯­ä¹‰åŠ¨ä½œä¸Šï¼Œæ¯”å¦‚NUMBERï¼Œå¦‚æžœä¸å†™ä»–çš„è¯­ä¹‰åŠ¨ä½œï¼Œä»–å°†ä¼šè‡ªåŠ¨æŠŠäº§ç”Ÿå¼å·¦éƒ¨çš„å€¼èµ‹ä¸ºä¸ŽNUMBERä¸€èµ·ç»™yaccçš„yylvalçš„å€¼ã€‚ æˆåŠŸï¼çŽ°åœ¨æ¥æ€»ç»“ä¸€ä¸‹å­ï¼ çŽ°åœ¨æ‹¥æœ‰ï¼šä¸€ä¸ªyaccæ–‡ä»¶åå«myparser.yï¼Œä¸€ä¸ªlexæ–‡ä»¶åå«mylexer.lã€‚åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ—¢æœ‰lexåˆæœ‰yaccçš„é¡¹ç›®ã€‚æŠŠåŽŸæ¥lexä¸­çš„é™¤äº†mainå‡½æ•°ä¹‹å¤–çš„ä¸œè¥¿æ‹·è´åˆ°æ–°ç¨‹åºçš„å¯¹åº”ä½ç½®ï¼ˆä¸å»ºè®®ç›´æŽ¥å…¨éƒ¨å¤åˆ¶ï¼Œå› ä¸ºå¯èƒ½ä¼šæœ‰ç»†å°é—®é¢˜å‡ºçŽ°ã€‚ç‰¹åˆ«æ³¨æ„ä½ åœ¨ç”Ÿæˆprojectçš„æ—¶å€™å®šä¹‰çš„lexerçš„åå­—ï¼ï¼‰æ³¨æ„ä¸Šé¢æåˆ°è¿‡çš„é‚£ä¸ªrule sectionçš„é—®é¢˜ã€‚åœ¨lexerçš„includeå¥ä¹‹åŽå®šä¹‰extern string yylvalï¼ˆæˆ‘è¿™é‡Œä½¿ç”¨stringåªæ˜¯å› ä¸ºæˆ‘çš„YYSTYPEæ˜¯stringï¼Œæˆ‘çš„ä¸èƒ½ç›´æŽ¥ä½¿ç”¨å®YYSTYPEï¼‰åœ¨lexçš„åŒ¹é…è¯­ä¹‰åŠ¨ä½œä¸­åŠ ä¸Šå¯¹yylvalçš„èµ‹å€¼ï¼ˆyylval=yytext;è¿™å¥å°†åŒ¹é…å¯¹åº”çš„å­—ç¬¦ä¸²ç»™yylvalã€‚åŒæ ·å› ä¸ºæˆ‘çš„yylvalæ˜¯stringï¼Œä¸æ˜¯stringå¯ä»¥è‡ªå·±è½¬æ¢ä¸€ä¸‹ã€‚åœ¨lexçš„è¯­ä¹‰åŠ¨ä½œæœ€åŽåŠ ä¸Šreturn NUBER;ï¼ˆNUBERåªæ˜¯ä¸€ä¸ªä¾‹å­ï¼Œåº”è¯¥è¿”å›žè¿™ä¸ªåŒ¹é…å¯¹åº”çš„tokenã€‚æŠŠåŽŸæ¥yaccä¸­çš„ä»£ç æ‹·åˆ°æ–°ç¨‹åºçš„å¯¹åº”ä½ç½®ï¼ˆåŒæ ·ä¸å»ºè®®ç›´æŽ¥å…¨éƒ¨å¤åˆ¶ã€‚å¦‚æžœåŽŸæ¥ä¸æ‡‚yylavlçš„æ„ä¹‰ï¼Œåœ¨å•tokenè¡Œä¹Ÿå†™äº†è¯­ä¹‰åŠ¨ä½œèµ‹å€¼ï¼ŒæŠŠè¿™ä¸ªè¯­ä¹‰åŠ¨ä½œåˆ æŽ‰ï¼Œæˆ–è€…ä½¿ç”¨\$1å¯¹è¿™ä¸ªå€¼åšä½ æƒ³è¦çš„å¤„ç†ä¹‹åŽèµ‹ç»™\$\$ã€‚å¥½äº†ï¼ç”Ÿæˆä¹‹åŽï¼Œåœ¨VSé¡¹ç›®ä¸­è¿è¡Œå°±å¥½å•¦ï¼ ç¬¦å·è¡¨çš„è®¾è®¡ç”±äºŽæ”¯æŒå‡½æ•°ç±»ç­‰æ“ä½œï¼Œæ‰€ä»¥è¦å¢žåŠ å¤šä¸ªç”Ÿå­˜æœŸä½œç”¨åŸŸï¼Œéœ€è¦å¤šä¸ªç¬¦å·è¡¨ã€‚è¿™äº›ç¬¦å·è¡¨å°†åŠ¨æ€ç”Ÿæˆï¼ŒåŽ‹è¿›æ ˆä¸­ã€‚è¿™ä¹Ÿæ˜¯è€ƒè™‘åˆ°ä½œç”¨åŸŸçš„ç‰¹æ€§ã€‚å¦ä¸€æ–¹é¢ï¼Œç”±äºŽä½œç”¨åŸŸä¸Žè¯­æ³•ç›¸å…³ï¼Œç¬¦å·è¡¨çš„åˆ›å»ºï¼ˆé™¤äº†å…¨å±€ç¬¦å·è¡¨ï¼‰åœ¨yaccä¸­å®Œæˆã€‚yaccèŽ·å–æ ˆï¼ŒlexèŽ·å–æ ˆï¼Œå…±åŒæ“ä½œã€‚ C++æ ‡å‡†åº“æ ˆä¸Šè¿°é“¾æŽ¥å…¶å®žæ²¡ä»€ä¹ˆç‰¹åˆ«å¤šçš„ä¸œè¥¿ï¼Œè®°ä½ä¸¤ç‚¹ä¸‰å‡½æ•°ï¼š ä½¿ç”¨stackéœ€è¦åŒ…æ‹¬å¤´æ–‡ä»¶#include&lt;stack&gt; è¿™æ˜¯ä¸ªæ¨¡æ¿ç±»ï¼Œä½¿ç”¨æ—¶æŒ‡å®šç±»åž‹ï¼šstack&lt;CHash*&gt; mystack; å‡½æ•°ä»¬ï¼š å‡½æ•°å ä½œç”¨ top() è¿”å›žæ ˆé¡¶å…ƒç´ ï¼Œä¸å¼¹å‡º pop() å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œä¸è¿”å›ž push(member) å°†memberåŽ‹æ ˆ size() è¿”å›žæ ˆä¸­å…ƒç´ ä¸ªæ•° empty() æ£€æŸ¥æ ˆæ˜¯ä¸æ˜¯ç©º ç®€ç›´æ˜¯æ•‘æ˜Ÿï¼string CString int charç­‰äº’è½¬ è¯­æ³•æ ‘çš„ç”ŸæˆC++çš„æ–‡ä»¶æ“ä½œ è¿™æ¬¡çš„ä½œä¸šæˆ‘èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œä¸»è¦ä¸€ç‚¹å°±æ˜¯æ²¡æœ‰æžæ¸…æ¥šè‡ªå·±ç©¶ç«Ÿè¦å¹²ä»€ä¹ˆã€‚è¿™æ¬¡ä½œä¸šçš„é‡ç‚¹åœ¨äºŽâ€œè¯­æ³•æ ‘ç”Ÿæˆâ€ã€‚ ç¼–è¯‘å™¨å¯¹å‡½æ•°çš„å¤„ç†YACCéƒ¨åˆ†æ³¨æ„ï¼šyaccä¸­çš„æ–‡æ³•å®šä¹‰é¡ºåºæ˜¯éžå¸¸æœ‰å…³ç³»çš„ã€‚ä¸ä¸€æ ·çš„é¡ºåºå°†ä¼šå¸¦æ¥ä¸ä¸€æ ·çš„ç»“æžœã€‚è¶Šé ä¸Šçš„æ–‡æ³•ï¼Œè¶Šä¼šå…ˆè¢«åŒ¹é…ã€‚åœ¨æ·»åŠ äº§ç”Ÿå¼çš„è¿‡ç¨‹ä¸­å‡ºçŽ°äº†â€rules are never reducedâ€ã€‚åœ¨ç¬¬ä¸€æ¬¡å†™ä½œä¸šæ—¶ä¹Ÿå‡ºçŽ°äº†ï¼Œä½†æ˜¯é‚£æ—¶æ²¡æœ‰å¥½å¥½ç§¯ç´¯ã€‚shiftåœ¨è¿™é‡Œæ˜¯â€ç§»å…¥â€œï¼Œreduceæ˜¯â€å½’çº¦â€œã€‚è¿™æ˜¯LRç®—æ³•ä¸­çš„è¯­è¨€ã€‚ ç†è§£â€rules are never reducedâ€-stackoverflow not getting reduced rules are never reduced æ€»ç»“ä¸Šè¿°çš„ä¸€äº›ï¼š å¯èƒ½æ˜¯å› ä¸ºæŒ‡å‡ºçš„é‚£ä¸ªæ²¡æœ‰åœ¨å³è¾¹å‡ºçŽ°è¿‡ã€‚ å¯èƒ½æ˜¯åœ¨å‰é¢çš„æŸä¸ªäº§ç”Ÿå¼åŒ…æ‹¬äº†è¿™ä¸ªäº§ç”Ÿå¼çš„æƒ…å†µï¼Œæ‰€ä»¥ä¸èƒ½è¢«åŒ¹é…ã€‚ ä½ çš„é€’å½’æ²¡æœ‰åŠžæ³•è¢«ç»ˆæ­¢ã€‚ yaccä¼¼ä¹Žä¼šå°†ç¬¬ä¸€ä¸ªäº§ç”Ÿå¼å·¦éƒ¨ä½œä¸ºå¼€å§‹ç¬¦å·ã€‚ In general, you want to use the -v option to get yacc to prodcue a y.output file with detailed information about your grammar. This file will tell you specifically about all the conflicts and unused rules â€“ what they are and how they come about â€“ while the messages just give you a summary of the problems.(ä½¿ç”¨-vé€‰é¡¹æ¥èŽ·å–æ›´è¯¦ç»†çš„è¾“å‡ºä¿¡æ¯ã€‚) æœ‰æ—¶å³ä½¿æ²¡æœ‰é”™è¯¯æˆ–è€…è­¦å‘Šï¼Œç¨‹åºä¹Ÿè¿è¡Œä¸å‡ºæ¥ï¼Œå¤§æ¦‚æ˜¯åŒ¹é…äº†ä¸æ˜¯æœ¬æ„çš„æ–‡æ³•ï¼Œè‡ªå·±çœ‹å§ã€‚æˆ‘å¿ƒæƒ…ä¸å¥½ã€‚ä¸€ç›´æ„Ÿè§‰æ–‡æ³•æ˜¯å¯¹çš„ï¼Œä¸€ç›´è¿è¡Œä¸å‡ºæ¥ã€‚æˆ‘çš„lexæ²¡æœ‰è¿”å›žä¸€äº›tokenç»™yaccã€‚èƒ½è¿è¡Œå°±æ€ªäº†ã€‚ æ²¡æœ‰å¥½å¥½ç†è§£VSé‡Œé¢.hä¸Ž.cppï¼Œä¸è¦éšä¾¿åœ¨é‡Œé¢å†™ä¸€äº›å‡½æ•°ï¼Œç„¶åŽåŒ…æ‹¬åŽ»ä½¿ç”¨ã€‚ LEXéƒ¨åˆ†]]></content>
      <categories>
        <category>ç¼–è¯‘åŽŸç†</category>
      </categories>
      <tags>
        <tag>ç¼–è¯‘åŽŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çç¢Ž]]></title>
    <url>%2F2017%2F12%2F02%2FUntitled-1%2F</url>
    <content type="text"><![CDATA[gitçš„beanchåŽŸæ¥çœŸçš„å¯ä»¥åœ¨æœ¬åœ°ä¹Ÿåˆ‡æ¢å•Šï¼å½“æˆ‘ç”¨git checkout lab3çš„æ—¶å€™ï¼Œæ–‡ä»¶å¤¹é‡Œçš„ä¸œè¥¿ä¹Ÿä¼šè·Ÿç€å˜ã€‚è¿™ä¹Ÿå°±è§£é‡Šäº†ï¼Œä¸ºä»€ä¹ˆæˆ‘æ˜Žæ˜Žä»Žå†™å¥½çš„lab3å¤åˆ¶æ–‡ä»¶åˆ°lab4çš„lab3å´æ²¡ååº”ï¼Œå› ä¸ºæˆ‘æ ¹æœ¬å°±æ²¡æœ‰å¤åˆ¶åˆ°la4æ–‡ä»¶å¤¹çš„lab3åˆ†æ”¯ï¼é¦–å…ˆè¿›å…¥lab3å†å¤åˆ¶ï¼Œæœ€åŽè¿›å…¥lab4åˆ†æ”¯ï¼ŒæŒ‡å®šmerge lab3åˆ†æ”¯ï¼ŒæˆåŠŸï¼ã€‚ GITåˆ†æ”¯ å¹²ä»€ä¹ˆ å¥å­ åˆ é™¤æœ¬åœ°çš„ä¸€ä¸ªåˆ†æ”¯ git branch -d æ–°å¢žåŠ ä¸€ä¸ªåˆ†æ”¯ git checkout -b åˆ é™¤è¿œç¨‹åˆ†æ”¯ git push -delete æˆ‘è§è¿‡çš„é”™è¯¯è§£å†³æ–¹æ³• åœ¨ git merge lab3ä¹‹åŽäº§ç”Ÿå†²çªï¼Œäººä¸ºè§£å†³ä¹‹åŽå†æ¬¡mergeæ— æ³•mergeï¼šåªéœ€æ ¹æ®æç¤ºï¼š 123git add .git commit -m &quot;mesage&quot;git merge lab3 VScmdè¿è¡Œå®Œä¹‹åŽé—ªé€€å¯ä»¥é€šè¿‡æ›´æ”¹å±žæ€§çš„æ–¹å¼è§£å†³ã€‚ä»€ä¹ˆsystem(â€œpauseâ€)å•Šä¹Ÿè¡Œå§ï¼Œä½†æ˜¯æˆ‘è§‰å¾—æ²¡æœ‰å±žæ€§æ¥çš„æ–¹ä¾¿æ°¸ä¹…ã€‚ â€œé…ç½®å±žæ€§â€â€“&gt;â€œé“¾æŽ¥å™¨â€â€“&gt;â€œç³»ç»Ÿâ€ï¼Œç„¶åŽåœ¨å³ä¾§çš„åˆ—è¡¨ä¸­ï¼Œåœ¨ç¬¬ä¸€é¡¹â€å­ç³»ç»Ÿâ€œçš„å€¼ä¸­é€‰æ‹©â€æŽ§åˆ¶å°ï¼ˆ/SUBSUSTEM:CONSOLEï¼‰â€œã€‚]]></content>
      <categories>
        <category>çç¢Ž</category>
      </categories>
      <tags>
        <tag>all</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¼–è¯‘åŽŸç†â€”â€”è¯­æ³•åˆ†æž]]></title>
    <url>%2F2017%2F11%2F29%2F%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%2F%E8%AF%AD%E6%B3%95%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[è¯­æ³•åˆ†æžç»ˆäºŽå¼€å§‹è¯­æ³•åˆ†æžçš„å¤ä¹ äº†ï¼ ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼š1. ä¾¿äºŽæ‰©å……è¯­è¨€ç‰¹æ€§ 2. è¯­æ³•å®¹æ˜“è¢«ç†è§£ 3. æ£€é”™æœºåˆ¶åŠ å…¥ï¼ˆå…¶ä»–å°±ä¸è¡Œï¼Ÿï¼‰ è¯­æ³•åˆ†æžå™¨çš„ä½ç½®ï¼ˆç­‰å¾…åŠ å›¾ï¼‰ é€šç”¨çš„è¯­æ³•åˆ†æžå™¨å‡ ä¹Žæ˜¯ä¸å¯èƒ½ä¿è¯æ•ˆçŽ‡çš„ï¼ˆç›®å‰æœ‰é€šç”¨çš„è¯­æ³•åˆ†æžå™¨ï¼ŒCocke-Younger-Kasamiï¼‰ï¼Œç›®å‰æœ‰ä¸¤ç§ç®—æ³•ï¼Œè‡ªåº•å‘ä¸Šï¼ˆå¯¹åº”æœ€å·¦æŽ¨å¯¼LLï¼‰ï¼Œè‡ªé¡¶å‘ä¸‹ï¼ˆå¯¹åº”æœ€å³æŽ¨å¯¼LRï¼‰ã€‚ è¯­æ³•é”™è¯¯å¤„ç†åœ¨ç¼–ç¨‹ä¸­å¯èƒ½ä¼šå‘ç”Ÿä¸åŒçš„é”™è¯¯ï¼Œåœ¨è¯æ³•ï¼ˆæ‹¼å†™é”™è¯¯ï¼‰ã€è¯­æ³•ï¼ˆå•è¯æ¼å†™ã€é¡ºåºé”™è¯¯ï¼‰ã€è¯­ä¹‰ã€é€»è¾‘ä¸Šéƒ½å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ï¼Œå…¶ä¸­ï¼Œè¯­æ³•é”™è¯¯ç›¸å¯¹è¾ƒå¤šï¼Œæˆä¸ºæ£€æŸ¥é‡ç‚¹ã€‚ å¯¹è¯­æ³•é”™è¯¯çš„åˆ†æžç›¸å¯¹ç®€å•ï¼šå®ƒå…·æœ‰å¯è¡Œå‰ç¼€/æ´»å‰ç¼€ç‰¹æ€§ï¼Œåœ¨ä½¿ç”¨ç»™å®šè¯æ³•ä¸²å‰ç¼€åŠ ä¸Šä¸€äº›å­—ç¬¦ä¸èƒ½æž„æˆè¯¥è¯­æ³•çš„æ­£ç¡®è¯­è¨€ä¸²æ—¶ï¼Œå°±ä¼šå‘ç”Ÿé”™è¯¯ã€‚ å¤„ç†é”™è¯¯æœ‰ä¸‰ä¸ªç›®æ ‡ï¼šæ¸…æ¥šæŠ¥å‘Šå‡ºçŽ°çš„é”™è¯¯ã€å¿«é€Ÿä»Žé”™è¯¯ä¸­æ¢å¤ã€ä¸èƒ½å¯¹æ­£ç¡®ç¨‹åºçš„ç¼–è¯‘å¤„ç†é€ æˆå¤ªå¤§çš„å½±å“ã€‚ ç»™å‡ºä¸€ä¸ªæŠ¥å‘Šé”™è¯¯çš„æ–¹æ³•ï¼šæ‰“å°å‡ºæœ‰é—®é¢˜çš„é‚£è¡Œ -&gt; ç»™å‡ºä¸€ä¸ªé”™è¯¯æ‰€åœ¨åœ°çš„æŒ‡é’ˆ é”™è¯¯å¤„ç†ä¸€èˆ¬åœ¨äºŽè‡ªåœ†å…¶è¯´ã€‚å¾ˆéš¾æ¸…æ™°çš„é¢„æµ‹ç¨‹åºå‘˜åŽŸæœ¬çš„æ„å›¾ï¼Œåªéœ€è¦æŠ¥å‘Šæœ€ä¸€èˆ¬çš„é”™è¯¯å¯èƒ½ã€‚ é”™è¯¯æ¢å¤ç­–ç•¥Panicæ¨¡å¼ï¼šé‡åˆ°é”™è¯¯ä¹‹åŽï¼Œä¸æ–­ä¸¢å¼ƒè¾“å…¥ä¸­çš„ç¬¦å·ã€‚ç›´åˆ°å‘çŽ°$\color{red}{åŒæ­¥è¯æ³•å•å…ƒ}$é›†åˆä¸­çš„ç¬¦å·ã€‚ $\color{red}{åŒæ­¥è¯æ³•å•å…ƒ}$ï¼šé€šå¸¸æ˜¯ç•Œé™ç¬¦ï¼Œæ¯”å¦‚åˆ†å·ã€å³å¤§æ‹¬å·ã€‚ä»–ä»¬çš„æ„å›¾æ¸…æ™°ï¼Œæ²¡æœ‰äºŒä¹‰æ€§ã€‚ç¼–è¯‘å™¨çš„è®¾è®¡è¿™å¿…é¡»ä¸ºè‡ªå·±çš„ç¼–è¯‘å™¨å®šä¹‰åˆé€‚çš„åŒæ­¥è¯æ³•å•å…ƒã€‚ panicæ¨¡å¼å¯èƒ½ä¼šä¸¢æŽ‰å¾ˆå¤šæ­£å¸¸è¾“å…¥ï¼ˆè¿™äº›å¤±åŽ»çš„åˆ†æžæœ‰å¯èƒ½ä¼šå½±å“æŽ¥ä¸‹æ¥çš„åˆ†æžï¼‰ï¼Œä½†æ˜¯è¿™ç§æ¨¡å¼å¾ˆç®€å•ï¼Œèƒ½å¤Ÿä¿è¯ä¸ä¼šè¿›å…¥æ— é™å¾ªçŽ¯ã€‚æŽ¥ä¸‹æ¥çš„å‡ ä¸ªæ–¹æ³•éƒ½ä¸èƒ½ä¿è¯ã€‚ çŸ­è¯­çº§ï¼šå±€éƒ¨ä¿®æ­£ï¼Œç»§ç»­åˆ†æžã€‚æ¯”å¦‚ï¼Œå¯èƒ½ä¼šåšä¸€äº›é€—å·æ¢åˆ†å·ï¼ŒåŠ å‡åˆ†å·çš„æ“ä½œã€‚å·²ç»åœ¨ä¸€äº›ä¿®å¤åž‹ç¼–è¯‘å™¨ä¸­ä½¿ç”¨ã€‚ éœ€è¦é¿å…è¿›å…¥æ— é™å¾ªçŽ¯ã€‚æ¯”å¦‚è®¾å®šæ˜¯â€åœ¨æœ‰é”™è¯¯çš„ä¸²å‰é¢åŠ ä¸€ä¸ªåˆ†å·â€œï¼Œå°±å¯èƒ½ä¼šä¸€ç›´å¾ªçŽ¯ä¸‹åŽ»ã€‚ å¯ä»¥ä¸Žpanicç»“åˆï¼Œé¿å…ä¸¢å¼ƒå¤ªå¤šå•è¯ã€‚ é”™è¯¯äº§ç”Ÿå¼ï¼šæè¿°é”™è¯¯æ¨¡å¼ã€‚ å¯ä»¥æ›´å¥½çš„è¿›è¡Œä¿®æ­£ï¼Œæ£€æµ‹é”™è¯¯ä¿¡æ¯ã€‚ å…¨å±€ä¿®æ­£ï¼šx ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•æ­£å¼å®šä¹‰ä¸€ä¸ªä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ç”±ç»ˆç»“ç¬¦ã€éžç»ˆç»“ç¬¦ã€ä¸€ä¸ªå¼€å§‹ç¬¦å·ã€ä¸€ç»„äº§ç”Ÿå¼ç»„æˆã€‚ä½¿ç”¨ç¬¦å·æè¿°æ˜¯ï¼š$(V{T} , V{N} , S , p)$ åœ¨æ–‡æ³•ä¸­æœ‰ä¸€äº›çº¦å®šçš„å‘½åæ–¹å¼ï¼ˆå¾…è¡¥å……ï¼‰ æŽ¨å¯¼å®žé™…ä¸Šæ˜¯è¯­æ³•ç­‰ä»·çš„ä¸€ä¸ªæ›¿æ¢è¿‡ç¨‹ã€‚ä½¿ç”¨å³éƒ¨æ›¿æ¢å·¦éƒ¨ã€‚ å½¢å¼åŒ–å®šä¹‰ï¼š$$\alphaA\beta \Rightarrow \alpha\gama\beta å½“ä¸”ä»…å½“å­˜åœ¨ A \rightarrow \gama$$ $$ $$ æŽ¨å¯¼ä¸Žè¯­è¨€æœ€å·¦æŽ¨å¯¼ï¼šæ€»æ˜¯æ›¿æ¢æœ€å·¦è¾¹çš„éžç»ˆç»“ç¬¦ æœ€å³æŽ¨å¯¼ï¼šæ€»æ˜¯æ›¿æ¢æœ€å³è¾¹çš„éžç»ˆç»“ç¬¦ å½¢å¼åŒ–å®šä¹‰ï¼š æŽ¨å¯¼ä¸Žè¯­æ³•åˆ†æžæ ‘ä¸€é¢—è¯­æ³•æ ‘å¯èƒ½ä¼šå¯¹åº”å¤šä¸ªæŽ¨å¯¼è¿‡ç¨‹ã€‚å¦‚æžœé™åˆ¶äº†æœ€å·¦æˆ–è€…æœ€å³ï¼Œé‚£ä¹ˆä¸€ä¸ªè¯­æ³•æ ‘å°±åªèƒ½å¯¹åº”ä¸€ä¸ªæŽ¨å¯¼ã€‚ CFGè®¾è®¡æ­£åˆ™è¡¨è¾¾å¼å¯æè¿°ç¬¦å·ä¸²$\in$GFGå¯æè¿°å­—ç¬¦ä¸² NFA-&gt;CFGåœ¨CFGï¼Œä¸Žæ­£åˆ™ä¸åŒçš„æ˜¯ï¼šCFGçš„å¼€å§‹ç¬¦å·æ˜¯æ‰€æœ‰ï¼Œæ­£åˆ™çš„ç»ˆæ€æ˜¯ç©ºä¸²ï¼›CFGçš„ç»ˆæ€æ˜¯ç©ºä¸²ï¼Œæ­£åˆ™çš„ç»ˆæ€æ˜¯æ‰€æœ‰ã€‚ å› æ­¤ï¼š ç»ˆæ€ï¼š$A_i \rightarrow \epsilon$ å½¢å¦‚xy(x!=y)çš„01ä¸²ï¼šï¼ˆä¸èƒ½ç”¨æ­£åˆ™ï¼‰ å¥‡æ•°ä¸²ï¼šS-&gt;B|BSB B-&gt;0|1 å¶æ•°ä¸²ï¼šæ‹†æˆä¸¤ä¸ªç©¿æ‹¼æŽ¥å½¢å¼ã€‚åªè¦ä¸¤ä¸ªå¥‡æ•°ä¸²ä¸­å¿ƒä½ç½®ä¸åŒï¼Œæ‹¼å‡ºçš„å¶æ•°ä¸²å°±ç¬¦åˆä¸Šè¿°æè¿°ã€‚ç»™å‡ºè¯æ˜Žï¼š è¯æ˜Žï¼š CFGéªŒè¯è¯æ˜ŽCFG Gç”Ÿæˆè¯­è¨€Lï¼šäº’ç›¸åŒ…å«ã€‚ ä¸€ä¸ªä¾‹å­ï¼ˆç•¥ï¼‰ CFGä¿®æ”¹ åŽ»é”™ é‡å†™ï¼šæ»¡è¶³ç‰¹æ®Šè¦æ±‚ $$ä¸åˆè¦æ±‚çš„é—®é¢˜\begin{cases}äºŒä¹‰æ€§ \\epsilon-moves \å›žè·¯ \å·¦é€’å½’ \æå–å·¦å…¬å› å­\end{cases}$$ æ¶ˆé™¤äºŒä¹‰æ€§]]></content>
      <categories>
        <category>ç¼–è¯‘åŽŸç†</category>
      </categories>
      <tags>
        <tag>ç¼–è¯‘åŽŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¼–è¯‘åŽŸç†â€”â€”è¯­æ³•åˆ†æž]]></title>
    <url>%2F2017%2F11%2F29%2F%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%2F%E8%AF%AD%E6%B3%95%E5%88%B6%E5%AF%BC%E7%BF%BB%E8%AF%91%2F</url>
    <content type="text"><![CDATA[Tiny Cä¸­çš„è¯­æ³•æ ‘ï¼šèŠ‚ç‚¹åˆ†ä¸ºä¸¤ç±» è¯­å¥ è¡¨è¾¾å¼ è¯­å¥è¿˜å¯ä»¥ç»†åˆ†ï¼Œè¡¨è¾¾å¼è¿˜å¯ä»¥ç»†åˆ†ã€‚ æ³¨æ„ï¼Œæœ‰äº›å¶èŠ‚ç‚¹æ˜¯ä¸éœ€è¦ä¿å­˜çš„ã€‚æ¯”å¦‚è¯´if statementï¼Œif ( ) elseéƒ½å¯ä»¥ä¸éœ€è¦ä¿å­˜ã€‚ å…·ä½“åˆ›å»ºæ ‘æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯é€’å½’ä¸‹é™çš„å½¢å¼ï¼Œå¦ä¸€ç§æ˜¯yaccçš„å½¢å¼ï¼Œä¸Žè¯­æ³•åˆ¶å¯¼å®šä¹‰ç›¸ä¼¼ã€‚ ï¼ˆå“‡é‚£æˆ‘å¾ˆå¤šéƒ½å†™é”™äº†â€¦è¿™ä¸¤å¤©æ˜¯ç™½å¹²äº†å—â€¦ï¼‰]]></content>
      <categories>
        <category>ç¼–è¯‘åŽŸç†</category>
      </categories>
      <tags>
        <tag>ç¼–è¯‘åŽŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Lab3_Document]]></title>
    <url>%2F2017%2F11%2F27%2FOS%2FLab3_Document%2F</url>
    <content type="text"><![CDATA[Lab3 DocumentPart Aï¼šUser Enviornments and Exception Handlingåœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œé¦–å…ˆéœ€è¦äº†è§£å…³äºŽåœ¨æœ¬å®žéªŒä¸­envï¼ˆè¿›ç¨‹ï¼‰çš„ç›¸å…³å®šä¹‰ï¼š 12345678//in inc/env.henum &#123; ENV_FREE = 0, ENV_DYING, ENV_RUNNABLE, ENV_RUNNING, ENV_NOT_RUNNABLE&#125;; è¿™æ˜¯åœ¨æœ¬å®žéªŒä¸­å®šä¹‰çš„è¿›ç¨‹çŠ¶æ€ï¼Œåœ¨å®žéªŒä¸­ï¼Œä»…ç”¨åˆ°äº†ENV_FREEã€ENV_RUNNABLEã€ä»¥åŠENV_RUNNINGã€‚ ç±»ä¼¼äºŽè¯¾ä¸Šè®²çš„pcbï¼Œåœ¨æœ¬å®žéªŒä¸­å¯¹ä¸€ä¸ªè¿›ç¨‹çš„æè¿°å®šä¹‰å¦‚ä¸‹ï¼š //in inc/env.c ç¬¬ä¸€ä¸ªå˜é‡env_tfæ˜¯å½“ä¸­æ–­æˆ–å¼‚å¸¸æˆ–ç³»ç»Ÿè°ƒç”¨å‘ç”Ÿçš„æ—¶å€™ï¼Œè¯¥è¿›ç¨‹éœ€è¦ä¿å­˜çš„å¯„å­˜å™¨çš„å€¼ï¼›æœ€åŽä¸€ä¸ªå˜é‡æŒ‡æ˜Žäº†è¯¥è¿›ç¨‹çš„åœ°å€ç©ºé—´ã€‚ åœ¨kern/env.cä¸­å¯ä»¥çœ‹åˆ°ï¼Œå…³äºŽè¿›ç¨‹ï¼Œæœ‰ä¸‰ä¸ªå…¨å±€çš„å˜é‡ï¼š 123struct Env *envs = NULL;// All environmentsstruct Env *curenv = NULL;// The current envstatic struct Env *env_free_list;// Free environment list åœ¨é©¬ä¸Šè¿›è¡Œçš„åˆå§‹åŒ–ä¹‹åŽï¼Œåœ¨envsæ‰€æ ‡è¯†çš„ç‰©ç†åœ°å€å¼€å§‹ï¼Œä¸€ç›´åˆ°NENV\*(struct Env)ç»“æŸï¼Œæ˜¯æ‰€æœ‰å¯ä»¥è¢«ä½¿ç”¨çš„è¿›ç¨‹æè¿°ç»“æž„å ç”¨çš„ç©ºé—´ï¼Œæ¯ä¸€ä¸ª(struct Env)å¤§å°éƒ½æ˜¯ä¸€ä¸ªå¯ç”¨çš„Envæè¿°ã€‚curenvè¢«æŒ‡ç¤ºä¸ºæ˜¯å½“å‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚env_free_listæŒ‡å‘ç¬¬ä¸€ä¸ªå¯ä»¥ä½¿ç”¨çš„è¿›ç¨‹æè¿°ç»“æž„ï¼Œè¿™æ ·çš„è®¾è®¡ä½¿å¾—è¿›ç¨‹æè¿°ç»“æž„çš„ç”³è¯·ä¸Žé”€æ¯éƒ½å˜å¾—å¾ˆå®¹æ˜“ï¼Œè€Œä¸”ç”±äºŽè¯¥é“¾è¡¨ä¸­å­˜å‚¨çš„æ˜¯å¤„äºŽENV_FREEçŠ¶æ€çš„è¿›ç¨‹ï¼Œå¾ˆå°‘éœ€è¦æœ‰æ·»åŠ åˆ é™¤çš„è¿‡ç¨‹ã€‚ Allocating the Environments Arrayå°±åƒåœ¨å®žéªŒäºŒä¸­é‚£æ ·ï¼Œåœ¨è¿™é‡Œéœ€è¦ä¿®æ”¹pmap.cä¸­çš„ä»£ç ï¼Œä¸ºenvsæ˜ å°„ç©ºé—´ã€‚ä»¿ç…§åœ¨lab2ä¸­çš„å†™æ³•ï¼Œä¿®æ”¹ç¨‹åºå¦‚ä¸‹ï¼š 12//in kern/pmap.c the first LAB3: Your code hereenvs=(struct Env\*)(boot\_alloc(NENV\*sizeof(struct Env)));//ä¸ºEnvç»“æž„ç”³è¯·ç©ºé—´ 1234//in kern/pmap.c the second LAB3: Your code herefor(int i=0;i&lt;ROUNDUP(NENV\*sizeof(struct Env),PGSIZE);i+=PGSIZE)&#123; page_insert(kern_pgdir,(struct PageInfo\*)pa2page(PADDR(envs)+i),(void\*)(UENVS+i),PTE_U); &#125; åƒåœ¨lab2ä¸­åšè¿‡çš„é‚£æ ·ï¼Œboot\_map\_regionä½¿å¾—ä»ŽPADDR(envs)å¼€å§‹ï¼Œè¿žç»­PTSIZEçš„ç‰©ç†ç©ºé—´æ˜ å°„åˆ°ä»ŽUENVSå¼€å§‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸Šã€‚ åšåˆ°è¿™é‡Œå°è¯•make qemuçš„æ—¶å€™ï¼Œå‘çŽ°å¤±è´¥äº†ã€‚ æ³¨æ„ï¼šå›žæƒ³åœ¨lab2ä¸­æ‰€åšçš„å·¥ä½œï¼Œåœ¨page_initå‡½æ•°ä¸­æ›¾ç»ä¸ºæ²¡æœ‰ç”¨çš„é¡µé¢åŠ å…¥freelistã€‚æŸ¥çœ‹å½“æ—¶çš„ä»£ç å‘çŽ°ï¼Œé‚£æ—¶è®¡ç®—å‰©ä½™ç©ºé—´çš„æ—¶å€™ï¼Œæ˜¯ä»Žä¸ºnpagesåˆ†é…ç©ºé—´å‘¢çš„åŽä¸€é¡µå¼€å§‹è®¡ç®—çš„ã€‚åœ¨mem_initä¸­ä¿®æ”¹äº†ä¹‹åŽçš„æ˜ å°„ä¹‹åŽï¼Œè¿™æ—¶çš„freeliståº”è¯¥ä»Ženvså ç”¨æ‰€æœ‰ç©ºé—´ä¹‹åŽçš„ç¬¬ä¸€é¡µè¿›è¡Œæ·»åŠ ï¼ŒäºŽæ˜¯ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š 1234567int begin=(int)ROUNDUP(((char*)envs) + (sizeof(struct Env) * NENV) - 0xf0000000, PGSIZE);for (i=begin/PGSIZE;i&lt;npages;i++)&#123; pages[i].pp_ref=0; pages[i].pp_link=page_free_list; page_free_list=&amp;pages[i];&#125; å†æ¬¡make qemuï¼Œå¾—åˆ°ç»“æžœå¦‚ä¸‹ï¼š Creating and Running Environmentsåœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œå°†ä¼šå®Œå–„kern/env.cä¸­çš„å†…å®¹ï¼Œæ¥å»ºç«‹èµ·ä¸€ä¸ªè¿›ç¨‹æ“ä½œçš„é›å½¢ã€‚ ç”±äºŽè¿˜æ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œè¿™æ—¶æˆ‘ä»¬ç”¨ä¸€ä¸ªæŠ€å·§æ¥éª—è¿‡boot loaderï¼Œä½¿å¾—bootloaderåŠ è½½kernelçš„æ—¶å€™ä¹ŸæŠŠæˆ‘ä»¬éœ€è¦çš„ç”¨æˆ·ç¨‹åºåŠ è½½è¿›æ¥ã€‚è¿™äº›ç”¨æˆ·ç¨‹åºåœ¨useræ–‡ä»¶å¤¹ä¸‹ã€‚ é¦–å…ˆï¼Œ -b binary optionå‘Šè¯‰ç¼–è¯‘å™¨åªéœ€è¦å°†ç¨‹åºç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦ç”Ÿæˆ.oæ–‡ä»¶ï¼ŒéšåŽæŠŠè¿™ä¸ªæ–‡ä»¶ä½œä¸ºä¸€ä¸ªè¾ƒå¤§çš„æ•°ç»„æ”¾åœ¨æœ€åŽï¼ŒåŒæ—¶åœ¨çœŸæ­£åº”è¯¥è¢«æ¬è¿›å†…å­˜çš„æ–‡ä»¶ä¸­å£°æ˜Žexternå˜é‡ï¼Œå‘Šè¯‰ç¼–è¯‘å™¨åœ¨é“¾æŽ¥ä¹‹å‰å…ˆä¸è¦ç®¡è¿™ä¸ªã€‚éšåŽï¼Œåœ¨é“¾æŽ¥é˜¶æ®µï¼Œå¤§æ•°ç»„å·²ç»è¢«loadè¿›æ¥ï¼Œä¸Žå…¶ä»–ä»£ç ä¸€åŒè¿›è¡Œåœ°å€æ˜ å°„ã€‚æœ€ç»ˆè¿™é‡Œçš„ä»£ç å¯ä»¥è¢«æ‰§è¡Œã€‚ æŸ¥çœ‹kern/init.cæ–‡ä»¶ï¼Œå‘çŽ°åœ¨æ‰€æœ‰åˆå§‹åŒ–ä¹‹åŽæœ‰è¿™æ ·çš„è¯­å¥ï¼š 1234567#if defined(TEST) // Don't touch -- used by grading script! ENV_CREATE(TEST, ENV_TYPE_USER);#else // Touch all you want. ENV_CREATE(user_testbss, ENV_TYPE_USER);#endif è¿™æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼šå¦‚æžœç”¨æˆ·é‡‡ç”¨make qemuçš„æ–¹å¼è¿è¡Œï¼Œé‚£ä¹ˆå°±åˆ›å»ºä¸€ä¸ªuser_testbssè¿™æ ·çš„ç”¨æˆ·è¿›ç¨‹ï¼Œå®žé™…ä¸Šå°±æ˜¯æ‰§è¡Œtestbss.cæ–‡ä»¶ç”Ÿæˆçš„é‚£ä¸ªbinaryã€‚ åœ¨envå®Œæˆä¹‹åŽå¯¹è¿™é‡Œè¿›è¡Œæ›´æ·±ä¸€æ­¥çš„è®¨è®ºã€‚ æŽ¥ä¸‹æ¥éœ€è¦å†™å‡ºä¸‹é¢å‡ ä¸ªå‡½æ•°çš„ä»£ç ï¼š env_init env_setup_vm region_alloc load_icode env_create env_run 12345678910111213141516171819202122232425262728293031// Mark all environments in 'envs' as free, set their env_ids to 0,// and insert them into the env_free_list.//æŠŠæ‰€æœ‰çš„envsè®¾ç½®æˆfreeçš„ï¼Œä»–ä»¬çš„idéƒ½æ˜¯0ï¼Œç„¶åŽæ’å…¥freelist// Make sure the environments are in the free list in the same order// they are in the envs array (i.e., so that the first call to// env_alloc() returns envs[0]).//éœ€è¦ä¿è¯æ‰€æœ‰åœ¨freelisté‡Œé¢çš„envçš„é¡ºåºä¸Žåœ¨æ•°ç»„ä¸­çš„envç›¸åŒï¼Ÿï¼Ÿï¼Ÿ////æœ¬å‡½æ•°ï¼šåˆå§‹åŒ–æ‰€æœ‰åœ¨envæ•°ç»„ä¸­çš„çš„envç»“æž„ï¼ŒæŠŠå®ƒä»¬åŠ åˆ°freelisté‡Œé¢ï¼Œè¦æ±‚å¦‚ä¸Šã€‚//åœ¨meminitä¹‹åŽæ‰§è¡Œã€‚//envæ•°ç»„ï¼š*envsï¼Œå½“å‰ï¼š*curenvï¼Œfreelistï¼š*env_free_listvoidenv_init(void)&#123; struct Env*current=NULL; int i=NENV-1; //ä¸€å…±NENVä¸ªenv while(i&gt;=0)&#123; //NENV is defined in inc/env.h //current-&gt;env_tf=3; envs[i].env_id=0; envs[i].env_runs=0;// current-&gt;env_pgdir=NULL; envs[i].env_link=env_free_list; env_free_list=&amp;envs[i]; i--;&#125; // Per-CPU part of the initialization env_init_percpu(); cprintf("envinit done!\n");&#125; è¿™ä¸ªå‡½æ•°æ¯”è¾ƒç®€å•ï¼Œéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯è¦æ±‚å€’ç€æ·»åŠ åˆ°é“¾è¡¨é‡Œé¢ã€‚å…¶ä»–åªæ˜¯æŒ‰ç…§è¦æ±‚å†™çš„ä»£ç ã€‚ è¿™ä¸ªå‡½æ•°åœ¨æœ€åŽæ‰§è¡Œäº†ä¸€ä¸ªå·²ç»å®Œæˆçš„å‡½æ•°ï¼šenv_init_percpuï¼Œå¦‚ä¸‹å›¾ï¼š è¯¥å‡½æ•°å®Œæˆå¯¹å„ä¸ªæ®µå¯„å­˜å™¨çš„è®¾ç½®ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738//ä¸ºè¿›ç¨‹eåˆå§‹åŒ–å†…æ ¸è™šæ‹Ÿç©ºé—´static intenv_setup_vm(struct Env *e)&#123; int i; struct PageInfo *p = NULL; // Allocate a page for the page directory if (!(p = page_alloc(ALLOC_ZERO))) return -E_NO_MEM; // Now, set e-&gt;env_pgdir and initialize the page directory. //åˆå§‹åŒ–pagedirï¼Ÿ // Hint: // - The VA space of all envs is identical above UTOP // (except at UVPT, which we've set below). // See inc/memlayout.h for permissions and layout. // Can you use kern_pgdir as a template? Hint: Yes. // (Make sure you got the permissions right in Lab 2.) //æ‰€æœ‰envsçš„è™šæ‹Ÿåœ°å€ç©ºé—´éƒ½åœ¨UTOPä¹‹ä¸Š //æŸ¥çœ‹inc/memlayout.hçœ‹è®¸å¯ä»¥åŠå¸ƒå±€ //å¯ä»¥ä½¿ç”¨kern_pgdirä½œä¸ºä¸€ä¸ªæ¨¡æ¿ // - The initial VA below UTOP is empty. // - You do not need to make any more calls to page_alloc. // - Note: In general, pp_ref is not maintained for // physical pages mapped only above UTOP, but env_pgdir // is an exception -- you need to increment env_pgdir's // pp_ref for env_free to work correctly. // - The functions in kern/pmap.h are handy. // LAB 3: Your code here. e-&gt;env_pgdir=(pde_t*)page2kva(p);//page2kva in pmap.c p-&gt;pp_ref++; memcpy(e-&gt;env_pgdir,kern_pgdir,PGSIZE);//kernel's e is the kernel's e //permission:RR //p[PDX(UTOP)] = PADDR(p) | PTE_U | PTE_P; // UVPT maps the env's own page table read-only. // Permissions: kernel R, user R e-&gt;env_pgdir[PDX(UVPT)] = PADDR(e-&gt;env_pgdir) | PTE_P | PTE_U; return 0;&#125; 123456789101112131415161718192021//ä¸ºè¿›ç¨‹ç”³è¯·lenå­—èŠ‚çš„ç‰©ç†åœ°å€ç©ºé—´ï¼Œç„¶åŽæŠŠå®ƒmapåˆ°vastatic voidregion_alloc(struct Env *e, void *va, size_t len)&#123; // LAB 3: Your code here. // (But only if you need it for load_icode.) // // Hint: It is easier to use region_alloc if the caller can pass // 'va' and 'len' values that are not page-aligned. //å¦‚æžœå…è®¸ä¼ å…¥ä¸æ˜¯é¡µå¯¹é½çš„vaï¼ˆè™šæ‹Ÿåœ°å€ï¼‰å’Œlenï¼ˆé•¿åº¦ï¼‰çš„è¯ä¼šæ›´å¥½ä¸€äº› // You should round va down, and round (va + len) up. // (Watch out for corner-cases!) //ä»€ä¹ˆå«corner-cases //èŽ·å–é¦–åœ°å€ //åªæ˜¯ç”³è¯·äº†é¡µé¢ï¼Œå…¶å®žæ²¡æœ‰çœŸæ­£çš„ç‰©ç†ç©ºé—´ for(int i=(uint32_t)ROUNDDOWN(va,PGSIZE);i&lt;(uint32_t)ROUNDUP(va+len,PGSIZE);i+=PGSIZE)&#123; struct PageInfo*pa=page_alloc(0); if(pa==NULL)panic("fail to alloc !in region_alloc!"); page_insert(e-&gt;env_pgdir,pa,(void*)i,PTE_U|PTE_W); &#125;&#125; è¯¥å‡½æ•°æŒ‡å®šè¿›ç¨‹ç”³è¯·ä»ŽæŒ‡å®šè™šæ‹Ÿåœ°å€å¼€å§‹çš„lenå­—èŠ‚ç©ºé—´ã€‚ç”±äºŽvsä¸Žva+lenå¯èƒ½ä¸æ˜¯é¡µé¢å¯¹é½çš„ï¼Œå› æ­¤çœŸæ­£åœ¨åˆ†é…é¡µé¢çš„æ—¶å€™ï¼Œéœ€è¦åšæ“ä½œROUNDOWNä¸ŽROUNDUPæ¥è¿›è¡Œé¡µé¢çš„å¯¹é½ã€‚å½“ç”³è¯·é¡µé¢å¤±è´¥æ—¶ï¼Œpanicï¼Œå¦åˆ™å°±å°†é¡µé¢æ’å…¥åˆ°å½“å‰è¿›ç¨‹çš„pgdirä¸­ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738static voidload_icode(struct Env *e, uint8_t *binary)//binaryï¼šELF&#123;//æ³¨æ„ï¼Œå¯¹åº”çš„ç”¨æˆ·æ•°æ®å·²ç»åœ¨å†…å­˜ä¸­äº† struct Elf*elf=(struct Elf*)binary;//ç»™å®šçš„ELFæ–‡ä»¶å¤´ç»“æž„ï¼ˆæ›´è¯¦ç»†çš„ï¼ŒæŸ¥çœ‹inc/elf.hï¼‰ struct Proghdr *ph, *eph;//ELFæ–‡ä»¶æŒ‡å®šç¨‹åºæ®µçš„ç¨‹åºå¤´ // is this a valid ELF? if (elf-&gt;e_magic != ELF_MAGIC) panic("not a elf!"); ph = (struct Proghdr *) ((uint8_t *) elf + elf-&gt;e_phoff);//ç¬¬ä¸€ä¸ªç¨‹åºå¤´å¼€å§‹ eph = ph + elf-&gt;e_phnum;//æœ€åŽä¸€ä¸ªä¸æ˜¯ç¨‹åºå¤´ç»“æž„å¼€å§‹çš„ä½ç½® lcr3(PADDR(e-&gt;env_pgdir));//å°†CR3ä¸­è£…è½½è¿›åŽ»è¿™æ¬¡çš„é¡µç›®å½• for (; ph &lt; eph; ph++)&#123; if(ph-&gt;p_type==ELF_PROG_LOAD)&#123; region_alloc(e,(void*)ph-&gt;p_va,ph-&gt;p_memsz); //ç”³è¯·ä»Žph-&gt;p_vaç¨‹åºå‡è®¾è‡ªå·±æ‰€åœ¨çš„è™šæ‹Ÿåœ°å€å¼€å§‹ï¼Œåˆ°va+memszç»“æŸçš„ç©ºé—´ memmove((void*)ph-&gt;p_va,binary+ph-&gt;p_offset,ph-&gt;p_filesz); // The ph-&gt;p_filesz bytes from the ELF binary, starting at // 'binary + ph-&gt;p_offset', should be copied to virtual address // ph-&gt;p_va. Any remaining memory bytes should be cleared to zero. // (The ELF header should have ph-&gt;p_filesz &lt;= ph-&gt;p_memsz.) // Use functions from the previous lab to allocate and map pages. //åœ¨ELFä¸­çš„ph-&gt;p_fileszå­—èŠ‚çš„ï¼Œä»Žbinary+ph-&gt;p_offsetéƒ½åº”è¯¥è¢«copyåˆ°è™šæ‹Ÿåœ°å€ç©ºé—´ph-&gt;p_va //ä»»ä½•å‰©ä½™çš„ç©ºé—´è¢«æ¸…é›¶ memset((void*)(ph-&gt;p_va+ph-&gt;p_filesz),0,ph-&gt;p_memsz-ph-&gt;p_filesz);//eme2file //memcpy((void*)ph-&gt;p_va,binary+ph-&gt;p_offset,ph-&gt;p_filesz); &#125; &#125;//after modification , everything is OK! // call the entry point from the ELF header // note: does not return! //((void (*)(void)) (ELFHDR-&gt;e_entry))(); e-&gt;env_tf.tf_eip=elf-&gt;e_entry; // Now map one page for the program's initial stack // at virtual address USTACKTOP - PGSIZE. // LAB 3: Your code here. region_alloc(e,(void*)(USTACKTOP-PGSIZE),PGSIZE); lcr3(PADDR(kern_pgdir));&#125; è¯¥å‡½æ•°è´Ÿè´£æŠŠå·²ç»è£…å…¥å†…å­˜çš„binaryæ–‡ä»¶é‡æ–°è£…è½½åˆ°ELFæ–‡ä»¶å¤´ä¸­æŒ‡å®šçš„ä½ç½®ï¼Œå¹¶ä¸ºç”¨æˆ·è¿›ç¨‹åˆ›å»ºä¸€ä¸ªæ ˆã€‚ 123456789101112voidenv_create(uint8_t *binary, enum EnvType type)&#123; // LAB 3: Your code here. struct Env *newenv_store; int result=env_alloc(&amp;newenv_store,0); if(result&lt;0)panic("env_alloc: %e", result); ; if(result==0)&#123; newenv_store-&gt;env_type=type; load_icode(newenv_store,binary); &#125;&#125; è¿™é‡Œä½¿ç”¨åˆ°äº†å·²ç»å®šä¹‰å¥½çš„å‡½æ•°ï¼šenv_allocã€‚env_createæœ¬èº«æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹env_allocï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647intenv_alloc(struct Env **newenv_store, envid_t parent_id)&#123; int32_t generation; int r; struct Env *e; //æ²¡æœ‰æ–°çš„å¯ä»¥ç”¨äº† if (!(e = env_free_list)) return -E_NO_FREE_ENV; // Allocate and set up the page directory for this environment. if ((r = env_setup_vm(e)) &lt; 0) return r; // Generate an env_id for this environment. generation = (e-&gt;env_id + (1 &lt;&lt; ENVGENSHIFT)) &amp; ~(NENV - 1); if (generation &lt;= 0) // Don't create a negative env_id. generation = 1 &lt;&lt; ENVGENSHIFT; e-&gt;env_id = generation | (e - envs); // Set the basic status variables. e-&gt;env_parent_id = parent_id; e-&gt;env_type = ENV_TYPE_USER; e-&gt;env_status = ENV_RUNNABLE; e-&gt;env_runs = 0; // Clear out all the saved register state, // to prevent the register values // of a prior environment inhabiting this Env structure // from "leaking" into our new environment. memset(&amp;e-&gt;env_tf, 0, sizeof(e-&gt;env_tf)); // Set up appropriate initial values for the segment registers. // GD_UD is the user data segment selector in the GDT, and // GD_UT is the user text segment selector (see inc/memlayout.h). // The low 2 bits of each segment register contains the // Requestor Privilege Level (RPL); 3 means user mode. When // we switch privilege levels, the hardware does various // checks involving the RPL and the Descriptor Privilege Level // (DPL) stored in the descriptors themselves. e-&gt;env_tf.tf_ds = GD_UD | 3; e-&gt;env_tf.tf_es = GD_UD | 3; e-&gt;env_tf.tf_ss = GD_UD | 3; e-&gt;env_tf.tf_esp = USTACKTOP; e-&gt;env_tf.tf_cs = GD_UT | 3; // You will set e-&gt;env_tf.tf_eip later. // commit the allocation env_free_list = e-&gt;env_link; *newenv_store = e; cprintf("[%08x] new env %08x\n", curenv ? curenv-&gt;env_id : 0, e-&gt;env_id); return 0;&#125; è¯¥å‡½æ•°å®Œæˆä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ“ä½œï¼Œç”³è¯·æ–°è¿›ç¨‹ï¼Œåœ°å€ç©ºé—´ç”³è¯·ï¼Œä¸€äº›å±žæ€§çš„è®¾ç½®ï¼ˆè¿™ä¹Ÿæ˜¯åœ¨env_initä¸­ä¸æ˜¯åšè®¾ç½®çš„åŽŸå› ï¼‰ï¼Œå¯„å­˜å™¨å€¼çš„æ¸…ç†ä¸Žè®¾ç½®ç­‰ç­‰ã€‚ 123456789101112131415voidenv_run(struct Env *e)&#123; if (curenv != e) &#123; // if (curenv-&gt;env_status == ENV_RUNNING) // curenv-&gt;env_status = ENV_RUNNABLE; curenv = e; e-&gt;env_status = ENV_RUNNING; e-&gt;env_runs++; lcr3(PADDR(e-&gt;env_pgdir));//å°†å½“å‰çš„åœ°å€ç©ºé—´è®¾ç½®ä¸ºå½“å‰è¿›ç¨‹çš„åœ°å€ç©ºé—´ &#125; env_pop_tf(&amp;e-&gt;env_tf); //panic("env_run not yet implemented");&#125; è¯¥å‡½æ•°åªéœ€è¦æ ¹æ®æç¤ºå³å¯å†™å‡ºï¼Œçœ‹ä¸€ä¸‹env_pop_tfçš„ä»£ç ï¼š 1234567891011121314151617181920212223voidenv_pop_tf(struct Trapframe *tf)&#123; __asm __volatile("movl %0,%%esp\n" "\tpopal\n" "\tpopl %%es\n" "\tpopl %%ds\n" "\taddl $0x8,%%esp\n" /* skip tf_trapno and tf_errcode */ "\tiret" : : "g" (tf) : "memory"); //å¯¹åº”çš„æ±‡ç¼–ä»£ç ï¼š /* mov tf,eax movl eax,esp popal popl es popl ds addl $0x8,esp iret */ //ä»Žè¿™é‡Œå¼€å§‹ï¼ŒçœŸæ­£é€€å‡ºäº†å†…æ ¸æ€ï¼Œè¿›å…¥ç”¨æˆ·æ€ panic("iret failed"); /* mostly to placate the compiler */&#125; çœŸæ­£å¼€å§‹è¿è¡Œæ—¶ï¼Œæ˜¯éœ€è¦trapä¼ªè£…æ ˆå†…å®¹ä¹‹åŽæ‰èƒ½è°ƒç”¨è¯¥å‡½æ•°ï¼Œè¿›å…¥ç”¨æˆ·æ€çš„ã€‚trapçš„å†…å®¹å°†åœ¨PartBè®¨è®ºã€‚å±Šæ—¶è¿˜ä¼šéœ€è¦ç”¨åˆ°è¯¥å‡½æ•°çš„å†…å®¹ã€‚ æŒ‰ç…§æ–‡æ¡£çš„è¯´æ˜Žï¼Œä½¿ç”¨b env_pop_tfæ‰“æ–­ç‚¹ï¼ŒæŸ¥çœ‹å†…å®¹ï¼Œåœ¨ç»è¿‡è‹¥å¹²æ¬¡æ‰§è¡Œä¹‹åŽï¼š iretå°†è¿›è¡Œé€€æ ˆæ“ä½œï¼Œæ­¤å¤„æš‚æœªæ¶‰åŠã€‚ è¿™é‡Œå†™å®Œä¹‹åŽï¼Œå°±å¯ä»¥æ¢³ç†ä¸€ä¸‹åœ¨è¿›å…¥ç”¨æˆ·æ€ä¹‹å‰éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼š(in kern/init.c) é¦–å…ˆï¼Œæ¸…ç†bssã€‚è¿™å°†ä¿è¯æ‰€æœ‰æœªåˆå§‹åŒ–çš„éƒ½æ˜¯0ï¼Œåœ¨testbssä¸­å°†ä¼šæœ‰ä½“çŽ°ã€‚ç„¶åŽåˆå§‹åŒ–æŽ§åˆ¶å°ï¼Œè¿›è¡Œå†…å­˜çš„åˆå§‹åŒ–ï¼Œè¿›ç¨‹åˆå§‹åŒ–ï¼Œtrapçš„åˆå§‹åŒ–ã€‚éšåŽåˆ›å»ºä¸€ä¸ªenvï¼Œå¼€å§‹æ‰§è¡Œã€‚ çŽ°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è®¨è®ºåœ¨ä¸Šé¢æåˆ°è¿‡çš„ENV_CREATEã€‚ ENV_CREATEåœ¨kern/env.cä¸­è¢«å®šä¹‰ï¼š é¦–å…ˆå¯ä»¥çœ‹åˆ°æœ¬æ–‡ä»¶å¯¹é‚£äº›éª—boot loaderè£…è½½è¿›æ¥çš„ç”¨æˆ·ç¨‹åºçš„å¤–éƒ¨å®šä¹‰ï¼ŒéšåŽè°ƒç”¨env_createå‡½æ•°ï¼Œä»¥ENV_PASTE3(_binary_obj_, x, _start)ä½œä¸ºä¼ å…¥çš„ELFæ–‡ä»¶å¤´ç»“æž„ï¼Œä»¥typeä½œä¸ºç±»åž‹è¢«åˆ›å»ºã€‚ éšåŽï¼Œåœ¨createä¹‹åŽï¼Œæ‰§è¡Œload_icodeï¼Œå°†å¯¹åº”å†…å­˜çš„æ–‡ä»¶æ¬è¿åˆ°æŒ‡å®šå†…å­˜ï¼Œå¹¶è®¾ç½®è¿›ç¨‹çš„å…¥å£ç‚¹ä¸ºå‡½æ•°çš„å…¥å£ç‚¹ï¼Œä¸ºç”¨æˆ·è¿›ç¨‹åˆå§‹åŒ–mapä¸€ä¸ªé¡µç©ºé—´çš„æ ˆï¼Œå‡†å¤‡å¼€å§‹æ‰§è¡Œã€‚ éšåŽï¼Œè°ƒç”¨äº†env_runå‡½æ•°ï¼Œæ‰§è¡Œè¿™ä¸ªå·²ç»å‡†å¤‡å¥½çš„ç”¨æˆ·ç¨‹åºã€‚ä½†æ˜¯åœ¨è¿™ä¸ªé˜¶æ®µï¼Œè¿™ä¸ªç¨‹åºå®žé™…ä¸Šè¿˜ä¸èƒ½è¢«çœŸæ­£æ‰§è¡Œã€‚ Handling Interrupts and Exceptionsä¸­æ–­ä¸Žå¼‚å¸¸éƒ½å°†ä¼šæ‰“æ–­åŽŸæœ‰ç¨‹åºçš„æ‰§è¡Œï¼Œè½¬è€Œæ‰§è¡Œå…¶ä»–ç¨‹åºã€‚ä»–ä»¬çš„åŒºåˆ«å°±åœ¨äºŽï¼Œä¸­æ–­ç”¨äºŽå¤„ç†é‚£äº›å¤„ç†å™¨å¤–éƒ¨çš„å¼‚æ­¥äº‹ä»¶ï¼Œè€Œå¼‚å¸¸å¤„ç†è¢«å¤„ç†å™¨åœ¨æ‰§è¡ŒæŒ‡ä»¤æ—¶å‘çŽ°çš„é”™è¯¯æƒ…å†µã€‚ ä¸­æ–­ä¼šè¢«INTRå¼•èµ·ï¼Œå¼‚å¸¸ä¼šè¢«INTå¼•èµ·ã€‚è¿™ä¹Ÿç¡®å®šäº†breakpointåº”è¯¥æ˜¯ä¸€ä¸ªå¼‚å¸¸è€Œä¸æ˜¯ä¸­æ–­ã€‚ Basics of Protected Control Transferä¸­æ–­å’Œå¼‚å¸¸éƒ½å¯èƒ½å®Œæˆè¿™ä¸ªè½¬åŒ–ï¼Œå®Œæˆç‰¹æƒçº§çš„è½¬åŒ–éœ€è¦ä¸¤ä¸ªä¸œè¥¿ï¼šIDTä¸ŽTSSã€‚ IDTï¼šIDTç¡®ä¿äº†ç”¨æˆ·ç¨‹åºåˆ‡æ¢åˆ°å†…æ ¸æ€çš„æƒ…å†µåªæœ‰å·²ç»ç”±kernelå®šä¹‰çš„å‡ ç§ï¼Œä¿è¯åˆ‡æ¢è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§ã€‚ x86å…è®¸256ä¸ªä¸åŒçš„ä¸­æ–­æˆ–å¼‚å¸¸ï¼Œä»–ä»¬æœ‰ç€ä¸ä¸€æ ·çš„ä¸­æ–­å‘é‡ï¼ŒCPUåˆ©ç”¨ä¸­æ–­å‘é‡æ¥ç¡®å®šè¿™ä¸ªä¸­æ–­çš„ä¸­æ–­å‘é‡è¡¨ï¼Œè¿›è€Œæ‰¾åˆ°å¤„ç†ä¸­æ–­çš„å…¥å£ï¼Œæ‰§è¡Œå¤„ç†ç¨‹åºã€‚æ‰¾åˆ°ä¸­æ–­å‘é‡çš„æè¿°ç¬¦ä¹‹åŽï¼ŒEIPä¸­è£…è½½çš„å°†ä¼šæ˜¯ä¸­æ–­å¤„ç†ç¨‹åºçš„å…¥å£åœ°å€ï¼ŒCSä¸­è£…è½½çš„æ˜¯è¿è¡Œä¼˜å…ˆçº§ã€‚ä¸ä¸€æ ·çš„è¿è¡Œä¼˜å…ˆçº§è®¾ç½®å¸¦æ¥ä¸ä¸€æ ·çš„ç»“æžœï¼Œåœ¨æŽ¥ä¸‹æ¥çš„å®žéªŒä¸­å°†ä¼šè¢«è®¨è®ºåˆ°ã€‚ ä¸€ä¸ªIDT Gateæ˜¯è¿™æ ·çš„ï¼š segment selectorä¸Žoffsetç”¨æ¥æè¿°åœ¨æ®µæœºåˆ¶ä¸‹è‡ªå·±çš„ä¸­æ–­å“åº”å‡½æ•°çš„ä½ç½®ã€‚segment selectorè´Ÿè´£åœ¨GDTé‡Œé¢æ‰¾åˆ°å¯¹åº”çš„æ®µï¼Œoffsetè´Ÿè´£æ‰¾å¯¹åº”çš„åç§»é‡ã€‚æ‰¾åˆ°å‡½æ•°ä¹‹åŽï¼Œä¿å­˜çŽ°åœºå¹¶æ‰§è¡Œå“åº”å‡½æ•°ã€‚ TSSï¼šå¤„ç†å™¨éœ€è¦ç©ºé—´æ¥å­˜å‚¨æ—§çš„å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œè¿™æ ·ä»Žä¸­æ–­æˆ–å¼‚å¸¸ä¸­è¿”å›žçš„æ—¶å€™ï¼Œç”¨æˆ·ç¨‹åºæ‰èƒ½å¤ŸæŽ¥ç€æ‰§è¡Œã€‚å› æ­¤ï¼Œåœ¨ä»Žç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€çš„æ—¶å€™ï¼Œéœ€è¦æ¢ä¸€ä¸ªæ ˆè¿›è¡Œæ“ä½œã€‚è¿™æ—¶å°±éœ€è¦TSSæ¥ç¡®å®šæ®µå¯„å­˜å™¨æ¥ç¡®å®šè¿™ä¸ªæ ˆåˆ°åº•åœ¨å“ªé‡Œã€‚ä»Žç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€æ—¶ï¼Œé¦–å…ˆåœ¨æ ˆä¸­pushä¸€äº›å¯„å­˜å™¨å€¼ï¼š ç„¶åŽåŠ è½½ä¸­æ–­æè¿°ç¬¦ä¸­çš„å€¼ï¼Œç„¶åŽæŠŠESPå’ŒSSç½®ä¸ºæŒ‡å‘æ–°æ ˆçš„å€¼ã€‚ å°½ç®¡TSSå¯èƒ½ä¼šå¾ˆå¤æ‚ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªå®žéªŒä¸­åªæ˜¯ç”¨åˆ°äº†æŒ‡å‘å†…æ ¸æ ˆçš„éƒ¨åˆ†ã€‚ åœ¨ä¸­æ–­å‘ç”Ÿçš„æ—¶å€™ï¼Œç³»ç»Ÿå°†ä¼šçœ‹ä¸€ä¸‹äº§ç”Ÿä¸­æ–­çš„ç¨‹åºçš„ç‰¹æƒçº§ï¼Œå†³å®šåº”è¯¥æ€Žæ ·ä¿æŠ¤çŽ°åœºã€‚å¦‚æžœåœ¨ç‰¹æƒçŠ¶æ€ï¼Œä¸ç”¨æ¢æ ˆï¼Œåªéœ€è¦ä¿å­˜æ›´å°‘çš„ä¸œè¥¿ï¼Œè€Œå¤„äºŽç”¨æˆ·çŠ¶æ€ä¸‹çš„ç¨‹åºåœ¨æ‰§è¡Œå®Œä¸­æ–­å“åº”å‡½æ•°ä¹‹åŽè¿˜è¦ä»Žå†…æ ¸æ ˆé€€å›žåˆ°è‡ªå·±çš„ç”¨æˆ·æ ˆï¼Œä¿å­˜äº†æ›´å¤šçš„ä¸œè¥¿ã€‚ iretï¼šç³»ç»ŸæŒ‡ä»¤ï¼Œä»Žä¸­æ–­ä¸­è¿”å›žã€‚retï¼šä»Žå‡½æ•°ä¸­è¿”å›žretfï¼šä¸ŽretåŸºæœ¬ä¸€æ ·ï¼Œä»Žå‡½æ•°ä¸­è¿”å›žã€‚ï¼ˆå¼¹å‡ºæ ˆï¼Œæ‹¿å‡ºè¿”å›žåœ°å€ï¼ˆå°±æ˜¯ä¸‹ä¸€æ¡è¯­å¥ï¼‰è¿”å›žå€¼ï¼Œä¸¢æŽ‰åŽ‹æ ˆå‚æ•°ï¼‰ Types of Exceptions and Interruptså½“ä¸€ä¸ªè¿›ç¨‹åœ¨User Environmentè¿è¡Œæ—¶ï¼Œå¿½ç„¶é‡åˆ°äº†ä¸€ä¸ªä¸­æ–­ï¼š è¿›ç¨‹åˆ‡æ¢åˆ°è¢«TSSå®šä¹‰çš„é‚£ä¸ªæ ˆï¼Œåœ¨JOSä¸­SS0æ˜¯GD_KDï¼ˆGDTä¸­çš„kernel codeï¼‰ï¼ŒESP0æ˜¯KSTACKTOPã€‚ è¿›ç¨‹æŠŠä¸€äº›å€¼pushåˆ°è¿™ä¸ªkernelæ ˆé‡Œé¢ã€‚ æ‰¾åˆ°IDT entryï¼Œå¼€å§‹æ‰§è¡Œå‡½æ•° éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°±åƒä¸Šé¢å·²ç»è®¨è®ºè¿‡çš„ï¼Œæœ‰äº›ä¸­æ–­/å¼‚å¸¸ä¼špush error codeï¼Œè€Œæœ‰çš„ä¸ä¼šã€‚ å¦‚æžœæ˜¯åœ¨å†…æ ¸æ€å‘ç”Ÿäº†ä¸­æ–­ï¼Œå°±ä¸éœ€è¦è¿›è¡Œæ¢æ ˆæ“ä½œï¼Œè¿™æ—¶æ—§çš„SSä¸ŽESPä¸ä¼šè¢«ä¿å­˜ã€‚ æ€Žä¹ˆä»Žå†…æ ¸æ€åˆ‡æ¢åˆ°ç”¨æˆ·æ€å‘¢ï¼Œå…¶å®žæ–¹æ³•æ˜¯ç›¸ä¼¼çš„ã€‚æ–°å¼€ä¸€ä¸ªç”¨æˆ·æ ˆï¼Œå­˜ä¸Šä¸­æ–­ä»¥ä¸ºçš„æ•°æ®ï¼ŒéšåŽiretï¼Œè¿™æ ·å°±é™åˆ°äº†ç”¨æˆ·æ¨¡å¼ã€‚ Setting Up the IDTçŽ°åœ¨æ¥æŸ¥çœ‹æœ¬å®žéªŒä¸­å…³äºŽä¸­æ–­/trapçš„å†…å®¹ã€‚ åœ¨inc/trap.hä¸­å®šä¹‰äº†è®¸å¤šä¸­æ–­å·ï¼ŒPushRegsç»“æž„ä»¥åŠTrapFrameç»“æž„ã€‚ TrapFrameç»“æž„ä¸­å®šä¹‰äº†trapnumerã€esã€dsç­‰åœ¨å€¼ï¼Œè¿™äº›å€¼åœ¨ç‰¹æƒçº§å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ä¼šè¢«åŽ‹æ ˆå‡ºæ ˆä¿å­˜ï¼Œåœ¨åŽé¢è¿˜ä¼šç”¨åˆ°ã€‚ ä¸ºäº†å®ŒæˆExercise4ï¼Œé¦–å…ˆåˆ†æžtrap.cä»¥åŠtrapentry.Sä¸­çš„ä»£ç ï¼š è¿™ä¸¤ä¸ªmacroå°†ä¼šå¸®æˆ‘ä»¬è¿›è¡Œtrapnoçš„åŽ‹æ ˆæ“ä½œï¼Œå‡½æ•°åçš„å®šä¹‰ã€‚ç¬¬ä¸€ä¸ªç”¨äºŽè‡ªåŠ¨åŽ‹æ ˆerrorcodeçš„ï¼ŒåŽä¸€ä¸ªå¤„ç†ä¸è‡ªåŠ¨åŽ‹æ ˆerrorcodeçš„ã€‚æ‰¾åˆ°æ¯ä¸ªä¸­æ–­ç±»åž‹çš„åŽ‹æ ˆæ–¹å¼ï¼š è¿™æ—¶åº”è¯¥æ˜Žç¡®ï¼Œè¿™æ—¶ä»å¤„äºŽåŽŸæ¥çš„ç‰¹æƒçº§ã€‚ äºŽæ˜¯ï¼Œä½¿ç”¨ä¸Šè¿°ä¸¤ä¸ªmacroæ¥ä¸ºtrapæ·»åŠ ä¸€ä¸ªå…¥å£ç‚¹ï¼Œè¿™éƒ¨åˆ†çš„ä»£ç ï¼š ç„¶åŽè€ƒè™‘/kern/trap.cä¸­çš„å†…å®¹ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œé¦–å…ˆæŸ¥çœ‹macro SETGATEçš„ä½œç”¨ï¼š 1234567891011121314//in inc\mmu.h#define SETGATE(gate, istrap, sel, off, dpl) \&#123; \ (gate).gd_off_15_0 = (uint32_t) (off) &amp; 0xffff; \ (gate).gd_sel = (sel); \ (gate).gd_args = 0; \ (gate).gd_rsv1 = 0; \ (gate).gd_type = (istrap) ? STS_TG32 : STS_IG32; \ (gate).gd_s = 0; \ (gate).gd_dpl = (dpl); \ (gate).gd_p = 1; \ (gate).gd_off_31_16 = (uint32_t) (off) &gt;&gt; 16; \&#125; è¿™ä¸ªmacroå¸®æˆ‘ä»¬è®¾ç½®äº†IDTçš„Gateã€‚ äºŽæ˜¯ï¼Œæ ¹æ®å‰é¢å¯¹TRAPHANDLER_NOECä¸ŽTRAPHANDLERçš„æè¿°ä»¥åŠSETGATEï¼Œå†™trap_initå¦‚ä¸‹ï¼š æŽ¥ä¸‹æ¥è€ƒè™‘_alltrapsã€‚æ ¹æ®æç¤ºï¼Œå†™å‡ºå¦‚ä¸‹ä»£ç ï¼š æç¤ºä¿¡æ¯ï¼š Your _alltraps should: 1. push values to make the stack look like a struct Trapframe 2. load GD_KD into %ds and %es 3. pushl %esp to pass a pointer to the Trapframe as an argument to trap() 4. call trap (can trap ever return?) Consider using the pushal instruction; it fits nicely with the layout of the struct Trapframe. ä»£ç ï¼š è¿›è¡Œmakegradeæ£€æµ‹ï¼š Answer the following questions in your answers-lab3.txt: 1. What is the purpose of having an individual handler function for each exception/interrupt? (i.e., if all exceptions/interrupts were delivered to the same handler, what feature that exists in the current implementation could not be provided?) 2. Did you have to do anything to make the user/softint program behave correctly? The grade script expects it to produce a general protection fault (trap 13), but softint&apos;s code says int $14. Why should this produce interrupt vector 13? What happens if the kernel actually allows softint&apos;s int $14 instruction to invoke the kernel&apos;s page fault handler (which is interrupt vector 14)? å›žç­”ï¼š å¦‚æžœæ‰€æœ‰çš„ä¸­æ–­éƒ½æ˜¯ä¸€ä¸ªå“åº”å‡½æ•°ï¼Œé‚£ä¹ˆé¦–å…ˆéœ€è¦ç»Ÿä¸€æ˜¯ä¸æ˜¯è¦è‡ªåŠ¨åŽ‹æ ˆerrorcodeï¼Œå…¶æ¬¡åœ¨SETGATEæ—¶å°±æ— æ³•æŒ‡å®šç‰¹æƒçº§ï¼Œå°±ä¸èƒ½ä¸ºå†…æ ¸ä¸­æ–­æä¾›ä¸åŒçš„ä¿æŠ¤ã€‚æ¯”å¦‚syscallå…è®¸ç”¨æˆ·ç¨‹åºäº§ç”Ÿï¼Œä½†æ˜¯è¯¸å¦‚divideerrorç­‰åªå¯ä»¥ç”±ç¡¬ä»¶äº§ç”Ÿï¼Œå¦‚æžœæ‰€æœ‰éƒ½æ˜¯ç”¨åŒä¸€ä¸ªä¼˜å…ˆçº§ï¼Œå¾ˆå®¹æ˜“è¢«åˆ«æœ‰ç”¨å¿ƒçš„ç”¨æˆ·ç¨‹åºå–å¾—å†…æ ¸æƒé™ã€‚ pagefault14ä¸å…è®¸ç”¨æˆ·ç¨‹åºç›´æŽ¥å‘èµ·ï¼Œå¿…é¡»ç»ç”±ç¡¬ä»¶äº§ç”Ÿã€‚è¿™ç§æœºåˆ¶å¯ä»¥æ›´å¥½åœ°ä¿æŠ¤å†…å­˜ã€‚å‡å¦‚å…è®¸ç”¨æˆ·ç¨‹åºè‡ªå·±äº§ç”Ÿint14ï¼Œåˆ™æ¯å¼•å‘ä¸€ä¸ªç¼ºé¡µä¸­æ–­ç³»ç»Ÿå°±éœ€è¦åˆ†é…ä¸€ä¸ªè™šæ‹Ÿé¡µï¼Œå¯èƒ½ä¼šè¢«æ¶æ„ç¨‹åºåˆ©ç”¨ï¼Œä½¿å¾—å†…å­˜å´©æºƒã€‚è€Œint13åˆ™æ˜¯general protection interruptï¼Œä¿æŠ¤è‡ªå·±ä¸åŽ»ç®¡é‚£äº›ä¸å…è®¸ç”¨æˆ·è‡ªå·±äº§ç”Ÿçš„ä¸­æ–­ã€‚å¦‚æžœå¸Œæœ›int14å¯ä»¥æ­£å¸¸è¢«ç”¨æˆ·ç¨‹åºç›´æŽ¥äº§ç”Ÿï¼Œåº”è¯¥å°†å…¶ç‰¹æƒçº§è®¾ç½®ä¸º3. Page Faults, Breakpoints Exceptions, and System CallsHandling Page Faultspage faultæ˜¯14å·ä¸­æ–­ã€‚å½“å¤„ç†å™¨æ•èŽ·åˆ°14å·ä¸­æ–­çš„æ—¶å€™ï¼Œå®ƒä¼šåœ¨CR2ä¸­å­˜å‚¨ä¸€ä¸ªå¼•èµ·pagefaultçš„çº¿æ€§åœ°å€ã€‚ä¸‹é¢æ¥å¤„ç†è¿™ä¸ªä¸­æ–­ã€‚ åœ¨ä¸Šä¸€æ­¥åˆ†æžåˆ°ï¼Œåœ¨æŠŠesä¸Ždsåˆ†åˆ«éƒ½è®¾ç½®ä¸ºGD_KDä¹‹åŽï¼Œè¿™æ—¶è°ƒç”¨trapå‡½æ•°ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†æžtrapå‡½æ•°ã€‚ FL_IFæ˜¯åœ¨inc/mmu.hä¸­å®šä¹‰çš„ä¸­æ–­æ ‡å¿—ã€‚å¦‚æžœå¯„å­˜å™¨eflageä¸­ä¸­æ–­æ ‡å¿—æ²¡æœ‰è¢«ç½®ä½ï¼Œåˆ™ä¸æ˜¯ä¸€ä¸ªä¸­æ–­ã€‚ åœ¨tfç»“æž„tf_csçš„ä½Žä½å­˜å‚¨ç€ä¼˜å…ˆçº§ï¼Œå‡å¦‚ä¼˜å…ˆçº§æ˜¯3ï¼Œåˆ™æ˜¯åœ¨ç”¨æˆ·æ€ã€‚è¿™æ—¶æ˜¯æ— æƒå¤„ç†ä¸­æ–­å‡½æ•°çš„ï¼Œåº”è¯¥é¦–å…ˆå‡çº§æˆä¸ºå†…æ ¸æ€ï¼Œç„¶åŽå†å¤„ç†ã€‚ç„¶åŽè°ƒç”¨trap_diapatchï¼Œæ¥åˆ†å‘å¤„ç†å„ç§ä¸åŒçš„trapï¼Œå¤„ç†å®Œæ¯•å›žæ¥ä¹‹åŽï¼Œå¦‚æžœæ²¡æœ‰ä»€ä¹ˆå¼‚å¸¸å°±å¯ä»¥æŽ¥ç€è¿è¡Œã€‚ åœ¨trap_dispatchä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼š 1234if(tf-&gt;tf_trapno==T_PGFLT)&#123; page_fault_handler(tf);//æ­¤æ—¶è¯¥å‡½æ•°å°šæœªå®Œæˆ return;&#125; è¿™æ—¶åŽ»æŸ¥çœ‹page_fault_handleï¼Œæ­¤å‡½æ•°å°šæœªå®Œæˆï¼Œä½†æ˜¯å¯¹äºŽç”¨æˆ·æ€çš„trapå·²ç»ç»™å‡ºäº†è§£å†³ï¼Œå¯ä»¥çœ‹åˆ°ä¸€å¥ä»£ç fault_va = rcr2();ã€‚è¿™å°±æ˜¯å‰é¢æåˆ°çš„åœ¨CR2ä¸­å‚¨å­˜å¼•èµ·pagefaultçš„çº¿æ€§åœ°å€ï¼ŒéšåŽçš„æ‰“å°æ“ä½œå³å¯ä»¥æ‰“å°å‡ºè¿™äº‹çš„ä¿¡æ¯ã€‚ The Breakpoint Exceptionå…¶å®žï¼Œbreakpointä¹Ÿåªæ˜¯ä¸€ä¸ªå¼‚å¸¸ï¼Œå‡½æ•°å…¥å£ç‚¹çš„ç›¸å…³ä»£ç åœ¨å‰é¢éƒ½å·²ç»å†™å‡ºæ¥äº†ã€‚éœ€è¦è¯´çš„æ˜¯ï¼Œåœ¨æˆ‘æœ€æ—©ä½¿ç”¨breakpointä½œä¸ºè¯¥å‡½æ•°çš„åå­—æ—¶ï¼Œè¿è¡Œmake run-breakpointä¸€ç›´ä¸æˆåŠŸã€‚å¦‚æžœbreakpointè¿˜æœ‰å…¶ä»–ç”¨å¤„ï¼Œå¸Œæœ›å¯ä»¥å‘çŽ°ã€‚ç›®å‰æš‚æ—¶æç½®è¿™ä¸ªé—®é¢˜ã€‚ è¿™é‡Œéœ€è¦åšçš„åªæ˜¯è¡¥å……trap_dipatchï¼Œä»£ç å¦‚ä¸‹ï¼š 1234if (tf-&gt;tf_trapno == T_BRKPT) &#123; monitor(tf); return;&#125; Questions 1. The break point test case will either generate a break point exception or a general protection fault depending on how you initialized the break point entry in the IDT (i.e., your call to SETGATE from trap_init). Why? How do you need to set it up in order to get the breakpoint exception to work as specified above and what incorrect setup would cause it to trigger a general protection fault? 2. What do you think is the point of these mechanisms, particularly in light of what the user/softint test program does? å›žç­”ï¼š è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆä¸Žä¸Šä¸€ä¸ªç›¸ä¼¼ã€‚å½“ç‰¹æƒçº§è®¾ç½®ä¸º0çš„æ—¶å€™ï¼Œåªå…è®¸ç¡¬ä»¶äº§ç”Ÿä¸­æ–­è€Œä¸ä¼šå…è®¸ç”¨æˆ·è‡ªå·±åŽ»è°ƒç”¨ã€‚ æ›´å¥½çš„ä¿æŠ¤æœºåˆ¶ã€‚ makegradeä¿¡æ¯å°†åœ¨æœ€åŽä¸€åŒè´´å‡ºã€‚ System callsåœ¨JOSä¸­ï¼Œç³»ç»Ÿè°ƒç”¨å®šä¹‰çš„ä¸­æ–­å·æ˜¯48å·ï¼Œç³»ç»Ÿè°ƒç”¨ä¸èƒ½ç”±ç¡¬ä»¶äº§ç”Ÿï¼Œå› æ­¤éœ€è¦å…è®¸ç”¨æˆ·ç¨‹åºæ¥ç”Ÿæˆç³»ç»Ÿè°ƒç”¨ã€‚è¿™ä¹Ÿæ˜¯åœ¨SETGATEä¸­æœ€åŽä¸€ä¸ªå‚æ•°æ˜¯3çš„åŽŸå› ã€‚system callåœ¨åˆæ­¥åˆ¤æ–­æ—¶ä¸Žtrapå¤„ç†ç›¸åŒï¼Œä½†æ˜¯å¤„ç†è¿‡ç¨‹æ›´åŠ å¤æ‚ã€‚åº”ç”¨ç¨‹åºå°†ä¼šæŠŠç³»ç»Ÿè°ƒç”¨çš„å·ç ä»¥åŠå‚æ•°æ”¾åœ¨å¯„å­˜å™¨é‡Œé¢ï¼Œè¿™æ ·å†…æ ¸å°†ä¸éœ€è¦åœ¨ç”¨æˆ·çŽ¯å¢ƒçš„å †æ ˆæˆ–æŒ‡ä»¤æµä¸­æ‰¾æ•°æ®ã€‚sysnoå°†ä¼šåœ¨å¯„å­˜å™¨eaxä¹‹ä¸­ï¼Œå…¶ä»–å‚æ•°å°†ä¼šåœ¨edx , ecx , ebx , edi , esiä¹‹ä¸­ã€‚è¿”å›žæ—¶çš„è¿”å›žå€¼å°†ä¼šå­˜åœ¨eaxä¹‹ä¸­ã€‚ é¦–å…ˆæŸ¥çœ‹lib/syscall.cï¼Œsyscallçš„ä»£ç ä»¥åŠå¯¹åº”çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹ï¼š è¡¥å……kern/syscall.cä»¥åŠkern/trap.cï¼Œä»£ç å¦‚ä¸‹ï¼š è¿™é‡Œéœ€è¦æå‡ºçš„æ˜¯ï¼Œåœ¨kern/syscall.cä¸­æœ‰å¦ä¸€ä¸ªæœªå®Œæˆçš„å‡½æ•°sys_cputï¼Œè¿™ä¸ªå‡½æ•°è¦æ±‚æ£€æŸ¥å†…å­˜æ˜¯å¦å¯ä»¥è¢«è®¿é—®ï¼Œè€Œåœ¨åŽé¢çš„ç»ƒä¹ ä¸­æœ‰ç›¸å…³å‡½æ•°çš„è¡¥å……ï¼Œåœ¨è¿™é‡Œå…ˆä¸è´´å‡ºä»£ç ã€‚ User-mode startupç”¨æˆ·ç¨‹åºå¼€å§‹è¿è¡Œæ—¶æ˜¯åœ¨lib/entry.Sï¼ŒéšåŽåœ¨lib/libmain.cä¸­call libmain()ã€‚åœ¨lib/entry.Sä¸­å¯ä»¥çœ‹åˆ°ï¼š envså·²ç»è¢«å®šä¹‰äº†ï¼Œå› æ­¤ä¸‹é¢è¿›å…¥lib/libmain.cæ¥åˆå§‹åŒ–thisenvã€‚æ ¹æ®æç¤ºï¼ŒæŸ¥çœ‹inc/env.hä¸­çš„ENVXï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š 1#define ENVX(envid) ((envid) &amp; (NENV - 1)) ä¸ºäº†å¾—åˆ°å½“å‰çš„è¿›ç¨‹å·ï¼Œå¯ä»¥è°ƒç”¨åœ¨kern/syscall.cä¸­çš„sys_getenvidå‡½æ•°ï¼Œè¯¥å‡½æ•°å¦‚ä¸‹ï¼š 12345static envid_tsys_getenvid(void)&#123; return curenv-&gt;env_id;&#125; ä½†æ˜¯ï¼Œæ ¹æ®inc/env.hï¼Œenv_idå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œå…¨çš„envsä¸­çš„åºå·ï¼Œ æ ¹æ®æ³¨é‡Šï¼ŒENVX(eid)æ‰æ˜¯çœŸæ­£åœ¨envsä¸­çš„åç§»ï¼ŒäºŽæ˜¯ï¼Œåœ¨libmainä¸­çš„ä»£ç å¦‚ä¸‹ï¼š 1thisenv = envs+ENVX(sys_getenvid()); å…¶å®žï¼Œåªæœ‰åœ¨è¿™éƒ¨åˆ†å®Œæˆä¹‹åŽï¼Œæ‰èƒ½æ­£ç¡®çš„è°ƒç”¨ç”¨æˆ·å‡½æ•°ã€‚è¿™æ˜¯å› ä¸ºåœ¨é€€å‡ºæ—¶éœ€è¦è®¿é—®thisenv-&gt;env_idï¼Œè€Œå…ˆå‰è¿™ä¸ªå˜é‡å¹¶æ²¡æœ‰å€¼ã€‚ åœ¨ç”¨æˆ·ç¨‹åºæ‰§è¡Œå®Œæˆä¹‹åŽï¼Œå°±ä¼šè°ƒç”¨sys_env_destoryæ¥é€€å‡ºè‡ªå·±ã€‚ Page faults and memory protectionå†…å­˜ä¿æŠ¤æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œç¡®ä¿ä¸€ä¸ªç¨‹åºä¸­çš„é”™è¯¯ä¸ä¼šç ´åå…¶ä»–ç¨‹åºæˆ–ç ´åOSæœ¬èº«ã€‚OSé€šå¸¸ä¾èµ–äºŽç¡¬ä»¶æ¥ä¿æŠ¤è‡ªå·±ï¼Œä»–çŸ¥é“å“ªå—è™šæ‹Ÿåœ°å€å¯ç”¨ï¼Œå“ªå—ä¸å¯ç”¨ï¼Œå¦‚æžœä¸€ä¸ªç¨‹åºæƒ³è¦è®¿é—®ä»–æ²¡æœ‰æƒé™è®¿é—®çš„åœ°å€ï¼Œä¼šå¼•å‘é”™è¯¯ã€‚å¦‚æžœè¿™ä¸ªé”™è¯¯å¯ä»¥è¢«è§£å†³ï¼ŒOSä¼šè¯•å›¾è§£å†³ï¼Œå¦‚æžœä¸èƒ½è§£å†³ï¼ŒçŠ¯é”™çš„è¿›ç¨‹å°±ä¸å¯ä»¥å†è¿è¡Œäº†ã€‚ ç³»ç»Ÿè°ƒç”¨ä¸ºå†…å­˜ä¿æŠ¤æå‡ºäº†ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ã€‚å¤§å¤šæ•°ç³»ç»Ÿè°ƒç”¨æŽ¥å£è®©ç”¨æˆ·ç¨‹åºå°†æŒ‡é’ˆä¼ é€’ç»™å†…æ ¸ã€‚è¿™äº›æŒ‡é’ˆæŒ‡å‘è¦è¯»å–æˆ–å†™å…¥çš„ç”¨æˆ·ç¼“å†²åŒºã€‚å†…æ ¸ç„¶åŽåœ¨æ‰§è¡Œç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™åŽ»å¼•ç”¨è¿™äº›æŒ‡é’ˆã€‚è¿™æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š 1.å†…æ ¸ä¸­çš„é¡µé¢é”™è¯¯å¯èƒ½æ¯”ç”¨æˆ·ç¨‹åºä¸­çš„é¡µé¢é”™è¯¯ä¸¥é‡å¾—å¤šã€‚å¦‚æžœå†…æ ¸é¡µé¢åœ¨å¤„ç†è‡ªå·±çš„æ•°æ®ç»“æž„çš„æ—¶å€™å‡ºé”™ï¼Œè¿™æ˜¯ä¸€ä¸ªå†…æ ¸é”™è¯¯ï¼Œè€Œä¸”é”™è¯¯å¤„ç†ç¨‹åºåº”è¯¥è®©å†…æ ¸ï¼ˆä¹Ÿå°±æ˜¯æ•´ä¸ªç³»ç»Ÿï¼‰å´©æºƒã€‚ä½†æ˜¯å½“å†…æ ¸è§£å¼•ç”¨ç”¨æˆ·ç¨‹åºç»™å®ƒçš„æŒ‡é’ˆæ—¶ï¼Œå®ƒéœ€è¦ä¸€ç§æ–¹æ³•æ¥è®°ä½ä»»ä½•é¡µé¢é”™è¯¯ï¼Œè¿™äº›è§£é™¤å¼•ç”¨å®žé™…ä¸Šæ˜¯ä»£è¡¨ç”¨æˆ·ç¨‹åºã€‚ 2.å†…æ ¸é€šå¸¸æ‹¥æœ‰æ¯”ç”¨æˆ·ç¨‹åºæ›´å¤šçš„å†…å­˜æƒé™ã€‚ç”¨æˆ·ç¨‹åºå¯èƒ½ä¼šä¼ é€’ä¸€ä¸ªæŒ‡å‘ç³»ç»Ÿè°ƒç”¨çš„æŒ‡é’ˆï¼ŒæŒ‡å‘å†…æ ¸å¯ä»¥è¯»æˆ–å†™çš„å†…å­˜ï¼Œä½†æ˜¯ç¨‹åºä¸èƒ½ã€‚å†…æ ¸å¿…é¡»å°å¿ƒï¼Œä¸è¦è¢«æ¬ºéª—å¼•ç”¨è¿™æ ·ä¸€ä¸ªæŒ‡é’ˆï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šæ³„éœ²ç§æœ‰ä¿¡æ¯æˆ–ç ´åå†…æ ¸çš„å®Œæ•´æ€§ã€‚ ä¸‹é¢å°†å¤„ç†å¯¹ç”¨æˆ·è¯»å†™æŒ‡é’ˆçš„è®¿é—®æƒé™å¤„ç†ï¼Œå¦‚æžœç”¨æˆ·æƒ³è¦è¯»å†™çš„åœ°æ–¹è¡¨ç¤ºå…è®¸ï¼Œå°±å…è®¸ï¼Œå¦åˆ™ä¸å…è®¸ã€‚è€Œå†…æ ¸ï¼Œå¦‚æžœå‡ºçŽ°äº†page faultï¼Œç«‹å³å´©æºƒã€‚ åœ¨kern/trap.cä¸­æ·»åŠ å¯¹å†…æ ¸å‘ç”Ÿäº†pagefaultçš„å¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯ä¸Šé¢æåˆ°çš„å°šæœªå®Œæˆçš„æ“ä½œã€‚æ ¹æ®æç¤ºï¼Œç”±äºŽtf_csä¸­çš„ä½Žä½ä»£è¡¨ç‰¹æƒçº§ï¼Œç›´æŽ¥æŸ¥çœ‹ç‰¹æƒçº§ï¼šå¦‚æžœä¸æ˜¯åœ¨ç”¨æˆ·æ€å‘ç”Ÿçš„ï¼Œå°±ç›´æŽ¥panicã€‚ä»£ç å¦‚ä¸‹ï¼š 12if ((tf-&gt;tf_cs&amp;3) == 0) panic("Kernel page fault!"); æŽ¥ä¸‹æ¥å¯¹kern/pmap.cä¸­çš„user_mem_checkä»¥åŠuser_mem_assertè¿›è¡Œæ“ä½œï¼š åªéœ€è¦æŒ‰ç…§è¯´æ˜Žæ£€æŸ¥å†…å­˜ä¸­ä½ç½®ä»¥åŠPTE_På’ŒPTE_Uç­‰å³å¯ï¼Œç›´æŽ¥è´´å‡ºä»£ç ï¼š ä¸‹é¢æ˜¯user_mem_assertçš„ä»£ç ã€‚ 12345678910111213//æ£€æŸ¥è¿›ç¨‹envæ˜¯ä¸æ˜¯å…è®¸è®¿é—®è¿™ä¸ªåŒºåŸŸ//å¦‚æžœå¯ä»¥å°±return//ä¸è¡Œçš„è¯envå°±æ­»äº†ï¼Œå¦‚æžœenvæ˜¯å½“å‰è¿è¡Œè¿›ç¨‹ï¼Œå°±ä¸è¿”å›žäº†//user_mem_checkvoiduser_mem_assert(struct Env *env, const void *va, size_t len, int perm)&#123; if (user_mem_check(env, va, len, perm | PTE_U) &lt; 0) &#123; cprintf("[%08x] user_mem_check assertion failure for " "va %08x\n", env-&gt;env_id, user_mem_check_addr); env_destroy(env); // may not return &#125;&#125; æœ€åŽï¼Œå¯¹åœ¨å®žéªŒ1ä¸­å†™è¿‡çš„debuginfo_eipè¿›è¡Œæ›´æ”¹ï¼Œä½¿å¾—backtraceå¯ä»¥ä½¿ç”¨ã€‚å°†ä»£ç è´´å‡ºï¼š æœ¬å®žéªŒçš„åŸºç¡€éƒ¨åˆ†åˆ°è¿™é‡Œç»“æŸã€‚ æœ€ç»ˆçš„makegradeï¼š CHALLENGEï¼š å®Œæˆäº†å•æ­¥æ‰§è¡Œçš„challengeã€‚ æ ¹æ®æç¤ºï¼ŒæŸ¥æ‰¾EFLAGSä¿¡æ¯ï¼Œå¾—åˆ°è¿™æ ·çš„ä¿¡æ¯ï¼š äºŽæ˜¯ä¸ºäº†èƒ½å¤Ÿå•æ­¥æ‰§è¡Œï¼Œzåœ¨monitorä¸­ä¿®æ”¹å¦‚ä¸‹éƒ¨åˆ†ï¼š æ·»åŠ æŒ‡ä»¤si å†™å‡½æ•°mon_siå¹¶åœ¨.hä¸­å£°æ˜Žï¼ˆå£°æ˜Žç•¥åŽ»ï¼‰ ä¿®æ”¹kern/trap.cï¼Œä½¿å¾—èƒ½å¤Ÿå¤„ç†debugçš„ä¸­æ–­ä¿¡æ¯ è¿è¡Œï¼š ç±»ä¼¼çš„ï¼Œå°±å¯ä»¥åŠ ä¸ŠcæŒ‡ä»¤ä½¿ç»§ç»­è¿è¡Œåˆ°ä¸‹ä¸€ä¸ªbreakpointã€‚ æ·»åŠ æŒ‡ä»¤c å†™å‡½æ•°mon_c åªæ˜¯ï¼Œè¿™æ—¶éœ€è¦å°†TFä½ç½®ä¸º0ã€‚ ç»“æžœï¼š ä¸ºäº†æ›´å¥½åœ°æŸ¥çœ‹siä¸Žcçš„ç»“æžœï¼Œæˆ‘å°†breakpoint.cä¿®æ”¹ä¸ºä¸‹ï¼š æœ€åŽï¼Œå†æ¬¡è¿è¡Œmake gradeï¼š æœ¬å®žéªŒå®Œæˆã€‚ä»£ç å·²ç»æäº¤åˆ°git.mobisys.ccã€‚ ç‚¹å‡»é“¾æŽ¥é¢„è§ˆlab3å·¥ç¨‹ä»£ç ~ å¦‚æžœæƒ³è¦ç›´æŽ¥ä¸‹è½½çš„è¯å°±ç‚¹è¿™ä¸ªï¼ˆè¿™æ˜¯ç™¾åº¦çš„ç½‘ç›˜ï¼‰ yayi2456 &lt;(ï¿£ï¸¶ï¿£)â†—[GO!]&gt; æœ€åŽï¼Œåˆ—å‡ºé‚£äº›ç»™è¿‡æˆ‘å¸®åŠ©çš„ç½‘ç«™ï¼è°¢è°¢ï¼ï¼ˆä¹Ÿä¾¿äºŽæˆ‘ä»¥åŽæ‰¾åˆ°ï¼ ä¸€ä¸ªå­¦éœ¸çš„è‡ªæˆ‘ä¿®å…» clann24 clannçš„å®žé™…ä»£ç ä¸ŽREADMEä»£ç ä¸ä¸€æ ·å•Šï¼Œè€Œä¸”æ˜Žæ˜Žclannçš„è‡ªå·±å¯ä»¥è¿è¡Œï¼ŒåŠ åˆ°æˆ‘çš„ä»£ç ä¸Šå´ä¸èƒ½è¿è¡Œäº†ã€‚å¯¹clannçš„load_icodeå­˜ç–‘ã€‚ æœ´å®žä¸­é€éœ²ç€æƒŠå–œ mick_seu å¯ä»¥è¯´æ˜¯å¾ˆåŽ‰å®³äº†ã€‚ä»£ç ç®€å•æ˜“æ‡‚ï¼Œæ­£ç¡®çŽ‡è¶…é«˜ï¼Œè¶…é€‚ç”¨ã€‚ å­¦ä¹ å¹¶å¿«ä¹ç€ é£žé¾™ é£žé¾™çš„ä»£ç ä¹Ÿå¾ˆç®€å•æ˜“æ‡‚ï¼è€Œä¸”ä¸€çœ‹å°±æ˜¯è‡ªå·±å†™çš„ï¼Œä¸Žç½‘ä¸Šä¸»æµçš„éƒ½ä¸ä¸€æ ·ã€‚ X86 CPUçš„EFLAGSå¯„å­˜å™¨å„ä¸ªæ ‡è¯†ä½ ä¼Šå‡¡ How to read and write x86 flags registers directly? stackoverflow æˆ‘éœ€è¦BBä¸€å¥ã€‚åˆ°äº†OSè¯¾çš„è¯¥æ˜¯å¤§ä¸‰äº†ã€‚stackoverflowè¿™ä¸ªç¤¾åŒºçœŸçš„æ˜¯å¼ºæŽ¨ï¼Œæ— æ•°é—®é¢˜éƒ½æ˜¯åœ¨è¿™ä¸ªç¤¾åŒºæ‰¾åˆ°çš„å›žç­”ã€‚å—¯ï¼Œå¼ºæŽ¨ã€‚ markdown to html mdè½¬htmlåœ¨çº¿ emmå…¶å®žæ•ˆæžœä¸€èˆ¬â€¦å¾ˆä¸å¥½â€¦.ä½†æ˜¯ï¼Œæ¯•ç«Ÿåœ¨çº¿ï¼Œä¸æƒ³ç”¨çš„è¯ï¼Œè‡ªå·±å®‰è£…pandocï¼Œè´¹åŠ²è´¹ç©ºé—´ã€‚ å¦å¤–ä¸€ä¸ªhtmlä¸Žmd markdownçš„chromeæ’ä»¶]]></content>
      <categories>
        <category>OS</category>
        <category>MIT Lab</category>
      </categories>
      <tags>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸²è®²å¤ä¹ ]]></title>
    <url>%2F2017%2F11%2F27%2FOS%2FOS4%2BMemory%20and%20Process%2F</url>
    <content type="text"><![CDATA[ç³»ç»Ÿè°ƒç”¨ä¾‹ï¼šSTLçš„å®žçŽ°printfï¼šå¯¹å±å¹•ï¼š åœ¨æ¯ä¸€ä¸ªåƒç´ æœ‰ä¸€ç§é¢œè‰² æ–‡æœ¬æ¨¡å¼ ç³»ç»Ÿè°ƒç”¨ä¸Žå‡½æ•°è°ƒç”¨ç³»ç»Ÿè°ƒç”¨æ˜¯ä¸­æ–­ï¼Œç›¸å½“äºŽåœ¨ç”¨æˆ·ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ä¸­åµŒå…¥ä¸€æ®µç”±OSå®Œæˆçš„ä»£ç ï¼Œå®ŒæˆåŽå†è¿”å›žç”¨æˆ·ç¨‹åºã€‚å…¶ä¸­ï¼ŒåŒ…æ‹¬ç‰¹æƒçº§çš„å‡é™ã€‚åœ¨è¿›è¡Œç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼Œè¿›å…¥ä¹‹åŽé¦–å…ˆä¼šæ£€æŸ¥ç”¨æˆ·ä¼ å‚æ˜¯å¦æœ‰å±é™©ï¼ŒéšåŽå†æ‰§è¡Œç³»ç»Ÿè°ƒç”¨ã€‚è¿™å°†åœ¨ä¸€ä¸ªæ–°çš„é¡µå®Œæˆï¼Œå­˜åœ¨äºŽå†…æ ¸æ€ç‹¬ç«‹åœ°å€ç©ºé—´ï¼Œå°†ä¼šå¸¦æ¥åŒ…æ‹¬TLBï¼ŒCacheç­‰çš„ä¸€ç³»åˆ—é—®é¢˜ã€‚å› æ­¤ï¼Œç³»ç»Ÿè°ƒç”¨çš„ä»£ä»·æ¯”å‡½æ•°è°ƒç”¨çš„ä»£ä»·å¤§å¾—å¤šã€‚ è¿›ç¨‹é—´çš„é€šä¿¡ç›´æŽ¥é€šä¿¡ä¸Žé—´æŽ¥é€šä¿¡1send(A,) é˜»å¡žé€šä¿¡ä¸Žéžé˜»å¡žé€šä¿¡åƒç½‘ç»œä¸­é‚£æ ·ï¼Œé˜»å¡žé€šä¿¡å°±æ˜¯// é€šä¿¡é“¾è·¯ç¼“å†²0å®¹é‡ï¼šå‘é€æ–¹éœ€è¦ç­‰å¾…æŽ¥æ”¶æ–¹æœ‰é™å®¹é‡ï¼šæ— é™å®¹é‡ï¼š ä¿¡å·ä¿¡å·ç±»ä¼¼äºŽä¸­æ®µï¼Œ æ˜¯æœ€åŽŸå§‹ã€æœ€ç®€å•çš„ä¸€ä¸ªè¿›ç¨‹é—´äº¤äº’çš„æ¨¡å¼ã€‚åœ¨å…³æœºæ—¶ï¼Œç³»ç»Ÿå°†ä¼šç”¨è¿™ç§æ–¹å¼é€šçŸ¥å„å„è¿›ç¨‹ã€‚ ç®¡é“çˆ¶å­ä¹‹é—´ä¼ é€’ä¿¡æ¯ æ¶ˆæ¯é˜Ÿåˆ—ç±»ä¼¼äºŽç”µå­é‚®ä»¶ç³»ç»Ÿã€‚ å¾—åˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä½¿ç”¨é˜Ÿåˆ—å·æ¥æ ‡è¯†ã€‚æ­¤åŽæ¶ˆæ¯çš„sendä¸Žrecvéƒ½é€šè¿‡è¿™ä¸ªé˜Ÿåˆ—ã€‚ å…±äº«å†…å­˜åˆ›å»ºå…±äº«æ®µshmget(key,size,flags)ã€‚å…¶ä¸­keyæ˜¯å…¶ä»–äººå¸Œæœ›ä¸Žä½ å…±äº«å†…å­˜çš„è¯å¿…é¡»çŸ¥é“çš„å€¼ã€‚shmat(shmid,*shmaddr,flags)æŠŠå…±äº«æ®µæ˜ å°„åˆ°è¿›ç¨‹åœ°å€ç©ºé—´ã€‚ åœ¨è¿™é‡Œï¼Œå°†åˆä¼šé‡åˆ°åœ¨â€œå“²å­¦å®¶å°±é¤â€é‚£éƒ¨åˆ†çš„é—®é¢˜ã€‚å¦å¤–ï¼Œè¿˜å°†ä¼šæœ‰åœ¨cacheè¿˜æ˜¯å†…å­˜çš„é—®é¢˜ã€‚cacheä½œä¸ºåœ¨è¯»å†™æ“ä½œæ—¶ç¬¬ä¸€ä¸ªç¢°åˆ°çš„ç¡¬ä»¶ï¼Œæ˜¯å¦å¯ä»¥ä¿è¯è¿›ç¨‹Aå†™çš„æ—¶å€™å§ä¸œè¥¿å†™è¿›äº†å…±äº«åŒºçš„ç‰©ç†å†…å­˜ï¼Ÿåœ¨Bä¸èƒ½ä½¿ç”¨çš„æ—¶å€™å®ƒçš„Cacheçš„æ­£ç¡®æ€§å“ˆèƒ½ä¸èƒ½ä¿è¯ï¼Ÿâ€”ï¼Ÿ ç”±ä¸€ä¸ªâ€œå¯å¦ä½¿ç”¨cacheâ€çš„ä½]]></content>
      <categories>
        <category>OS</category>
        <category>MIT Lab</category>
      </categories>
      <tags>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç½‘ç»œæ¦‚è¿°]]></title>
    <url>%2F2017%2F11%2F21%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯ç¬¬ä¸€æ¬¡è¯¾ï¼æ—¶éš”è®¸ä¹…ï¼Œä¹Ÿç®—æ˜¯å¤ä¹ å•¦~ # ç½‘ç»œè¾¹ç¼˜ç½‘ç»œæ ¸å¿ƒåˆ†ç»„äº¤æ¢åœ¨å„ç§ç½‘ç»œä¹‹ä¸­ï¼Œç«¯å¯¹ç«¯ä¹‹é—´äº’ç›¸ä¼ é€æŠ¥æ–‡ã€‚ä¸ºäº†ä»Žæºç³»ç»Ÿé¡¹ç›®åœ°ç«¯ç³»ç»Ÿå‘é€æŠ¥æ–‡ï¼Œæºç«¯ç³»ç»Ÿå°†æŠ¥æ–‡åˆ†æˆè‹¥å¹²çš„å°æ•°æ®å—ï¼Œæˆä¸ºåˆ†ç»„ã€‚æ¯ä¸ªåˆ†ç»„éƒ½é€šè¿‡æºç«¯ç³»ç»Ÿä¸Žç›®çš„ç«¯ç³»ç»Ÿä¹‹é—´çš„åˆ†ç»„äº¤æ¢æœºï¼ˆä¸»è¦æ˜¯è·¯ç”±å™¨ä»¥åŠé“¾è·¯äº¤æ¢æœºï¼‰ä¼ é€ã€‚åˆ†ç»„ä»¥ç­‰äºŽé“¾è·¯æœ€å¤§ä¼ è¾“é€ŸçŽ‡çš„é€Ÿåº¦é€šè¿‡é€šä¿¡é“¾è·¯ï¼Œå› æ­¤å¦‚æžœä¼ è¾“é€Ÿåº¦æ˜¯Ræ¯”ç‰¹/sï¼Œé‚£ä¹ˆä¼ è¾“Læ¯”ç‰¹åˆ†ç»„çš„æ—¶é—´æ˜¯L/Ræ¯”ç‰¹/sã€‚ å­˜å‚¨è½¬å‘ä¼ è¾“å¤šæ•°åˆ†ç»„äº¤æ¢æœºåœ¨é“¾è·¯çš„è¾“å…¥ç«¯ä½¿ç”¨å­˜å‚¨è½¬å‘ä¼ è¾“æœºåˆ¶ï¼Œå®ƒæ˜¯æŒ‡åœ¨äº¤æ¢æœºå¼€å§‹å‘é€ç¬¬ä¸€ä¸ªæ¯”ç‰¹ä¹‹å‰ï¼Œå¿…é¡»æŽ¥æ”¶åˆ°æ•´ä¸ªåˆ†ç»„ã€‚ æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š å¦‚æžœå‘é€æ–¹è¦ä¼ é€é•¿æ˜¯Lçš„æŠ¥æ–‡ï¼Œä¸¤æ¡é“¾è·¯ä¼ è¾“é€ŸçŽ‡éƒ½æ˜¯Rbit/sï¼Œé‚£ä¹ˆåˆ°è¾¾è·¯ç”±å™¨ä¹‹å‰ä¸èƒ½è½¬å‘ï¼Œé¦–å…ˆæµªè´¹äº†L/R sï¼Œè¿™æ—¶å…¨éƒ¨åˆ°è¾¾äº†ï¼Œç„¶åŽè½¬å‘å‡ºåŽ»ï¼Œä¸€å…±èŠ±è´¹äº†2L/Rã€‚ï¼ˆæ²¡æœ‰è€ƒè™‘çº¿è·¯é•¿åº¦ï¼‰ è€Œå¦‚æžœæ•°æ®ä¸€æ—¦åˆ°è¾¾è·¯ç”±å™¨å°±è½¬å‘è€Œä¸ç”¨ç­‰åˆ°å…¨éƒ¨åˆ°è¾¾ï¼Œåªéœ€è¦L/Rçš„æ—¶é—´ã€‚ çŽ°åœ¨è®¡ç®—å‘é€ä¸‰ä¸ªåˆ†ç»„ï¼Œä»Žæºå‘é€ç¬¬ä¸€ä¸ªåˆ†ç»„åˆ°è¾¾ç›®çš„åœ°æŽ¥æ”¶åˆ°å…¨éƒ¨ä¸‰ä¸ªåˆ†ç»„çš„æ—¶é—´ï¼šåœ¨L/Rï¼Œç¬¬ä¸€ä¸ªåˆ†ç»„è¢«è½¬å‘å‡ºåŽ»ï¼Œè¿™æ—¶æºä¹Ÿå¼€å§‹å‘å‡ºç¬¬äºŒä¸ªåˆ†ç»„ï¼Œ2L/Rï¼Œç¬¬ä¸€ä¸ªå·²ç»è¢«è·¯ç”±å™¨è½¬å‘å®Œæ¯•ï¼Œç›®çš„ç«¯æ”¶åˆ°ï¼Œè·¯ç”±å™¨å¼€å§‹æŽ¥æ”¶ç¬¬ä¸‰ä¸ªåˆ†ç»„ï¼Œæºå¼€å§‹å‘é€ç¬¬ä¸‰ä¸ªåˆ†ç»„ï¼Œ3L/Rï¼Œè·¯ç”±å™¨æŽ¥æ”¶ç¬¬ä¸‰ä¸ªåˆ†ç»„å®Œæˆï¼Œç¬¬äºŒä¸ªåˆ†ç»„å·²ç»é€å‡ºåŽ»è¢«ç›®çš„æŽ¥æ”¶åˆ°ï¼Œæºç«¯å‘é€å®Œæ¯•ï¼Œ4L/Rç¬¬ä¸‰ä¸ªåˆ†ç»„å®Œå…¨ä¼ é€å‡ºåŽ»ï¼Œç›®çš„ç«¯æŽ¥æ”¶åˆ°ç¬¬ä¸‰ä¸ªåˆ†ç»„ã€‚ä¸€å…±4L/Ræ—¶é—´ã€‚ è€ƒè™‘Næ¡é€ŸçŽ‡å‡ä¸ºRçš„é“¾è·¯ï¼ˆæ‰€ä»¥ä¸€å…±æœ‰N-1ä¸ªè·¯ç”±å™¨ï¼‰ï¼Œå‘é€ä¸€ä¸ªåˆ†ç»„æ‰€éœ€æ—¶é—´æ˜¯$t=N*\frac{L}{R}$ã€‚ å¦‚æžœåƒä¸Šé¢ä¸€æ ·åˆ†ç»„å‘é€ï¼š ä¸€ä¸ªé•¿åº¦Lçš„åŒ…ä¸€æ¬¡å‘å‡ºåŽ»ï¼Œæ—¶é—´æ˜¯$t=N*\frac{L}{R}$ï¼Œå¦‚æžœåˆ†æˆcç»„ï¼Œæ—¶é—´ä¸ºï¼š$t`=(c+N-1)*\frac{L}{c*R}$ï¼ï¼]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
        <category>å¤§ä¸‰çš„è¯¾</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œè¯¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç»œç¼–ç¨‹ä¸€ï¼šUDP,CMD,TCP,WebServer]]></title>
    <url>%2F2017%2F11%2F15%2F%E7%AE%80%E5%8D%95udp%E9%80%9A%E4%BF%A1%E5%AE%9E%E7%8E%B0-java%2F</url>
    <content type="text"><![CDATA[UDP CMDä»Šå¤©å†™webserverçš„æ—¶å€™å‘çŽ°éœ€è¦ç”¨åˆ°ä»¥å‰å†™çš„ä¸€äº›ç¨‹åºçš„çŸ¥è¯†ã€‚æ‰€ä»¥è§‰å¾—æœ€å¥½æ€»ç»“ä¸€ä¸‹ã€‚ woaibianyi,bianyibangwojiejueledaiamdewenti.xieixeni. æ„Ÿè§‰åƒæ˜¯â€¦è¯†åˆ«ä¸å‡º\nâ€¦è¡Œå§ï¼Œmyplace myruleï¼Œ//å¿…é¡»ä»¥;ç»“å°¾ï¼ UDPä»‹ç»UDPé€šä¿¡ä½¿ç”¨ä¸¤ä¸ªç±»ï¼šDatagramPacketä¸ŽDatagramSocketã€‚å‰è€…æ˜¯å¯¹UDPåŒ…çš„ä¸€ä¸ªå°è£…ï¼ŒåŽè€…æ˜¯å®Œæˆä¸¤ç«¯ä¹‹é—´çš„äº¤æµã€‚åœ¨UDPé‡Œé¢Serverä¸ŽClientåœ°ä½åŒç­‰ï¼Œå½¼æ­¤æ²¡æœ‰åŒºåˆ†ã€‚ 1234DatagramPacket packet=new DatagramPacket(buff,buff.length,addr,port);//å‘é€åŒ…;DatagramPacket packet=new DatagramPacket(buff,buff.length);//æŽ¥æ”¶åŒ…;DatagramSocket socket=new DatagramSocket(port);//æŒ‡å®šç«¯å£å·çš„socket;DatagramSocket socket=new DatagramSocket();//è‡ªåŠ¨åˆ†é…ä¸€ä¸ªå¯ç”¨ç«¯å£å·; ä¸å¾—ä¸è¯´ç«¯å£å·ä¸Žè¿›ç¨‹ã€socketä¹‹é—´çš„å…³ç³»ï¼šç«¯å£å·ä¸Žè¿›ç¨‹æ¯›å…³ç³»æ²¡æœ‰ã€‚ä¸€ä¸ªudp socketåªèƒ½ç»‘ä¸€ä¸ªç«¯å£ï¼Œä¸€ä¸ªportåªèƒ½è¢«ä¸€ä¸ªsocketç»‘ã€‚è¿™ä¸ªåŽŸå› æ˜¯åœ¨å¤šè·¯å¤ç”¨ä¸Žå¤šè·¯åˆ†è§£è®²åˆ°çš„ã€‚å¦åˆ™ä¸çŸ¥é“pckç©¶ç«Ÿè¯¥ç»™è°ã€‚ ServerServerçš„ipèŽ·å–ï¼›èŽ·å–clientçš„ipä¸ŽportServerç«¯èŽ·å–Serverçš„ipä¸Žportï¼š 12InetAddress.getLocalHost();//ipèŽ·å–;socket.getLocalPort();//socketç»‘å®šçš„portèŽ·å–; Serverç«¯èŽ·å–Clientçš„ipä¸Žportï¼š 123//pckæ˜¯ä»ŽclientæŽ¥æ”¶åˆ°çš„åŒ…;pck.getAddress();//;pck.getPort();//; æ—¶é—´èŽ·å– å®šä¹‰ï¼šCalendar cal; æ¯æ¬¡èŽ·å–æ—¶é—´å‰éƒ½åº”æ‰§è¡Œï¼šcal= Calendar.getInstance(); èŽ·å–å¸¸ç”¨çš„æ•°æ®ï¼š 1234567int year = cal.get(Calendar.YEAR);int month=cal.get(Calendar.MONTH)+1;int day=cal.get(Calendar.DATE);int week = cal.get(Calendar.DAY_OF_WEEK)-1;int hour=cal.get(Calendar.HOUR_OF_DAY);int minute=cal.get(Calendar.MINUTE);int second=cal.get(Calendar.SECOND); ä½¿ç”¨å…¶ä»–ç±»è®¿é—®åŒä¸€å¯è§†åŒ–ç•Œé¢ä»¥æœ¬ç¨‹åºä¸ºä¾‹ï¼Œåœ¨ä¸»ç±»ä¸­åˆ›å»ºäº†ä¸€ä¸ªå¯è§†åŒ–ç•Œé¢ï¼Œå¸Œæœ›åœ¨Timeç±»è®¿é—®å¯è§†åŒ–ç•Œé¢çš„ä¸€ä¸ªlabelï¼š åœ¨Timeç±»åˆ›å»ºä¸€ä¸ªlabelï¼Œä½¿ç”¨ä¸»ç±»çš„labelåˆå§‹åŒ–è¿™ä¸ªlabelã€‚ ä¸»æ–¹æ³•ï¼šç›‘å¬clientè¯·æ±‚1234567891011121314151617DatagramSocket socket=new DatagramSocket(4444);//å›ºå®šçš„ä¸€ä¸ªsocketï¼Œç»‘å®šå›ºå®šçš„port;while(true)&#123; byte[]buff=new byte[256];//è¾“å…¥ç¼“å†²åŒº; DatagramPacket pck=new DatagramPacket(buff,buff.length);//æ¯æ¬¡éƒ½æ–°å»ºä¸€ä¸ªåŒ…ï¼Œå¦åˆ™ä¼šäº§ç”Ÿç¼“å†²åŒºä¸å¹²å‡€å‘é€æ•°æ®é”™è¯¯çš„é—®é¢˜; try &#123; server.log.setText(server.log.getText()+"\ni'm at "+InetAddress.getLocalHost()+" "+socket.getLocalPort()+" and listenning~\n"); server.log.setCaretPosition(server.log.getText().length());//è®¾ç½®ç›®å‰çš„å…‰æ ‡ä½ç½®ï¼Œåœ¨å¯è§†åŒ–ç•Œé¢å…·ä½“è®²; socket.receive(pck);//æŽ¥æ”¶æ•°æ®åŒ…ï¼šé˜»å¡žæ–¹æ³•; server.log.setText(server.log.getText()+"i've get a request from "+pck.getAddress()+" "+pck.getPort()+" "+new String(pck.getData())+"\n");//; server.log.setCaretPosition(server.log.getText().length()); Server newserver=new Server(new String(pck.getData()),pck,server);//æ–°å¼€ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸“é—¨è´Ÿè´£ä¸Žè¿™ä¸ªclientçš„é€šä¿¡; new Thread(newserver).start();//æ–°çº¿ç¨‹å¼€å§‹è¿è¡Œ; &#125; catch (IOException e) &#123; // TODO Auto-generated catch block; e.printStackTrace(); &#125;&#125; pck.getData();:èŽ·å–pckåŒ…çš„dataä¿¡æ¯;pck.getAddress();èŽ·å–åŒ…çš„æºåœ°å€pck.getPort();èŽ·å–åŒ…çš„æºç«¯å£ InetAddress.getLocalHost();:èŽ·å–æœ¬åœ°ipï¼Œå¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œéœ€è¦å¤„ç†socket.getLocalPort();èŽ·å–socketç»‘å®šçš„ç«¯å£å· socket.receive(pck);:ç­‰å¾…æŽ¥æ”¶ä¸€ä¸ªåŒ…socket.send(pck);:å‘é€ä¸€ä¸ªåŒ… Stringä¸ŽUnixæ—¶é—´æˆ³ä¹‹é—´çš„è½¬æ¢formatå‡½æ•°ä¹‹ä¸­æ˜¯ä¸€ä¸ªDateå¯¹è±¡ï¼Œè¿™ä¸ªDateå¯¹è±¡ç”±ä¸€ä¸ªlongæž„é€ ï¼šlist[i]æ˜¯Fileç±»åž‹ã€‚ä¹Ÿè®¸ä¼šè¯´â€œè¿‡æ—¶â€ï¼Œæ²¡å…³ç³»ï¼Œè¿™ä¸€æ•´å¥ä»£ç æ‰“ä¸ŠåŽ»å°±ä¸ä¼šæç¤ºäº†ã€‚ 1String dates=new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(new java.util.Date(list[i].lastModified())); å¤šè¯´ä¸€å¥SimpleDateFormatï¼š G å¹´ä»£æ ‡å¿—ç¬¦ y å¹´ M æœˆ d æ—¥ h æ—¶ åœ¨ä¸Šåˆæˆ–ä¸‹åˆ (1~12) H æ—¶ åœ¨ä¸€å¤©ä¸­ (0~23) m åˆ† s ç§’ S æ¯«ç§’ E æ˜ŸæœŸ D ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤© F ä¸€æœˆä¸­ç¬¬å‡ ä¸ªæ˜ŸæœŸå‡  w ä¸€å¹´ä¸­ç¬¬å‡ ä¸ªæ˜ŸæœŸ W ä¸€æœˆä¸­ç¬¬å‡ ä¸ªæ˜ŸæœŸ a ä¸Šåˆ / ä¸‹åˆ æ ‡è®°ç¬¦ k æ—¶ åœ¨ä¸€å¤©ä¸­ (1~24) K æ—¶ åœ¨ä¸Šåˆæˆ–ä¸‹åˆ (0~11) z æ—¶åŒº å¯ä»¥è¯´æ˜¯ååˆ†å®žç”¨äº†ã€‚ å…·ä½“ä¿¡æ¯å¯ä»¥è®¿é—®è¿™é‡Œï¼šSimpleDateFormatä½¿ç”¨è¯¦è§£ èŽ·å–æœ¬åœ°æ–‡ä»¶ä¿¡æ¯æ³¨æ„ï¼šæ²¡æœ‰è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼šåŒ…æœ€åŽä¸€å®šä¼šç”¨ASCIIä¸º0çš„charå¡«å……æ»¡255ä¸ªï¼Œæ³¨æ„ï¼ 12345File f=new File(dirpath);File[] list=null;if(f.isDirectory())&#123; list=f.listFiles();&#125; èŽ·å–æ–‡ä»¶åä¿¡æ¯ï¼šlist[0].getName();æ˜¯å¦æ–‡ä»¶ï¼Ÿæ˜¯å¦ç›®å½•ï¼Ÿ:list[0].isFile();list[0].isDirectory();è¿˜æœ‰ä¸€ç³»åˆ—æ–¹æ³•ï¼šè‡ªå·±å‘çŽ°å§ï¼ Serverçš„javaä»£ç çœ‹è¿™é‡Œ Clientclientçš„ipèŽ·å–InetAddress.getLocalHost();ä¸ŽServerå·®ä¸å¤š è®¾ç½®æœ€å¤§æ—¶å»¶é€å‡ºä¸€ä¸ªåŒ…ï¼š 123DatagramSocket socket=new DatagramSocket();socket.setSoTimeout(10000);socket.send(pck); æ–°å¼€ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼šç­‰å¾…æŽ¥æ”¶ä¸€æ—¦è¶…æ—¶è§¦å‘å¼‚å¸¸ï¼š 12345678try&#123; socket.receive(pck);&#125;catch(SocketTimeoutException e)&#123; e.printStackTrace(); ori=ori+"timeout!:"+socket.getInetAddress()+" for "+pck.getData().toString()+" has no response . try again!\n"; clientthis.tf.setText(ori);&#125; ä½¿ç”¨Stringè®¾ç½®æŒ‡å®šIP12345678910111213141516171819202122232425262728293031323334try&#123; int[]ipaddr=new int[4]; String[] ipsplit=new String[4]; data=data.replace('.', '-'); ipsplit=data.split("-");//è¿™ä¸¤æ­¥æ˜¯å½“æ—¶ä¸æ‡‚æ­£åˆ™ï¼Œä½¿çš„ä¸€ä¸ªå°æ‰‹æ®µ; for(int i=0;i&lt;4;i++)&#123; if(ipsplit[i]!=null &amp;&amp; ipsplit[i].isEmpty())&#123; cmd.setText(cmd.getText()+"format of ip addr wrong!split by .\n&gt;"); rows++; break; &#125; ipaddr[i]=Integer.parseInt(ipsplit[i]); &#125;//å‰é¢æ˜¯ä¸ºäº†éªŒè¯ç»™å®šçš„stringæ˜¯ç¬¦åˆè¦æ±‚çš„int.int.int.intå½¢å¼; //å¾—åˆ°æ­£ç¡®çš„ip; //è½¬åŒ–ä¸ºbyteæµ; byte[]byteaddr=new byte[4]; byteaddr[0]=(byte)ipaddr[0]; byteaddr[1]=(byte)ipaddr[1]; byteaddr[2]=(byte)ipaddr[2]; byteaddr[3]=(byte)ipaddr[3]; //è®¾ç½®æ–°ip; addr=InetAddress.getByAddress(byteaddr); System.out.println(data); cmd.setText(cmd.getText()+"&gt;");//å…ˆå¿½ç•¥å°±å¥½;&#125;catch(NumberFormatException e)&#123;//æ ¹æœ¬ä¸ç¬¦åˆæ ¼å¼; e.printStackTrace(); cmd.setText(cmd.getText()+" wrong:"+command.substring(7)+"wrong format of ip addr! split by . and only numbers are accept\n&gt;"); rows++;&#125;catch(UnknownHostException he)&#123;//; he.printStackTrace(); cmd.setText(cmd.getText()+"unknown host\n&gt;"); rows++;&#125; clientä»£ç çœ‹è¿™é‡Œ å¯è§†åŒ–å¯è§†åŒ–éƒ¨åˆ†ä¹Ÿåœ¨ä¸Šé¢çš„clientä»£ç é‡Œé¢ã€‚ TCP WebServerè¿™æ˜¯ç¬¬äºŒæ¬¡ä½œä¸šï¼Œä½¿ç”¨TCPï¼Œåˆ©ç”¨http1.1ï¼Œå®žçŽ°ä¸€ä¸ªå¯ä»¥ä¸Žæµè§ˆå™¨è¿›è¡Œäº¤äº’çš„å°åž‹çš„WebServerã€‚ é™„åŠ ï¼štcpéƒ¨åˆ†ç¼–ç è®¾ç½® String code=â€utf-8â€; try { InputStream instream= new java.io.FileInputStream(file); byte[] b = new byte[3]; instream.read(b); instream.close(); if (b[0] == -17 &amp;&amp; b[1] == -69 &amp;&amp; b[2] == -65)code=â€utf-8â€; else code=â€GBKâ€; } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } return code;]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
        <category>å¤§ä¸‰çš„è¯¾</category>
        <category>ä½œä¸š</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œè¯¾</tag>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OS-å„å®žéªŒåˆè®²]]></title>
    <url>%2F2017%2F11%2F14%2FOS%2F%E5%AE%9E%E9%AA%8C%E4%B8%B2%E8%AE%B2%2F</url>
    <content type="text"><![CDATA[Lab3ï¼šUser EnvironmentPreï¼šå®žéªŒå‡†å¤‡çŸ¥è¯†GCCå†…è”æ±‡ç¼–ç‰¹æƒé™çº§åŸºç¡€çŸ¥è¯†å‡†å¤‡åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ä¹‹åŽå°±ä¼šæœ‰ä¸åŒçš„ç‰¹æƒç­‰çº§ï¼Œè¿™æ—¶é»˜è®¤åœ¨æœ€é«˜çš„ç‰¹æƒç­‰çº§ä¸Šã€‚è¿™ä¸ªæ—¶å€™ä¸ºå†…æ ¸å»ºç«‹äº†é¡µè¡¨ç»“æž„ï¼ŒæŽ¥ä¸‹æ¥å°†ä¼šè·³è½¬åˆ°ç”¨æˆ·ç¨‹åºã€‚è¿›è¡Œè·³è½¬çš„æ—¶å€™ï¼Œåº”è¯¥æ³¨æ„ï¼šä¸å¯ä»¥å†ç•™ç€è¿™ä¸ªé«˜çº§çš„è¿è¡Œæƒé™äº†ï¼Œå› æ­¤éœ€è¦è¿›è¡Œç‰¹æƒçº§çš„é™çº§ã€‚ ç³»ç»Ÿåœ¨ä»¥ä¸Šç”µæ—¶ï¼Œå„ä¸ªèµ„æºç®¡ç†éƒ½è¿˜æ²¡æœ‰å»ºç«‹ï¼Œè¿™ä¸ªæ—¶å€™å¤„äºŽç‰¹æƒç®¡ç†æ¨¡å¼ï¼Œåœ¨ç‰¹æƒæ¨¡å¼å»ºç«‹å®Œæ¯•æ‰€æœ‰çš„èµ„æºæ˜ å°„ä¹‹åŽï¼Œå†é™çº§åˆ°é€šç”¨æ¨¡å¼ï¼Œè¿è¡Œã€‚ å› æ­¤ï¼Œä¸€ä¸Šç”µè¿è¡Œçš„æŒ‡ä»¤ä¸€æ—¦è¢«ä¸å®‰å…¨çš„ç¨‹åºæŽ¥ç®¡ï¼Œå°†ä¸ä¼šé™çº§ï¼Œä¿æŠ¤æŽªæ–½å°†å½¢åŒè™šè®¾ã€‚å› æ­¤ï¼Œåœ¨æ™ºèƒ½æ‰‹æœºç­‰ç»ˆç«¯ä¸Šéƒ½æœ‰ä¸€ä¸ªå«åštrustdo(?)çš„ç¡¬ä»¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŠ å¯†çš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯ç³»ç»Ÿä¸Šç”µä¹‹åŽè¿è¡Œçš„ç¬¬ä¸€æ®µä»£ç ï¼Œä½œç”¨æ˜¯éªŒè¯å°†è¦è¿è¡Œçš„è¿™æ®µä»£ç æ˜¯ä¸æ˜¯è¢«æŽˆæƒçš„ï¼Œæ•°å­—ç­¾åæ˜¯å¦é€šè¿‡ï¼Œè‹¥é€šè¿‡æ‰ä¼šè¿è¡Œã€‚trustdoä¼šè¢«åšåˆ°CPUçš„èŠ¯ç‰‡ä¸­ï¼Œä¿è¯äº†å³ä½¿ä¸Šç”µåŽå¤„äºŽç‰¹æƒæ¨¡å¼çš„ä»£ç æ˜¯å®‰å…¨å¯é çš„ã€‚ iretï¼šç³»ç»ŸæŒ‡ä»¤ï¼Œä»Žä¸­æ–­ä¸­è¿”å›žã€‚retï¼šä»Žå‡½æ•°ä¸­è¿”å›žretfï¼šä¸ŽretåŸºæœ¬ä¸€æ ·ï¼Œä»Žå‡½æ•°ä¸­è¿”å›žã€‚ï¼ˆå¼¹å‡ºæ ˆï¼Œæ‹¿å‡ºè¿”å›žåœ°å€ï¼ˆå°±æ˜¯ä¸‹ä¸€æ¡è¯­å¥ï¼‰è¿”å›žå€¼ï¼Œä¸¢æŽ‰åŽ‹æ ˆå‚æ•°ï¼‰ ä¸­æ–­æ˜¯ä¸€ä¸ªç¡¬ä»¶çš„äº‹ä»¶ï¼Œä¸­æ–­è¿”å›žä¸Žå‡½æ•°è¿”å›žä¸åŒã€‚å½“ä¸€ä¸ªä¸­æ–­æ¥äº†ï¼Œä¸ç®¡ä½ å½“æ—¶åœ¨å¹²å˜›ï¼Œå°±ä¹–ä¹–åœ°ä¿å­˜ä¸€ä¸‹çŽ°åœºåŽ»å“åº”ä¸­æ–­ã€‚è¿™ä¸ªä¿å­˜çŽ°åœºï¼ŒåŒ…æ‹¬äº†ç¡¬ä»¶å°†ä¼šè‡ªåŠ¨å¸®ä½ ä¿å­˜çš„ä¸€äº›çŽ°åœºï¼Œæ¯”å¦‚CSã€SSã€Flagç­‰ç­‰ï¼Œè¿™äº›æ˜¯è‡ªåŠ¨å­˜ä¸‹çš„ï¼Œiretçš„ä½œç”¨å°±æ˜¯è‡ªåŠ¨åœ°å°†è¿™äº›ä¸œè¥¿éƒ½å¼¹å‡ºã€‚ä½†æ˜¯è¿™äº›çŽ°åœºä¿å­˜å¹¶ä¸å¤Ÿï¼Œé€šç”¨å¯„å­˜å™¨æ˜¯ä¸ä¼šå¸®ä½ ä¿å­˜çš„ã€‚ retã€iretç­‰ç­‰åœ¨æ±‡ç¼–ä¹‹ä¸­å¯ä»¥éšæ„è°ƒç”¨ï¼Œå¹¶ä¸éœ€è¦å…¶ä»–çº¦æŸã€‚å¦‚æžœå½“ä½ åœ¨æ±‡ç¼–ä¸­ä¸æ˜¯å‡½æ•°ï¼ˆä¸­æ–­ï¼‰çš„é‡Œé¢è°ƒç”¨äº†è¿™äº›ï¼Œå®ƒä¼šå¹²äº›ä»€ä¹ˆå‘¢ï¼Ÿä»–ä¼šæŠŠè‡ªå·±è®¤ä¸ºçš„è‡ªå·±ä¿å­˜è¿›åŽ»çš„é‚£äº›ä¸œè¥¿å¼¹å‡ºæ¥ï¼Œä¸€ä¸ªæ˜¯è¿”å›žåœ°å€ç»™PCï¼Œä¸€ä¸ªæ˜¯è¿”å›žå€¼ç»™ä¿å­˜è¿”å›žå€¼çš„ä¸œè¥¿ã€‚å³ä½¿æ²¡æœ‰è°ƒç”¨å‡½æ•°ï¼Œretçš„è¡Œä¸ºä¹Ÿæ˜¯å›ºå®šçš„ï¼šä»Žæ ˆé¡¶å¼¹å‡ºä¸¤ä¸ªå€¼ï¼Œä¸€ä¸ªç»™PCï¼Œä¸€ä¸ªç»™å­˜å‚¨è¿”å›žå€¼çš„ä¸œè¥¿ï¼Œiretçš„è¡Œä¸ºä¹Ÿæ˜¯å›ºå®šçš„ï¼Œå°±æ˜¯ä»Žæ ˆé¡¶å¼¹å‡ºä¸œè¥¿ç»™é‚£äº›å˜é‡ã€‚è¿™å°±æ˜¯ä¿æŠ¤çŽ°åœºä¹‹åŽçš„æ ˆã€‚retæ˜¯å¼¹å‡ºåˆ°eipï¼Œretfå¼¹å‡ºåˆ°CSï¼Œiretå¼¹å‡ºåˆ°CSï¼ˆä»£ç æ®µï¼‰ã€EFLAGSï¼Œæ ¹æ®æ˜¯å¦æ”¹å˜ç‰¹æƒç­‰çº§ï¼Œiretä¼šè¿žä¸‹é¢çš„SSä»¥åŠespä¸€èµ·å¼¹å‡ºæ¥ã€‚ è¿™æ ·ï¼Œå¦‚æžœä¸€ä¸ªç¨‹åºåœ¨æ ˆä¸­äº‹å…ˆåœ¨æ ˆä¸­å­˜äº†ä¸€äº›æ•°æ®ï¼Œç„¶åŽè°ƒç”¨äº†iretï¼Œiretä¸ç®¡æ ˆä¸­ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œå°±ä¼šå¼¹å‡º5ï¼ˆ3ï¼‰ä¸ªå…ƒç´ ï¼Œç»™å¯¹åº”çš„å¯„å­˜å™¨ã€‚retå’Œretfä¹Ÿç±»ä¼¼ã€‚å› æ­¤ï¼Œåœ¨æ±‡ç¼–ä¸­retä»¬ä¸Žé«˜çº§è¯­è¨€çš„returnä»¬çš„ä½œç”¨ä¸åŒï¼Œæ±‡ç¼–ä¸­çš„retä»¬åªæ˜¯æä¾›äº†ä¸€ä¸ªæ‰¹é‡ä¿®æ”¹å¯„å­˜å™¨çš„æ–¹æ³•ã€‚ ç³»ç»Ÿä¸­æœ‰ä¸¤ç§ä¸­æ–­ã€‚ä¸­æ–­å¯èƒ½åœ¨ä»»æ„æ—¶é—´å‘ç”Ÿã€‚åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ä¸Žåœ¨ç‰¹æƒæ¨¡å¼ä¸‹ä¸­æ–­å‘ç”ŸåŽç³»ç»Ÿçš„åŠ¨ä½œæ˜¯ä¸ç›¸åŒçš„ã€‚ åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œç³»ç»Ÿä¼šä¿å­˜è¿™äº›ä¸œè¥¿ï¼šè¿˜è®°å¾—åœ¨â€œå†…å­˜ç®¡ç†â€çš„labé‡Œé¢è®²è¿‡çš„æ®µé€‰æ‹©å­ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªbitæ ‡è¯†è‡ªå·±å¤„åœ¨ä»€ä¹ˆç‰¹æƒæ¨¡å¼ä¸‹çš„ç‰¹æƒä½ã€‚è¿™é‡Œé¢æœ‰ä¸¤ä¸ªæ®µé€‰æ‹©å­ï¼Œä¸€ä¸ªæ˜¯æ ˆçš„ï¼Œä¸€ä¸ªæ˜¯ä»£ç æ®µçš„ï¼Œç”±äºŽåœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°CSä»£ç æ®µé€‰æ‹©å­ä¸ŽSSæ ˆé€‰æ‹©å­çš„ç‰¹æƒä½RPLéƒ½æ˜¯3ã€‚ åœ¨ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œä¸€æ—¦å‘ç”Ÿä¸­æ–­ï¼šè¿™æ—¶ä¿å­˜çš„ä¸œè¥¿æ¯”è¾ƒå°‘ã€‚ æ— è®ºåœ¨å“ªç§æ¨¡å¼ä¸‹ä¸€æ—¦è°ƒç”¨iretï¼Œå°±æŠŠè¿™äº›ä¸œè¥¿ï¼ˆå…¶å®žä¸ä¸€å®šæ˜¯è¿™äº›ä¸œè¥¿ï¼Œåªæ˜¯å¯¹åº”æ ˆé¡¶çš„å‡ ä¸ªæ•°æ®ï¼‰å¼¹å‡ºåŽ»ç»™å¯¹åº”çš„å¯„å­˜å™¨ã€‚ æ­£é¢˜ï¼šç‰¹æƒé™çº§è€ƒè™‘åšå®Œlab2ï¼Œç³»ç»Ÿåœ¨ç‰¹æƒçº§æ˜¯0çš„æ¨¡å¼ä¸‹ï¼Œè¿™æ˜¯éœ€è¦çŽ°å°†è‡ªå·±é™çº§æˆä¸ºç‰¹æƒ3çš„æ¨¡å¼ï¼Œå†åŽ»è¿è¡Œç”¨æˆ·ç¨‹åºã€‚æ€Žä¹ˆé™ï¼Ÿ è¦ä¼ªé€ ä¸€ä¸ªåœºæ™¯ï¼šåˆšåˆšä¸€ä¸ªç”¨æˆ·ç¨‹åºäº§ç”Ÿäº†ä¸€ä¸ªä¸­æ–­æ‰€ä»¥æˆ‘å‡çº§äº†ï¼ŒçŽ°åœ¨æˆ‘è¦ä¸­æ–­è¿”å›žã€‚äºŽæ˜¯æˆ‘åŽ»ä¼ªé€ äº†ä¸€ä¸ªæ ˆï¼Œåœ¨æ ˆé‡Œå¤´å­˜ä¸Šäº†iretå¸Œæœ›çš„é‚£5ä¸ªæ•°æ®ï¼Œæ¯ä¸€ä¸ªæ˜¯32ä½ã€‚ç„¶åŽè°ƒç”¨iretï¼Œè¿™äº›å°±ä¼šä»Žæ ˆä¸­å¼¹å‡ºæ¥åˆ°è¾¾å¯¹åº”çš„å¯„å­˜å™¨ï¼Œç„¶åŽæˆ‘å°±å›žåˆ°äº†ç”¨æˆ·æ¨¡å¼ï¼Œé‚£ä¸¤ä¸ªæ®µé€‰æ‹©å­çš„ç‰¹æƒçº§å€¼å°±è¢«æ”¹ä¸ºäº†3ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç³»ç»ŸåŽŸæ¥ä½¿ç”¨çš„ç‰¹æƒçº§æ˜¯0çš„æ ˆï¼Œiretä¹‹åŽè¿™ä¸ªæ ˆç©ºæŽ‰äº†ï¼Œä½†æ˜¯ç³»ç»Ÿä¸å†ä½¿ç”¨è¿™ä¸ªæ ˆï¼Œè€Œæ˜¯é‡æ–°ä¸ºç”¨æˆ·æ€å¼€é¿äº†ä¸€ä¸ªæ–°çš„æ ˆï¼Œè¿™ä¸ªæ ˆä¸å†æ˜¯ä»¥å‰çš„é‚£ä¸ªæ ˆäº†ï¼Œè¿™ä¸ªæ ˆæ”¾åœ¨ç”¨æˆ·ç©ºé—´çš„æ•°æ®æ®µé‡Œï¼Œå®ƒçš„æƒé™ä¹Ÿæ˜¯3ã€‚ ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡å‘¢ï¼Ÿåœ¨ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œç³»ç»Ÿå¹¶ä¸æƒ³å’Œç‰¹æƒçº§æ›´ä½Žçš„ç”¨æˆ·æ€å…±ç”¨ä¸€ä¸ªç‰¹æƒçº§æ›´é«˜çš„æ ˆã€‚å¦ä¸€ä¸ªæ–¹é¢ä»Žå®‰å…¨è€ƒè™‘ï¼Œä¸ºäº†é˜²æ­¢ç”¨æˆ·æ€éšæ„å¼¹å‡ºæ•°æ®éšæ„æ’å…¥æ•°æ®ç ´åå†…æ ¸è¿è¡Œã€‚ ä»Žç‰¹æƒæ¨¡å¼åˆ°è¾¾ç”¨æˆ·æ¨¡å¼ï¼Œæ–°åˆ›å»ºäº†ä¸€ä¸ªæ ˆç»™ç”¨æˆ·ç¨‹åºä½¿ç”¨ï¼Œè¿™æ˜¯åœ¨åˆšä¸Šç”µçš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰ç”¨æˆ·ç¨‹åºè¿è¡Œã€‚ç”¨æˆ·ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½ä¼šæœ‰ç³»ç»Ÿè°ƒç”¨å›žåˆ°ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œè¿™æ˜¯å°†ä¼šä½¿ç”¨å‰é¢æåˆ°çš„ç³»ç»Ÿç”¨çš„é‚£ä¸ªæ ˆï¼Œç³»ç»Ÿè°ƒç”¨å®Œæˆä¹‹åŽï¼Œä¸ä¼šå†ä¸ºç”¨æˆ·ç¨‹åºåˆ›å»ºæ–°çš„æ ˆäº†ï¼Œä¸€æ˜¯å ç©ºé—´ï¼Œä¸€æ˜¯ä»¥å‰çš„è¿è¡Œæ€ä¸èƒ½å°±è¿™æ ·ä¸¢æŽ‰ã€‚å°±è¿˜è®©å®ƒå›žåˆ°è‡ªå·±åŽŸæ¥çš„æ ˆã€‚ ç‰¹æƒçº§æå‡ä¸­æ–­ã€å¼‚å¸¸ã€ç³»ç»Ÿè°ƒç”¨ï¼šæˆ‘éœ€è¦æ›´é«˜ç‰¹æƒçš„ä¸œè¥¿å¸®å¸®æˆ‘ã€‚ åœ¨80386ä¸­ï¼Œç³»ç»Ÿè°ƒç”¨å°±æ˜¯ä¸€ä¸ªä¸­æ–­ã€‚å¼‚å¸¸æ˜¯éœ€è¦ç´§æ€¥å¤„ç†çš„ä¸­æ–­ã€‚ ä¸­æ–­åœ¨32ä½æœºå™¨ä¸Šçš„ä¸­æ–­æ˜¯ä¸€ä¸ªå¾ˆå¤æ‚çš„æœºåˆ¶ï¼Œå› ä¸ºé‚£æ—¶ä¿æŠ¤æ¨¡å¼å·²ç»å»ºç«‹äº†èµ·æ¥ï¼Œæ•´ä¸ªè¿è¡Œåœ¨è™šæ‹Ÿåœ°å€ç©ºé—´ä¸Šã€‚æ‰€ä»¥å½“ä¸­æ®µå‘ç”Ÿçš„æ—¶å€™ï¼Œç³»ç»Ÿä½¿ç”¨ä¸­æ–­æè¿°ç¬¦è¡¨ï¼Œå†™ç€è‡ªå·±æ‰€æœ‰çš„ä¸­æ–­å·ã€‚ä¸­æ–­æè¿°ç¬¦å¯„å­˜å™¨ï¼ˆIDTRï¼‰ä¸­å­˜çš„å°±æ˜¯ä¸­æ–­æè¿°ç¬¦è¡¨ï¼ˆIDTï¼‰åœ¨å†…å­˜ä¸­çš„ä½ç½®ä»¥åŠå¤§å°ã€‚è¡¨æŒ‰ç…§ä¸­æ–­å·æŽ’åºï¼Œæ¯ä¸€ä¸ªä¸­æ–­æè¿°ç¬¦åœ¨80386ä¸­è¢«å«åšä¸€ä¸ªé—¨ï¼Œä¸­æ–­é—¨ï¼ˆä¸­æ–­ï¼‰ï¼Œé™·é˜±é—¨ï¼ˆå¼‚å¸¸ï¼‰ã€‚ä¼šæ ¹zä¸­æ–­å‘ç”Ÿçš„ç¼–å·ä»Žè¡¨ä¸­å–å‡ºå¯¹åº”çš„æè¿°ç¬¦ï¼ˆé—¨ï¼‰ï¼Œå–å›žçš„æè¿°ç¬¦æ˜¯è¿™æ ·çš„ï¼šsegment selectorä¸Žoffsetç”¨æ¥æè¿°åœ¨æ®µæœºåˆ¶ä¸‹è‡ªå·±çš„ä¸­æ–­å“åº”å‡½æ•°çš„ä½ç½®ã€‚segment selectorè´Ÿè´£åœ¨GDTé‡Œé¢æ‰¾åˆ°å¯¹åº”çš„æ®µï¼Œoffsetè´Ÿè´£æ‰¾å¯¹åº”çš„åç§»é‡ã€‚æ‰¾åˆ°å‡½æ•°ä¹‹åŽï¼Œä¿å­˜çŽ°åœºå¹¶æ‰§è¡Œå“åº”å‡½æ•°ã€‚ åœ¨ç»ˆç«¯å‘ç”Ÿçš„æ—¶å€™ï¼Œç³»ç»Ÿå°†ä¼šçœ‹ä¸€ä¸‹äº§ç”Ÿä¸­æ–­çš„ç¨‹åºçš„ç‰¹æƒçº§ï¼Œå†³å®šåº”è¯¥æ€Žæ ·ä¿æŠ¤çŽ°åœºã€‚å¦‚æžœåœ¨ç‰¹æƒçŠ¶æ€ï¼Œä¸ç”¨æ¢æ ˆï¼Œåªéœ€è¦ä¿å­˜æ›´å°‘çš„ä¸œè¥¿ï¼Œè€Œå¤„äºŽç”¨æˆ·çŠ¶æ€ä¸‹çš„ç¨‹åºåœ¨æ‰§è¡Œå®Œä¸­æ–­å“åº”å‡½æ•°ä¹‹åŽè¿˜è¦ä»Žï¼ˆï¼Ÿï¼‰é€€å›žåˆ°è‡ªå·±çš„ç”¨æˆ·æ ˆï¼Œä¿å­˜äº†æ›´å¤šçš„ä¸œè¥¿ã€‚ æ­£é¢˜ï¼šç‰¹æƒçº§æå‡ä»Žç‰¹æƒæ¨¡å¼3åˆ‡æ¢åˆ°ç‰¹æƒæ¨¡å¼0ï¼Œå®žé™…ä¸Šå°±æ˜¯å“åº”ä¸€ä¸ªä¸­æ–­ï¼Œè¿™å°±æ˜¯ä¸Šé¢å›¾ä¸­çš„trapã€‚ å¯¹äºŽç”¨æˆ·ç¨‹åºï¼Œoså¹¶ä¸ä¿¡ä»»ã€‚å½“trapå‘ç”Ÿæ—¶ï¼Œå½“å‰ç”¨æˆ·ç¨‹åºçš„è¿è¡ŒçŠ¶æ€ä¼šè¢«å­˜å…¥åˆ°å†…æ ¸æ ˆä¸­ï¼Œè€Œç”¨æˆ·æ ˆå¹¶æ²¡æœ‰å˜åŒ–ã€‚è¿™ä¹Ÿæ˜¯ä¸­æ–­ä¸Žæ™®é€šå‡½æ•°è°ƒç”¨çš„ä¸åŒã€‚çŽ°åœ¨å·²ç»è¿›å…¥äº†ç‰¹æƒæ¨¡å¼ï¼Œå¦‚æžœä¸ä½œä»»ä½•æ“ä½œï¼Œåªæ˜¯è°ƒç”¨ä¸€ä¸ªiretï¼Œå‰é¢è®²åˆ°çš„CSï¼ŒSSç‰¹æƒçº§3åˆä¼šè¢«å†™å…¥åˆ°å¯„å­˜å™¨é‡Œé¢ï¼Œå°±åˆå›žåˆ°äº†ç”¨æˆ·æ€ã€‚ä¸ºäº†èƒ½ç•™åœ¨ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œå¯¹æ ˆè¿›è¡Œä¼ªé€ ï¼Œå‡è£…åœ¨è¿›å…¥ç»ˆç«¯ä¹‹å‰å°±æ˜¯ä¸€ä¸ªç‰¹æƒæ¨¡å¼ï¼šä¹Ÿå°±æ˜¯æŠŠä¸Šé¢æåˆ°çš„ç”¨æˆ·æ€å‘ç”Ÿä¸­æ–­çš„æ ˆä¿¡æ¯ä¿®æ”¹æˆç‰¹æƒæ¨¡å¼å‘ç”Ÿä¸­æ–­çš„æ ˆä¿¡æ¯ã€‚è¿™æ—¶iretï¼Œå°±å¯ä»¥ç•™åœ¨ç‰¹æƒæ¨¡å¼ä¸‹ã€‚ ä½†æ˜¯ï¼šåœ¨ä¼ªé€ çš„æ—¶å€™ï¼ŒSSè¢«æ‰”æŽ‰äº†ã€‚æ€Žä¹ˆå›žåŽ»å‘¢ï¼Ÿ80386æä¾›äº†ä¸€ä¸ªTSSä»»åŠ¡çŠ¶æ€æ®µï¼Œå®ƒå‡ ä¹Žå¯ä»¥å­˜ä¸‹CPUä¸Šæ‰€æœ‰çš„å¯„å­˜å™¨çš„ä¸æ­¢ä¸€ä»½æ‹·è´ã€‚TSSæ¯ä¸ªè¿›ç¨‹ä¸€ä¸ªï¼Œä¼šå­˜ä¸‹ä¸€ä¸ªè¿›ç¨‹åœ¨åˆ‡æ¢ç‰¹æƒçŠ¶æ€çš„æ—¶å€™åŽŸç‰¹æƒçŠ¶æ€ä¸‹çš„SSçš„å€¼ã€‚ç³»ç»Ÿå°†ä¼šè‡ªå·±å¯¹TSSè¿›è¡Œç»´æŠ¤ï¼Œä»¥ç¡®ä¿åˆ‡æ¢æ¨¡å¼æ—¶æ ˆçš„è·³è½¬ã€‚ TSSå­˜åœ¨äºŽå“ªé‡Œå‘¢ï¼Ÿåœ¨GDTé‡Œé¢æœ‰ä¸€ä¸ªTSSçš„æè¿°ç¬¦ï¼š 80386ä¸­æœ‰4ä¸ªç‰¹æƒæ¨¡å¼ï¼Œç›®å‰åœ¨è™šæ‹ŸåŒ–æŠ€æœ¯ä¸‹åªæ˜¯ç”¨äº†3ä¸ªã€‚ æœ‰ä¸€ä¸ªå«åšTSRçš„å¯„å­˜å™¨ï¼Œå­˜ç€selectorã€base addrä»¥åŠsegment limitã€‚ä¾¿äºŽç›´æŽ¥æ‰¾åˆ°TSSã€‚ å¦‚æžœæƒ³è¦å›žåˆ°ç”¨æˆ·æ¨¡å¼ï¼Œè¿›å…¥trapï¼Œä¼ªé€ ä¸€ä¸ªä»Žç”¨æˆ·æ€è¿‡æ¥çš„æ ˆï¼Œiretå³å¯ã€‚ ç³»ç»Ÿè°ƒç”¨ç”¨æˆ·ç¨‹åºå¯ä»¥é€šè¿‡ç³»ç»Ÿè°ƒç”¨è®¿é—®å†…æ ¸æœåŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦æŒ‡å®šä¸­æ–­å·ï¼Œä½¿ç”¨tarpæˆ–è€…ç‰¹æ®ŠæŒ‡ä»¤ï¼ˆSYSENTER/SYSEXITï¼‰å®žçŽ°ã€‚ å…³äºŽè¿™æ¬¡å®žéªŒè¿™é‡Œçš„envå°±æ˜¯è¯¾ä¸Šè®²çš„pcbã€‚çˆ¶å­è¿›ç¨‹çš„ä¸€ä¸ªä½œç”¨æ˜¯çˆ¶è¿›ç¨‹è¦ä¸ºå­è¿›ç¨‹æ”¶å°¸ã€‚ elfæ ¼å¼ï¼šlinuxä¸‹çš„å¯æ‰§è¡Œã€‚åˆ›å»ºè¿›ç¨‹å¹¶æ‰§è¡Œelfï¼šæ²¡æœ‰æ–‡ä»¶ç³»ç»Ÿæ€Žä¹ˆåŠžï¼ŸæŠŠæŒ‡å®šçš„æ–‡ä»¶é“¾æŽ¥è¿›ç›®æ ‡æ–‡ä»¶ï¼Œéª—bootloaderæŠŠç¨‹åºä¹Ÿæ¬è¿›å†…å­˜ã€‚ -b binary path:-bå¸®æˆ‘æ¬è¿›æ¥ã€‚binaryè¿™æ˜¯ä¸ªå¯æ‰§è¡Œç¨‹åºã€‚ç„¶åŽé‡ç”Ÿæˆä¸€ä¸ªç¬¦å·è¡¨ã€‚æŠŠè¿™ä¸ªæ–‡ä»¶ä½œä¸ºä¸€ä¸ªå¤§æ•°ç»„ç¼€åˆ°æœ€åŽï¼Œç„¶åŽç›´æŽ¥ä½¿ç”¨è¿™ä¸ªæ•°ç»„ã€‚ ç¼–ç çš„æ—¶å€™ï¼Œè¿™ä¸ªæ•°ç»„è¿˜æ²¡æœ‰ï¼Œé“¾æŽ¥çš„æ—¶å€™æ‰æœ‰ï¼Œæ€Žä¹ˆåŠžï¼Ÿå®šä¹‰ä¸€ä¸ªå¤–éƒ¨å˜é‡externã€‚åªéœ€çŸ¥é“ç”Ÿæˆç¬¦å·è¡¨çš„è§„åˆ™ï¼Œç„¶åŽæŒ‰è§„åˆ™å‘½åå³å¯ã€‚ è¿›æ¥ä¹‹åŽè¿˜åªæ˜¯ä¸€ä¸ªå¤§æ•°ç»„ï¼Œè¿˜éœ€è¦ç»è¿‡é“¾æŽ¥ä¹‹åŽæ˜ å°„è¦å¯¹åº”çš„è™šæ‹Ÿåœ°å€æ‰èƒ½æ‰§è¡Œã€‚ Lab4-Preemptive Multitaskinglab3åšå®Œä¹‹åŽï¼Œå½“ä¸€ä¸ªè¿›ç¨‹ç»“æŸä¹‹åŽï¼Œå°±é€€å‡ºã€‚åœ¨è¿™ä¸ªå®žéªŒä¸­ï¼Œä¸»è¦å®Œæˆçš„æ˜¯ æœ¬æ¬¡å®žéªŒä¸»è¦æ˜¯å†³å®šï¼šåœ¨ä½•æ—¶åˆ©ç”¨ä»€ä¹ˆåŽŸåˆ™ä»€ä¹ˆåœ°æ–¹åˆ‡æ¢è¿›ç¨‹ã€‚ä¸Šä¸‹æ–‡æ€Žä¹ˆåˆ‡æ¢ï¼Ÿå…¶ä¸­ä¸€é¡¹ï¼šä¸€å®šè¦æŠŠé¡µè¡¨æ¢æŽ‰ï¼Œä¹Ÿå°±æ˜¯æŠŠcr3ä¸­çš„é¡µç›®å½•é¡¹æ¢æŽ‰ã€‚ä¹‹åŽï¼Œè¿žæŽ¥tlbä¹Ÿä¼šå¤±æ•ˆï¼Œå¤„ç†æµæ°´çº¿ï¼Œå§ä¸Šä¸€ä¸ªè¿›ç¨‹çš„ä¸œè¥¿å…¨éƒ¨æ¸…ç†æŽ‰ã€‚ æœ¬å®žéªŒå¤§éƒ¨åˆ†ä»£ç éƒ½å·²ç»å†™å®Œäº†ï¼Œä¸»è¦æ˜¯è¯»ä»£ç ã€‚ å¦‚ä½•å®žçŽ°æ›´åŠ æœ‰æ•ˆçš„è°ƒåº¦ï¼Ÿæ›´åŠ é¢‘ç¹çš„è°ƒç”¨schedule_yeidã€‚ æ—¶é’Ÿä¸­æ–­çš„ä½œç”¨ï¼šæ‰“æ–­æ­£åœ¨æ‰§è¡Œçš„ç¨‹åºï¼Œè°ƒç”¨sched_yieldè¿›è¡Œè¿›ç¨‹è½®è½¬ åœ¨æœ¬æ¬¡å®žéªŒä¸­æœ‰ä¸€ä¸ªæ—¶é’Ÿä¸­æ–­ï¼Œä½ è¦åšçš„å°±æ˜¯åœ¨è¿™ä¸ªæ—¶é’Ÿä¸­æ–­çš„å“åº”å‡½æ•°ä¹‹ä¸­åšä¸€äº›äº‹æƒ…ï¼Œå†³å®šä¸‹ä¸€ä¸ªè¿›ç¨‹æ€Žä¹ˆä¸ŠåŽ»è°ä¼šä¸ŠåŽ»ï¼ˆå°±æ˜¯æˆ‘ä»¬å­¦ä¹ è¿‡çš„è°ƒåº¦ç®—æ³•ï¼‰ å¤šæ ¸å¤„ç†å™¨ä¸€å¼€å§‹æ˜¯å› ä¸ºæ²¡æœ‰åœ¨ä¸€ä¸ªè¿›ç¨‹è¿è¡Œçš„æ—¶å€™è°ƒç”¨å¦ä¸€ä¸ªè¿›ç¨‹çš„æœºåˆ¶ï¼Œæœ¬å®žéªŒä¸­çš„å¤šæ ¸åªæ˜¯å®žéªŒçš„è®¾è®¡è€…å¸Œæœ›æˆ‘ä»¬ä½“éªŒä¸€ä¸‹åœ¨ç³»ç»Ÿä¸­æœ‰å¤šä¸ªè¿›ç¨‹æ´»åŠ¨æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„çŠ¶æ€ï¼Œå› æ­¤é¼“åŠ±ä½ åŽ»å¤šå¼„å‡ ä¸ªæ ¸å¿ƒã€‚åªè¦æ˜¯å•æ ¸ï¼Œå…¶å®žæ¯ä¸€ä¸ªæ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªè¿›ç¨‹è¿è¡Œã€‚ ä¸ºä»€ä¹ˆä¼šæœ‰å¤šæ ¸å¤„ç†å™¨å‡ºçŽ°å‘¢ï¼Ÿåœ¨åŽæ‘©å°”æ—¶ä»£ï¼Œä¸ºäº†æå‡å¤„ç†å™¨çš„å¤„ç†èƒ½åŠ›ã€‚ ä¸»æ ¸ä¼šåœ¨ç³»ç»Ÿä¸Šç”µä¹‹åŽæŽ¥ç®¡æœºå™¨ï¼Œä»–ä»¬çš„åœ°ä½å¹¶ä¸æ˜¯å¹³ç­‰çš„ã€‚ çŽ°ä»£å¤„ç†å™¨çš„ä¼‘çœ å”¤é†’æœºåˆ¶çŽ°ä»£å¤„ç†å™¨çš„æ¨¡å¼ä¸€èˆ¬æœ‰ä¸‰ç§ï¼šactive,idol,sleeping CPUåœ¨å…³é—­çš„æ—¶å€™ï¼Œå†…å­˜å¹¶ä¸ä¼šå…³é—­ã€‚ä¼‘çœ æ—¶ï¼Œæ‰¾åˆ°ä¸€ä¸ªè°ƒåº¦ç‚¹ï¼Œè¿™æ—¶ä¸è°ƒåº¦äº†ï¼Œå­˜å¥½æœ‰ç”¨çš„ä¸œè¥¿ï¼Œç„¶åŽcpuè€—ç”µé‡å°±ä¼šå˜å¾—éžå¸¸ä½Žã€‚æœ‰ä¸€ä¸ªcpuä¸­çš„å¯„å­˜å™¨ä¼šæ ‡å¿—è‡ªå·±åˆšåˆšæ˜¯ä¼‘çœ äº†è¿˜æ˜¯å…³æœºäº†ã€‚å¦‚æžœæ˜¯ä¼‘çœ ï¼Œé‚£ä¹ˆå†…å­˜é‡Œé¢æ‰€æœ‰çš„ä¸œè¥¿éƒ½è¿˜åœ¨ï¼Œåªéœ€è¦è°ƒåˆ°è¯¥åŽ»çš„åœ°æ–¹ï¼Œç„¶åŽè¿›è¡Œä¸€è½®æ–°çš„è°ƒåº¦ï¼›å¦‚æžœä¸æ˜¯ä¼‘çœ è€Œæ˜¯å…³æœºäº†ï¼Œå†…å­˜ä¸­çš„ä¸œè¥¿å°±è¢«æ¸…ç©ºäº†ï¼Œå°±æ˜¯ä¸Šç”µå¯åŠ¨è¿‡ç¨‹ã€‚ æœ‰æ—¶æ‰‹æœºä¼šåæŽ‰ï¼Œå°±æ˜¯åœ¨é”å±ï¼ˆä¼‘çœ ï¼‰ä¹‹åŽä¹Ÿä¼šé‡æ–°èµ·åŠ¨ï¼Œè¿™ä¹Ÿå°±æ˜¯cpuä¸­çš„é‚£ä¸ªå¯„å­˜å™¨åæŽ‰äº†ã€‚ é‚£ä¹ˆï¼Œå¦‚æžœå¸®ä¸€ä¸ªä¼‘çœ çš„cpuå‡†å¤‡å¥½äº†å®ƒçš„ä¼‘çœ ä½ä»¥åŠå†…å­˜ï¼Œå°±å¯ä»¥è®©å®ƒè®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªåˆšåˆšä¼‘çœ çš„cpuã€‚ bspæ˜¯ä¸»æ ¸ï¼Œåœ¨ç³»ç»Ÿä¸Šç”µä¹‹åŽæ˜¯åªæœ‰ä¸»æ ¸å¯åŠ¨ï¼Œç›´åˆ°ç³»ç»Ÿå¯åŠ¨å®Œä¹‹åŽï¼Œç›´åˆ°éœ€è¦å¦å¤–ä¸€ä¸ªæ ¸å¿ƒè¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œbspå¸®apåˆ¶é€ ä¸€ä¸ªå®ƒåˆšåˆšåœ¨ä¼‘çœ çš„å‡è±¡ï¼Œç„¶åŽå”¤é†’å®ƒï¼Œè¿™æ ·è¿™ä¸ªapå°±ä¼šè®¤ä¸ºè‡ªå·±æ˜¯åˆšåˆšä¼‘çœ çš„ï¼Œç„¶åŽç»§ç»­æ‰§è¡Œã€‚è¿è¡Œå®Œä¹‹åŽï¼Œä¸»æ ¸å°±ä¼šé€‰æ‹©æŠŠè¿™ä¸ªæ ¸å¿ƒç»™å…³æŽ‰ï¼Œç„¶åŽçœç”µã€‚]]></content>
      <categories>
        <category>OS</category>
        <category>MIT Lab</category>
      </categories>
      <tags>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å“ˆå¸Œ]]></title>
    <url>%2F2017%2F11%2F12%2F%E5%93%88%E5%B8%8C%2F</url>
    <content type="text"><![CDATA[emmmâ€¦å¤§äºŒçš„æ—¶å€™DSåªè€ƒäº†80ï¼Œå‡ºæ¥æ··çš„ï¼Œæ€»æ˜¯è¦è¿˜çš„ã€‚ ä¸å¸Œæœ›æ–‡ä»¶å¤ªå¤šéƒ½å°äºŽ512kï¼Œä¼šå æˆ‘çš„ç©ºé—´ã€‚å“ˆå¸Œå“ˆå¸Œå…¶å®žæ²¡ä»€ä¹ˆç¥žç§˜çš„ï¼Œä¸è¿‡æ˜¯ä¸€ç¾¤è´ªå¿ƒçš„äººçš„äº§ç‰©ã€‚ æ•£åˆ—å‡½æ•°ï¼Œå°†keyè½¬åŒ–ä¸ºå¯¹åº”çš„valueå€¼å¾—åˆ°ç´¢å¼•ã€‚è¿™ä¸ªæœ‰è¯¸å¦‚å–æ¨¡ï¼ŒASCIIå¹³å‡ï¼Œç­‰ç­‰æ–¹æ³•ã€‚æ©™çš®ä¹¦ä¸Šæœ‰ä¸€ç§sfoldï¼Œä¼¼ä¹Žæ€§èƒ½ä¼šæ›´å¥½ä¸€äº›ã€‚ å¼€å“ˆå¸Œå¼€å“ˆå¸Œç±»ä¼¼äºŽé™æ€é“¾è¡¨ï¼Œæ¯ä¸€ä¸ªvalueå¯¹åº”ä¸€ä¸ªé“¾è¡¨ï¼Œæˆä¸ºæŒ‚ç€çš„æ¡¶ã€‚ é—­å“ˆå¸Œé—­å“ˆå¸Œå°†nodeå­˜å‚¨åœ¨ç»™å®šçš„ä¸€ä¸ªæ•°ç»„ä¸­ã€‚è¿™ä¸ªæ•°ç»„çš„ä¸‹æ ‡å°†ä½œä¸ºvalueçš„ç´¢å¼•å€¼ï¼Œç”±äºŽvalueå¯èƒ½é‡å¤ï¼Œéœ€è¦æŽ¢æŸ¥æ–¹å¼ï¼Œæœ‰å¾ˆå¤šæ–¹å¼ï¼Œæ¯”å¦‚çº¿æ€§æŽ¢æŸ¥ä¸ŽäºŒæ¬¡æŽ¢æŸ¥ã€‚ å…³äºŽé—­å“ˆå¸Œçš„åˆ é™¤ï¼Œå…¶å®žä¸å¿…çœŸçš„æ¯æ¬¡éƒ½å‘å‰æŒªï¼Œè€Œæ˜¯å¢žåŠ ä¸€ä¸ªâ€œå¢“ç¢‘â€ï¼Œå®ƒä»£è¡¨è¿™é‡Œæ²¡æœ‰æ•°æ®å¯ä»¥è¢«æ’å…¥ï¼Œä½†æ˜¯åˆä¸æ˜¯çœŸçš„ç©ºå› ä¸ºéœ€è¦ç»§ç»­å‘å‰æŽ¢æŸ¥ã€‚å½“æ¬¡æ•°å¤šäº†æ€§èƒ½å°±ä¼šä¸‹é™ï¼Œä¸€ç§è§£å†³æ–¹å¼æ˜¯å‘å‰æŒªï¼Œå¦ä¸€ç§æ˜¯é‡æ–°æ•£åˆ—ã€‚]]></content>
      <categories>
        <category>æ•°æ®ç»“æž„</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç»“æž„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¯­è¨€ä»¬çš„è¾“å‡ºæ ¼å¼æŽ§åˆ¶]]></title>
    <url>%2F2017%2F11%2F12%2F%E8%AF%AD%E8%A8%80%E4%BB%AC%E7%9A%84%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F%E6%8E%A7%E5%88%B6%2F</url>
    <content type="text"><![CDATA[å¾…æ•´ç†]]></content>
      <categories>
        <category>è¯­è¨€</category>
      </categories>
      <tags>
        <tag>è¯­è¨€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¼–è¯‘åŽŸç†â€”â€”è¯æ³•åˆ†æž]]></title>
    <url>%2F2017%2F11%2F09%2F%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[æˆ‘æœ‰ç½ªâ€¦.æˆ‘å…ˆæ˜¯ç”¨å­¦ç¼–è¯‘çš„æ—¶é—´é€›äº†æ·˜å®â€¦.ç„¶åŽåˆç”¨å­¦ç¼–è¯‘çš„æ—¶é—´é€›äº†å…­ç»´â€¦..æˆ‘æœ‰ç½ªâ€¦.\infty æ—¶é—´ï¼š1012cp3 3:15å¼€å§‹ è¯æ³•åˆ†æžå™¨ä»‹ç» ç¼–è¯‘å¹¶ä¸æ˜¯ä¸€ä»¶è½»æ¾çš„äº‹æƒ…ï¼Œå¯¹äºŽè¾ƒå¤§çš„ç³»ç»Ÿï¼Œç¼–è¯‘çš„é€Ÿåº¦å¹¶ä¸ç†æƒ³ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¼˜åŒ–ç¼–è¯‘æŠ€æœ¯ã€‚ åŸºæœ¬æ¦‚å¿µè¯æ³•å•å…ƒï¼ˆå•è¯ï¼‰ï¼šç”±ä¸€ä¸ªè¯æ³•å•å…ƒåä»¥åŠä¸€ä¸ªå¯é€‰çš„å±žæ€§å€¼ç»„æˆã€‚åå³æ˜¯è¯­æ³•åˆ†æžå™¨çš„è¾“å…¥ç¬¦å·tokenã€‚æ¨¡å¼ï¼šä¸€ä¸ªè¯æ³•å•å…ƒçš„è¯ç´ å¯èƒ½å…·æœ‰çš„å½¢å¼ã€‚ä¸€ä¸ªè¯ç´ ä¸èƒ½ä¸Žä¸¤ä¸ªæˆ–å¤šä¸ªè¯æ³•å•å…ƒè¿›è¡ŒåŒ¹é…ï¼ˆäºŒä¹‰æ€§ï¼‰ã€‚è¯ç´ ï¼šæºç¨‹åºä¸­çš„å­—ç¬¦åºåˆ—ï¼Œæ˜¯ç¨‹åºä¸­å®žé™…å‡ºçŽ°çš„å­—ç¬¦ä¸²ã€‚ åœ¨lexä¸Žyaccä¸­ï¼Œæœ‰æ—¶ä¼šæœ‰ä¸€ä¸ªå…¨å±€å˜é‡ã€‚ä»–ä¿å­˜äº†å½“å‰è¯ç´ ï¼ˆè¯æ³•å•å…ƒï¼šå…³äºŽè¿™é‡Œï¼Œé¾™ä¹¦é‡Œé¢çš„å’Œwgå†™çš„ä¸ä¸€æ ·å‘¢ï¼Ÿï¼‰çš„å±žæ€§å€¼ï¼Œè¿™ä¸ªå±žæ€§å€¼å¯ä»¥è¢«è®°å½•åœ¨è¯­æ³•æ ‘ä¸Šã€‚ è¯æ³•åˆ†æžå™¨è¦å¹²äº›ä»€ä¹ˆï¼Ÿ è¯»å…¥æºç¨‹åºå­—ç¬¦ï¼Œç”Ÿæˆè¯ç´ ï¼Œç¡®å®šè¯æ³•å•å…ƒåºåˆ— ä¸Žç¬¦å·è¡¨è¿›è¡Œäº¤äº’ è¿‡æ»¤æŽ‰æºç¨‹åºä¸­çš„æ³¨é‡Šä¸Žç©ºç™½ å°†ç¼–è¯‘å™¨ç”Ÿæˆçš„é”™è¯¯ä¿¡æ¯ä¸Žä½ç½®è”ç³» é¢„å¤„ç†ï¼šæ‰«æé˜¶æ®µå®Œæˆä¸éœ€è¦ç”Ÿæˆè¯æ³•å•å…ƒçš„ç®€å•å¤„ç†ï¼›è¯æ³•åˆ†æžé˜¶æ®µå¤„ç†æ‰«æé˜¶æ®µçš„è¾“å‡ºå¹¶ç”Ÿæˆè¯æ³•å•å…ƒ è·³è¿‡äº†ä¸€äº›ä¸œè¥¿ æ­£åˆ™è¡¨è¾¾å¼ï¼ˆæ­£è§„è¡¨è¾¾å¼ã€æ­£è§„å¼ï¼‰ä¸ºä»€ä¹ˆéœ€è¦æ­£åˆ™è¡¨è¾¾å¼æ¥æè¿°å­—ç¬¦ä¸²åºåˆ—å‘¢ï¼Ÿåƒåœ¨ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ä¸­æ‰€æè¿°çš„é‚£æ ·ï¼Œå› ä¸ºå­—ç¬¦ä»¬æ‰€ç»„æˆçš„å¯èƒ½çš„å­—ç¬¦ä¸²æ˜¯æ— ç©·çš„ã€‚ å•è¯æ˜¯ä»€ä¹ˆï¼Ÿå•è¯çš„æœ¬è´¨å°±æ˜¯ç¬¦å·ä¸²çš„é›†åˆã€‚æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯ä»£æ›¿äº†è‡ªç„¶è¯­è¨€å¯¹ç‰¹å®šç¬¦å·ä¸²é›†åˆçš„æè¿°ã€‚ æ¦‚å¿µç¬¦å·è¡¨ï¼šç¬¦å·çš„æœ‰ç©·é›†åˆç¬¦å·ä¸²ï¼šå­—æ¯è¡¨ä¸­ç¬¦å·æž„æˆçš„æœ‰ç©·åºåˆ—ã€‚ä¹Ÿæˆå¥å­ï¼Œå­—ã€‚|s|ä»£è¡¨å­—ç¬¦ä¸²sçš„é•¿åº¦ï¼Œ$\epsilon$æ˜¯ç©ºå­—ç¬¦ä¸²ã€‚è¯­è¨€ï¼šæ˜¯ä¸€ä¸ªç»™å®šç¬¦å·è¡¨ä¸Šçš„ç‰¹å®šçš„ç¬¦å·ä¸²çš„é›†åˆã€‚ æ¯”å¦‚ï¼šç»™å®šç¬¦å·è¡¨{1,0}ï¼Œæœ‰ç¬¦å·ä¸²01100010ï¼Œä¸€ç§è¯­è¨€æ˜¯{0ï¼Œ1ï¼Œ00ï¼Œ11ï¼Œ000ï¼Œ111â€¦.}å³ä¸²ä¸­åªå«ä¸€ç§å­—ç¬¦çš„å­—ç¬¦ä¸²é›†åˆã€‚ ç‰¹ä¾‹ï¼š$\varnothing$æ˜¯ç©ºè¯­è¨€ã€‚{$\epsilon$}æ˜¯åªå«ç©ºä¸²çš„è¯­è¨€ã€‚ è¿ç®—ç¬¦å·ä¸²çš„è¿ç®—è¿žæŽ¥ï¼šx=hou y=se xy=house s$\epsilon$=$\epsilon$s=s (emmmmè¯´å¥½çš„ä¸èƒ½è¿™æ ·å†™å‘¢ï¼Ÿ)å¹‚ï¼š$s^n=s^(n-1) * s^1$ è¯­è¨€çš„è¿ç®—ä¸‹è¡¨ä¸­è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ç”±ä½Žåˆ°é«˜ è¿ç®— å®šä¹‰ å¹¶ $L\cup M={ s \ s\in L æˆ– s\in M} $ äº¤ $LM={ st \ s\in L ä¸” t\in M} $ Kleené—­åŒ… $L^*=\cup_{i=0}^\infty L^i$ æ­£åˆ™é—­åŒ… $L^*=\cup_{i=1}^\infty L^i$ $$\color{red}{æ­£åˆ™è¡¨è¾¾å¼&lt;-&gt;è¯­è¨€è¿ç®—çš„ç®€æ´æè¿°}$$ æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰å­—æ¯è¡¨$\sum$ä¸Šçš„æ­£è§„å¼rçš„å®šä¹‰è§„åˆ™ï¼Œä»¥åŠræ‰€è¡¨ç¤ºè¯­è¨€L(r)å®šä¹‰ï¼š $\epsilon$æ˜¯æ­£è§„å¼ï¼Œè¡¨ç¤ºè¯­è¨€{$\epsilon$} è‹¥$a\in \sum$åˆ™aæ˜¯æ­£è§„å¼ï¼Œè¡¨ç¤ºè¯­è¨€{a} r , sæ˜¯æ­£è§„å¼ï¼Œè¡¨ç¤ºè¯­è¨€L(r)ä¸ŽL(s)ï¼Œåˆ™ï¼š (r)|(s)æ˜¯æ­£è§„å¼ï¼Œè¡¨ç¤ºè¯­è¨€L(r)$\cup$L(s) (r)(s)æ˜¯æ­£è§„å¼ï¼Œè¡¨ç¤ºè¯­è¨€L(r)L(s) $(r)^*$æ˜¯æ­£è§„å¼ï¼Œè¡¨ç¤ºè¯­è¨€$(L(r))^*$ (r)æ˜¯æ­£è§„å¼ï¼Œè¡¨ç¤ºè¯­è¨€L(r) ç¬¬ä¸‰æ¡çš„å››æ¡ï¼Œä¼˜å…ˆçº§ä»Žä¸Šåˆ°ä¸‹ä¾æ¬¡å‡é«˜ã€‚ $(a|b)^*$={æ‰€æœ‰ç”±aã€bç»„æˆçš„ç¬¦å·ä¸²} æ­£è§„å¼ç­‰ä»·ï¼šr=s &lt;-&gt; L(r)=L(s) æ­£åˆ™è¿ç®—çš„ç‰¹æ€§: å¯ä»¥åƒäº§ç”Ÿå¼é‚£æ ·ï¼Œä¸ºæ­£è§„å¼æŒ‡å®šåå­—ï¼š num -&gt; r1å…¶å®žï¼Œä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•çš„æè¿°èƒ½åŠ›åŒ…å«äº†æ­£åˆ™è¡¨è¾¾å¼çš„æè¿°èƒ½åŠ›ã€‚æ‰€æœ‰å¯ä»¥è¢«æ­£åˆ™è¡¨è¾¾å¼æè¿°çš„éƒ½å¯ä»¥è¢«ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•æè¿°ï¼Œä½†æ˜¯æ­£åˆ™è¡¨è¾¾å¼å¹¶ä¸èƒ½æè¿°æŸäº›ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•å¯ä»¥æè¿°çš„ä¸œè¥¿ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆéœ€è¦æ­£åˆ™è¡¨è¾¾å¼æ¥å®žçŽ°è¯æ³•åˆ†æžå™¨ï¼Ÿ ç®€åŒ–ç¼–è¯‘å™¨çš„è®¾è®¡ï¼šä½¿æ¯ä¸€é˜¶æ®µéœ€è¦åšçš„äº‹æƒ…æ›´åŠ ç®€å•æ¸…æ™° æé«˜ç¼–è¯‘å™¨çš„æ•ˆçŽ‡ï¼šä½¿ç”¨ä¸“é—¨çš„å­—ç¬¦ç¼“å†²æŠ€æœ¯æé«˜ç¼–è¯‘é€Ÿåº¦ å¢žå¼ºç¼–è¯‘å™¨çš„å¯ç§»æ¤æ€§ï¼šè¾“å…¥è®¾å¤‡ç›¸å…³çš„ç‰¹æ®Šæ€§è¢«é™åˆ¶åœ¨è¯æ³•é˜¶æ®µ ä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ï¼š æ— ç¬¦å·æ•´æ•°ï¼šdigit -&gt; 0|1|2|â€¦|9digits -&gt; digit digit* å…¶å®žä¹Ÿå¯ä»¥æ˜¯$digit^+$optional_fraction -&gt; .digits | $\epsilon$optional_exponent -&gt; (E(+|-|$\epsilon$)digits)|$\epsilonnum -&gt; digits optional_fraction optional_exponent ç¬¦å·ç®€å†™ï¼š +:ä¸€ä¸ªæˆ–å¤šä¸ªå®žä¾‹?:0æˆ–1ä¸ªå®žä¾‹ï¼š$r?=r|\epsilon$$\rightarrow$$L(r)\cup {\epsilon}$[]å­—ç¬¦é›†:[abc]=&gt;a|b|cã€[a-z0-9]=&gt;a|b|..|z|0|1..|9 éžæ­£è§„é›†æ­£è§„å¼æ— æ³•æè¿°çš„è¯­è¨€ï¼š{wcw|wæ˜¯aã€bç»„æˆçš„å­—ç¬¦ä¸²}æ­£è§„å¼æ— æ³•æè¿°å¹³è¡¡æˆ–åµŒå¥—çš„ç»“æž„æ­£è§„å¼åªèƒ½è¡¨ç¤ºï¼šæœ‰é™çš„é‡å¤ã€ä¸€ä¸ªç»™å®šç»“æž„çš„æ— é™é‡å¤ å…³äºŽæ­£è§„å¼çš„ç»ƒä¹ ï¼Œå‚è€ƒç¬¬ä¸‰ç« ç»ƒä¹  Lexä½¿ç”¨æµç¨‹ä¸Žyaccç±»ä¼¼ã€‚ $\color{red}{ATTENTION! åœ¨ä½¿ç”¨project wizardå»ºç«‹lexçš„æ—¶å€™ä½ å†™çš„é‚£ä¸ªè¯æ³•åˆ†æžå™¨çš„åå­—å°±æ˜¯é‚£ä¸ªåå­—ï¼Œ ä½ æœ€å¥½åˆ«è‡ªå·±å†ä¿®æ”¹ï¼Œå¦åˆ™åœ¨VSé‡Œé¢è¿è¡Œä¸å‡ºæ¥ï¼ï¼ï¼}$ ç»™çš„æ˜¯å­—ç¬¦æµï¼Œå‡ºæ¥çš„æ˜¯å•è¯æµã€‚ è§„åˆ™æ®µæ”¾æ­£åˆ™è¡¨è¾¾å¼ä¸Žè¯­ä¹‰åŠ¨ä½œã€‚ ç¬¬å››æ¬¡ä½œä¸šè¯æ³•åˆ†æžå™¨è®¾è®¡å°†ä¼šä¸Šä¼ ã€‚click here to get æœ‰é™è‡ªåŠ¨æœºæœ‰é™è‡ªåŠ¨æœºå¯ä»¥ç›´æŽ¥è½¬æ¢æˆç¨‹åºã€‚ NFAä»Žæ­£åˆ™è¡¨è¾¾å¼åˆ°è‡ªåŠ¨æœºä»Žè¿™ä¹‹åŽï¼Œæ­£æ˜¯lexæ‰€åšçš„äº‹æƒ…ã€‚ åœ¨è¿™ä¸€èŠ‚é‡Œï¼Œå°†ä»‹ç»ä¸¤ä¸ªè¿‡ç¨‹ï¼šä¸€ä¸ªæ˜¯æ­£åˆ™è¡¨è¾¾å¼åˆ°NFAï¼Œå¦ä¸€ä¸ªæ˜¯NFAåˆ°DFAã€‚ä¹‹æ‰€ä»¥è®©NFAåšä¸€ä¸ªè¿‡æ¸¡ï¼Œæ˜¯å› ä¸ºæ­£åˆ™è¡¨è¾¾å¼ç›´æŽ¥åˆ°DFAçš„ç®—æ³•å¾ˆå¤æ‚ã€‚æœ¬æ¬¡æ›´æ–°æŽ è¿‡ã€‚ NFAä¸ŽDFAçš„æ€§èƒ½å·®åˆ«å¾ˆå¤§ï¼šNFAå ç”¨ç©ºé—´æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯ä½¿ç”¨NFAè¿›è¡Œè¯æ³•åˆ†æžéœ€è¦åœ¨é”™è¯¯æ€åœæ­¢ï¼Œå¯èƒ½éœ€è¦èŠ±è´¹$O(2^n)$çš„æ—¶é—´å¤æ‚åº¦ï¼›DFAå ç”¨ç©ºé—´å¾ˆå¤§ï¼ˆæœ€åæƒ…å†µä¸‹$O(2^n)$ï¼‰ï¼Œä½†æ˜¯ä½¿ç”¨å®ƒè¿›è¡Œè¯æ³•åˆ†æžçš„æ—¶å€™æŽ¥è¿‘çº¿æ€§æ—¶é—´ã€‚ æ­£åˆ™ -&gt; NFAæ­£åˆ™è¡¨è¾¾å¼æž„é€ NFAä½¿ç”¨MacMaughton-Yamada-Thompsonç®—æ³•ã€‚ç®€ç§°Thompsonç®—æ³•ã€‚è¿™ä¸ªç®—æ³•æè¿°å¦‚ä¸‹ï¼š åŸºæœ¬è§„åˆ™ï¼š è‡ªåŠ¨æœºè¿è½¬ s $\leftarrow$ e -closure({s0});c $\leftarrow$ nextchar;while c $\neq$ eof do s $\leftarrow$ e -closure(d(s,c)); c $\leftarrow$ nextchar;end;if S$\cap$F$\neq$ $\varnothing$ then return â€œyesâ€ else return â€œnoâ€ s $\leftarrow$ s0;c $\leftarrow$ nextchar;while c $\neq$ eof do s $\leftarrow$ d(s,c); c $\leftarrow$ nextchar;end;if s is in F then return â€œyesâ€ else return â€œnoâ€ å‰é¢æåˆ°äº†ï¼ŒNFAå ç©ºé—´æ›´å°‘ï¼ŒDFAè¯†åˆ«å­—ç¬¦ä¸²æ›´å¿«ï¼Œè´ªå¿ƒçš„äººç±»å•Šå¸Œæœ›èƒ½ç³…åˆè¿™ä¸¤è€…çš„ä¼˜ç‚¹ã€‚çœ‹å‰é¢çš„NFAä»£ç ï¼Œå…¶å®žåœ¨ç¬¬å››è¡Œé‚£å¥ï¼Œå®žé™…ä¸Šå°±æ˜¯å‰é¢æåˆ°çš„æž„é€ DFAçš„è¿‡ç¨‹ã€‚äººä»¬æƒ³åˆ°ä½¿ç”¨Cacheã€‚ä½¿ç”¨NFAï¼Œå½“NFAæž„é€ å‡ºDFAçš„ä¸€ä¸ªçŠ¶æ€æ—¶ï¼Œå°±æŠŠè¿™ä¸ªçŠ¶æ€æž„é€ çš„æ¡ä»¶ä»¥åŠçŠ¶æ€æœ¬èº«å­˜åˆ°cacheé‡Œé¢ã€‚å½“whileè¿›ä¸€ä¸ªcçš„æ—¶å€™ï¼Œé¦–å…ˆçœ‹ä¸€çœ‹çŽ°ä»ŠçŠ¶æ€åŠ ä¸Šcåˆ°è¾¾çš„æ€æ˜¯ä¸æ˜¯å·²ç»å­˜åœ¨cacheï¼Œå¦‚æžœå­˜åœ¨é‡Œé¢ï¼Œæœ€è€—æ—¶é—´çš„é‚£ä¸€éƒ¨åˆ†å°±ä¸ç”¨è¿è¡Œäº†ã€‚cacheçš„ç®¡ç†ä»ç„¶æ˜¯ç¨‹åºå±€é™æ€§åŽŸåˆ™ã€‚å ç”¨ç©ºé—´ä¸ä¼šå¤ªå¤§ä»¥æœŸæœ›è¾¾åˆ°æŠ˜è¡·çš„æ•ˆæžœã€‚ å¦‚æžœè¦æž„é€ å‡ºä¸€ä¸ªLaxï¼Œéœ€è¦å°†æ‰€æœ‰çš„æ­£åˆ™è¡¨è¾¾å¼å¾—åˆ°çš„NFAè¿›è¡Œä¸€ä¸ªå¹¶æ“ä½œï¼ˆä¿ç•™å„è‡ªçš„ç»ˆæ€ä»¥åŒºåˆ†ï¼‰ã€‚ç„¶åŽæž„é€ å®ƒçš„DFAã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™æ ·ä¸èƒ½åœ¨ä¸€ä¸ªç»ˆæ€åœæ­¢ï¼Œè€Œæ˜¯åœ¨é”™è¯¯æ€ç»ˆæ­¢å¹¶é€€å›žåˆ°æœ€è¿‘ç»è¿‡çš„é‚£ä¸ªç»ˆæ€ï¼ˆæ¯ç»è¿‡ä¸€ä¸ªç»ˆæ€ï¼Œè®°å½•å½“å‰çš„è¾“å…¥æŒ‡é’ˆä»¥åŠåŒ¹é…æ¨¡å¼ï¼‰ã€‚ä»¥é˜²æ­¢æ‰¾åˆ°å‰ç¼€ï¼Œäº§ç”Ÿé”™è¯¯ã€‚è¿™ç§æ–¹æ³•æ˜¯æœ€é•¿å‰ç¼€æ³•ï¼Œåœ¨å‰é¢å·²ç»æåˆ°è¿‡ã€‚ DFAä¼˜åŒ–DFAçŠ¶æ€æ•°å…¶å®žä¸ä¼šå¤ªå¤šçš„å½±å“æ—¶é—´å¤æ‚åº¦ï¼Œå½“çŠ¶æ€å˜å°‘çš„æ—¶å€™ï¼Œå°†ä¼šå‡å°‘å­˜å‚¨ç©ºé—´çš„æ¶ˆè€—ã€‚ åŒºåˆ†ï¼šä¸€ä¸ªç¬¦å·ä¸²å¯åŒºåˆ†ä¸¤ä¸ªçŠ¶æ€ï¼šè¿™ä¸€ä¸ªä¸²ä»Žè¿™ä¸¤ä¸ªçŠ¶æ€å‡ºå‘åœ¨DFAä¸Šå¾—åˆ°çš„ç»“æžœä¸€ä¸ªæ˜¯acceptï¼Œä¸€ä¸ªæ˜¯rejectã€‚åœ¨åšåŒºåˆ†çš„æ—¶å€™ï¼Œå…¶å®žå¯ä»¥çœ‹åˆ°ï¼šæœ€ç»ˆå­—ç¬¦ä¸²å¾—åˆ°çš„ç»ˆæ€åœ¨ä¸åŒé›†åˆï¼Œåˆ™ä»–ä»¬æ˜¯å¯åŒºåˆ†çš„ã€‚ Exaä¸èƒ½åŒºåˆ†çŠ¶æ€Aä¸ŽBã€‚è€Œä¸”è¿˜å¯ä»¥çœ‹åˆ°ï¼Œä»¥aå¼€å¤´çš„æ‰€æœ‰å­—ç¬¦ä¸²éƒ½ä¸å¯èƒ½åŒºåˆ†Aä¸ŽBäº†ã€‚å†è¿›ä¸€æ­¥çœ‹åˆ°ï¼Œaä¸å¯èƒ½åŒºåˆ†ä»»æ„ä¸¤ä¸ªï¼Œå› ä¸ºæ‰€æœ‰çŠ¶æ€åœ¨ç»è¿‡açš„çŠ¶æ€è¿ç§»ä¹‹åŽéƒ½åˆ°è¾¾äº†çŠ¶æ€Bã€‚åŒç†ï¼Œbä¸å¯èƒ½åŒºåˆ†ACEï¼Œä»¥bå¼€å¤´çš„éƒ½ä¸èƒ½åŒºåˆ†ACEã€‚ä½†æ˜¯bå´å¯ä»¥åŒºåˆ†BDã€‚ä¸è¦å¿˜è®°ï¼Œ$\epsilon$å¯æ˜¯å¯ä»¥åŒºåˆ†çš„ã€‚è€Œä¸”ä»–çš„åŒºåˆ†åº”è¯¥è¢«æ”¾åœ¨æœ€å‰é¢ï¼Œé‚£æ˜¯å› ä¸º$\epsilon$åŒºåˆ†äº†ç»ˆæ€ä¸Žå…¶ä»–çŠ¶æ€ã€‚ åœ¨åŒºåˆ†çš„è¿‡ç¨‹ä¸­å‘çŽ°äº†è¿™æ ·ä¸€ä¸ªè§„å¾‹ï¼šå¦‚æžœå¯¹äºŽä¸²sï¼ŒAçŠ¶æ€ä¸ŽBçŠ¶æ€ç»è¿‡äº†séƒ½åˆ°è¾¾åŒä¸€ä¸ªçŠ¶æ€Cï¼Œé‚£ä¹ˆä»¥såšå‰ç¼€çš„å­—ç¬¦ä¸²éƒ½ä¸å¯èƒ½åŒºåˆ†Aä¸ŽBäº†ã€‚å½“æ‰€æœ‰å­—ç¬¦ä¸²éƒ½ä¸èƒ½åŒºåˆ†Aä¸ŽBçš„æ—¶å€™ï¼Œå¯ä»¥æŠŠAä¸ŽBåˆå¹¶æˆåŒä¸€ä¸ªçŠ¶æ€ã€‚ä½†æ˜¯å¯¹äºŽæ— ç©·çš„å­—ç¬¦ä¸²ï¼Œæ€Žä¹ˆç¡®å®š â€œæ‰€æœ‰éƒ½ä¸è¡Œâ€ å‘¢ï¼Ÿ åœ¨å‰é¢ï¼Œæˆ‘ä»¬å·²ç»æå‡ºäº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆâ€”â€”å½“å‰ç¼€sä¸è¡Œçš„æ—¶å€™ï¼Œæ‰€æœ‰çš„sxéƒ½ä¸è¡Œäº†ã€‚ä½†æ˜¯ï¼Œå³ä½¿æ˜¯æœ‰äº†è¿™ä¸ªè§„å¾‹ï¼Œä½¿ç”¨â€œä¸è¡Œâ€çš„è¿™ç§æ–¹æ³•è§£å†³é—®é¢˜ä»ä¼šæ˜¾å¾—ç¹çã€‚ çœŸæ­£åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå®žè¡Œçš„æ˜¯åˆ†è£‚ï¼Œè¿™æ ·ï¼Œé€šè¿‡æœ‰é¡ºåºåœ°æžšä¸¾å­—ç¬¦ä¸²ï¼Œå°†èƒ½è¢«åŒºåˆ†å¼€çš„çŠ¶æ€åˆ†å¼€ã€‚è¿™æ ·å¯¹äºŽå‰é¢çš„ä¸åŒé›†åˆçš„è¯´æ³•ï¼Œä¹Ÿèƒ½æ›´å¥½åœ°ç†è§£ã€‚ ç®—æ³•æè¿°ï¼šé¦–å…ˆä½¿ç”¨$\epsilon$åŒºåˆ†ç»ˆæ€ä¸Žéžç»ˆæ€ï¼Œå°†å®ƒä»¬åˆ†ä¸ºä¸¤ä¸ªé›†åˆã€‚éšåŽï¼Œåƒå­é›†æž„é€ æ³•é‚£æ ·ï¼Œæœ‰é¡ºåºåœ°æžšä¸¾è¾“å…¥å­—ç¬¦ä¸²ï¼Œå°†é‚£äº›ç»è¿‡çŠ¶æ€è¿ç§»èƒ½åˆ°è¾¾ç»ˆæ€ï¼ˆä¸åŒé›†åˆï¼‰çš„çŠ¶æ€å‰”é™¤å‡ºåŽ»ç»„æˆä¸€ä¸ªæ–°çš„é›†åˆï¼ˆå¦‚æžœä¸¤è€…åˆ°è¾¾åŒä¸€ä¸ªé›†åˆï¼Œè¿™ä¸¤è€…æ˜¯ä¸èƒ½åŒºåˆ†çš„ï¼Œåº”è¯¥åœ¨åŒä¸€ä¸ªé›†åˆï¼‰ï¼Œå¯¹äºŽé‚£äº›å«æœ‰å¤šä¸ªå…ƒç´ çš„é›†åˆï¼Œå¦‚æžœç»è¿‡ä¸€ç³»åˆ—ä¸åŒçš„çŠ¶æ€è¿ç§»åˆ°è¾¾ä¸åŒçš„é›†åˆï¼Œä»éœ€è¦ç»§ç»­åˆ†å¼€ã€‚ç›´åˆ°ä¸å†äº§ç”Ÿæ–°çš„é›†åˆã€‚ ä»ç„¶ä½¿ç”¨ä¸Šé¢çš„ä¾‹å­ï¼Œè¿›è¡Œåˆ†è£‚çš„è¿‡ç¨‹ï¼š $\epsilon$ -&gt; {A,B,C,D}ã€{E} a -&gt; {A,B,C,D} ({B,B,B,B})-&gt;å…¨éƒ¨ä¸€æ ·ï¼Œä»¥aæ‰“å¤´çš„ä¸ç”¨å†è¯• b -&gt; {A,B,C}{D} ({C,D,C,E}) b -&gt; {A,C}{B}{D} ({C,C,D}) -&gt; ä¸åŒé›†åˆ æœ€ç»ˆå¾—åˆ°çš„æœ€å°DFAï¼š æœ€åŽä½¿ç”¨æ–°çš„çŠ¶æ€è¿›è¡Œè¿ç§»çš„æ—¶å€™ï¼Œä¸€å®šä¸ä¼šå‡ºçŽ°é—®é¢˜ã€‚ è¡¥å……ï¼šä»Žè‡ªåŠ¨æœºåˆ°æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ä»Žä¸€ä¸ªDFAæˆ–NFAå¾—åˆ°å¯¹åº”çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å¹¶ä¸æ˜¯æ€»æ˜¯ç®€å•çš„ï¼Œä»–åªæ˜¯æä¾›äº†ä¸€ä¸ªæ¨¡ç³Šçš„æ€è·¯ï¼Œå½“ä¸€ä¸ªDFAå¾ˆå¤æ‚çš„æ—¶å€™ï¼Œè¿˜æ˜¯éœ€è¦æœ‰èªæ˜Žæ‰æ™ºæ‰è¡Œã€‚è¿™é‡Œåªæ˜¯ç®€å•çš„ç»™å‡ºè¿™ä¸ªæ–¹æ³•ï¼Œå…·ä½“å¯æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶ã€‚ ä¸ºäº†ä½¿è®¨è®ºæ›´åŠ ç®€å•ï¼Œæˆ‘ä»¬å¼ºåˆ¶ä¸€ä¸ªDFA/NFAåº”è¯¥æœ‰ä¸‹åˆ—ç‰¹æ€§ï¼š åˆæ€å¯ä»¥åˆ°è¾¾ä»»æ„å…¶ä»–çŠ¶æ€ï¼Œæ²¡æœ‰çŠ¶æ€å¯ä»¥é€šè¿‡çŠ¶æ€è¿ç§»åˆ°è¾¾åˆæ€ åªæœ‰ä¸€ä¸ªç»ˆæ€ï¼Œç»ˆæ€ä¸èƒ½é€šè¿‡çŠ¶æ€è¿ç§»åˆ°è¾¾éžç»ˆæ€ åˆæ€ä¸èƒ½æ˜¯ç»ˆæ€ é™¤äº†åˆæ€ä¸Žç»ˆæ€ï¼Œå…¶ä»–çŠ¶æ€å½¼æ­¤ç›¸è¿ž è¿™å››ä¸ªæ¡ä»¶çœ‹èµ·æ¥å¾ˆå¯æ€•ï¼Œå…¶å®žå½“æˆ‘ä»¬å¼•å…¥äº†$\varnothing$å¹¶æ ¹æ®æƒ…å†µæ·»åŠ åˆæ€ç»ˆæ€ä¹‹åŽï¼Œå¾ˆå®¹æ˜“å¯ä»¥æŠŠä¸€ä¸ªDFA/NFAè½¬ä¸ºä¸€ä¸ªç¬¦åˆè¦æ±‚çš„æœ‰é™è‡ªåŠ¨æœºã€‚ ä»¥ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜Žï¼š ä¸ºäº†ä¸è®©è‡ªå·±æ²¾æ²¾è‡ªå–œï¼Œå¿…é¡»æŒ‡å‡ºä¸Šé¢ç»™å‡ºçš„ä¾‹å­å¾ˆç®€å•ï¼Œçœ‹ä¸‹é¢è¿™ä¸ªï¼š ç”±äºŽç”Ÿæˆinitstateçš„ä¸€ä¸ªè¦æ±‚æ˜¯ï¼Œä¸èƒ½æœ‰è¿›å…¥initstateçš„ç®­å¤´ï¼Œå¥½ï¼Œåƒä¸Šé¢ä¸€æ ·åŠ ä¸€ä¸ªinitï¼ŒåŠ ä¸€ä¸ªAcï¼Œéšå³ï¼Œåœ¨åˆ é™¤Açš„æ—¶å€™å°±ä¼šå‘çŽ°é—®é¢˜ã€‚è¿™å°¼çŽ›è½¬æ¥è½¬åŽ»çš„ç©¶ç«Ÿæ€Žä¹ˆå†™è¾¹ä¸Šçš„æ­£åˆ™è¡¨è¾¾å¼å•Šï¼Ÿï¼ èƒ½ä¸èƒ½ä¸Žå¥½ä¸å¥½åœ¨é¾™ä¹¦çš„ç¬¬ä¹ç« ã€‚ æµç¨‹å¯å¦æ›´åŠ ç®€æ´ï¼Ÿ æ­£åˆ™ -&gt; DFAï¼šæœ¬è´¨ä¸Šè¿˜æ˜¯åšå­é›†æž„é€ æ³•-å§æ­£åˆ™çš„æŸäº›ä½ç½®å¯¹åº”NFAé‡Œé¢çŠ¶æ€ï¼Œä½ç½®é›†å¯¹åº”NFAçš„çŠ¶æ€é›† ä¼˜åŒ–ç»“æžœï¼Ÿ æœ€å°DFA]]></content>
      <categories>
        <category>ç¼–è¯‘åŽŸç†</category>
      </categories>
      <tags>
        <tag>ç¼–è¯‘åŽŸç†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[chap3-å†…å­˜ç®¡ç†]]></title>
    <url>%2F2017%2F11%2F06%2FOS%2Fchap3-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[å†…å­˜ä¸­çš„æ¦‚å¿µåœ°å€ç©ºé—´ï¼šä¸€ä¸ªè¿›ç¨‹å¯ç”¨äºŽå¯»å€å†…å­˜çš„ä¸€å¥—åœ°å€é›†åˆã€‚å†…å­˜ç®¡ç†ï¼šé€»è¾‘åœ°å€ä¸Žç‰©ç†åœ°å€ä¹‹é—´çš„æ˜ å°„å†…å­˜ç®¡ç†çš„ç‰¹æ€§ï¼š é«˜æ•ˆï¼šä½¿å¾—æ›´å¤šçš„åœ°å€å¯ä»¥è¢«ä½¿ç”¨ï¼ˆå…¶å®žéƒ½æ˜¯éª—â€“äººâ€“è¿›ç¨‹çš„ï¼‰ åˆç†ï¼šallocã€freeã€locateã€protect ä¾¿åˆ©ï¼šï¼Ÿå†…å­˜ç®¡ç†class ç®€å•æœºåˆ¶ï¼šé™æ€å›ºå®š å¤æ‚æœºåˆ¶ï¼šäº¤æ¢ã€paging ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§æ¬ºéª—çš„è¡Œä¸ºå­˜åœ¨å‘¢ï¼Ÿç¨‹åºå‘˜å¸Œæœ›æ‹¥æœ‰ä¸€ä¸ªåˆå¤§åˆå¿«åˆæ°¸ä¹…çš„å­˜å‚¨å™¨ï¼Œå¸Œæœ›ä»–ä»¬çš„å¯»å€æ–¹å¼æ˜¯ç»Ÿä¸€çš„ï¼›ä½†æ˜¯å®žé™…ä¸Šï¼Œåˆå¿«åˆå¤§åˆæ°¸ä¹…çš„å­˜å‚¨å™¨ç›®å‰è¿˜æ˜¯ä¸çŽ°å®žçš„ã€‚çŽ°åœ¨æˆ‘ä»¬æœ‰çš„æ˜¯ï¼š cacheï¼šéžå¸¸å¿«ï¼Œæ˜‚è´µ å†…å­˜ï¼šé€Ÿåº¦é€‚ä¸­ï¼Œä»·æ ¼é€‚ä¸­ ç¡¬ç›˜ï¼šæ…¢ï¼Œå»‰ä»· åœ¨è®¡ç»„è¯¾é‡Œé¢åº”è¯¥å°±å­¦è¿‡ä¸€ä¸ªå„ç§å­˜å‚¨å™¨çš„é€Ÿåº¦é‡‘å­—å¡”ã€‚æœ€å¿«çš„å¯„å­˜å™¨ç”šè‡³æ˜¯æŒ‰ç…§å­—èŠ‚æ¥è®¡ç®—çš„å­˜å‚¨è®¾å¤‡ã€‚ äºŽæ˜¯æå‡ºé—®é¢˜ï¼šå¦‚ä½•ä½¿ç”¨æœ‰é™çš„é«˜é€Ÿå­˜å‚¨è®¾å¤‡ä»¥åŠè¾ƒå¤šçš„ä½Žé€Ÿå­˜å‚¨è®¾å¤‡æ¥æé«˜çš„å“åº”é€Ÿåº¦å‘¢ï¼Ÿ å†…å­˜ç®¡ç†çš„ä»»åŠ¡ ç”³è¯·ä¸Žæ’¤å›žï¼šèµ„æºç®¡ç† åœ°å€è½¬æ¢ï¼šæ˜ å°„ç®¡ç† åˆ†äº«ä¸Žä¿æŠ¤ ç©ºé—´æ‰©å¼ ï¼šä½ æœ¬æ¥ä¸å¯èƒ½å 4Gçš„ï¼Œä½ éžè¯´ä½ å äº†4ä¸ªG åŠ¨æ€é‡å®šä½ ä»ŽæŽ¥å£ä¸­çŸ¥é“ï¼ŒCPUå¸Œæœ›è®¿é—®ä¸€ä¸ªåœ°å€çš„æ—¶å€™ï¼Œä¼šç»™å‡ºå¯¹åº”çš„åœ°å€ï¼ˆä¸Šæ€»çº¿ï¼‰ä»¥åŠå¯¹åº”çš„è¯»å†™ä¿¡å·etcã€‚ å¯¹ç¨‹åºå‘˜æ¥è¯´ï¼Œæ¯ä¸€ä¸ªç¨‹åºå°±æ˜¯ä¸€æ–¹å¤©åœ°ï¼Œå¹¶ä¸æƒ³åœ¨ç¨‹åºé‡Œé¢åŽ»æ€è€ƒä½ osåº”è¯¥è§£å†³çš„å­˜å‚¨é—®é¢˜ï¼Œç¨‹åºè®¤ä¸ºè‡ªå·±çš„åœ°å€éƒ½æ˜¯ä»Žmå¼€å§‹ï¼Œæƒ³è®¿é—®å“ªé‡Œå°±è®¿é—®å“ªé‡Œï¼Œä½†æ˜¯oså¹¶ä¸å¯ä»¥è¿™æ ·åšã€‚å°±åƒåœ¨å®žéªŒä¸­æåˆ°çš„é‚£æ ·ï¼Œç¨‹åºçš„elfï¼ˆexeï¼‰æ–‡ä»¶ä¸­ä¼šæœ‰è‡ªå·±çš„é“¾æŽ¥åœ°å€ï¼Œè¿™ä¸ªåœ°å€è¡¨ç¤ºç¨‹åºå‡è®¾è‡ªå·±è¢«åŠ è½½åˆ°å†…å­˜çš„ä½ç½®ï¼ŒosåŠ è½½è¿è¡Œçš„æ—¶å€™éœ€è¦è¿›è¡Œé‡å®šä½ï¼Œå¯¹ç¨‹åºä¸­ç›¸å…³çš„åœ°å€éƒ½ç»è¿‡å˜æ¢ã€‚ å¯¹äºŽä¸Šè¿°é—®é¢˜ï¼Œä½¿ç”¨ä¸¤ä¸ªå¯„å­˜å™¨æ¥è§£å†³ï¼Œä¸€ä¸ªæ˜¯åŸºå€å¯„å­˜å™¨ï¼Œä¸€ä¸ªæ˜¯ç•Œé™å¯„å­˜å™¨ï¼Œå®ƒä»¬åœ¨æ¯ä¸€ä¸ªCPUä¸­éƒ½å­˜åœ¨ã€‚åŸºå€å¯„å­˜å™¨å­˜å‚¨å½“å‰è¿›ç¨‹çš„å¼€å§‹ç‰©ç†åœ°å€ï¼Œç•Œé™å¯„å­˜å™¨ä¸­å­˜å‚¨è¯¥ç¨‹åºé•¿åº¦ã€‚ å½“ä½¿ç”¨ä¸€ä¸ªåœ°å€açš„æ—¶å€™ï¼Œé¦–å…ˆåˆ¤æ–­aæ˜¯å¦å¤§äºŽç•Œé™å¯„å­˜å™¨ä¸­å­˜å‚¨çš„å€¼ï¼Œå¦‚æžœä¸æ˜¯ï¼Œå†å°†aåŠ ä¸ŠåŸºå€å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œç„¶åŽé€åˆ°åœ°å€æ€»çº¿ã€‚è¿™äº›åŠ¨ä½œéƒ½æ˜¯CPUç¡¬ä»¶å®Œæˆçš„ã€‚ monoprogramingï¼šå•é“ç¨‹åºå¤„ç†multiprogrammingæ”¯æŒå¤šä¸ªè¿›ç¨‹çš„oså†…å­˜ç®¡ç†éƒ½éœ€è¦åšä»€ä¹ˆï¼Ÿ ç”³è¯·ç©ºé—´ã€é‡Šæ”¾ç©ºé—´ åœ°å€è½¬æ¢ã€å†…å­˜ä¿æŠ¤ï¼ˆseveral methodï¼‰ CPUåˆ©ç”¨ï¼šMTFçš„è¡¨çŽ° å†…å­˜æ‰©å¼ ï¼šæ›´åŠ æŸ”éŸ§çš„å†…å­˜ç®¡ç† ä½¿ç”¨partitionæ¥ä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹åˆ†é…ç©ºé—´ åŠ¨æ€åˆ†åŒºåˆ†é…ï¼šå½“ç¨‹åºè¢«åŠ è½½æ‰§è¡Œæ—¶ï¼Œåˆ†é…ä¸€ä¸ªè¿›ç¨‹åˆ¶å®šå¤§å°å¯å˜çš„åˆ†åŒºï¼Œåœ¨æ­¤åˆ†åŒºå†…åœ°å€è¿žç»­oséœ€è¦ç»´æŠ¤æ‰€æœ‰è¿›ç¨‹çš„å·²åˆ†é…æ•°æ®ç»“æž„ä»¥åŠç©ºé—²åˆ†åŒºã€‚$$\color{red}{whats this}$$ äº¤æ¢æŠ€æœ¯é€šå¸¸æƒ…å†µä¸‹å†…å­˜æ˜¯ä¸å¤Ÿç”¨çš„ã€‚ä»…ä»…WindowsåŽå°åº”ç”¨éƒ½ä¼šå æ®ä¸€äº›å†…å­˜ï¼Œæ›´ä¸ç”¨è¯´å¼€æµè§ˆå™¨ï¼Œå¼€vsç­‰ç­‰ã€‚ä¸ºäº†å¤„ç†è¿™æ ·çš„æƒ…å†µï¼Œéœ€è¦ï¼ŒæŠŠæŸä¸€äº›è¿›ç¨‹æ”¾åˆ°å¤–å­˜ï¼Œä¸ºå½“å‰è¿è¡Œè¿›ç¨‹æä¾›å†…å­˜ç©ºé—´ã€‚ äº¤æ¢ï¼šæŠŠä¸€ä¸ªå®Œæ•´çš„è¿›ç¨‹è°ƒå…¥å†…å­˜ï¼Œä½¿è¯¥è¿›ç¨‹è¿è¡Œä¸€æ®µæ—¶é—´ï¼Œç„¶åŽå­˜å›žç£ç›˜ã€‚è¿™é‡Œæåˆ°çš„äº¤æ¢è¿˜ä¸æ˜¯åŽé¢è¯´åˆ°çš„é¡µé¢ç½®æ¢ã€‚ äº¤æ¢ä¸­çš„å†…å­˜ç®¡ç†ï¼š æ•°æ®ç»“æž„ä¸Žç®—æ³•ï¼šå¦‚ä½•æè¿°å†…å­˜çš„ä½¿ç”¨ ï¼› å¦‚ä½•ç”³è¯·ã€freeå†…å­˜ å‡½æ•°æ‰§è¡Œï¼šå¦‚ä½•æ¶ˆé™¤å†…å­˜ç¢Žç‰‡ æ ¸å¿ƒé—®é¢˜çš„æ–¹æ³•ï¼Ÿçµæ´»æ€§ã€ç¨³å®šæ€§ã€æ‰©å±•æ€§ å…³äºŽå†…å­˜ç¢Žç‰‡ï¼šæ¯æ¬¡ç§»å…¥å†…å­˜éƒ½æ˜¯å›ºå®šçš„å¤§å°ï¼Œä½†æ˜¯æœ‰æ—¶ä¼šç§»å‡ºåŽ»ï¼Œæœ‰æ—¶ä¼šç§»è¿›æ¥ï¼Œæœ€ç»ˆå¯èƒ½ä¼šäº§ç”Ÿè®¸å¤šå†…å­˜ç©ºæ´žã€‚ä¸ºäº†æ¶ˆé™¤å†…å­˜ç©ºæ´žï¼Œéœ€è¦è¿›è¡Œç¢Žç‰‡æ•´ç†ï¼ˆå†…å­˜ç´§ç¼©ï¼‰ï¼Œè¿™ä¸ªæ“ä½œå¾ˆèŠ±æ—¶é—´ã€‚ ç¢Žç‰‡æ•´ç†ï¼šç´§ç¼©ï¼šä»€ä¹ˆæ—¶å€™ç§»åŠ¨ï¼Ÿ ç¢Žç‰‡æ•´ç†ï¼šåˆ†åŒºå¯¹æ¢ï¼šé€šè¿‡æŠ¢å å¹¶å›žæ”¶å¤„äºŽç­‰å¾…çŠ¶æ€è¿›ç¨‹çš„åˆ†åŒºï¼Œå¢žå¤§å¯ç”¨ç©ºé—´ã€‚ æ ¸å¿ƒé—®é¢˜ï¼šå†™ç¨‹åºè‚¯å®šä¼šç»å¸¸newå§ï¼Œè¿™ä¸ªnewæ˜¯åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œåªæœ‰åœ¨è¿è¡Œåˆ°è¿™é‡Œçš„æ—¶å€™æ‰ä¼šåŽ»å¸®ä½ åˆ†é…ï¼Œè¿™ç§ç©ºé—´æ˜¯ä¸å¯é¢„çŸ¥çš„ï¼Œæ— æ³•å‡†ç¡®è®¡ç®—éœ€è¦ç©ºé—´çš„æœ€å¤§å€¼ã€‚äºŽæ˜¯åœ¨ä¸ºæ²¡ä¸€ä¸ªè¿›ç¨‹åˆ†é…ç©ºé—´çš„æ—¶å€™éƒ½å¯ä»¥å¤šåˆ†ä¸€ç‚¹ã€‚è¿™ç§åˆ†æ³•å¸¦æ¥æ–°çš„é—®é¢˜ï¼šå°†è¿›ç¨‹æ¢å›žå¤–å­˜çš„æ—¶å€™å…¶å®žå¹¶ä¸éœ€è¦æ¢é‚£äº›æ²¡æœ‰æœ‰æ•ˆæ•°æ®çš„åœ°å€ï¼Œè¿™æ˜¯ä¸€ç§æµªè´¹ã€‚ äº¤æ¢çš„ç©ºé—²å†…å­˜ç®¡ç†ä½å›¾å°±åƒlab5ä¸­çš„bitmapä¸€æ ·ï¼Œ0ä»£è¡¨æ²¡æœ‰å ç”¨ï¼Œ1ä»£è¡¨å ç”¨ã€‚ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œä¸€ä¸ªbitä»£è¡¨å¯èƒ½æ˜¯å†…å­˜ä¸­çš„ä¸€ä¸ªåˆ†é…å•å…ƒï¼Œå¯èƒ½æ˜¯4byteï¼Œå¯èƒ½æ˜¯å…¶ä»–ã€‚ ä½†æ˜¯ä½¿ç”¨ä½å›¾çš„è¯ï¼Œä¸åˆ©äºŽåˆ†é…è¿žç»­çš„ç©ºé—´ï¼Œå› ä¸ºéœ€è¦æŸ¥æ‰¾è¿žç»­çš„å›ºå®šå­—èŠ‚ç©ºé—´çš„æ—¶é—´å¯èƒ½æ¯”æŸ¥æ‰¾ä¸€ä¸ªåˆ†é…å•å…ƒç©ºé—²å¤šèŠ±æ›´å¤šæ—¶é—´ã€‚ é“¾è¡¨è¿™å¹¶ä¸æ˜¯lab2ä¸­ä½¿ç”¨çš„æ–¹æ³•ã€‚ ç»´æŠ¤ä¸€ä¸ªç©ºé—²å†…å­˜æ®µé“¾è¡¨ä¸Žå·²ç”¨å†…å­˜æ®µé“¾è¡¨ã€‚åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹æ ‡å¿—å…¶çŠ¶æ€ä»¥åŠå¼€å§‹åœ°å€ä»¥åŠè¿žç»­åœ°å€ã€‚ è¿™ç§æ–¹å¼å¯¹ä¸Šè¿°é—®é¢˜å‹å¥½ã€‚æ–°çš„é—®é¢˜æ˜¯å¦‚ä½•è¿›è¡ŒèŠ‚ç‚¹çš„æ›´æ–°ä¸Žå›žæ”¶ï¼Œè¿™éœ€è¦èŠ‚ç‚¹çš„åˆå¹¶ä¸Žåˆ é™¤ã€å¢žåŠ ç­‰æ“ä½œ åˆ†åŒºç®¡ç†åˆ†é…ç®—æ³•ï¼š å½“è¿›è¡Œå†…å­˜ç”³è¯·çš„æ—¶å€™ï¼Œå¸Œæœ›èƒ½å°½é‡é¿å…åšå†…å­˜ç´§ç¼©ï¼Œè¿™å°±éœ€è¦æ›´å¥½çš„ç”³è¯·æ–¹å¼ï¼Œè€Œä¸æ˜¯æ¯æ¬¡é‡åˆ°å‰©ä½™ç©ºé—´æ¯”è‡ªå·±æ›´å¤šçš„å°±å†³å®šè¦è¿™ä¸ªå—ã€‚ é¦–æ¬¡é€‚é…ï¼šæ—¶é—´æ€§èƒ½å¥½ã€ä½†ä¼šå®¹æ˜“å¯¼è‡´å†…å­˜ç¢Žç‰‡ ä¸‹æ¬¡é€‚é…ï¼šä»Žä¸Šæ¬¡åˆ†é…çš„åˆ†åŒºå¼€å§‹æŸ¥æ‰¾ã€‚æ—¶é—´æ€§èƒ½å¥½ã€ç©ºé—²åŽ»åˆ†å¸ƒå‡åŒ€ï¼Œè¾ƒå¤§çš„ç©ºé—²åˆ†åŒºä¸æ˜“ä¿ç•™ æœ€ä½³é€‚é…ï¼šè¾ƒå¤§ç©ºé—´ä¿ç•™ï¼Œç¢Žç‰‡å°è€Œå¤š æœ€åé€‚é…ï¼šç€æ›´å¤§çš„åˆ†é…ï¼šè¾ƒå¤§åˆ†åŒºä¸ä¼šè¢«ä¿ç•™ æœ€ä½³é€‚é…ä¸Žæœ€åé€‚é…éƒ½å¯ä»¥é€šè¿‡ç»´æŠ¤äºŒçº§ç´¢å¼•æ¥å®žçŽ°æ›´å¿«çš„æŸ¥æ‰¾ å¿«é€Ÿé€‚é…ï¼šé“¾è¡¨çš„æ”¹å˜ååˆ†è´¹åŠ²ã€‚ä¸ºå¸¸ç”¨å¤§å°çš„å—æä¾›ä¸“é—¨çš„ç´¢å¼• æ€»ç»“ï¼šmono\multi\swap ä½å›¾è¿žç»­ç©ºé—²ç©ºé—´å¯»æ‰¾ é“¾è¡¨çš„ç©ºæ´ž äº¤æ¢çš„ç¼ºç‚¹ï¼š å†…å­˜ç¢Žç‰‡ å†…å­˜çš„åŠ¨æ€å¢žé•¿ å¦‚ä½•åˆ©ç”¨å°ç©ºé—´è¿è¡Œå¤§è¿›ç¨‹ï¼Ÿ Mono MFP Swapping Size of proc total mem partion size total size of free mem Alloction static static dynamic multi-programming unsupported supported supported mem space continuous continuous continuous mem growth unsupported un supported é™¤äº†ä¸Šè¿°çš„ç¢Žç‰‡æ•´ç†ï¼Œè¿˜æœ‰è¦†ç›–æŠ€æœ¯ï¼šï¼ˆç¨‹åºå‘˜æŽ§åˆ¶ åˆ’åˆ†åŠŸèƒ½åŒºï¼ˆifelseï¼‰ ç¡®å®šæ¨¡å—ä¹‹é—´çš„è¦†ç›–å…³ç³» æ‰§è¡Œä¹‹å‰é¢„å…ˆåŠ è½½å¹¶äº¤æ¢ å…¶å®žæ˜¯å¾ˆä¸å¥½å®Œæˆçš„ï¼ŒåŸºç¡€å°±ä¸å¥½å®Œæˆï¼Œä¸å¥½åˆ¤æ–­åŠŸèƒ½æ¨¡å—ï¼Œè¦æ±‚çš„ç¼–ç¨‹æŠ€å·§å¤ªé«˜ã€‚ ä½†æ˜¯ï¼Œä»Žè¦†ç›–æŠ€æœ¯å¼•å‡ºäº†ä¸€ä¸ªï¼šè™šæ‹Ÿå†…å­˜ è™šæ‹Ÿå†…å­˜ è¿›ç¨‹çš„ç¨‹åºæ®µã€æ•°æ®æ®µã€å †æ ˆæ®µçš„æ€»å’Œå¯ä»¥å¤§äºŽç‰©ç†å­˜å‚¨ç©ºé—´ è¿›ç¨‹ä¸å¿…å®Œå…¨è£…å…¥å†…å­˜ oså®šæ—¶å°†æš‚ä¸”ä¸ç”¨çš„ä¿¡æ¯æ¢å‡ºå†…å­˜ osè´Ÿè´£å°†æ¢å‡ºåŽ»çš„æ¢å›žæ¥ åˆ†é¡µ é¡µï¼šæè¿°è¿›ç¨‹é€»è¾‘ç©ºé—´çš„å•å…ƒ é¡µæ¡†ï¼šæè¿°ç‰©ç†å†…å­˜ä¸­å¯¹åº”çš„å•å…ƒ é¡µè¡¨ï¼šé¡µä¸Žé¡µæ¡†ä¹‹é—´çš„æ˜ å°„ åœ¨æ ‡å‡†çš„4KBé¡µé¢ä¸­ï¼Œä½æ•°åˆ†åˆ«æ˜¯10-10-12 é¡µè½¬æ¢åœ¨mmuä¸­å®Œæˆï¼ŒCPUè®¿é—®åˆ°çš„ï¼Œåœ¨ç¨‹åºä¹‹ä¸­æ‰§è¡Œçš„éƒ½æ˜¯è™šæ‹Ÿåœ°å€ã€‚ è¿˜è®°å¾—åœ¨è®¡ç»„å®žéªŒä¸­è¿˜è¢«é—®åˆ°äº†1/0æ˜¯å¹²å—çš„ï¼Œè‡³ä»Šéš¾å¿˜ã€‚ å¯èƒ½ä¼šæœ‰æ˜¯å¦è¶Šç•Œçš„æ¯”è¾ƒï¼ˆåœ¨æ ‡å‡†ä¸­ä¸å­˜åœ¨ï¼Œè¿™æ˜¯å› ä¸ºæ•°æ®éƒ½æ˜¯æ­£å¥½çš„ï¼‰ ä¸ºäº†è€ƒè¯•â€¦ è™šæ‹Ÿåœ°å€ï¼ˆè‹±è¯­ï¼šVirtual address spaceï¼‰åœ¨é›»è…¦çš„ä¸“ç”¨æœ¯è¯­ä¸­æ˜¯æŒ‡æ ‡è¯†ä¸€ä¸ªè™šæ‹Ÿï¼ˆéžç‰©ç†åœ°å€ï¼‰çš„å®žä½“åœ°å€ã€‚è™šæ‹Ÿåœ°å€è¿™ä¸ªæœ¯è¯­å¸¸ç”¨åœ¨è™šæ‹Ÿå†…å­˜å’Œè™šæ‹Ÿç½‘ç»œåœ°å€å½“ä¸­ã€‚from wiki åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œç‰©ç†åœ°å€ï¼ˆè‹±è¯­ï¼šphysical addressï¼‰ï¼Œä¹Ÿå«å®žåœ°å€ï¼ˆreal addressï¼‰ã€äºŒè¿›åˆ¶åœ°å€ï¼ˆbinary addressï¼‰ï¼Œå®ƒæ˜¯åœ¨åœ°å€æ€»çº¿ä¸Šï¼Œä»¥ç”µå­å½¢å¼å­˜åœ¨çš„ï¼Œä½¿å¾—æ•°æ®æ€»çº¿å¯ä»¥è®¿é—®ä¸»å­˜çš„æŸä¸ªç‰¹å®šå­˜å‚¨å•å…ƒçš„å†…å­˜åœ°å€ã€‚from wiki è™šæ‹Ÿå†…å­˜æ˜¯è®¡ç®—æœºç³»ç»Ÿå†…å­˜ç®¡ç†çš„ä¸€ç§æŠ€æœ¯ã€‚å®ƒä½¿å¾—åº”ç”¨ç¨‹åºè®¤ä¸ºå®ƒæ‹¥æœ‰è¿žç»­å¯ç”¨çš„å†…å­˜ï¼ˆä¸€ä¸ªè¿žç»­å®Œæ•´çš„åœ°å€ç©ºé—´ï¼‰ï¼Œè€Œå®žé™…ä¸Šï¼Œå®ƒé€šå¸¸æ˜¯è¢«åˆ†éš”æˆå¤šä¸ªç‰©ç†å†…å­˜ç¢Žç‰‡ï¼Œè¿˜æœ‰éƒ¨åˆ†æš‚æ—¶å­˜å‚¨åœ¨å¤–éƒ¨ç£ç›˜å­˜å‚¨å™¨ä¸Šï¼Œåœ¨éœ€è¦æ—¶è¿›è¡Œæ•°æ®äº¤æ¢ã€‚ä¸Žæ²¡æœ‰ä½¿ç”¨è™šæ‹Ÿå†…å­˜æŠ€æœ¯çš„ç³»ç»Ÿç›¸æ¯”ï¼Œä½¿ç”¨è¿™ç§æŠ€æœ¯çš„ç³»ç»Ÿä½¿å¾—å¤§åž‹ç¨‹åºçš„ç¼–å†™å˜å¾—æ›´å®¹æ˜“ï¼Œå¯¹çœŸæ­£çš„ç‰©ç†å†…å­˜ï¼ˆä¾‹å¦‚RAMï¼‰çš„ä½¿ç”¨ä¹Ÿæ›´æœ‰æ•ˆçŽ‡ã€‚from wiki é¡µè¡¨é¡¹ç»“æž„æ¦‚å¿µpage numberï¼šé€»è¾‘ç©ºé—´ä¸­çš„é¡µidï¼Œframe numï¼šç‰©ç†ç©ºé—´ä¸­é¡µæ¡†çš„idp/aï¼šé¡µæ˜¯ä¸æ˜¯åœ¨å†…å­˜é‡Œé¢protectedï¼šr/w/eï¼Œè®°å½•é¡µå…è®¸çš„è®¿é—®modifiedï¼šæ˜¯ä¸æ˜¯è¢«ä¿®æ”¹ï¼ˆè„ä½referencedï¼šè¿™ä¸ªé¡µæœ‰æ²¡æœ‰è¢«ä½¿ç”¨disable cachingï¼šé¡µé¢ç¦ç”¨é«˜é€Ÿç¼“å­˜ why ç¦ç”¨é«˜é€Ÿç¼“å­˜ï¼Ÿå¯¹äºŽé‚£äº›æ˜ å°„åˆ°è®¾å¤‡å¯„å­˜å™¨è€Œä¸æ˜¯æ™®é€šç‰©ç†å†…å­˜çš„é¡µé¢æ¥è¯´ï¼Œä¸å¸Œæœ›åœ¨è‡ªå·±ç­‰å¾…è®¾å¤‡å¯¹è‡ªå·±åˆšå‘å‡ºåŽ»çš„æŒ‡ä»¤åšååº”çš„æ—¶å€™è‡ªå·±çš„å¯¼å‘åœ°å€ç«Ÿç„¶æ˜¯cacheè€Œä¸æ˜¯å¤–éƒ¨æŽ¥å£ã€‚ in ppt: page num p/a frame num protected disable caching referenced modified Design issue å¤šçº§é¡µè¡¨10-10-12 é™¤äº†ä¿®æ”¹ä½ï¼Œæ¯é›†é¡µè¡¨é¡¹éƒ½æ˜¯ä¸€æ ·çš„ã€‚åœ¨éžåº•å±‚é¡µè¡¨ä¸­ï¼Œå–å€¼ä¸º0 å…¶å®žè¿˜å¯ä»¥æ›´å¤šçº§ã€‚ åŠ é€Ÿåˆ†é¡µè¿‡ç¨‹ï¼šTLBå¿«è¡¨ï¼šä¸€ä¸ªå°†è™šæ‹Ÿåœ°å€ç›´æŽ¥æ˜ å°„åˆ°ç‰©ç†åœ°å€çš„å°åž‹ç¡¬ä»¶è®¾å¤‡ï¼Œé€šå¸¸åœ¨MMUä¸­ï¼Œå…¶ä¸­çš„é¡¹åŸºæœ¬ä¸è¶…è¿‡64ä¸ªã€‚ å°†è™šæ‹Ÿåœ°å€æ”¾åœ¨MMUä¸­è¿›è¡Œè½¬æ¢æ—¶ï¼Œé¦–å…ˆæŸ¥å¿«è¡¨ï¼šå°†è¯¥é¡µé¢å·ä¸ŽTLBä¸­æ‰€æœ‰é¡¹åŒæ—¶ï¼ˆå¹¶è¡Œï¼‰è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æžœå‘½ä¸­ï¼Œè€Œä¸”ä¸è¿åä¿æŠ¤ä½ï¼Œé¡µæ¡†å·å¯ä»¥ç›´æŽ¥ä»ŽTLBæ‹¿å‡ºï¼Œä¸å¿…å†è¿›è¡Œå†…å­˜è®¿é—®ï¼ˆè®¿é—®å­˜å‚¨æœ‰é¡µè¡¨é¡¹çš„å†…å­˜ï¼‰ï¼Œå¦‚æžœä¿æŠ¤ä½ä¸å…è®¸ï¼Œå°±ä¼šå‘ç”Ÿä¸€ä¸ªé¡µé¢è®¿é—®é”™è¯¯ã€‚ å¦‚æžœä¸å‘½ä¸­MMUå°±ä»Žå†…å­˜ä¸­æ‰¾é¡µè¡¨é¡¹ï¼Œå¹¶å°†æœ€ç»ˆæ‰¾åˆ°çš„é¡µå·ä¸Žé¡µæ¡†å·ç­‰æ‹¿å‡ºï¼Œæ·˜æ±°tlbä¸­æŸä¸€ä¸ªé¡¹å¹¶æ·»åŠ æ–°æ¥çš„é¡¹ã€‚ å½“ä»Žtlbä¸­æ·˜æ±°å€¼çš„æ—¶å€™ï¼Œè®°å¾—å°†tlbä¸­å­˜å‚¨çš„ä¿®æ”¹ä½æ¢åˆ°é¡µé¢ã€‚ tlbè¡¨é¡¹ï¼ˆç¤ºä¾‹ï¼‰ æœ‰æ•ˆä½ è™šæ‹Ÿé¡µé¢å· ä¿®æ”¹ä½ ä¿æŠ¤ä½ é¡µæ¡†å· 1 123 1 RW 31 1 87 0 RX 87 â€¦ æ—¢ç„¶TLBè¿™ä¹ˆåŽ‰å®³ï¼Œä¸ºä»€ä¹ˆä¸æžä¸€ä¸ªå¾ˆå¤§å¾ˆå¤§çš„TLBå‘¢ã€‚TLBå±žäºŽé«˜é€Ÿè®¾å¤‡ï¼ŒåŠŸè€—éžå¸¸å¤§ã€‚ åŠ é€Ÿåˆ†é¡µè¿‡ç¨‹ï¼šè½¯ä»¶TLBå½“tlbå¤±æ•ˆçš„æ—¶å€™ï¼Œmmuå°†ä¼šå‘Šè¯‰osï¼Œè®©osæ‰¾åˆ°è¦æ‰¾çš„é¡µé¢ï¼Œä»Žtlbåˆ é™¤ä¸€ä¸ªé¡µé¢ï¼ŒæŠŠè¿™ä¸ªé¡µåŠ ä¸ŠåŽ»ã€‚å¿…é¡»åœ¨æœ‰é™çš„æŒ‡ä»¤å†…å®Œæˆï¼Œå› ä¸ºtlbå¤±æ•ˆæ›´åŠ é¢‘ç¹ã€‚ ä½†æ˜¯ï¼Œå½“tlbæ›´å¤§ä¸€äº›ï¼Œè¿™ç§æœºåˆ¶å°±ä¼šå˜å¾—å¾ˆæœ‰æ•ˆã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¾—åˆ°ä¸€ä¸ªç®€å•çš„mmuï¼Œä»Žè€Œä¸ºCPUå…¶ä»–æ€§èƒ½æ”¹å–„æä¾›äº†ç©ºé—´ã€‚ oså¯ä»¥â€œç›´è§‰â€é‚£äº›é¡µé¢è¦è¢«ä½¿ç”¨ï¼Œç„¶åŽé¢„å…ˆåŠ è½½åˆ°tlbã€‚ ã€Šï¼Ÿã€‹åœ¨å†…å­˜å›ºå®šä½ç½®ç»´æŠ¤å¤§çš„tlbè¡¨é¡¹çš„è½¯ä»¶é«˜é€Ÿç¼“å­˜ã€‚é¦–å…ˆæ£€æŸ¥è¿™ä¸ªç¼“å­˜ï¼Œoså¯ä»¥å®žè´¨æ€§åœ°å‡å°‘å¤±æ•ˆã€‚ è½¯å¤±æ•ˆï¼šé¡µé¢åœ¨å†…å­˜ä¸­ä½†æ˜¯æ˜ å°„ä¸åœ¨tlbã€‚ç¡¬å¤±æ•ˆï¼šé¡µé¢æœ¬èº«ä¸å†å†…å­˜ï¼ˆå½“ç„¶ä¹Ÿä¸åœ¨tlbsoä¸ºä»€ä¹ˆæ˜¯è¿™æ ·ï¼‰ é’ˆå¯¹å¤§å†…å­˜ï¼šåç½®é¡µè¡¨ ä¸ºä»€ä¹ˆä¼šå‡ºçŽ°åç½®é¡µè¡¨ï¼Ÿåœ¨64ä½ç³»ç»Ÿä¸‹å†…å­˜64ä½ç³»ç»Ÿï¼Œå¦‚æžœä»ç„¶ä¿æŒä¸€ä¸ªé¡µæ˜¯4Kï¼Œé‚£ä¹ˆä¸€å…±éœ€è¦æœ‰$2^52$ä¸ªé¡µï¼Œåªæ˜¯å­˜å‚¨è¿™äº›é¡µå°±èŠ±è´¹å‡ ç™¾Gçš„ç©ºé—´ï¼Œæ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚ è€Œç›®å‰é¢ä¸´çš„çŠ¶æ€æ˜¯å®žé™…çš„å†…å­˜å¾ˆå°ï¼ŒäºŽæ˜¯å¯ä»¥ä¸ºæ¯ä¸€ä¸ªé¡µæ¡†è®°å½•ä¸€ä¸ªé¡µè¡¨é¡¹ã€‚è¿™æ ·å¯¹äºŽ4Kçš„é¡µä»¥åŠ1Gçš„ramåªéœ€è¦$2^18$ä¸ªé¡µè¡¨é¡¹å³å¯ã€‚é¡µè¡¨é¡¹ä¸­è®°å½•å“ªä¸€ä¸ª(è¿›ç¨‹,è™šæ‹Ÿé¡µé¢)å¯¹åº”äºŽè¯¥é¡µæ¡†ã€‚è™½ç„¶èŠ‚çœç©ºé—´ï¼Œä½†æ˜¯ä¸è¶³ä¹Ÿæ˜¯å¾ˆæ˜Žæ˜¾çš„ï¼šå°†è™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€å˜å¾—å›°éš¾ å¯ä»¥ä½¿ç”¨tlbã€‚ä½†æ˜¯å½“tlbå¤±æ•ˆçš„æ—¶å€™å°±å¾ˆéš¾ã€‚åŸºäºŽhashï¼šæŠŠè™šæ‹Ÿé¡µå·ä¸Žè¿›ç¨‹å·ä½œä¸ºè¾“å…¥ï¼Œå¾—åˆ°çš„æ•£åˆ—å€¼æ¥å¯»æ‰¾ã€‚ hahså†²çª è™šæ‹Ÿå­˜å‚¨çš„åŸºæœ¬ç‰¹å¾ï¼š ä¸è¿žç»­ï¼ˆ$\color{red}{å•¥å«è™šæ‹Ÿåœ°å€ç©ºé—´ä½¿ç”¨éžè¿žç»­ï¼Ÿæ˜¯è¯´å„ä¸ªåŒºåˆ†å¼€å—}ï¼‰ å¤§ç”¨æˆ·ç©ºé—´ï¼šæä¾›ç»™ç”¨æˆ·çš„è™šæ‹Ÿåœ°å€ç©ºé—´å¯ä»¥å¤§äºŽå®žé™…çš„ç‰©ç†å†…å­˜ éƒ¨åˆ†äº¤æ¢ï¼šè™šæ‹Ÿå­˜å‚¨åªå¯¹éƒ¨åˆ†è™šæ‹Ÿåœ°å€è¿›è¡Œè°ƒå…¥è°ƒå‡ºã€‚ï¼ˆä¸ä¼šåƒäº¤æ¢ä¸€æ ·ä¸€ä¸‹ä¸€ä¸ªè¿›ç¨‹ï¼‰ è™šæ‹Ÿé¡µå¼å­˜å‚¨çš„å¤–å­˜ç®¡ç†ï¼š åœ¨å“ªé‡Œä¿å­˜æ²¡æœ‰è¢«æ˜ å°„çš„é¡µï¼Ÿ éœ€è¦å¯ä»¥æ–¹ä¾¿çš„æ‰¾åˆ°åœ¨å¤–å­˜ä¸­çš„é¡µé¢å†…å®¹ äº¤æ¢ç©ºé—´ï¼ˆç£ç›˜æˆ–æ–‡ä»¶ï¼‰ï¼šé‡‡ç”¨ç‰¹æ®Šæ ¼å¼ä¿å­˜æ²¡æœ‰è¢«æ˜ å°„çš„é¡µé¢ è™šæ‹Ÿé¡µå¼å­˜å‚¨ä¸­çš„å¤–å­˜é€‰æ‹© ä»£ç æ®µï¼šå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶ åŠ¨æ€åŠ è½½çš„å…±äº«å¼ç¨‹åºæ®µ å…¶ä»–æ®µï¼šäº¤æ¢ç©ºé—´ è™šæ‹Ÿé¡µå¼å­˜å‚¨çš„æ€§èƒ½ï¼šæœ‰æ•ˆå­˜å‚¨è®¿é—®æ—¶é—´ EAT=è®¿å­˜æ—¶é—´*(1-p)+ç¼ºé¡µå¼‚å¸¸å¤„ç†æ—¶é—´*ç¼ºé¡µçŽ‡p pagingsysçš„å·¥ä½œæµç¨‹ å…¨å±€pgtableåˆå§‹åŒ– åˆ›å»ºè¿›ç¨‹ èŽ·å–é¦–æŒ‡ä»¤ pgfault åŠ è½½é¡µ æ›´æ–°pgtable æ›´æ–°tlb é¡µæ›¿æ¢ pgfault é€‰æ‹©ä¸€ä¸ªé¡µï¼Œå†™å›žç£ç›˜ æŠŠæ–°é¡µæ¢åˆ°è¿™é‡Œ æ›´æ–°tlb ç¼ºé¡µä¸­æ–­ å¦‚æžœå†…å­˜è¿˜æœ‰å‰©ä½™é¡µï¼Œåˆ†é…ï¼›æŠŠå¸Œæœ›è®¿é—®çš„é¡µä»Ždiskè£…åˆ°è¿™ä¸ªç‰©ç†ç©ºé—´ï¼ŒæŠŠè¿™ä¸ªé¡µå¯¹åº”é¡µè¡¨çš„a/pç½®ä¸º1ï¼Œç‰©ç†åœ°å€æ˜ å°„åˆ°æ–°åˆ†é…çš„ç‰©ç†åœ°å€ï¼Œé‡æ–°æ‰§è¡Œå¼•èµ·ç¼ºé¡µä¸­æ–­çš„æŒ‡ä»¤ å¦‚æžœå†…å­˜æ²¡æœ‰å‰©ä½™çš„é¡µé¢ï¼Œä¾æ®é¡µé¢ç½®æ¢ç®—æ³•é€‰æ‹©ä¸€ä¸ªå°†ä¼šè¢«æ›¿æ¢çš„ç‰©ç†é¡µï¼Œå¦‚æžœè¿™ä¸ªç‰©ç†é¡µçš„å€¼è¢«ä¿®æ”¹è¿‡ï¼ŒæŠŠå†…å­˜ä¸­çš„å€¼å†™å›žå¤–å­˜ï¼ŒæŠŠå¯¹åº”é€»è¾‘é¡µçš„a/pç½®ä¸º0ï¼ŒæŠŠå¸Œæœ›è®¿é—®çš„ç‰©ç†é¡µè£…åˆ°è¿™ä¸ªç©ºé—´ï¼Œä¿®æ”¹ç‰©ç†é¡µå¯¹åº”çš„é€»è¾‘é¡µé¢çš„æŒ‡ç¤ºç‰©ç†é¡µåœ°å€ä»¥åŠå­˜åœ¨ä½ï¼Œé‡æ–°æ‰§è¡Œå´é¡µæŒ‡ä»¤ã€‚ æˆ‘çŽ°åœ¨è®¤ä¸ºï¼Œå‰é¢æåˆ°çš„æŒ‚èµ·çŠ¶æ€ä¸ŽçŽ°åœ¨è¯´çš„â€œä¸ºäº†è…¾å†…å­˜ç©ºé—´è€Œå°†ä¸€äº›è¿›ç¨‹å­˜å‚¨çš„ä¸œè¥¿å…ˆå­˜åˆ°å¤–å­˜â€æ˜¯ä¸ä¸€æ ·çš„ã€‚æŒ‚èµ·çš„æ„æ€åº”è¯¥æ˜¯pcbéƒ½è¢«ç§»åŠ¨åˆ°äº†å¤–å­˜ï¼Œæ ¹æœ¬æ— æ³•æ‰¾åˆ°è¿™ä¸ªè¿›ç¨‹çš„è¿è¡Œæƒ…å†µï¼Œåœ°å€ç©ºé—´ç­‰ï¼›ä½†æ˜¯è¿™é‡Œä»…ä»…æ˜¯ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´ï¼Œå°†æŸäº›é¡µæ¢åˆ°äº†å¤–å­˜ï¼Œè¯¥è¿›ç¨‹è¿˜æ˜¯å¯ä»¥ç»§ç»­è¿è¡Œçš„ã€‚åªæ˜¯åœ¨éœ€è¦ç”¨è¿™äº›é¡µçš„æ—¶å€™å¯èƒ½ä¼šå¼•å‘ç¼ºé¡µä¸­æ–­ã€‚æŒ‚èµ·å­˜åœ¨çš„ç†ç”±ä¸ä»…ä»…æ˜¯ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œè¿˜æœ‰ä¸€ç‚¹æ˜¯ä¸ºäº†æ›´æœ‰æ•ˆçš„è°ƒåº¦ï¼Œå› ä¸ºæ‰€æœ‰è°ƒåº¦ç®—æ³•è€ƒè™‘çš„éƒ½æ˜¯å°±ç»ªé˜Ÿåˆ—çš„è¿›ç¨‹ã€‚ æ¦‚å¿µ ç¼ºé¡µä¸­æ–­ï¼šéœ€è¦çš„é¡µä¸å­˜åœ¨å†…å­˜ä¹‹ä¸­ é¡µæ›¿æ¢ï¼šå½“æ‰€æœ‰çš„ç‰©ç†é¡µéƒ½è¢«å ç”¨ï¼›é€‰æ‹©ä¸€ä¸ªé¡µè¢«æ¢å‡ºåŽ» è¡¨çŽ°ï¼š æŠ–åŠ¨ï¼šè€—æ—¶ï¼Œä½Žæ•ˆçŽ‡ é¢„æµ‹ï¼šåœ¨éœ€è¦ä¹‹å‰å°±æŠŠé¡µé¢åŠ è½½è¿›æ¥ æœ€ä¼˜æ–¹æ¡ˆï¼šæœ€è¿œå°†æ¥ï¼ˆä¸çŽ°å®žï¼‰ é¡µé¢ç½®æ¢ç®—æ³•çš„åŠŸèƒ½ä¸Žç›®æ ‡ï¼š åŠŸèƒ½ï¼šå½“å‡ºçŽ°ç¼ºé¡µå¼‚å¸¸å¹¶ä¸”ç‰©ç†å†…å­˜å·²ç»è¢«å æ»¡ï¼Œè°ƒå‡ºä¸€ä¸ªç‰©ç†é¡µç»™æ–°éœ€è¦çš„é¡µä½¿ç”¨ è®¾è®¡ç›®æ ‡ï¼šæžå¯èƒ½å‡å°‘é¡µé¢çš„è°ƒå…¥è°ƒå‡ºæ¬¡æ•° é¡µé¢ç½®æ¢ç®—æ³•æœ€ä¼˜é¡µé¢ç½®æ¢ç®—æ³•é€šå¸¸æ˜¯è¡¡é‡ç½®æ¢ç®—æ³•çš„æ ‡å‡† ç½®æ¢åœ¨æœªæ¥æœ€é•¿æ—¶é—´å†…ä¸è®¿é—®çš„é¡µé¢ æœ€è¿‘æœªä½¿ç”¨ï¼šNRUå‘ç”Ÿpgfaultçš„æ—¶å€™ï¼Œæ£€æŸ¥æ‰€æœ‰é¡µé¢ï¼Œå°†é¡µé¢åˆ†ä¸ºå››ç±»ï¼š æ²¡æœ‰è®¿é—® æ²¡æœ‰ä¿®æ”¹ æ²¡æœ‰è®¿é—® å·²ç»ä¿®æ”¹è¯¥ å·²ç»è®¿é—® æ²¡æœ‰ä¿®æ”¹ å·²ç»è®¿é—® å·²ç»ä¿®æ”¹ éœ€è¦æ›¿æ¢çš„æ—¶å€™æŒ‰ç…§é¦–å…ˆæ›¿æ¢0çš„è§„åˆ™è¿›è¡Œæ›¿æ¢ã€‚ è¿™æ˜¯å› ä¸ºæ¯æ¬¡è®¿é—®é¡µé¢éƒ½ä¼šå¼•å‘ä¸­æ–­ï¼šå†™R/Wä½ï¼ŒäºŽæ˜¯oså¯ä»¥åˆ©ç”¨è¿™ä¸ªæ—¶é—´åšä¸€äº›äº‹ã€‚å®šæ—¶æŠŠRä½æ¸…é›¶æ¥åŒºåˆ«æœ€è¿‘æ²¡æœ‰è¢«è®¿é—®çš„å’Œå·²ç»è®¿é—®çš„ã€‚ FIFOæ›¿æ¢æœ€å…ˆè¢«æ¢è¿›æ¥çš„ã€‚ é€šè¿‡ç»´æŠ¤ä¸€ä¸ªè®°å½•æ‰€æœ‰ä½äºŽå†…å­˜çš„é€»è¾‘é¡µé¢é“¾è¡¨ï¼Œå°†è¯¥é“¾è¡¨æŒ‰é©»ç•™æ—¶é—´æŽ’åºï¼Œè”æ‰‹æœ€é•¿ï¼Œè¿žä¼Ÿæœ€çŸ­ã€‚ç¼ºé¡µçš„æ—¶å€™è¿›è¡Œç½®æ¢ï¼Œæ–°é¡µé¢åŠ åˆ°é“¾å°¾ å®žçŽ°ç®€å•ï¼Œå¯ä»¥ç”¨ç¡¬ä»¶å®žçŽ°ï¼Œä½†æ˜¯æ€§èƒ½å¾ˆå·®ï¼ŒåŸºæœ¬ä¸ä¼šå•ç‹¬ä½¿ç”¨è¿™ä¸ªç®—æ³•ã€‚ BeladyçŽ°è±¡ï¼š åˆ†é…çš„ç‰©ç†ä¹Ÿæ•°å¢žåŠ ï¼Œä½†æ˜¯å´ä¹Ÿæ¬¡æ•°ä¹Ÿä¼šå¢žåŠ çš„çŽ°è±¡ã€‚ åŽŸå› ï¼šFIFOçš„ç½®æ¢ç‰¹å¾ä¸Žè¿›ç¨‹è®¿é—®å†…å­˜çš„åŠ¨æ€ç‰¹å¾çŸ›ç›¾è¢«ä»–ç½®æ¢å‡ºåŽ»çš„ä¸ä¸€å®šæ˜¯è¿‘æœŸä¸ä¼šè®¿é—®çš„ã€‚ LRUï¼šæœ€è¿‘æœ€å°‘ä½¿ç”¨é¡µé¢ç®—æ³•æœ€è¿‘ç»å¸¸è®¿é—®çš„é¡µé¢å¯èƒ½åœ¨ä»¥åŽä¹Ÿä¼šç»å¸¸è®¿é—®ï¼Œæœ€è¿‘ä¸ç»å¸¸è®¿é—®çš„é¡µé¢å¯èƒ½ä»¥åŽä¹Ÿä¸ä¼šè®¿é—®ã€‚äºŽæ˜¯é€‰æ‹©æœ€é•¿æ—¶é—´æ²¡æœ‰è¢«è®¿é—®è¿‡çš„é¡µé¢æ›¿æ¢å‡ºåŽ»ã€‚ è¿™æ˜¯æœ€ä¼˜ç½®æ¢ç®—æ³•çš„ä¸€ç§è¿‘ä¼¼ è™½ç„¶å¯ä»¥å®žçŽ°ï¼Œä½†æ˜¯ä»£ä»·å¾ˆé«˜â€”â€”éœ€è¦ä¸€ä¸ªå…¨é¢çš„é“¾è¡¨ï¼Œæœ€å°‘ä½¿ç”¨çš„åœ¨å‰ï¼Œæœ€å¤šä½¿ç”¨çš„åœ¨åŽã€‚â€”â€”éœ€è¦ä¸€ä¸ªæ ˆï¼Œè®¿é—®é¡µé¢çš„æ—¶å€™å°†è¿™ä¸ªé¡µå·åŽ‹å…¥æ ˆï¼Œå¹¶æŠŠæ ˆå†…ç›¸åŒçš„é¡µå·æŠ½å‡ºï¼Œç¼ºé¡µæ—¶æ‹¿æ ˆåº• ä½¿ç”¨ä¸€ä¸ªn*nçŸ©é˜µè¡¨ç¤ºæ‰€æœ‰é¡µæ¡†çš„ä¿¡æ¯ï¼Œå½“kè¢«è®¿é—®çš„æ—¶å€™ï¼ŒæŠŠkè¡Œè®¾ç½®ä¸º1ï¼Œkåˆ—è®¾ç½®ä¸º0ï¼Œä¸€æ®µæ—¶é—´åŽï¼Œæ¯ä¸€è¡Œçš„äºŒè¿›åˆ¶å€¼æœ€å°çš„å°±æ˜¯æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ã€‚ Simple Implementationï¼šé¡µè¡¨é¡¹ä¸Šçš„è®¡æ•°å™¨ç¡¬ä»¶å®žçŽ°ï¼šä¸ºnnçŸ©é˜µï¼Œä½¿ç”¨äº†ç‰¹æ®Šçš„å¯„å­˜å™¨*è½¯ä»¶å®žçŽ°ï¼šNFU æœ€ä¸å¸¸ç”¨ç®—æ³•ï¼šLFU/NFUæ˜¯å¯¹LRUçš„è½¯ä»¶å®žçŽ°ã€‚ å°†æ¯ä¸ªé¡µé¢ä¸Žä¸€ä¸ªè®¡æ•°å™¨å…³è”ï¼Œå–è®¡æ•°å€¼æœ€å°çš„é¡µé¢æ›¿æ¢ LFUçš„ç¼ºç‚¹æ˜¯ä»–ä»Žæ¥ä¸ä¼šå¿˜è®°ã€‚ä»¥å‰é¢‘ç¹ä½¿ç”¨çš„é¡µé¢å¾ˆå¤§å¯èƒ½ä¸ä¼šè¢«è°ƒå‡ºåŽ»ã€‚ï¼šé€šè¿‡è®¡æ•°å™¨å®šæ—¶å³ç§»æ¥æ”¹æ­£-&gt;è€åŒ–ç®—æ³•LRUå…³æ³¨çš„æ˜¯å¤šä¹…æœªè®¿é—®è€ŒLFUå…³æ³¨çš„æ˜¯è®¿é—®æ¬¡æ•°ï¼Œæ˜¯ä¸ä¸€æ ·çš„ã€‚ æ—¶é’Ÿç®—æ³•çŽ¯çŠ¶ç»“æž„ï¼Œå½“ä¸€ä¸ªç¼ºé¡µä¸­æ–­åˆ°æ¥çš„æ—¶å€™ï¼Œé¦–å…ˆæ£€æŸ¥æŒ‡é’ˆæ‰€åœ¨ä½ç½®é¡µé¢çš„è®¿é—®ä½ï¼Œå¦‚æžœæ˜¯0å°±æ·˜æ±°è¿™ä¸ªé¡µé¢ï¼Œå¦åˆ™ç½®ä¸º0ï¼Œè½¬åœˆï¼Œè½¬åˆ°çš„ï¼Œå¦‚æžœæ˜¯0å°±æ·˜æ±°ï¼Œå¦‚æžœæ˜¯1å°±å˜æˆ0ï¼ŒçŸ¥é“æ‰¾åˆ°ç¬¬ä¸€ä¸ª0ã€‚ æ˜¯LRUä¸ŽFIFOçš„æŠ˜ä¸­ã€‚ æ”¹è¿›çš„æ—¶é’Ÿç®—æ³•åœ¨é¡µé¢æ·»åŠ ä¿®æ”¹ä½ï¼Œå¹¶åœ¨è®¿é—®æ—¶è¿›è¡Œç›¸åº”ä¿®æ”¹ï¼šæ–°æ”¹çš„ï¼šRWã€‚æ¯æ¬¡æ‰«è¿‡éƒ½å°†ï¼šå¦‚æžœRæ˜¯1ï¼ŒæŠŠRç½®ä¸º0ï¼›å¦‚æžœRæ˜¯0ï¼Œå¦‚æžœWæ˜¯1ï¼Œå†™è¿™é¡µï¼Œå†™å®Œä¹‹åŽW=0ï¼ŒæŽ¥ç€æ‰¾ï¼Œå¦‚æžœR=0W=0ï¼Œå°±æ˜¯è¿™ä¸ªäº†ã€‚ ç¼ºé¡µæ—¶ä¿®æ”¹é¡µé¢æ ‡å¿—ä½ï¼Œä»¥è·³è¿‡æœ‰ä¿®æ”¹çš„é¡µé¢ã€‚ ä¸Šè¿°çš„éƒ½æ˜¯å±€éƒ¨é¡µé¢ç½®æ¢ç®—æ³•ã€‚å±€éƒ¨é¡µé¢ç½®æ¢ç®—æ³•é€‰æ‹©èŒƒå›´ä»…ä»…é™äºŽå½“å‰è¿›ç¨‹å ç”¨çš„ç©ºé—´ï¼Œä¸è€ƒè™‘è¿›ç¨‹è®¿å­˜å·®å¼‚ã€‚å…¨å±€é¡µé¢ç½®æ¢ç®—æ³•å¯ä»¥é€¼å‡ºå…¶ä»–è¿›ç¨‹çš„ç‰©ç†é¡µé¢ï¼šå·¥ä½œé›†ç®—æ³•ã€ç¼ºé¡µçŽ‡ç®—æ³•éœ€è¦åŠ¨æ€ç¡®å®šå¥½ç»™æ¯ä¸€ä¸ªè¿›ç¨‹çš„ç‰©ç†é¡µé¢æ•°ã€‚ CPUåˆ©ç”¨çŽ‡è¾¾åˆ°æžè‡´ä»¥åŽï¼Œå†å¢žåŠ å¹¶å‘è¿›ç¨‹æ•°iuä¼šå‡ºçŽ°å†…å­˜æŠ–åŠ¨ã€‚è¿›ç¨‹æ•°å°‘æ—¶ï¼Œæé«˜å¹¶å‘è¿›ç¨‹æ•°ï¼Œå¯æé«˜CPUåˆ©ç”¨çŽ‡å¹¶å‘è¿›ç¨‹å¯¼è‡´å†…å­˜è®¿é—®å¢žåŠ å¹¶å‘è¿›ç¨‹çš„å†…å­˜è®¿é—®ä¼šé™ä½Žäº†è®¿å­˜çš„å±€éƒ¨æ€§ç‰¹å¾å±€éƒ¨æ€§ç‰¹å¾çš„ä¸‹é™ä¼šå¯¼è‡´ç¼ºé¡µçŽ‡ä¸Šå‡å’ŒCPUåˆ©ç”¨çŽ‡ä¸‹é™ å·¥ä½œé›†ç¼ºé¡µçŽ‡ç½®æ¢ç®—æ³•ç¼ºé¡µæ¬¡æ•° / å†…å­˜è®¿é—®æ¬¡æ•° æˆ– ç¼ºé¡µå¹³å‡æ—¶é—´é—´éš”çš„å€’æ•° å½±å“ç¼ºé¡µçŽ‡ï¼š é¡µé¢ç½®æ¢ç®—æ³• åˆ†é…ç»™è¿›ç¨‹çš„ç‰©ç†é¡µæ•°ç›® é¡µé¢å¤§å° ç¨‹åºçš„ç¼–å†™æ–¹æ³• å¯ä»¥é€šè¿‡è°ƒæ•´å¸¸é©»é›†çš„å¤§å°ï¼Œä½¿æ¯ä¸€ä¸ªè¿›ç¨‹çš„ç¼ºé¡µçŽ‡ä¿æŒåœ¨ä¸€ä¸ªåˆé€‚çš„å€¼ã€‚è‹¥è¿›ç¨‹ç¼ºé¡µçŽ‡è¿‡é«˜ï¼Œåˆ™å¢žåŠ å¸¸é©»é›†ä»¥åˆ†é…æ›´å¤šçš„ç‰©ç†é¡µé¢è‹¥è¿›ç¨‹ç¼ºé¡µçŽ‡è¿‡ä½Žï¼Œåˆ™å‡å°‘å¸¸é©»é›†ä»¥å‡å°‘å®ƒçš„ç‰©ç†é¡µé¢æ•° ä¸ºæ¯ä¸€ä¸ªé¡µé¢è®¡æ•°ï¼Œè¾¾åˆ°-mçš„æ—¶å€™ï¼Œå›žæ”¶ï¼Œä½ è¦é¡µé¢å°±ç»™é¡µé¢ã€‚ æ™®é€šè®¿é—®ä¸åšä»»ä½•äº‹æƒ…ï¼Œç¼ºé¡µçš„æ—¶å€™ï¼Œç®—ä¸€ä¸‹å¤šä¹…æ²¡æœ‰ç¼ºé¡µäº†ï¼Œå¦‚æžœæ•°å€¼æ¯”è¾ƒå¤§ï¼Œçœ‹ä¸€çœ‹æ˜¯ä¸æ˜¯æœ‰çš„é¡µé¢å·²ç»æ²¡ç”¨äº†ï¼Œåœ¨è¿™æœŸé—´æ²¡æœ‰è®¿é—®çš„é¡µé¢è¢«é‡Šæ”¾ã€‚å¦‚æžœå°ä¸€äº›ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯éœ€è¦è¡¥ä¸€äº›é¡µé¢ã€‚ é¡µæ›¿æ¢è¿‡ç¨‹ æ®µæœºåˆ¶æ®µï¼šä¸€ä¸ªç¨‹åºçš„é€»è¾‘åˆ†åŒºé¡µæœºåˆ¶ç¼ºç‚¹ï¼šå¤æ‚ï¼Œæ¶ˆè€—èµ„æº åœ°å€æ˜ å°„ï¼šæ®µä¸­çš„addr +æ®µä¸­çš„åç§»å†…å­˜åˆ†é…ï¼šå…¨å±€æ®µè¡¨+æœ¬åœ°æ®µè¡¨è°ƒåº¦ï¼šéœ€è¦æ—¶åŠ è½½æ®µæ®µ+åˆ†é¡µï¼šç”¨æ®µæŠ€æœ¯ç»„ç»‡èŠ‚ç›®å†…å®¹ï¼Œç”¨åˆ†é¡µæŠ€æœ¯ç»„ç»‡ç‰©ç†å†…å­˜ æ®µåœ°å€ç©ºé—´è¿›ç¨‹çš„æ®µåœ°å€ç©ºé—´ç”±å¤šä¸ªæ®µç»„æˆ ï¼šä¸»ä»£ç æ®µ å­æ¨¡å—ä»£ç æ®µ å…¬ç”¨åº“ä»£ç æ®µ å †æ ˆæ®µ å †æ•°æ®(heap) åˆå§‹åŒ–æ•°æ®æ®µ ç¬¦å·è¡¨ç­‰ æ®µå¼å­˜å‚¨ç®¡ç†çš„ç›®çš„ï¼šæ›´ç»†ç²’åº¦å’Œçµæ´»çš„åˆ†ç¦»ä¸Žå…±äº«ä¸€èˆ¬ç”¨äºŽæƒé™æŽ§åˆ¶ æ®µä¸€èˆ¬æ˜¯ä¸€ç§æ®µæ˜¯è¿žç»­çš„ã€‚æœ‰èµ·å§‹åœ°å€ä»¥åŠæ®µå†…åç§»é‡ã€‚ æ®µï¼šè¡¨ç¤ºè®¿é—®æ–¹å¼å’Œå­˜å‚¨æ•°æ®ç­‰å±žæ€§ç›¸åŒçš„ä¸€æ®µåœ°å€ç©ºé—´ æ®µé¡µç»“åˆ å†…å­˜å…±äº«ï¼šé€šè¿‡æŒ‡å‘ç›¸åŒçš„é¡µè¡¨åŸºå€ï¼Œå®žçŽ°è¿›ç¨‹ä¹‹é—´çš„æ®µå…±äº«ã€‚ link of segments]]></content>
      <categories>
        <category>OS</category>
        <category>è¯¾</category>
      </categories>
      <tags>
        <tag>OS</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[chap2-è¿›ç¨‹ä¸Žçº¿ç¨‹]]></title>
    <url>%2F2017%2F11%2F06%2FOS%2Fchap2-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[å¯¼è¿›ç¨‹æ¨¡åž‹çš„è¿›åŒ–ï¼š ç¬¬ä¸€ä»£ï¼šrelay , vacuum tubes and plugboardsã€‚æ²¡æœ‰ç¨‹åºä¸Žè¿›ç¨‹çš„æ¦‚å¿µ ç¬¬äºŒä»£ï¼šæ‰¹å¤„ç†ç³»ç»Ÿï¼šä¸€ä¸ªç¨‹åºå®Œæˆæ‰€æœ‰å·¥ä½œã€‚ å¸¦ä¸‰ä»£ï¼šmutiprogramming and timesharingã€‚CPUå¯ä»¥åˆ‡æ¢è¿è¡Œã€‚ ç¬¬å››ä»£ï¼šçŽ°ä»£OSï¼šè¿›ç¨‹æ¨¡åž‹æ›´åŠ æˆç†Ÿï¼Œè¿›ç¨‹è°ƒåº¦ä¸Žç›¸äº’äº¤æµæ›´åŠ æˆç†Ÿï¼Œå†…å­˜ä¿æŠ¤ä¸Žç®¡ç†æ›´åŠ æˆç†Ÿã€‚ è¿›ç¨‹ï¼šè®¡ç®—æœºä¸Šæ‰€æœ‰å¯ä»¥è¿è¡Œçš„è½¯ä»¶ï¼Œé€šå¸¸ä¹ŸåŒ…æ‹¬æ“ä½œç³»ç»Ÿï¼Œè¢«ç»„ç»‡æˆè‹¥å¹²é¡ºåºè¿›ç¨‹ï¼Œç®€ç§°è¿›ç¨‹ã€‚å®ƒåŒ…æ‹¬è¾“å…¥è¾“å‡ºç¨‹åºä¸ŽçŠ¶æ€ã€‚ éœ€è¦åŒºåˆ†è¿›ç¨‹ä¸Žç¨‹åºã€‚ è¿›ç¨‹åˆ›å»ºï¼šç³»ç»Ÿåˆå§‹åŒ–ã€è¿è¡Œè¿›ç¨‹çš„åˆ›å»ºè¿›ç¨‹ç³»ç»Ÿè°ƒç”¨è¢«æ‰§è¡Œã€ç”¨æˆ·è¯·æ±‚ã€æ‰¹å¤„ç†ä½œä¸šåˆå§‹åŒ–ã€‚ è¿›ç¨‹ç»ˆæ­¢ï¼šæ­£å¸¸é€€å‡ºã€å‡ºé”™é€€å‡ºï¼ˆè‡ªæ„¿ï¼‰ã€ä¸¥é‡é”™è¯¯ã€è¢«æ€æ­»ï¼ˆéžè‡ªæ„¿ï¼‰ åœ¨unixä¸­ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰è‡ªå·±çš„çˆ¶è¿›ç¨‹ï¼Œæœ‰ç€æ˜Žæ˜¾çš„å±‚æ¬¡ç»“æž„ï¼Œä½†æ˜¯åœ¨Windowsä¸­ï¼Œè™½ç„¶ä¹Ÿæœ‰â€œå¥æŸ„â€æ¥æ ‡è¯†çˆ¶è¿›ç¨‹ï¼Œæ‹¥æœ‰å¥æŸ„å³å¯æŽ§åˆ¶åŠå¯¹åº”çš„å­è¿›ç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªâ€œå¥æŸ„â€å¯ä»¥è¢«è½¬è®©ï¼Œå°±ä¸å­˜åœ¨æ˜Žæ˜¾çš„å±‚æ¬¡å…³ç³»äº†ã€‚ ä¸ºä»€ä¹ˆè¦å¹¶å‘ï¼ˆCocurrencyï¼‰ï¼Ÿwhats os? A special kind of system software that can manage computer in efficient and reasonable way. It is in charge of managing hardware resource, controlling the running of programs and providing useful services. It is a convenient platform for people to use computer è¿›ç¨‹è¿›ç¨‹æ¦‚å¿µ ä½¿ç”¨cpuçš„åŸºæœ¬æ•°æ®ç»“æž„ é€»è¾‘ç¨‹åºï¼šè¢«ç”¨æˆ·è®¾è®¡å®žçŽ°ï¼ˆenvsï¼‰ cpuæŒ‡ä»¤åºåˆ—ï¼š è¿›ç¨‹ï¼šç¨‹åºä¸ŽæŒ‡ä»¤ä¹‹é—´çš„æ•°æ®ç»“æž„ è¿›ç¨‹ï¼šè¿›ç¨‹æ˜¯æŸä¸€ä¸ªç‰¹å®šç¨‹åºçš„è¿è¡Œå®žä¾‹ï¼ŒåŒ…æ‹¬è¾“å…¥è¾“å‡ºç¨‹åºä¸ŽçŠ¶æ€ã€‚åœ¨åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼ˆtime-sharing osï¼‰ä¸­ï¼ŒCPUè¢«å¤šä¸ªè¿›ç¨‹åˆ†äº«ï¼Œå¤æ‚çš„ç®—æ³•å°†è¢«ç”¨äºŽè¿›ç¨‹ä¹‹é—´çš„è°ƒåº¦ã€‚ è¿›ç¨‹çŠ¶æ€åŸºæœ¬çŠ¶æ€ï¼š runningï¼šçœŸæ­£å ç”¨CPU readyï¼šå¯ä»¥è¿è¡Œï¼Œç­‰å¾…CPUçš„ä½¿ç”¨æƒ blockedï¼šä¸èƒ½ç»§ç»­è¿è¡Œï¼Œç­‰å¾…å¤–éƒ¨äº‹ä»¶ï¼ˆè¾“å…¥è¾“å‡ºç­‰ï¼‰ å…¶ä»–çŠ¶æ€ï¼š newï¼šè¿›ç¨‹çš„æ•°æ®ç»“æž„å·²ç»å‡†å¤‡å¥½ï¼Œä½†æ˜¯ç¨‹åºé•œåƒå°šæœªå®Œæˆè£…è½½ï¼ˆenv_createåˆ°icode_loadä¹‹å‰ï¼Œæ­¤æ—¶è¿˜ä¸å¯ä»¥è°ƒç”¨env_runï¼‰ exitï¼šç¨‹åºå·²ç»å®Œæˆäº†æ‰€æœ‰å·¥ä½œï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å›žæ”¶è¿›ç¨‹çš„æ•°æ®ç»“æž„ï¼ˆexit gracefullyä¹‹åŽï¼Œfreeä¹‹å‰ï¼‰ suspendï¼šè¿è¡Œé•œåƒå·²ç»è¢«æ¢åˆ°ç¡¬ç›˜é‡Œé¢äº† ä¸ºä»€ä¹ˆblockä¸èƒ½ç›´æŽ¥è¿‡æ¸¡åˆ°runningï¼šä½ éƒ½é˜»å¡žäº†ï¼Œæƒ³å›žæ¥å•Šï¼Ÿç­‰å§ã€‚ä¸ºä»€ä¹ˆreadyä¸èƒ½ç›´æŽ¥blockï¼Ÿä½ éƒ½æ²¡æœ‰è¿è¡Œï¼Œæ€Žä¹ˆç›´åˆ°è‡ªå·±è¦ç­‰å¾…ä¸€ä¸ªå¤–éƒ¨äº‹ä»¶åŽ»blockï¼Ÿ é‚£ä¹ˆä¸ºä»€ä¹ˆä¼šæŒ‚èµ·å‘¢ï¼Ÿ æŒ‚èµ·æ˜¯ç”±äºŽï¼š1.ç­‰å¾…æ—¶é—´è¿‡é•¿ 2. ç‰©ç†åœ°å€ç©ºé—´ä¸è¶³ã€‚å¯¼è‡´è¯¥è¿›ç¨‹æ‰€éœ€è¿è¡Œèµ„æºè¢«åˆ‡æ¢åˆ°å¤–å­˜ã€‚ é¡µé¢ç½®æ¢æ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œéœ€è¦è¿›è¡Œä¸€ç³»åˆ—çš„ç¡¬ç›˜æ“ä½œï¼Œç¡¬ç›˜æ˜¯ä¸€ä¸ªæžå…¶æ…¢çš„è®¾å¤‡ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦æœ‰æŒ‚èµ·çŠ¶æ€ï¼Ÿï¼ˆåºŸè¯å¦‚æžœå†…å­˜ä¹Ÿèƒ½æœ‰120Gé‚£ä¹ˆå¤šç©ºé—´è°ä¼šç»™ä»–æ¢åˆ°ç¡¬ç›˜å•Šï¼‰ æé«˜å¤„ç†æœºæ•ˆçŽ‡ï¼šå°±ç»ªè¿›ç¨‹è¡¨ç¤ºç©ºçš„æ—¶å€™ï¼Œæäº¤æ–°è¿›ç¨‹ï¼Œä»¥æé«˜å¤„ç†æœºæ•ˆçŽ‡ï¼ˆå“ˆï¼Ÿï¼‰ ä¸ºè¿è¡Œè¿›ç¨‹æä¾›è¶³å¤Ÿå¤šçš„å†…å­˜ ä¾¿äºŽè°ƒè¯•ï¼šåœ¨è°ƒè¯•æ—¶ï¼ŒæŒ‚èµ·è¢«è°ƒè¯•è¿›ç¨‹å¯¹å…¶åœ°å€ç©ºé—´è¿›è¡Œè¯»å†™ã€‚ ä»€ä¹ˆæ—¶å€™ä¼šæŒ‚èµ·å‘¢ï¼Ÿåœ¨è¿›ç¨‹ç­‰å¾…å¤–éƒ¨äº‹ä»¶ï¼ˆé˜»å¡žï¼‰çš„æ—¶å€™ï¼Œæœ‰å¯èƒ½è¢«æŒ‚èµ·ã€‚ é™¤æ­¤ä¹‹å¤–çš„åŒæŒ‚èµ·æ¨¡åž‹ï¼š ç­‰å¾…-&gt;ç­‰å¾…æŒ‚èµ·ï¼šæ²¡æœ‰è¿›ç¨‹å¤„äºŽå°±ç»ªçŠ¶æ€æˆ–è€…æ˜¯å°±ç»ªè¿›ç¨‹éœ€è¦æ›´å¤šçš„å†…å­˜èµ„æºã€‚(???)å°±ç»ª-&gt;å°±ç»ªæŒ‚èµ·ï¼šæœ‰é«˜ä¼˜å…ˆçº§çš„ç­‰å¾…è¿›ç¨‹å’Œä½Žä¼˜å…ˆçº§çš„å°±ç»ªè¿›ç¨‹ï¼ˆè¿™æ˜¯å°±ç»ªè¿›ç¨‹è¢«æ¢åˆ°å¤–å­˜ï¼‰è¿è¡Œ-&gt;å°±ç»ªæŒ‚èµ·ï¼šå¯¹äºŽæŠ¢å…ˆå¼åˆ†æ—¶ç³»ç»Ÿï¼Œæœ‰é«˜ä¼˜å…ˆçº§çš„ç­‰å¾…æŒ‚èµ·è¿›ç¨‹å› äº‹ä»¶å‡ºçŽ°è€Œè¿›å…¥å°±ç»ªæŒ‚èµ·ã€‚ç­‰å¾…æŒ‚èµ·-&gt;å°±ç»ªæŒ‚èµ·ï¼šç­‰å¾…çš„äº‹ä»¶åˆ°äº†å°±ç»ªæŒ‚èµ·-&gt;å°±ç»ªï¼šæ²¡æœ‰å°±ç»ªè¿›ç¨‹æˆ–è€…æ˜¯å°±ç»ªæŒ‚èµ·è¿›ç¨‹çš„ä¼˜å…ˆçº§æ¯”æ‰€æœ‰å°±ç»ªè¿›ç¨‹çš„ä¼˜å…ˆçº§éƒ½é«˜ç­‰å¾…æŒ‚èµ·-&gt;ç­‰å¾…ï¼šæœ‰ä¸€ä¸ªè¿›ç¨‹é‡Šæ”¾äº†å†…å­˜ï¼Œä¸€ä¸ªç­‰å¾…æŒ‚èµ·è¿›ç¨‹çš„ä¼˜å…ˆçº§å¾ˆé«˜ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œwinxpç”¨çš„å°±æ˜¯ä¸Šé¢çš„åŒæŒ‚èµ·æ¨¡åž‹ã€‚ å¯¹æŒ‚èµ·çš„è¯¦ç»†åˆ†æž ä¸ºä»€ä¹ˆè¦åŒæŒ‚èµ·å‘¢ï¼ŒosçœŸçš„é‚£ä¹ˆç¼ºå†…å­˜å—ï¼Ÿfrom:gcssloop/note linuxä¸‹ä½¿ç”¨çš„è¿›ç¨‹æ¨¡åž‹æ˜¯ï¼š TASK_RUNNING TASK_INTERRUPTIBLEï¼šè¿›ç¨‹è¢«æŒ‚èµ·ï¼Œç›´åˆ°æŸäº›æ¡ä»¶å˜æˆçœŸã€‚ï¼ˆäº§ç”Ÿä¸€ä¸ªä¸­æ–­ï¼Œåœ¨ä¸­æ–­ä¸­é‡Šæ”¾ä¸€äº›è¯¥è¿›ç¨‹ç­‰å¾…çš„ç³»ç»Ÿèµ„æºï¼Œä¼ é€’å”¤é†’è¯¥è¿›ç¨‹çš„ä¿¡å·ï¼‰$$\color{red}{shenmeçŽ©æ„}$$ TASK_UNINTERRUPTIBLEï¼šé™¤äº†ä¿¡å·ä¸èƒ½ä½¿å®ƒçš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ä¹‹å¤–ä¸Žå‰ä¸€ä¸ªç›¸åŒ TASK_STOPED TASK_TRACEDï¼šè¿›ç¨‹è¿è¡Œè¢«debuggeræ‰“æ–­ EXIT_ZOMBIEï¼šç¨‹åºè¿è¡Œå·²ç»ç»“æŸäº†ï¼Œä½†æ˜¯ä»–çš„çˆ¶è¿›ç¨‹è¿˜æ²¡æœ‰è°ƒç”¨ä¸€ä¸ªwait4()æˆ–æ˜¯waitpid()ç³»ç»Ÿè°ƒç”¨æ¥è¿”å›žæ­»æŽ‰è¿›ç¨‹çš„ä¿¡æ¯ã€‚ EXIT_DEAD $$\color{red}{so whyâ€¦ killä¹‹åŽä¸ºä»€ä¹ˆä¸æ­»}$$ ä¸åŒçš„osï¼Œå…¶çŠ¶æ€è®¾ç½®çš„å·®å¼‚å¾ˆå¤§ã€‚ è¿›ç¨‹æ•°æ®ç»“æž„PCBï¼šè¿›ç¨‹æŽ§åˆ¶å—ï¼šè¿™å°±æ˜¯åœ¨josé‡Œé¢çš„envsé‚£ä¸ªå¤§æ•°ç»„äº†ï¼Œå®ƒç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç»´æŠ¤ï¼Œä¹Ÿå«è¿›ç¨‹æè¿°ç¬¦ã€‚ï¼ˆç»è¿‡äº†josçš„æ´—ç¤¼ï¼Œå…¶å®žä¸ç”¨è¯´å¤ªå¤šï¼‰ æ‰€æœ‰pcbéƒ½åœ¨ä¸€ä¸ªç‰¹å®šçš„å†…å­˜ç©ºé—´ä¹‹ä¸­ã€‚pcbè¡¨çš„sizeå†³å®šäº†osçš„å¹¶å‘åº¦ã€‚ä¸åŒçŠ¶æ€çš„è¿›ç¨‹æ•°æ®è¢«å­˜åœ¨ä¸åŒçš„pcbè¡¨ä¸­ã€‚ åœ¨ä¸€ä¸ªæ­£ç»ç³»ç»Ÿä¸­çš„pcbæ¯”envä¸­çš„é¡¹æ›´å¤šï¼Œåˆ—ä¸ºï¼š ä¸ºäº†å°†ä¸åŒè¿è¡ŒçŠ¶æ€çš„pcbåŒºåˆ†å¼€ï¼Œå¯ä»¥æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ï¼šå¦ä¸€ç§æ˜¯ï¼š å…¶ä¸­ç¬¬ä¸€ç§æ˜¯åœ¨josä¸­ä½¿ç”¨çš„æ–¹å¼ã€‚ è¿›ç¨‹åˆ‡æ¢è¿›ç¨‹åˆ‡æ¢å°±æ˜¯æˆ‘ä»¬çš„schedå‡½æ•°äº†ã€‚åˆ‡æ¢ä¹‹å‰ï¼Œéœ€è¦ä¿å­˜åœ¨cpuè¿è¡Œç¨‹åºçš„å±±ä¸‹æ–‡ï¼ˆtfå†…å®¹ã€pgdirç­‰ï¼‰ï¼Œåˆ‡æ¢ä¹‹åŽï¼ŒæŠŠæ–°ä¸Šæ¥çš„è¿›ç¨‹çš„ä¸Šä¸‹æ–‡æ¢å¤ã€‚ æ¯”å¦‚è¯´sleepçš„å®žçŽ°ï¼šä¸€ä¸ªè¿›ç¨‹è¿è¡Œåˆ°äº†sleepï¼ŒosåŽ»å¤„ç†è¿™ä¸ªsleepï¼Œæ­¤æ—¶cpuçš„æŽŒç®¡æƒåœ¨kernelæ‰‹é‡Œï¼ŒéšåŽè®¾ç½®ä¸€ä¸ªç¡¬ä»¶çš„æ—¶é’Ÿä¸­æ–­ï¼Œç„¶åŽä¿æŠ¤çŽ°åœºï¼Œæœ€åŽoså°±scheduleï¼ŒæŠŠè¿è¡Œæƒäº¤ç»™äº†å¦ä¸€ä¸ªè¿›ç¨‹ï¼Œå¦ä¸€ä¸ªè¿›ç¨‹è¿è¡Œäº†ä¸€æ®µæ—¶é—´ä¹‹åŽç¡¬ä»¶çš„æ—¶é’Ÿä¸­æ–­raiseï¼Œæ‰“æ–­äº†å¦ä¸€ä¸ªè¿›ç¨‹çš„è¿è¡Œï¼ŒäºŽæ˜¯oså¤„ç†è¿™ä¸ªæ—¶é’Ÿä¸­æ–­ä¿æŠ¤çŽ°åœºï¼Œå‰¥å¤ºäº†å¦ä¸€ä¸ªè¿›ç¨‹çš„è¿è¡Œæƒï¼Œå†ä¸€æ¬¡scheduleï¼Œè¿›ç¨‹1å¼€å§‹è¿è¡Œã€‚ è¿è¡Œé•œåƒï¼ˆprocess imageï¼‰è¿è¡Œé•œåƒå°±æ˜¯â˜žè¿›ç¨‹çš„æ•´ä¸ªç”Ÿå­˜å‘¨æœŸçš„æè¿°ã€‚ process imageçš„å†…å®¹ï¼š ç”¨æˆ·å±‚é¢ï¼šè¯¥è¿›ç¨‹çš„ç”¨æˆ·åœ°å€ç©ºé—´ï¼Œæ¯”å¦‚è¯´ç¨‹åºã€å †æ ˆã€æ•°æ®æ®µ å¯„å­˜å™¨å±‚é¢ï¼špcã€pcwã€irï¼Œæ ˆæŒ‡é’ˆå…¶ä»–å¯„å­˜å™¨ ç³»ç»Ÿå±‚é¢ï¼špcbç­‰ã€åŠ¨æ€å†…æ ¸æŒ‡é’ˆ ï¼ˆemmä¸ªäººè§‰å¾—ï¼Œå…¶å®žå°±æ˜¯pcbé‡Œé¢ä¿å­˜çš„é‚£äº›ä¸œè¥¿ï¼Œä»¥åŠé‚£äº›æŒ‡é’ˆæŒ‡å‘çš„é‚£äº›ç©ºé—´ï¼‰ è¿›ç¨‹è°ƒåº¦ç®—æ³•p82 ç®€è¿°ï¼š Qï¼šä»€ä¹ˆæ—¶å€™è°ƒåº¦ï¼Ÿ è¿›ç¨‹è¢«åˆ›å»ºã€è¿›ç¨‹é€€å‡º è¿›ç¨‹é˜»å¡ž å‡ºçŽ°ioä¸­æ–­ Qï¼šä¸ºä»€ä¹ˆè¦è°ƒåº¦ï¼Ÿ åšæ›´å¥½çš„é€‰æ‹©ï¼šä¼˜å…ˆçº§ã€è¿è¡Œæ—¶é•¿ ä¿è¯CPUçš„æ•ˆçŽ‡ Qï¼šæ€Žä¹ˆåšè°ƒåº¦ï¼Ÿ ä½¿ç”¨ç‰¹å®šçš„æ–¹å¼é€‰æ‹©ä¸€ä¸ªè¿›ç¨‹å ç”¨CPU åœ¨åˆ‡æ¢çš„æ—¶å€™åˆ‡æ¢ä¸Šä¸‹æ–‡ Aï¼šæ³¨æ„ï¼š è°ƒåº¦çš„é¢‘çŽ‡æ˜¯éžå¸¸é‡è¦çš„ æœ‰æŠ¢å å¼è°ƒåº¦ä¸ŽéžæŠ¢å å¼è°ƒåº¦ CPU-boundï¼ˆè®¡ç®—å¯†é›†åž‹ï¼‰ä¸Ži/o-boundï¼ˆioå¯†é›†åž‹ï¼‰è¿›ç¨‹ CPUèµ„æºçš„æ—¶åˆ†å¤ç”¨ ï¼š è¿›ç¨‹åˆ‡æ¢ï¼šCPUèµ„æºå ç”¨è€…åˆ‡æ¢ å¤„ç†æœºè°ƒåº¦ï¼šä»Žå°±ç»ªé˜Ÿåˆ—ä¸­æŒ‘é€‰è¿›ç¨‹ã€ä»ŽCPUä¸­æŒ‘é€‰å¯ä½¿ç”¨çš„CPU è°ƒåº¦ç¨‹åºï¼šè°ƒåº¦ç­–ç•¥ã€è°ƒåº¦æ—¶æœº when and whyä¸Šè¿°çš„è°ƒåº¦æ—¶é—´æ˜¯ä¸€ä¸ªç¬¼ç»Ÿçš„è¯´æ³•ï¼š å†…æ ¸è¿è¡Œè°ƒåº¦ç¨‹åºçš„æ¡ä»¶ è¿›ç¨‹é€€å‡º è¿›ç¨‹ä»Žè¿è¡Œæ€åˆ‡æ¢åˆ°ç­‰å¾… éžæŠ¢å ç³»ç»Ÿä¸­ å½“å‰è¿›ç¨‹ä¸»åŠ¨æ”¾å¼ƒCPU å¯æŠ¢å ç³»ç»Ÿ å½“å‰è¿›ç¨‹æ—¶é—´ç‰‡ç”¨å®Œ ä¸­æ–­è¯·æ±‚è¢«æœåŠ¡ä¾‹ç¨‹å“åº”å®Œæˆæ—¶ å…¶å®žåœ¨å†™å®Œjosçš„schedå‡½æ•°ä¹‹åŽï¼Œå¯¹ä½•æ—¶è°ƒåº¦åº”è¯¥æœ‰ä¸€ä¸ªè®¤è¯†ï¼šæ— è®ºæ˜¯ä½•æ—¶è°ƒåº¦ï¼Œéƒ½æ˜¯osç¼–å†™äººå‘˜å†³å®šçš„ï¼ˆæˆ–æ˜¯ç”¨æˆ·ç¨‹åºä¸»åŠ¨æ”¾å¼ƒï¼‰ã€‚osä¸ºäº†é¿å…ç”¨æˆ·ç¨‹åºä¸è‡ªè§‰ï¼Œæä¾›äº†æ—¶é—´ä¸­æ–­ï¼ˆtimer interruptï¼‰ï¼Œåœ¨æ¯ä¸€ä¸ªæ—¶é—´ç»ˆç«¯çš„å¤„ç†ä¸­æŒ‡å®šscheduleã€‚å†æ¯”å¦‚ä¸Šé¢æåˆ°çš„ioä¸­æ–­ï¼Œè¿™éƒ¨åˆ†ä¹Ÿæ˜¯oså†³å®šçš„schedï¼Œå› ä¸ºtrap(jos)æ˜¯å±žäºŽkerneléƒ¨åˆ†ã€‚ è°ƒåº¦çš„ç›®æ ‡ï¼šä¸åŒçš„ç³»ç»Ÿä¸­ç›®æ ‡æ˜¯ä¸åŒçš„ åœ¨æ‰€æœ‰ç³»ç»Ÿä¸­ï¼š å…¬å¹³æ€§ï¼šç»™æ¯ä¸€ä¸ªè¿›ç¨‹ä¸€ä¸ªå…¬å¹³ä½¿ç”¨CPUçš„æœºä¼š ç­–ç•¥å¼ºåˆ¶æ‰§è¡Œ:seeing thatstated policy is carried out å¹³è¡¡ï¼šä¿æŒæ•´ä¸ªç³»ç»Ÿéƒ½æ˜¯æœ‰äº‹å¯å¹² æ‰¹å¤„ç†ç³»ç»Ÿï¼š åžåé‡ï¼šä½¿å•ä½æ—¶é—´çš„å·¥ä½œé‡è¾¾åˆ°æœ€å¤§ å‘¨è½¬æ—¶é—´ï¼ˆturnaround timeï¼‰ï¼šåœ¨ä»»åŠ¡æäº¤ä¸Žä»»åŠ¡å®Œæˆä¹‹é—´æ—¶é—´å°½å¯èƒ½å° CPUåˆ©ç”¨çŽ‡ï¼šè®©CPUä¸€ç›´æœ‰äº‹å¯å¹² äº¤äº’ç³»ç»Ÿï¼š å“åº”æ—¶é—´ Proportionalityï¼šè¾¾åˆ°ç”¨æˆ·æœŸæœ›å€¼ å®žæ—¶ç³»ç»Ÿï¼š meet deadlineï¼šåˆ«ä¸¢æ•°æ® å¯é¢„æµ‹ï¼šåœ¨å¤šåª’ä½“ç³»ç»Ÿä¸­åˆ«æœ‰è´¨é‡ä¸Šçš„é™ä½Ž goalé‚£ä¹ˆç»™å®šä¸€ä¸ªè°ƒåº¦ç®—æ³•ï¼Œæ€Žä¹ˆæ¯”è¾ƒä»–ä»¬ä¹‹é—´çš„ä¼˜åŠ£å‘¢ï¼Ÿ CPUä½¿ç”¨çŽ‡ åžåé‡ï¼šå•ä½æ—¶é—´å†…å®Œæˆè¿›ç¨‹çš„æ•°é‡ å‘¨è½¬æ—¶é—´ï¼šè¿›ç¨‹ä»Žåˆå§‹åŒ–åˆ°ç»“æŸç»å¯¹æ—¶é—´ ç­‰å¾…æ—¶é—´ï¼šè¿›ç¨‹åœ¨å°±ç»ªä¸­çš„æ—¶é—´ï¼ˆä¸ç®—ç­‰å¾…çŠ¶æ€çš„æ—¶é—´ï¼Œå› ä¸ºè¿™ä¸ªæ—¶é—´å…¶å®žæ˜¯å¿…é¡»èŠ±è´¹çš„ï¼‰ å“åº”æ—¶é—´ï¼šä»Žæäº¤è¯·æ±‚åˆ°è¯·æ±‚å“åº”æ—¶é—´ åžåé‡ä¸Žå“åº”æ—¶é—´ä¹‹é—´çš„åŒºåˆ« åžåé‡æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®žå°±æ˜¯å¸Œæœ›é€šè¿‡åˆç†çš„è°ƒåº¦ä½¿è§„å®šæ—¶é—´å†…å®Œæˆæ›´å¤šçš„è¿›ç¨‹ï¼Œæ¯”å¦‚è¯´æ–‡ä»¶ä¼ è¾“çš„æ—¶å€™å¸Œæœ›é«˜å¸¦å®½ï¼ˆ10M/sä¸Ž10k/sä½ æƒ³è¦å“ªä¸ªï¼Ÿï¼‰ã€‚å“åº”æ—¶é—´æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå°±æ˜¯å¸Œæœ›è¿›ç¨‹å¯¹æŸä¸€ä¸ªåŠ¨ä½œå°½å¯èƒ½å¿«çš„ä½œå‡ºååº”ï¼Œæ¯”å¦‚ç‚¹å‡»æŒ‰é’®æœç´¢ä¹‹åŽå¤šä¹…æ‰å“åº”ã€‚ åžåé‡ä¸Žå“åº”æ—¶é—´å…¶å®žæ˜¯å¾ˆä¸åŒçš„ä¸¤ä¸ªæ¦‚å¿µï¼Œä¸¤è€…æˆ‘è®¤ä¸ºåœ¨æŸç§æƒ…å†µä¸‹æ˜¯æ­¤æ¶ˆå½¼é•¿çš„ã€‚åžåé‡æè¿°çš„æ˜¯æ•´ä½“ï¼Œå“åº”æ—¶é—´æè¿°çš„ç‰¹å®šã€‚ å“åº”æ—¶é—´ç›®æ ‡ï¼š å‡å°‘å“åº”æ—¶é—´ å‡å°‘å¹³å‡å“åº”æ—¶é—´çš„æ³¢åŠ¨åœ¨äº¤äº’æ˜¯ç³»ç»Ÿä¸­ï¼Œå‡å°‘å¹³å‡å“åº”æ—¶é—´æ³¢åŠ¨å…¶å®žæ›´åŠ é‡è¦ã€‚ å“åº”æ—¶é—´æ˜¯osçš„è®¡ç®—å»¶æ—¶ã€‚ åžåé‡ç›®æ ‡ï¼š å¢žåŠ åžåé‡ï¼šå‡å°‘oså¼€é”€ï¼ˆå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰ã€ç³»ç»Ÿèµ„æºçš„é«˜æ•ˆåˆ©ç”¨ï¼ˆCPUã€ioï¼‰ å‡å°‘ç­‰å¾…æ—¶é—´ï¼šå‡å°‘æ¯ä¸ªè¿›ç¨‹åœ¨å°±ç»ªå‘†çš„æ—¶é—´oséœ€è¦ä¿è¯åžåé‡çš„æé«˜ä¸ä¼šå½±å“äº¤äº’ä½“éªŒï¼ˆoså¿…é¡»ä¸æ—¶åœ°è¿›è¡Œè°ƒåº¦ï¼Œå³ä½¿å­˜åœ¨è®¸å¤šäº¤äº’å¼ä»»åŠ¡ï¼‰ åžåé‡æ˜¯osçš„è®¡ç®—å¸¦å®½ æ‰¹å¤„ç†ç³»ç»Ÿä¸­çš„è°ƒåº¦ç®—æ³•åžåé‡ã€å‘¨è½¬æ—¶é—´ã€CPUåˆ©ç”¨çŽ‡ å…ˆæ¥å…ˆæœåŠ¡ï¼šéžæŠ¢å å¼ ç¬¨è›‹ç®—æ³•ã€ç®€å•ï¼ŒæŸäº›æƒ…å†µä¸‹ä¹Ÿåˆç†ã€ioå¯†é›†åž‹ç³»ç»Ÿä¸­å¯¹CPUåˆ©ç”¨çŽ‡ä½Žåˆ°ä»¤äººå‘æŒ‡ æœ€çŸ­ä»»åŠ¡ä¼˜å…ˆï¼šéžæŠ¢å å¼ å‘¨è½¬æ—¶é—´çŸ­ã€åœ¨çŽ°å®žçš„osä¸­å¹¶ä¸ä¼šæ˜¯æœ€ä¼˜çš„ æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆï¼šæŠ¢å å¼ å°†æ–°ä»»åŠ¡çš„æ—¶é—´ä¸Žå½“å‰ä»»åŠ¡çš„å‰©ä½™è¿è¡Œæ—¶é—´åšå¯¹æ¯”ï¼Œå¦‚æžœæ–°ä»»åŠ¡æ—¶é—´çŸ­å°±è®©æ–°ä»»åŠ¡å æ®CPUã€ä¸çŽ°å®žå•Š ä¸‰å±‚è°ƒåº¦ admission scheduler memory scheduler CPU scheduler å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFSï¼‰å°±æ˜¯å…ˆæ¥å…ˆè¿è¡Œï¼Œä¹Ÿæ²¡æœ‰æŠ¢å ï¼Œè¿è¡Œåˆ°ç»“æŸå°±è¡Œäº†ã€‚ ä¼˜ç‚¹æ˜¯éžå¸¸ç®€å•ï¼Œä½†æ˜¯ç¼ºç‚¹æ›´åŠ æ˜Žæ˜¾ã€‚ å¹³å‡ç­‰å¾…æ—¶é—´æ³¢åŠ¨å¾ˆå¤§ï¼ŒçŸ­è¿›ç¨‹å¯èƒ½ä¼šåœ¨é•¿è¿›ç¨‹åŽé¢ èµ„æºåˆ©ç”¨çŽ‡ä½Žï¼ˆä¸€ç›´è¿è¡Œä¸€ä¸ªä½ è¯´åˆ©ç”¨çŽ‡èƒ½é«˜å—ï¼‰ï¼ŒCPUå¯†é›†åž‹å¯¼è‡´ioé—²ç½®ï¼Œioå¯†é›†åž‹å¯¼è‡´CPUé—²ç½®ã€‚ è¯´åˆ°è¿™é‡Œå°±æƒ³èµ·æ¥ä¸€ä¸ªé¢˜å¤–è¯ã€‚ä¸Šç¼–è¯‘è¯¾çš„æ—¶å€™ç¼–è¯‘è€å¸ˆè¯´ä»–ä¸Šå­¦é‚£ä¼šå„¿ç”¨çš„ç¼–è¯‘å™¨æ˜¯éžå¸¸è€çš„ç¼–è¯‘å™¨ï¼Œæ€§èƒ½ä¹Ÿä¸å¥½ã€‚ä¸€èˆ¬éƒ½æ˜¯æ™šä¸Šç¦»å¼€å®žéªŒå®¤çš„æ—¶å€™æŠŠå†™çš„ä¸œè¥¿è¿è¡Œä¸Šï¼Œç¬¬äºŒå¤©å›žæ¥å®žéªŒå®¤çš„æ—¶å€™èƒ½å‡ºç»“æžœéƒ½å·²ç»å¾ˆä¸é”™äº†ã€‚osè¯¾çš„æ—¶å€™è€å¸ˆè¯´ï¼Œå‡å¦‚ä½ ä¹°äº†ä¸€ä¸ªæœåŠ¡è¦åŽ»è¿è¡Œè‡ªå·±çš„ç¨‹åºï¼Œæœ¬æ¥ä½ å°±æ˜¯ä¸€ä¸ªhello worldï¼Œå‰é¢é‚£ä¸ªäººçš„ç¨‹åºå¯èƒ½ç‰¹åˆ«åºžå¤§éœ€è¦ä¸€å¤©æ¥è¿è¡Œï¼Œä½ å€’éœ‰å‚¬çš„æ­£å¥½æŽ’åœ¨é‚£äººåŽé¢ï¼Œä½ å¯èƒ½å‡ ç§’å°±å®Œäº‹äº†ï¼Œä½†æ˜¯é‚£ä¸ªæœåŠ¡å™¨å¥½å·§ä¸å·§ç”¨çš„FCFSï¼Œé‚£ä½ å¯å°±ç­‰å§ã€‚ æœ€çŸ­æ—¶é—´ä¼˜å…ˆç®—æ³•ï¼ˆSPNï¼‰æ¯æ¬¡é€‰æ‹©å°±ç»ªé˜Ÿåˆ—ä¸­çš„è¿è¡Œæ—¶é—´æœ€çŸ­çš„è¿›ç¨‹æ¥æ‰§è¡Œï¼Œå°±ç»ªé˜Ÿåˆ—æŒ‰ç…§é¢„æœŸçš„æ‰§è¡Œæ—¶é—´æ¥æŽ’åºã€‚ éžå¸¸å®¹æ˜“å°±å¯ä»¥æƒ³åˆ°çš„æ˜¯ï¼ŒSPNå¿…å®šå…·æœ‰æœ€çŸ­å¹³å‡å‘¨è½¬æ—¶é—´ã€‚ï¼ˆå¦‚æžœå­¦è¿‡è´ªå¿ƒç®—æ³•ï¼Œåº”è¯¥å¾ˆæ¸…æ¥šè¿™ä¸€ç‚¹ï¼‰ï¼ˆåžåé‡å¯ä¸ä¼šï¼ŒSPNæ˜¯éžæŠ¢å ï¼Œåªèƒ½ä¸²è¡Œè¿è¡Œçš„ï¼‰ ç¼ºç‚¹ä¹Ÿéžå¸¸æ˜Žæ˜¾ï¼Œä½ ä¸€ç›´è¿è¡Œhello worldï¼Œäººå®¶æ­£å„¿å…«ç»çš„è¦è¿è¡Œä¸€å¤©çš„å¤§ç¨‹åºä»€ä¹ˆæ—¶å€™æ‰èƒ½å¼€å§‹è¿è¡Œå•Šï¼Ÿå¯èƒ½ä¼šå¯¼è‡´é¥¥é¥¿ã€‚ è¿˜æœ‰ä¸€ä¸ªéœ€è¦è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•é¢„æµ‹ç¨‹åºè¿è¡Œï¼Œä¸å¤ªå¯èƒ½å‡†ç¡®é¢„æµ‹ä¸€ä¸ªç¨‹åºéœ€è¦çš„æ‰§è¡Œæ—¶é—´ï¼Œå°¤å…¶æ˜¯å½“ifelse whileç­‰è¯­å¥ååˆ†çš„æƒ…å†µä¸‹ï¼Œè¿™ç§è¿è¡Œæ—¶é—´ä¸€èˆ¬éƒ½éœ€è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šã€‚ä¸èƒ½é¢„æµ‹è¿™ä¸ªç®—æ³•è¿˜æœ‰ä»€ä¹ˆå¥½å®žçŽ°çš„ï¼Ÿè¿˜æœ‰ä¸€ç§æ–¹æ³•æ˜¯é—®ç”¨æˆ·ï¼Œä½ ä¸èƒ½ä¿è¯ç”¨æˆ·éƒ½æ˜¯è¯šå®žçš„ï¼Œä½†æ˜¯ä½ å¯ä»¥æœ€å¤šåˆ†é…ç”¨æˆ·æŒ‡å®šçš„æ—¶é—´ï¼Œè¶…å‡ºæ—¶é—´å°±æ€æ­»ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•çœŸçš„å¤ªä¸å‹å¥½å¤ªä¸ä¸“ä¸šäº†ï¼Œç¨‹åºè¿è¡Œä¸­çš„çŠ¶å†µå¾ˆå¤šï¼Œç”¨æˆ·ä¹Ÿä¸ä¸€å®šçŸ¥é“è¿è¡Œæ—¶é—´ã€‚ æ‰€ä»¥è¿™ç§æ–¹æ³•å…¶å®žæ˜¯ä¸å¤ªå¯è¡Œçš„ã€‚ æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆç®—æ³•ï¼ˆSRTï¼‰æ˜¯SPNçš„å¯æŠ¢å æ”¹è¿›ç‰ˆï¼Œå…è®¸å½“æ–°è¿›ç¨‹è¿›å…¥æ—¶æ–°è¿›ç¨‹å¦‚æžœè¿è¡Œæ—¶é—´å¾ˆçŸ­å¯ä»¥ä»£æ›¿è€è¿›ç¨‹è¿è¡Œã€‚ å…¶å®žè¿™æ‰æ”¹æ˜¯çœŸæ­£çš„æœ€çŸ­å¹³å‡å‘¨è½¬æ—¶é—´ã€‚ï¼ˆå³ä½¿æ˜¯å¯æŠ¢å ï¼Œä¹Ÿä¸Žåžåé‡é«˜æ— ç¼˜ï¼Œåˆä¸ä¼šåœ¨ç­‰å¾…çš„æ—¶å€™è°ƒåº¦ï¼‰ã€‚ ç¼ºç‚¹ä¹Ÿå·®ä¸å¤šä¸ŽSPNå·®ä¸å¤šã€‚ æœ€é«˜å“åº”æ¯”ä¼˜å…ˆç®—æ³•ï¼ˆHRRNï¼‰é€‰æ‹©å°±ç»ªé˜Ÿåˆ—ä¸­å“åº”æ¯”Rå€¼æœ€é«˜çš„è¿›ç¨‹ã€‚ä¸æ”¯æŒæŠ¢å ã€‚ å“åº”æ¯”ï¼šR=(ç­‰å¾…æ—¶é—´+æ‰§è¡Œæ—¶é—´)/æ‰§è¡Œæ—¶é—´ é‚£ä¹Ÿå°±æ˜¯ç­‰å¾…çš„æ—¶é—´è¶Šé•¿è¶Šå®¹æ˜“è¢«é€‰ä¸­ã€‚æ˜¯åœ¨çŸ­è¿›ç¨‹ä¼˜å…ˆç®—æ³•åŸºç¡€ä¹‹ä¸Šçš„æ”¹è¿›ï¼Œé˜²æ­¢æ— æ­¢å¢ƒåœ°ç­‰å¾…ã€‚ ä¸‰å±‚è°ƒåº¦ äº¤äº’å¼ç³»ç»Ÿä¸­çš„è°ƒåº¦ æ—¶é—´ç‰‡è½®è½¬ï¼šæŠ¢å å¼ æ—¶é—´ç‰‡è€—å°½æ—¶è§¦å‘è°ƒåº¦ã€è¿›ç¨‹ç­‰å¾…ï¼ˆé˜»å¡žï¼‰æ—¶è§¦å‘è°ƒåº¦ å¤šçº§é˜Ÿåˆ—ï¼š æœ‰å¤šç§ä¼˜å…ˆçº§classï¼Œç¾Žå“Ÿä¸­classå­˜åœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ã€æ ¹æ®ä¼˜å…ˆçº§é€‰æ‹©è¿›ç¨‹ã€é«˜ä¼˜å…ˆçº§ä½Žæ—¶é—´ç‰‡ä¿è¯å…¬å¹³ ä¼˜å…ˆçº§è°ƒåº¦ï¼šæŠ¢å å¼ æ¯ä¸ªè¿›ç¨‹æœ‰è‡ªå·±çš„ä¼˜å…ˆçº§ã€CPUé€‰æ‹©æœ€é«˜ä¼˜å…ˆçº§ã€åŠ¨æ€ä¼˜å…ˆçº§æ¥é¿å…é¥¥é¥¿ å¤„ç†æœºèµ„æºçš„ä½¿ç”¨æ¨¡å¼ï¼š è¿›ç¨‹åœ¨CPUè®¡ç®—ä¸Žioä¹‹é—´è¿›è¡Œäº¤æ›¿ï¼šæ¯æ¬¡è°ƒåº¦å†³å®šåœ¨ä¸‹ä¸€ä¸ªCPUè®¡ç®—æ—¶å°†é‚£ä¸ªå·¥ä½œäº¤ç»™CPUï¼Œåœ¨æ—¶é—´ç‰‡æœºåˆ¶ä¸‹ï¼Œè¿›ç¨‹å¯èƒ½åœ¨ç»“æŸå½“å‰CPUè®¡ç®—ä¹‹å‰æ”¾å¼ƒCPUã€‚ æ—¶é—´ç‰‡è½®è½¬ ï¼ˆRRï¼‰æ¯å½“æ—¶é—´ç‰‡ç»“æŸï¼Œå°±ä¼šå¼•å‘ä¸€ä¸ªè°ƒåº¦ï¼Œæ¯å½“è¿›ç¨‹è‡ªå·±è¦ç­‰å¾…ï¼Œå¼•å‘ä¸€ä¸ªè°ƒåº¦ã€‚æ¯å½“ä¸‹åŽ»ï¼Œè‡ªè§‰æŽ’åœ¨é˜Ÿå°¾ã€‚ æ—¶é—´ç‰‡è½®è½¬çš„é—®é¢˜æ˜¯ï¼š é¢å¤–çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ æ—¶é—´ç‰‡é€‰æ‹©é—®é¢˜ å…¶å®žå½’æ ¹ç»“åº•æ˜¯æ—¶é—´ç‰‡é€‰æ‹©é—®é¢˜ï¼Œé¢å¤–çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯ä¸€å®šå¿…é¡»çš„ã€‚å¦‚æžœæ—¶é—´ç‰‡é€‰æ‹©å¤ªå¤§ï¼Œå°±å¤±åŽ»äº†è°ƒåº¦çš„çµæ´»æ€§ï¼Œç­‰å¾…æ—¶é—´å˜é•¿ï¼Œè¿™åœ¨äº¤äº’å¼ç³»ç»Ÿä¸­å¯èƒ½æ˜¯ä¸å¯å¿å—çš„ã€‚ç”šè‡³åœ¨æžé™æƒ…å†µä¸‹ï¼Œå°±é€€åŒ–æˆäº†ä¸Šè¿°çš„FCFSã€‚å¦‚æžœæ—¶é—´ç‰‡é€‰æ‹©å¤ªçŸ­ï¼Œå°†ä¼šæµªè´¹å¤§é‡çš„æ—¶é—´åœ¨ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚æ¯”å¦‚åœ¨linuxï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢ä¸€æ¬¡å¯èƒ½éœ€è¦1msï¼Œå¦‚æžœ4msæ˜¯æ—¶é—´ç‰‡é•¿åº¦ï¼Œé‚£ä¹ˆæ•´ä¸ªç³»ç»Ÿä¸­æœ‰20%çš„æ—¶é—´éƒ½åœ¨åšä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚è¿™æ˜¯æ²¡æœ‰æ„ä¹‰çš„æµªè´¹ã€‚ç»éªŒä¸Šï¼Œä¸€èˆ¬å°†æµªè´¹æŽ§åˆ¶åœ¨1%ï¼Œå®žè·µç¯‡ä¸€èˆ¬è®¾ç½®åœ¨20-50msã€‚å½“nï¼ˆå°±ç»ªé˜Ÿåˆ—é•¿åº¦ï¼‰æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠæŸä¸€äº›å°±ç»ªçŠ¶æ€çš„è¿›ç¨‹ç»™ä¼ åˆ°å°±ç»ªæŒ‚èµ·ã€‚ å¤šçº§é˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼ˆMQï¼‰å°±ç»ªé˜Ÿåˆ—è¢«åˆ’åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„å­é˜Ÿåˆ—ï¼ˆç»ˆç«¯ã€ioã€å‰å°äº¤äº’ã€åŽå°æ‰¹å¤„ç†ï¼‰æ¯ä¸ªé˜Ÿåˆ—å¯ä»¥æœ‰è‡ªå·±çš„è°ƒåº¦ç­–ç•¥ï¼ˆå‰å°RRï¼ŒåŽå°FCFSç­‰ï¼‰é˜Ÿåˆ—ä¹‹é—´çš„è°ƒåº¦ï¼š å›ºå®šä¼˜å…ˆçº§ï¼šå¯èƒ½å¯¼è‡´é¥¥é¥¿ æ—¶é—´ç‰‡è½®è½¬ï¼šæ¯ä¸ªé˜Ÿåˆ—å¾—åˆ°ä¸€ä¸ªç¡®å®šçš„èƒ½å¶ç”¨äºŽè°ƒåº¦å…¶è¿›ç¨‹çš„CPUæ€»æ—¶é—´ï¼ˆæ¯”å¦‚å‰å°80%åŽå°20%ï¼‰ å¤šçº§åé¦ˆé˜Ÿåˆ—ç®—æ³•ï¼ˆMLFQï¼‰è¿›ç¨‹å¯ä»¥åœ¨ä¸åŒé˜Ÿåˆ—ä¹‹é—´ç§»åŠ¨çš„å¤šé˜Ÿåˆ—ç®—æ³•ã€‚æ—¶é—´ç‰‡å¤§å°å¯ä»¥éšç€ä¼˜å…ˆçº§çº§åˆ«å¢žåŠ è€Œå‡å°ï¼Œå¦‚æžœè¿›ç¨‹åœ¨å½“å‰çš„æ—¶é—´ç‰‡æ²¡æœ‰å®Œæˆï¼Œé™åˆ°ä¸‹ä¸€ä¸ªä¼˜å…ˆçº§ã€‚ å…¶ç‰¹ç‚¹æ˜¯ï¼šCPUå¯†é›†åž‹çš„è¿›ç¨‹ä¼˜å…ˆçº§ä¸‹é™å¾ˆå¿«ï¼Œè€Œioå¯†é›†åž‹è¿›ç¨‹åœç•™åœ¨é«˜ä¼˜å…ˆçº§ã€‚ ä¼˜å…ˆçº§ç®—æ³•ï¼ˆPSï¼‰æ˜¯å¤šçº§é˜Ÿåˆ—ç®—æ³•çš„æ”¹è¿›ï¼Œå¹³è¡¡å„è¿›ç¨‹å¯¹å“åº”æ—¶é—´çš„è¦æ±‚ã€‚åˆ†ä¸ºæŠ¢å å¼ä¸ŽéžæŠ¢å å¼ã€‚é€šå¸¸å¯ä»¥æŽ§åˆ¶å…¶æ—¶é—´ç‰‡é•¿åº¦ã€‚å¦‚æžœioå®Œæˆï¼Œæé«˜ä¼˜å…ˆçº§ï¼Œå¦‚æžœæ—¶é—´ç‰‡ç”¨å®Œï¼Œå°†ä½Žä¼˜å…ˆçº§ã€‚ é™æ€ä¼˜å…ˆçº§ï¼šåœ¨åˆ›å»ºè¿›ç¨‹çš„æ—¶å€™ï¼Œä»–çš„ä¼˜å…ˆçº§å°±è¢«ç¡®å®šï¼Œç›´åˆ°è¿›ç¨‹ç»ˆæ­¢ä¹‹å‰éƒ½ä¸ä¼šæ”¹å˜ã€‚ï¼ˆç³»ç»Ÿè¿›ç¨‹ä¼˜å…ˆçº§é«˜ã€ioå¯†é›†åž‹ä¼˜å…ˆçº§é«˜ï¼‰ åŠ¨æ€ä¼˜å…ˆçº§ï¼šä¼˜å…ˆçº§åœ¨åˆ›å»ºçš„æ—¶å€™è¢«èµ‹äºˆï¼Œä½†æ˜¯åœ¨è¿›ç¨‹è¿è¡Œçš„è¿‡ç¨‹ä¸­å¯ä»¥è¢«æ”¹å˜ï¼š åœ¨å°±ç»ªé˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…æ—¶é—´å»¶é•¿ä¼˜å…ˆçº§é«˜ã€‚ è¿›ç¨‹æ¯æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡å°±é™ä½Žè¿™ä¸ªè¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚ å¯¹äºŽä¸åŒç±»åž‹çš„è¿›ç¨‹ï¼šioå¯†é›†åž‹è¿›ç¨‹ï¼šä»–æ˜¯æœ€é«˜çº§ä¼˜å…ˆã€‚ä¸ºä»€ä¹ˆioå¯†é›†çš„ä¼˜å…ˆçº§æ¯”è¾ƒé«˜å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºioå¯†é›†åž‹ä¸€èˆ¬åªä¼šå ç”¨ä¸€å°ä¼šå„¿CPUï¼ŒéšåŽå°±ä¼šç­‰å¾…ioå¤–éƒ¨æ“ä½œåŽ»äº†ã€‚æœ€å¥½çš„åšæ³•æ˜¯ï¼Œioä¸€æ—¦å°±ç»ªå°±èµ¶ç´§ç”¨ä¸€ä¸‹CPUï¼Œç„¶åŽå°±å¯ä»¥åŽ»ç­‰ioäº‹ä»¶äº†ã€‚å¦‚æžœioå¯†é›†åž‹è¿›ç¨‹çš„ä¼˜å…ˆçº§æ¯”è¾ƒä½Žï¼Œå°†ä¼šæµªè´¹å¾ˆå¤šæ—¶é—´åœ¨å°±ç»ªçš„ç­‰å¾…ä¸Šã€‚CPUå¯†é›†åž‹æ—¶å¸¸éœ€è¦CPUèµ„æºï¼Œç”±äºŽä¼˜å…ˆçº§ä½Žï¼Œå¯ä»¥ä½¿ç”¨æ›´å¤§çš„æ—¶é—´ç‰‡ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æµªè´¹ã€‚ åŠ¨æ€å¤„ç†ï¼šå¯¹äºŽioå¯†é›†åž‹ï¼Œå°½é‡åˆ«å‡å°ä¼˜å…ˆçº§ã€‚ï¼ˆå¦‚æžœæ˜¯MLFQï¼Œè¿™æ˜¯å‡ ä¹Žå¯ä»¥ä¿è¯çš„ï¼Œå› ä¸ºioå¯†é›†ï¼Œå¯èƒ½åœ¨ç»™å®šçš„æ—¶é—´ç‰‡ä¸­æ²¡æœ‰ç”¨å®Œæ—¶é—´ç‰‡å°±è‡ªå·±è¿›å…¥é˜»å¡žçŠ¶æ€äº†ï¼‰ï¼ˆmeï¼‰å¯¹äºŽcpuå¯†é›†åž‹ï¼Œåœ¨å®ƒçš„ioå®Œæˆä¹‹åŽï¼Œæ”¾å›žioè¯·æ±‚æ—¶ç¦»å¼€çš„é˜Ÿåˆ—ï¼Œä»¥å…æ¯æ¬¡éƒ½å›žåˆ°æœ€é«˜ä¼˜å…ˆçº§å†é€æ¬¡ä¸‹é™ã€‚ æœ€çŸ­è¿›ç¨‹ä¼˜å…ˆä¿è¯è°ƒåº¦å‘ç”¨æˆ·åšå‡ºæ˜Žç¡®çš„æ€§èƒ½ä¿è¯ï¼Œç„¶åŽåŽ»å®žçŽ°å®ƒã€‚ åˆå§‹ï¼šæ¯ä¸ªè¿›ç¨‹åŒç­‰çš„share CPUã€‚éšåŽï¼šè®¡ç®—æ¯ä¸ªè¿›ç¨‹ç†åº”èŽ·å¾—çš„æ—¶é—´ä¸Žå®žé™…èŽ·å¾—çš„æ—¶é—´ä¹‹æ¯”ã€‚ç»“æžœï¼šå€¾å‘äºŽè¿è¡Œæ¯”çŽ‡æ›´ä½Žçš„è¿›ç¨‹ï¼Œç›´åˆ°å®ƒçš„radioè¶…è¿‡ä»–çš„æŽ¥è¿‘ç«žäº‰è€…ã€‚ å½©ç¥¨è°ƒåº¦å°±æ˜¯oså–å½©ç¥¨ï¼Œç»™æ¯ä¸ªè¿›ç¨‹ä¸€ä¸ªå½¼æ­¤ä¸åŒçš„å½©ç¥¨ï¼Œä¸€æ—¦éœ€è¦è°ƒåº¦ï¼Œå°±æŠ½å½©ç¥¨ï¼Œçœ‹çœ‹è°ä¸­å¥–ï¼Œä¸­å¥–çš„å“ªä¸ªè¿›ç¨‹èŽ·å¾—èµ„æºã€‚â€æ‰€æœ‰è¿›ç¨‹æ˜¯å¹³ç­‰çš„ï¼Œä½†æ˜¯æœ‰ä¸€äº›è¿›ç¨‹æ›´å¹³ç­‰ä¸€äº›â€œç»™æŸäº›é‡è¦çš„è¿›ç¨‹é¢å¤–çš„å½©ç¥¨ï¼Œå¢žåŠ ä»–ä»¬ä¸­å¥–çš„å‡ çŽ‡ã€‚ å…è®¸è¿›ç¨‹ä¹‹é—´äº¤æ¢å½©ç¥¨ï¼Œæ¯”å¦‚å®¢æˆ·æœºè¿›ç¨‹èŽ·å¾—äº†è¿è¡Œæƒï¼Œç„¶åŽé˜»å¡žç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œè¿™æ—¶å®¢æˆ·æœºå¯ä»¥æŠŠè‡ªå·±çš„å½©ç¥¨ç»™æœåŠ¡å™¨æœºè¿›ç¨‹ï¼Œä»¥å¢žåŠ æœåŠ¡å™¨åŠè¿›ç¨‹è¢«é€‰ä¸­çš„æœºä¼šã€‚ï¼ˆå®žé™…ä¸Šï¼Œå¦‚æžœæ²¡æœ‰å®¢æˆ·æœºè¿›ç¨‹ï¼ŒæœåŠ¡å™¨åŠè¿›ç¨‹çš„å­˜åœ¨å°±æ˜¯ä¸€ä¸ªé”™è¯¯ï¼‰ è°ƒåº¦å®žçŽ°unixï¼šåŠ¨æ€ä¼˜å…ˆçº§ç®—æ³•5.3BSDï¼šMQWindowsï¼šä¼˜å…ˆçº§ç®—æ³•Linuxï¼šæŠ¢å å¼è°ƒåº¦ï¼ˆpreemptive schedulingï¼‰ è°ƒåº¦æœºåˆ¶è®¾å®š$$\color{red}{ä»€ä¹ˆé¬¼è¿™æ˜¯}$$ åœ¨oskernelè®¾è®¡è°ƒåº¦ç®—æ³•ï¼Œå°±åƒæˆ‘ä»¬çš„scheduleå‡½æ•°åœ¨kernelä¸­å®Œæˆï¼Œå¹¶å°è£…ç”¨æˆ·æŽ¥å£ä¾›ç”¨æˆ·è°ƒç”¨ã€‚ é™¤äº†æ—¶é—´ç‰‡ï¼Œå…è®¸ç”¨æˆ·ä¹Ÿåšå‡ºè°ƒåº¦çš„å†³å®šï¼Œå®Œæˆè°ƒåº¦ç­–ç•¥è®¾ç½®ã€‚ å¯ä»¥å‚è€ƒlab4çš„æ–‡æ¡£ è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æ¶ˆæ¯ã€ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜ å¯ä»¥å‚è€ƒlab4æ–‡æ¡£ï¼Œé‡Œé¢æœ‰ipcä»¥åŠlab5ä¸­æœ‰å…±äº«å†…å­˜ã€‚ çº¿ç¨‹çº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„ã€å…·æœ‰å¯è°ƒåº¦ç‰¹æ€§çš„æ‰§è¡Œå•å…ƒã€‚ çº¿ç¨‹ä¸€å®šä¸æ˜¯é™Œç”Ÿçš„ï¼Œæ—©åœ¨å¤§äºŒä¸Šå­¦æœŸï¼Œå°±åœ¨Javaä¸­æŽ¥è§¦äº†çº¿ç¨‹ã€‚çº¿ç¨‹ä½œä¸ºå®žçŽ°è¿›ç¨‹ä¸­çš„å¹¶å‘è€Œå­˜åœ¨ã€‚ ç³»ç»Ÿæä¾›äº†çº¿ç¨‹åº“Pthreadï¼š çº¿ç¨‹åº“çº¿ç¨‹åº“æ˜¯é’ˆå¯¹é‚£äº›ä¸æä¾›å¤šçº¿ç¨‹æ”¯æŒçš„osè€Œè®¾è®¡çš„åœ¨ç”¨æˆ·æ€ä¸‹çš„åº“ï¼Œçº¿ç¨‹åº“çš„å¤„ç†å¯¹è¿™äº›osæ˜¯é€æ˜Žçš„ã€‚ å³ä½¿æä¾›äº†æ ¸å¿ƒçº¿ç¨‹æ”¯æŒçš„osï¼Œä¹Ÿæœ‰å¿…è¦æä¾›çº¿ç¨‹åº“ï¼Œå¯ä»¥ç®€åŒ–æˆ–æœ‰åˆ©äºŽçº¿ç¨‹æœºåˆ¶çš„ä½¿ç”¨ã€‚ çº¿ç¨‹åº“æä¾›ï¼š åˆé€‚çš„å¤šçº¿ç¨‹ç¼–ç¨‹çš„æŽ¥å£ è®°å½•çº¿ç¨‹çŠ¶æ€å’Œè°ƒåº¦å„ä¸ªçº¿ç¨‹çš„è¿è¡Œæœºåˆ¶ åœ¨ç³»ç»Ÿå†…éƒ¨å¯ä»¥ä½¿ç”¨å¤šç§æ–¹å¼å®žçŽ°çº¿ç¨‹æœºåˆ¶ï¼š ULTçº¯ç”¨æˆ·çº§çº¿ç¨‹ï¼šçº¿ç¨‹ç®¡ç†å…¨éƒ¨ç”±ç”¨æˆ·ç¨‹åºå®Œæˆï¼Œkernelåªç®¡ç†è¿›ç¨‹ï¼Œå¢žåŠ â€çº¿ç¨‹åº“â€œæ¦‚å¿µã€‚ KLTæ ¸å¿ƒçº§çº¿ç¨‹ï¼šçº¿ç¨‹æœ‰kernelç®¡ç†ï¼Œkernelä¸ºç”¨æˆ·æä¾›ç³»ç»Ÿè°ƒç”¨ã€‚ ULTï¼šè¿›ç¨‹è¡¨åœ¨kernelï¼Œçº¿ç¨‹è¡¨åœ¨ç”¨æˆ·ç©ºé—´ï¼Œä½¿ç”¨çº¿ç¨‹åº“ã€‚çº¿ç¨‹è¡¨ç”±è¿è¡Œæ—¶ç³»ç»Ÿç®¡ç†ã€‚ ultçš„ä¼˜ç‚¹æ˜¯ï¼š çº¿ç¨‹åˆ‡æ¢ä¸éœ€è¦é™·å…¥å†…æ ¸ï¼šæ¯”é™·å…¥å†…æ ¸å¿«ä¸€ä¸ªæ•°é‡çº§ å…è®¸è¿›ç¨‹åˆ¶å®šè‡ªå·±çš„è°ƒåº¦ç®—æ³•è€Œä¸ä¼šå½±å“osçš„è°ƒåº¦ç®—æ³•ç¨‹åº ultç®¡ç†æ¨¡å¼å¯ä»¥åœ¨ä»»ä½•osä¸‹è¿è¡Œï¼Œä¸éœ€è¦ä¿®æ”¹å†…æ ¸ï¼Œåªéœ€è¦çº¿ç¨‹åº“ã€‚ ultçš„ä¸è¶³æ˜¯ï¼š ç³»ç»Ÿè°ƒç”¨ä¼šå¼•èµ·è¿›ç¨‹é˜»å¡ž ä¸åˆ©äºŽå¤šå¤„ç†å™¨å¹¶è¡Œï¼ˆwhyï¼Ÿï¼Ÿï¼Ÿï¼‰ å…³äºŽç³»ç»Ÿé˜»å¡žçš„é—®é¢˜ï¼šoså¹¶ä¸çŸ¥é“è¿›ç¨‹é‡Œè¿˜æœ‰çº¿ç¨‹ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹åœ¨å°šæœªå‘ç”Ÿé”®ç›˜æ“ä½œçš„æ—¶å€™è¯»é”®ç›˜ï¼Œå°†ä¼šå¼•å‘é˜»å¡žã€‚è¿™æ—¶å¯èƒ½æ•´ä¸ªè¿›ç¨‹éƒ½ä¼šè¢«osçš„è°ƒåº¦ç®—æ³•è°ƒåº¦ä¸‹æ¥ï¼Œæ•´ä¸ªè¿›ç¨‹éƒ½ä¼šé˜»å¡žã€‚è€Œè¦ä½¿ç”¨çº¿ç¨‹ï¼Œåº”è¯¥å…è®¸æ¯ä¸ªçº¿ç¨‹éƒ½èƒ½å¤Ÿé˜»å¡žè°ƒç”¨ï¼Œè€Œä¸å½±å“å…¶ä»–çº¿ç¨‹çš„è¿è¡Œã€‚çŽ°åœ¨æ˜¾ç„¶æ˜¯ä¸è¡Œã€‚æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼Œä¸€æ˜¯ä¿®æ”¹readåœ¨æ²¡æœ‰å¤–éƒ¨äº‹ä»¶æ—¶è¿”å›ž0ï¼Œä½†æ˜¯å¯¹readè¯­ä¹‰çš„æ”¹å˜ä¼‘è¦å¤§é‡ä»£ç çš„ä¿®æ”¹ã€‚å¦ä¸€ç§æ˜¯å…è®¸è¿›è¡Œé˜»å¡žæ£€æŸ¥ï¼Œä»…åœ¨å¤–éƒ¨äº‹ä»¶å‘ç”Ÿæ—¶æ‰è¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œå¦åˆ™å…ˆè®©å‡ºä½¿ç”¨æƒç»™å…¶ä»–çº¿ç¨‹è¿è¡Œã€‚è¿™ç§æ–¹å¼ä¸€ç‚¹éƒ½ä¸å¥½çœ‹ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰å…¶ä»–çš„æ–¹æ³•äº†ã€‚ è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯è¿›ç¨‹çš„æ— ä¼‘æ­¢è¿è¡Œã€‚æ²¡æœ‰æ—¶é—´ç‰‡æ“ä½œã€‚å¯¹ultæœ€å¤§çš„äº‰è®ºæ˜¯ç¨‹åºå‘˜ä¸€èˆ¬åªä¼šåœ¨ç»å¸¸å‘ç”Ÿçº¿ç¨‹é˜»å¡žçš„ç¨‹åºä¸­æ‰ä¼šå¤§é‡ä½¿ç”¨çº¿ç¨‹ã€‚ kltï¼šçº¿ç¨‹ä¸Žè¿›ç¨‹éƒ½åœ¨ç”¨æˆ·ç©ºé—´å®Œæˆï¼ˆwhatï¼Ÿï¼‰è¿›ç¨‹è¡¨ä¸Žçº¿ç¨‹è¡¨éƒ½åœ¨kernel ä¼˜ç‚¹ï¼šçº¿ç¨‹åœ¨kernelä¸­æœ‰ä¿¡æ¯ï¼Œç³»ç»Ÿè°ƒç”¨åŸºäºŽçº¿ç¨‹ï¼ˆä¸å­˜åœ¨ä¸Šè¿°çš„é˜»å¡žï¼‰å¯ä»¥å…‹æœultçš„é˜»å¡žä¸Žå¹¶è¡Œåº¦å·®çš„ç¼ºç‚¹ï¼Œå¹¶ä¸”kernelä¹Ÿå¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹ã€‚ ç¼ºç‚¹ï¼šæ¯æ¬¡è¿›è¡Œçº¿ç¨‹è°ƒåº¦éƒ½éœ€è¦é™·å…¥å†…æ ¸ çº¿ç¨‹çš„æ¦‚å¿µçº¿ç¨‹ä½¿åŠ²è¹­çš„ä¸€éƒ¨åˆ†ï¼Œæè¿°æŒ‡ä»¤æµæ‰§è¡ŒçŠ¶æ€ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„æŒ‡ä»¤æ‰§è¡Œæœ€å°å•å…ƒï¼Œæ˜¯CPUè°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚ åœ¨è¿›ç¨‹ä¸Žçº¿ç¨‹æœºåˆ¶ä¸­ï¼Œè¿›ç¨‹ä½œä¸ºèµ„æºåˆ†é…è§’è‰²ï¼ŒåŒ…æ‹¬åœ°å€ç©ºé—´ã€æ‰“å¼€æ–‡ä»¶ç­‰ï¼›çº¿ç¨‹ä½œä¸ºå¤„ç†æœºè°ƒåº¦è§’è‰²ï¼Œæè¿°è¿›ç¨‹èµ„æºçŽ¯å¢ƒä¸­çš„æŒ‡ä»¤æ‰§è¡Œåºåˆ—çŠ¶æ€ã€‚ è¿›ç¨‹çš„è¡¨å«åšTCBã€‚ ä¸ºä»€ä¹ˆè¿›ç¨‹æœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆï¼Ÿè¿›ç¨‹æè¿°äº†æŒ‡ä»¤æ‰§è¡ŒçŠ¶æ€ï¼Œè€Œæ ˆä¸­æ•°æ®ä¸Žä¹‹å‰æ‰§è¡Œçš„æŒ‡ä»¤æœ‰å…³ï¼Œå› æ­¤æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰è‡ªå·±çš„æ ˆã€‚ä¿è¯æ‰§è¡ŒæŒ‡ä»¤çš„ç‹¬ç«‹æ€§ã€‚ è°ƒç”¨å‡½æ•°è¿”å›ž errorno è¿›ç¨‹ä¸­å†…å®¹ çº¿ç¨‹ä¸­å†…å®¹ åœ°å€ç©ºé—´ ç¨‹åºè®¡æ•°å™¨ å…¨å±€å˜é‡ å¯„å­˜å™¨ æ‰“å¼€æ–‡ä»¶ å †æ ˆ å­è¿›ç¨‹ çŠ¶æ€ å³å°†å‘ç”Ÿçš„æŠ¥è­¦ ä¿¡å·ä¸Žä¿¡å·å¤„ç†ç¨‹åº è´¦æˆ·ä¿¡æ¯ è¿›ç¨‹ä¸Žçº¿ç¨‹|è¿›ç¨‹|çº¿ç¨‹||èµ„æºåˆ†é…å•ä½|CPUè°ƒåº¦å•ä½||æœ‰å®Œæ•´çš„èµ„æºå¹³å°|åªç‹¬äº«æŒ‡ä»¤æ‰§è¡Œçš„å¿…è¦èµ„æº||åŸºæœ¬çŠ¶æ€ä¸Žå…¶ä»–çŠ¶æ€ä¸Žè½¬æ¢|å°±ç»ªç­‰å¾…è¿è¡ŒçŠ¶æ€ä¸Žè½¬æ¢| çº¿ç¨‹ï¼šå‡å°‘å¹¶å‘æ‰§è¡Œçš„æ—¶é—´ä¸Žç©ºé—´å¼€é”€ åˆ›å»ºæ—¶é—´æ¯”è¿›ç¨‹çŸ­ï¼ˆwhyï¼‰ ç»ˆæ­¢æ—¶é—´æ¯”è¿›ç¨‹çŸ­ åŒä¸€è¿›å±‚å†…çš„çº¿ç¨‹åˆ‡æ¢æ—¶é—´æ›´çŸ­ åŒä¸€è¿›ç¨‹ä¹‹é—´çš„çº¿ç¨‹å…±äº«å†…å­˜ä¸Žæ–‡ä»¶ï¼Œä¸éœ€è¦é€šè¿‡å†…æ ¸è¿›è¡Œé€šä¿¡ã€‚ what is å¤šå¯¹å¤š è½»æƒè¿›ç¨‹å†…æ ¸æ”¯æŒçš„ç”¨æˆ·çº¿ç¨‹ã€‚ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªè½»é‡çº§è¿›ç¨‹ï¼Œæ¯ä¸ªè½»æƒè¿›ç¨‹ç”±ä¸€ä¸ªå•ç‹¬çš„å†…æ ¸çº¿ç¨‹æ”¯æŒã€‚å¤ªè¿‡å¤æ‚ï¼Œæœ€åŽè¢«æŠ›å¼ƒã€‚ ç»å…¸IPCé—®é¢˜è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œå¯ä»¥å‚è§lab4ipcã€‚ è¿›ç¨‹ä¹‹é—´é€šä¿¡ è¿›ç¨‹ä¹‹é—´é€šä¿¡å°†äº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Ÿ å¼‚æ­¥ï¼šä»Žä¸€ä¸ªè¿›ç¨‹ä¼ é€’ä¿¡æ¯åˆ°å¦ä¸€ä¸ª æŽ’å¤–ï¼šä¸Žå…¶ä»–è¿›ç¨‹äº‰å¤ºèµ„æº åŒæ­¥ï¼šç»´æŠ¤é€‚å½“çš„è¿è¡Œåºåˆ— è¿›ç¨‹ä¹‹é—´é€šä¿¡çš„éš¾å¤„ï¼š ä¿¡æ¯çš„æ ¼å¼ï¼šsignalã€switchã€message æŽ’å¤–ä¸ŽåŒæ­¥ï¼šåˆä½œé—®é¢˜ é‡‘å­—å¡”è§„åˆ™ ç«žäº‰æ¡ä»¶ï¼šä¸¤ä¸ªæˆ–å¤šä¸ªè¿›ç¨‹è¯»å†™æŸäº›å…±äº«æ•°æ®ï¼Œè€Œæœ€åŽçš„æžœå–å†³äºŽè¿›ç¨‹è¿è¡Œçš„ç²¾ç¡®æ—¶åºã€‚ ä¹¦ä¸Šæœ‰ä¸€ä¸ªæ‰“å°æœºçš„ä¾‹å­ï¼Œ å°±æ˜¯è¯´Aä¸ŽBéƒ½éœ€è¦ä½¿ç”¨æ‰“å°æœºï¼Œæ‰“å°æœºç»´æŠ¤inä¸ŽoutæŒ‡é’ˆï¼Œä¾›æ‰€æœ‰è¿›ç¨‹åŽ»è®¿é—®ã€‚å‡è®¾æŸä¸€æ—¶åˆ»Aæƒ³æ‰“å°ä¸œè¥¿ï¼ŒäºŽæ˜¯åŽ»æŸ¥æ‰¾outæŒ‡é’ˆçš„å€¼ï¼Œå­˜åœ¨ä¸´æ—¶å˜é‡next_freeé‡Œé¢ï¼Œè¿™æ—¶æ—¶é—´ç‰‡æ¥äº†Bä¸Šæ¥äº†ï¼ŒBä¹Ÿè¦æ‰“å°ä¸œè¥¿ï¼ŒäºŽæ˜¯æ­£å¸¸çš„å®Œæˆäº†å°†ä¸œè¥¿æ”¾åœ¨outçš„ä½ç½®ï¼Œout++ã€‚è¿™æ—¶Aå›žæ¥äº†ï¼Œä»–å‘çŽ°è‡ªå·±next_freeæ˜¯åŽŸoutå€¼ï¼ŒäºŽæ˜¯è¦†ç›–äº†Bçš„æ–‡ä»¶æ•°æ®ï¼Œç„¶åŽæŠŠnext_freeåŠ ä¸€ï¼Œå­˜åˆ°outé‡Œé¢ã€‚ ç”Ÿäº§è€…ä¸Žæ¶ˆè´¹è€…é—®é¢˜å›ºå®šå¤§å°bufferï¼Œç”Ÿäº§è€…åŠ æ•°æ®ï¼Œæ¶ˆè´¹è€…æ‹¿æ•°æ®ï¼Œæ›´æ–°countï¼Œå½“countæ˜¯0çš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…ä¼‘çœ ï¼Œæ˜¯Nçš„æ—¶å€™ç”Ÿäº§è€…ä¼‘çœ ã€‚æ¯ä¸ªè¿›ç¨‹æ£€æŸ¥å”¤é†’ã€‚ â€”â€”åœ¨æ•°æ®æ›´æ–°çš„è¿‡ç¨‹ä¸­è®¿é—®äº†æ•°æ®ï¼ æ¦‚å¿µï¼šrace conditionï¼šä¸¤ä¸ªæˆ–æ›´å¤šè¿›ç¨‹ç«žäº‰åŒä¸€é¡¹èµ„æºï¼Œåœ¨ä¸€ä¸ªè¿›ç¨‹å ç”¨èµ„æºçš„æ—¶å€™å…¶ä»–è¿›ç¨‹ä¸åº”è¯¥è®¿é—®ã€‚critical regionï¼šå¯¹å…±äº«å†…å­˜è¿›è¡Œè®¿é—®çš„ç¨‹åºç‰‡æ®µä¼˜ç§€ç»“æžœæ ‡å‡†ï¼š ä¸å¯ä»¥æœ‰ä¸¤ä¸ªè¿›ç¨‹åŒæ—¶å¤„äºŽä¸´ç•ŒåŒº ä¸åº”å¯¹CPUçš„æ•°é‡ä¸Žé€Ÿåº¦æœ‰è¦æ±‚ ä¸´ç•ŒåŒºå¤–è¿è¡Œçš„è¿›ç¨‹ä¸èƒ½é˜»å¡žå…¶ä»–è¿›ç¨‹ è¿›å…¥ä¸´ç•ŒåŒºæ—¶ä¸èƒ½æ— é™ç­‰å¾… ã€Šç”˜ç‰¹å›¾ï¼šä¸´ç•ŒåŒºã€‹ å®žé™…ç¨‹åºä¸­ï¼Œå¯ä»¥å°†æ‰€æœ‰ä»£ç æ ¹æ®æ˜¯å¦è®¿é—®å…±äº«åŒºåŸŸåˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼š 1234entry section critical sectionexit section remainder section å®¶åº­é‡‡è´­åè°ƒé—®é¢˜ æ—¶é—´ A B 3:00 çœ‹å†°ç®± æ²¡é¢åŒ… â€“ 3:05 ç¦»å¼€å®¶åŽ»å•†åº— â€“ 3:10 åˆ°è¾¾å•†åº—ä¹°é¢åŒ… çœ‹å†°ç®± æ²¡é¢åŒ… 3:20 åˆ°å®¶ï¼Œæ”¾é¢åŒ… åŽ»å•†åº— 3:25 â€“ åˆ°å•†åº—ä¹°é¢åŒ… 3:30 â€“ åˆ°å®¶ï¼Œæ”¾é¢åŒ… æˆ‘ä»¬åˆ†æžè¿™ä¸ªé—®é¢˜ï¼š å¦‚ä½•ä¿è¯ä¹°é¢åŒ…åŠ¨ä½œçš„æˆåŠŸä¸Žé«˜æ•ˆï¼šæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªäººåŽ»ä¹° å¯èƒ½çš„è§£å†³ï¼šåŠ é” å¯¼è‡´çš„é—®é¢˜ï¼šæ— æ³•å–åˆ°å†°ç®±ä¸­å…¶ä»–ä¸œè¥¿ï¼ˆå…·ä½“æŸ¥çœ‹PPTï¼Œæ—¶é—´æœ‰é™ï¼‰ å…³äºŽä¸´ç•Œä¸Žå¤–éƒ¨äº‹ä»¶å‘ç”Ÿï¼šå¯ä»¥å°†ç­‰å¾…ä¸´ç•Œç©ºé—²çš„è¿›ç¨‹è½¬åˆ°é˜»å¡žæ€ã€‚ å¿™ç­‰å¾…è®¾è®¡æ€è·¯ï¼šé€šè¿‡å…¨å±€å˜é‡ä¿å­˜ä¸´ç•ŒåŒºçŠ¶æ€ä¾›è¿›ç¨‹å‚è€ƒ å±è”½ä¸­æ–­ï¼ˆdisabling interruptsï¼‰åŸºæœ¬æ€æƒ³æ˜¯åœ¨è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰å…³ä¸­æ–­ï¼Œè¿™å°±å¯¼è‡´æ—¶é’Ÿä¸­æ–­ä¹Ÿä¼šè¢«å…³é—­ï¼Œä»Žè€Œæ²¡æœ‰è¿›ç¨‹å¯ä»¥æ‰“æ–­å®ƒã€‚ é—®é¢˜ï¼š ä¸æ”¯æŒå¤šCPU æŠŠå…³ä¸­æ–­æƒé™äº¤ç»™ç”¨æˆ·æ˜¯ä¸æ˜Žæ™ºçš„é€‰æ‹© ä½†æ˜¯å¯¹äºŽå†…æ ¸æ¥è¯´ï¼Œå…³ä¸­æ–­æ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥ç»´æŠ¤å¤šçº¿ç¨‹ï¼ˆå¦‚æžœæ”¯æŒï¼‰æˆ–è€…å¤šCPUä¹‹é—´å¯¹å°±ç»ªé˜Ÿåˆ—ç­‰çš„è®¿é—®ï¼ˆåˆ«éƒ½é€‰åˆ°ä¸€ä¸ªè¿›ç¨‹å°±å°´å°¬äº†ï¼Œåœ¨josé‡Œè¿™ä¼šå‘ç”Ÿé”™è¯¯ï¼‰ï¼ˆè¯è¯´ï¼Œåœ¨josé‡Œé¢å®žçŽ°å¤šCPUçš„æ—¶å€™å¯æœ‰å†…æ ¸é”æœºåˆ¶ï¼Œä¸‹é¢æ¥çœ‹ä¸€çœ‹é”éƒ½åŠ åœ¨äº†å“ªé‡Œï¼‰ é”å˜é‡ï¼ˆLock variableï¼‰ä¿å­˜ä¸€ä¸ªåä¸ºlockä¹‹ç±»çš„å…¨å±€å˜é‡ä¾›å„ä¸ªè¿›ç¨‹è¿›è¡Œæ£€æŸ¥ï¼Œå®žé™…ä¸Šæ— æµŽäºŽäº‹â€”â€”è¿™ä¸ä¹Ÿæ˜¯ä¸´ç•ŒåŒºå— ä¸¥æ ¼è½®æ¢æ³•ï¼ˆStrict alertnationï¼‰è¦æ±‚è¿›ç¨‹è½®æµè¿›å…¥ä¸´ç•ŒåŒºã€‚çœ‹äº†ä»£ç å°±ä¼šæ˜Žç™½ï¼š 12345678910111213while(true)&#123; while(trun!=0);//Aè¿›ç¨‹å¿…é¡»ç­‰å¾…turnæ˜¯0çš„æ—¶å€™æ‰èƒ½è¿›åŽ» critical_region(); turn=1; noncritical_region();&#125;while(true)&#123; while(turn!=1);//Bè¿›ç¨‹å¿…é¡»ç­‰åˆ°turnæ˜¯1 critical_region(); turn=0; nocritcal_region();&#125; ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ¡ˆã€‚ ç¼ºç‚¹ï¼š è¿åäº†â€œè¿›ç¨‹ä¸åº”è¯¥è¢«å¤„äºŽéžä¸´ç•ŒåŒºçš„è¿›ç¨‹é˜»å¡žâ€ æµªè´¹CPUæ—¶é—´ï¼šå¿™ç­‰å¾…æ—¶é—´ å¾ˆæ˜Žæ˜¾å•Šï¼Œä»–ä»¬åœ¨è½®è½¬çš„æ—¶å€™ï¼Œå¦‚æžœAè¿™æ—¶éœ€è¦è¿›å…¥ä¸´ç•ŒåŒºä½†æ˜¯Båœ¨è¿è¡Œéžä¸´ç•ŒåŒºçš„ç¨‹åºï¼ŒAå¯ä»¥è¢«æ”¾åˆ°é˜»å¡žæ€ï¼Œè¿™æ—¶è¿åäº†è§„åˆ™3Aå¯ä»¥ç»§ç»­å¾ªçŽ¯ï¼Œè¿™æ—¶æ¯æ¬¡Aä¸ŠåŽ»CPUéƒ½ä¼šæµªè´¹æ—¶é—´ç©ºå¾ªçŽ¯ï¼Œè¿˜ä¸å¦‚åŽ»é˜»å¡žæ€ã€‚ è¿˜æœ‰ï¼Œå¦‚æžœAéœ€è¦å¤šæ¬¡è¿›å…¥ä¸´ç•ŒåŒºï¼Œè€ŒBä¸»è¦æ—¶é—´åœ¨éžä¸´ç•ŒåŒºï¼ŒAçš„æ•ˆçŽ‡å°±å˜å¾—éžå¸¸ä½Žï¼Œç»å¤§å¤šæ•°æ—¶é—´éƒ½æ˜¯åœ¨ç©ºè½¬ã€‚ è‡ªæ—‹é”ï¼šç”¨äºŽå¿™ç­‰å¾…çš„é”ã€‚ PPTå¦æœ‰ä¸¤ç§ï¼Œéƒ½æ˜¯å¤±è´¥çš„æ–¹æ³•ã€‚æš‚ä¸”ä¸æã€‚ Petersonç®—æ³•1981-æ»¡è¶³çº¿ç¨‹ä¹‹é—´äº’æ–¥çš„ç»å…¸åŸºäºŽè½¯ä»¶çš„è§£æ³• ä¼¼ä¹Žä»…ç”¨äºŽä¸¤ä¸ªè¿›ç¨‹ï¼šwiki 1234567891011121314151617#define FALSE 0#define TRUE 1#deine N 2 //è¿›ç¨‹æ•°é‡int turn;//è½®åˆ°è¿›ç¨‹ç¼–å·int interested[N];ä¸ªå„è¿›ç¨‹æ˜¯ä¸æ˜¯æƒ³åŽ»ä¸´ç•ŒåŒºï¼Œæ˜¯ä¸æ˜¯å·²ç»åœ¨ä¸´ç•ŒåŒºvoid enter_region(int process)&#123; int other;//åœ¨ä¸´ç•ŒåŒºçš„ other=1-process; interested[process]=TRUE;//æˆ‘æƒ³è¿›åŽ»lä¸´ç•ŒåŒº turn=other;// while(turn==other &amp;&amp; interested[other]==TRUE);//&#125;void leave_region(int process)&#123; interested[process]=FALSE;&#125; è¿è¡Œåˆ°whileå¤„å¯èƒ½ä¼šæŒ‚èµ·ã€‚ æ€Žä¹ˆä½¿ç”¨å‘¢ï¼Ÿåœ¨æ¯ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºä¹‹å‰è°ƒç”¨critical_regionï¼Œé€€å‡ºä¹‹åŽè°ƒç”¨leave_regionã€‚ æ‰©å±•åˆ°Nä¸ªçº¿ç¨‹çš„äº’æ–¥filterç®—æ³•ï¼š TSLæŒ‡ä»¤ï¼šTSL RX LOCK å°†lockç»™rxç„¶åŽå¾€lockä¸­å­˜ä¸€ä¸ªéž0å€¼ï¼šä¿è¯åŽŸå­æ“ä½œï¼Œé”å†…å­˜æ€»çº¿ã€‚ ä»£ç ï¼š enter_region: TSL REGISTER , LOCK//åŽŸå€¼åœ¨å¯„å­˜å™¨ï¼Œæ–°å€¼åœ¨å†…å­˜ CMP REGISTER,#0 JNE enter_region RET//åŽŸæ¥æ˜¯0ï¼Œå¯ä»¥è¿›åŽ»äº† leave_region: MOVE LOCK , #0 RET ä¸€ä¸ªå¯ä»¥ä»£æ›¿tslçš„æ˜¯xchgï¼ˆæ˜¯ä¸æ˜¯å¾ˆçœ¼ç†Ÿï¼ï¼‰xchgå®Œæˆçš„æ“ä½œæ˜¯äº¤æ¢ä¸¤ä¸ªä½ç½®çš„å†…å®¹ã€‚ enter_region: MOVE REGISTER,#1 XCHG REGISTER,LOCK CMP REGISTER,#0 JNE enter_region RET leave_region: MOVE LOCK, #0 RET é”æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ•°æ®ç»“æž„ï¼Œæœ‰æ–¹æ³•Acquireä¸ŽReleaseã€‚ åœ¨èŽ·å–æ‰€çš„æ—¶å€™ï¼Œå¦‚æžœé”ç›®å‰è¢«åˆ«äººæ‹¥æœ‰ï¼Œå°±ç­‰å¾…ã€‚é‡Šæ”¾é”çš„æ—¶å€™ï¼Œé€šçŸ¥é‚£äº›ç­‰å¾…çš„è¿›ç¨‹ä½ ä»¬ç­‰çš„é”åˆ°äº†ã€‚ è‡ªæ—‹é”ä½¿ç”¨TSLå®žçŽ°è‡ªæ—‹é”ï¼š 123456Lock::Acquire()&#123; while(test-and-set(value));&#125;Lock::Release()&#123; value=0;&#125; Acquire:ä¸åœåœ°åŒºèŽ·å–é”çš„å€¼å¹¶å°†é”çš„å€¼èµ‹ä¸º1ï¼Œç›´åˆ°é”çš„å€¼å˜ä¸º0ã€‚ï¼ˆè¯´æ˜Žæœ‰è¿›ç¨‹ä»Žä¸´ç•ŒåŒºå‡ºæ¥äº†ï¼‰ å¿™ç­‰å¾…ç¡®å®žå¯ä»¥è§£å†³2ä¸ªè¿›ç¨‹ä¹‹é—´äº’æ–¥è¿è¡Œçš„é—®é¢˜ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿå¾ˆå¤šï¼Œæµªè´¹CPUæ—¶é—´ï¼Œç¼–ç¨‹å›°éš¾ï¼Œå¯èƒ½ä¼šé€ æˆä¼˜å…ˆçº§é”™ä¹±ã€‚ æ— å¿™ç­‰å¾…é” ç¡çœ ä¸Žå”¤é†’è¿›ç¨‹é—´é€šä¿¡åŽŸè¯­ï¼Œåœ¨æ— æ³•è¿›å…¥ä¸´ç•ŒåŒºçš„æ—¶å€™è¿›å…¥é˜»å¡žçŠ¶æ€è€Œä¸æ˜¯å¿™ç­‰å¾…ã€‚ å½“ä¸€ä¸ªè¿›ç¨‹å‘çŽ°è‡ªå·±ä¸èƒ½è¿›å…¥ä¸´ç•ŒåŒºçš„æ—¶å€™ï¼Œå°±ç³»ç»Ÿè°ƒç”¨sleepï¼Œé˜»å¡žåŽ»ã€‚å¦ä¸€ä¸ªè¿›ç¨‹è¦ç¦»å¼€ä¸´ç•ŒåŒºï¼Œå°±è°ƒç”¨wakeupå°†å¥¹å”¤é†’ã€‚sleep\wakeup(pid); ç®€å•ç¡çœ å”¤é†’æœºåˆ¶æ­£å¦‚ä¸Šè¿°ã€‚ æ‚²æƒ¨çš„æ˜¯ï¼Œå‡å¦‚wakeupä¿¡å·ä¸¢å¤±äº†ï¼Œæ²¡æœ‰è¢«å”¤é†’çš„è¿›ç¨‹è¿˜åœ¨é˜»å¡žï¼Œå‡å¦‚å‰©ä½™ä¸€ä¸ªè¿›ç¨‹è¿›å…¥ä¸´ç•ŒåŒºéœ€è¦è¯¥è¿›ç¨‹çš„ä½œç”¨ï¼Œå°±éƒ½é˜»å¡žã€‚ å¯¹MCPUä¸æ”¯æŒï¼šä½¿ç”¨è¿›ç¨‹å·ã€‚ ç»ˆäºŽï¼ŒçŽ°åœ¨å¯ä»¥è€ƒè™‘ä¸€ä¸‹ç”Ÿäº§è€…æ¶ˆè´¹è€…çš„è§£å†³äº†ï¼š ç•¥ã€‚å¯è§ä¹¦æˆ–PPT è¿™æ˜¯å¤±è´¥çš„è§£å†³ï¼Œå¯èƒ½ä¼šå¯¼è‡´wakeupä¿¡å·ä¸¢å¤±ç»“æžœäºŒäººéƒ½åŽ»é˜»å¡žã€‚ ä¿¡å·é‡è§£å†³P-&gt;down V-&gt;up ä¿¡å·é‡ï¼šä¸€ç§æ–°çš„å˜é‡ç±»åž‹ï¼Œè¡¨ç¤ºå”¤é†’æ“ä½œå‰©ä½™æ¬¡æ•°ã€‚ï¼ˆæ‰€æœ‰ç›¸å…³çº¿ç¨‹å¼•èµ·çš„æ€»ç«žäº‰æ¡ä»¶æ£€æŸ¥æ¬¡æ•°ï¼‰ä¿¡å·æ˜¯ä¸€ä¸ªæŠ½è±¡æ•°æ®ç±»åž‹ï¼Œç”±ä¸€ä¸ªæ•´å½¢å˜é‡ä¸Žä¸¤ä¸ªåŽŸå­æ“ä½œç»„æˆã€‚ downï¼šå¯¹æŸä¸ªä¿¡å·é‡downæ˜¯æ£€æŸ¥ä»–çš„valueï¼Œå¦‚æžœä¸æ˜¯0ï¼Œå°±å‡ä¸€ï¼Œå¦‚æžœæ˜¯0å°±åŽ»sleepã€‚upï¼šå¯¹æŸä¸ªä¿¡å·é‡çš„å€¼åŠ 1ã€‚å¦‚æžœç¡çœ ï¼Œå°±å”¤é†’ã€‚ ä¿¡å·é‡æ˜¯è¢«ä¿æŠ¤çš„ï¼Œåœ¨åˆå§‹åŒ–å®Œæˆä¹‹åŽï¼Œåªèƒ½é€šè¿‡pvä¿®æ”¹ï¼Œè€Œpvæ“ä½œæ˜¯è¢«ä¿è¯çš„åŽŸå­æ“ä½œã€‚ é€šå¸¸å˜‰å®šä¿¡å·é‡æ˜¯å…¬å¹³çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šä¸€ç›´è¢«é˜»å¡žåœ¨pæ“ä½œã€‚ï¼ˆå‡è®¾å…ˆè¿›å…ˆå‡ºï¼‰ ä¿¡å·é‡çš„å®žçŽ°ä¸Žå‰é¢è¯´åˆ°çš„æ— å¿™ç­‰å¾…é”å¾ˆåƒï¼šå…¶å®žblockä¹Ÿç›¸å½“äºŽè¢«è°ƒåº¦äº†ã€‚ åŒºåˆ«åœ¨äºŽå‰é¢è¯´çš„æ— å¿™ç­‰å¾…é”å¹¶ä¸æ˜¯åŽŸå­æ€§çš„ã€‚ è§£å†³æ–¹æ¡ˆï¼šæ¯ä¸€ä¸ªä¸´ç•ŒåŒºè®¾ç½®ä¸€ä¸ªä¿¡å·é‡å¯¹è±¡ï¼Œåˆå€¼æ˜¯1ä»£è¡¨åˆå§‹æ—¶å¯ä»¥è¿›å…¥ä¸€ä¸ªåˆ°ä¸´ç•ŒåŒºåŽ»ã€‚påœ¨è¿›å…¥ä¹‹å‰ï¼Œvåœ¨è¿›å…¥ä¹‹åŽã€‚å¿…é¡»æˆå¯¹å‡ºçŽ°ã€‚ åŒæ­¥åŒæ­¥å¯èƒ½ä¼šè¢«è°ƒåº¦åºåˆ—æ‰“ä¹±ã€‚ï¼ˆï¼Ÿï¼‰ åŒæ­¥ä¸Žäº’æ–¥çš„åŒºåˆ«ï¼š äº’æ–¥å€¼æ”¾å€¼å…¶ä»–è¿›ç¨‹è¿›å…¥cr åŒæ­¥æ˜¯æŒ‡å®žçŽ°ä¸€ä¸ªåˆç†çš„é€»è¾‘åºåˆ— whats this ipcé—®é¢˜åˆ†æžâ€”â€”ä½¿ç”¨ä¿¡å·é‡è§£å†³ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜1.ipcé—®é¢˜äº§ç”Ÿ åŽŸå› ï¼š ç‰©ç†åºåˆ—ä¾èµ–äºŽè°ƒåº¦ é€»è¾‘åºåˆ—ä¾èµ–åº”ç”¨å±‚éœ€çš„æ„æ„¿ ç«žäº‰æ¡ä»¶æŽ’æ–¥èµ„æºèŽ·å– åœ¨å†…æ ¸æ€ä»¥åŠç”¨æˆ·æ€éƒ½æœ‰ipcé—®é¢˜ï¼Œåœ¨å†…æ ¸æ€æ˜¯ioè®¾å¤‡çš„ç®¡ç†ï¼Œåœ¨ç”¨æˆ·æ€æ˜¯ç½‘ç»œåº”ç”¨ã€æ•°æ®åº“ç­‰çš„ç®¡ç†ã€‚ ipcé—®é¢˜çš„å…³é”®åœ¨äºŽï¼š ç†è§£é€»è¾‘ä¸Žç‰©ç†åºåˆ— é€»è¾‘åºåˆ—ä¾èµ–äºŽè°ƒåº¦ é€»è¾‘åºåˆ—å¯ä»¥è¢«ç”¨æˆ·æŽ§åˆ¶ whats thatâ€¦.. ä½¿ç”¨ä¿¡å·é‡å¯ä»¥å®žçŽ°æ¡ä»¶åŒæ­¥ã€‚ ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼šä¸€å…±éœ€è¦ä¸‰ä¸ªä¿¡å·é‡ï¼šmutex\full\emptyã€‚é¦–å…ˆï¼Œbufferæ˜¯ä¸€ä¸ªä¸´ç•ŒåŒºï¼Œæ— è®ºæ ¸å¿ƒè¿›å…¥ä¸´ç•ŒåŒºå‡ºæ¥ä¸´ç•ŒåŒºéƒ½éœ€è¦ä¸€ä¸ªä¿¡å·é‡ï¼Œå…¶æ¬¡ï¼Œå½“bufferæ»¡çš„æ—¶å€™ï¼ˆNï¼‰ï¼Œç”Ÿäº§è€…ä¸å¯ä»¥è¿›åŽ»bufferï¼Œéœ€è¦æ¶ˆè´¹è€…æ¶ˆè´¹ä¹‹åŽupæ‰èƒ½è¿›ï¼Œæ¶ˆè´¹è€…åŒç†ã€‚æˆ‘è®¤ä¸ºï¼ŒåŽä¸¤è€…å®žé™…ä¸Šæ˜¯åœ¨åˆ©ç”¨ä¿¡å·é‡çš„ç‰¹ç‚¹å®Œæˆç¨‹åºçš„é€»è¾‘éƒ¨åˆ†ï¼Œè€Œä¸ä»…ä»…æ˜¯å¯¹ä¸´ç•ŒåŒºçš„è¿›å…¥æŽ§åˆ¶ã€‚ monitor solutionä¿¡å·é‡çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯å¯¹ç¼–ç¨‹è€…æ¥è¯´ä¸å¥½å†™å‡ºä»£ç ã€‚ monitorï¼ˆç®¡ç¨‹ï¼‰æ˜¯ä¸€å¯¹è¿‡ç¨‹ã€å˜é‡ã€æ•°æ®ç»“æž„çš„é›†åˆï¼Œï¼ˆå¯ä»¥è¢«çœ‹ä½œæ˜¯ç¼–è¯‘å™¨ï¼‰ï¼Œä»–ä»¬ç»„æˆä¸€ä¸ªç‰¹æ®Šçš„æ¨¡å—æˆ–è½¯ä»¶åŒ… åº”ç”¨ï¼šä»»æ„æ—¶åˆ»ç®¡ç¨‹ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ´»è·ƒè¿›ç¨‹ï¼ˆæœ‰æ•ˆå®Œæˆäº’æ–¥ï¼‰wait and signalï¼šå°±åƒpvã€duä¸€æ ·ä¸è¶³ï¼šåªæœ‰å¾ˆå°‘çš„è¯­è¨€æ”¯æŒã€‚ ç®¡ç¨‹ç»„æˆï¼šä¸€ä¸ªé”ï¼ˆç®¡ç¨‹ä»£ç äº’æ–¥ï¼‰ã€0æˆ–å¤šä¸ªæ¡ä»¶å˜é‡ï¼ˆç®¡ç†å…±äº«æ•°æ®çš„å¹¶å‘è®¿é—®ï¼‰ è¿›å…¥ç®¡ç¨‹æ—¶çš„äº’æ–¥ç”±ç¼–è¯‘å™¨å®Œæˆ æ¡ä»¶å˜é‡ï¼šï¼ˆåƒæ˜¯ä¿¡å·é‡ä¸€æ ·çš„ä¸œè¥¿ï¼‰æ˜¯ç®¡ç¨‹å†…çš„çš„ç­‰å¾…æœºåˆ¶ï¼Œå…è®¸åœ¨è¿›ç¨‹æ— æ³•ç»§ç»­è¿è¡Œçš„æ—¶å€™è¢«é˜»å¡žã€‚waitï¼šæ— æ³•ç»§ç»­è¿è¡Œæ—¶è°ƒç”¨ï¼Œå°†è‡ªå·±é˜»å¡žå¹¶æŽ‰ä¸€ä¸ªäº’æ–¥è®¿é—®è¿›ç®¡ç¨‹signalï¼šæŒ‡ç¤ºä¸€ä¸ªå‘¼å“§è¿›ç¨‹å¼€å§‹è¿è¡Œï¼Œè‡ªå·±é€€å‡ºç®¡ç¨‹ã€‚ waitä¸Žsignalå¾ˆåƒæ˜¯åœ¨ä¹‹å‰çš„sleepä¸Žwakeupã€‚ä½†æ˜¯å…³é”®çš„åŒºåˆ«æ˜¯ï¼Œè¿™é‡Œç®¡ç¨‹ä¿è¯äº†äº’æ–¥ï¼Œä¸å…è®¸åœ¨waitä¹‹å‰åˆ‡æ¢è¿›ç¨‹è¿›å…¥ç®¡ç¨‹ã€‚ï¼ˆå…¶å®žå­˜ç–‘ï¼‰ æ¡ä»¶å˜é‡å®žçŽ° ç®¡ç¨‹è§£å†³ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ hansenä¸Žhoare hansenä¸»å¼ signalåªèƒ½æ˜¯ç®¡ç¨‹è¿‡ç¨‹æœ€åŽä¸€ä¸ªè¯­å¥ï¼ŒäºŒhoareåˆ™è®¤ä¸ºä¸ä¸€å®šï¼Œä¸»å¼ signalä¹‹åŽå°±åº”è¯¥è‡ªå·±é˜»å¡žè®©æ–°çš„è¿›ç¨‹è¿›å…¥ç®¡ç¨‹è¿è¡Œã€‚ ä¹Ÿæ˜¯å› ä¸ºè¿™æ ·ï¼Œï¼Œhansençš„åˆ¤æ–­æ–¹å¼ä½¿ç”¨whileè€Œhoareåˆ¤æ–­ä½¿ç”¨ifã€‚ å¹¶å‘ä¸ŽåŒæ­¥-xybaby åŒæ­¥äº’æ–¥ï¼Œå°±æ˜¯åœ¨å¹¶å‘çš„å‰æä¸‹ä¿è¯ä¸€äº›æ“ä½œçš„åŽŸå­æ€§ã€‚ IPCé—®é¢˜ï¼šå“²å­¦å®¶å°±é¤å¯¹äº’æ–¥è®¿é—®æœ‰é™èµ„æºçš„ç«žäº‰å»ºæ¨¡ è¿›ç¨‹åŒæ­¥ä¹Ÿæ˜¯è¿›ç¨‹ä¹‹é—´ç›´æŽ¥çš„åˆ¶çº¦å…³ç³»ï¼Œæ˜¯ä¸ºå®ŒæˆæŸç§ä»»åŠ¡è€Œå»ºç«‹çš„ä¸¤ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹éœ€è¦åœ¨æŸäº›ä½ç½®ä¸Šåè°ƒä»–ä»¬çš„å·¥ä½œæ¬¡åºè€Œç­‰å¾…ã€ä¼ é€’ä¿¡æ¯æ‰€äº§ç”Ÿçš„åˆ¶çº¦å…³ç³»ã€‚è¿›ç¨‹é—´çš„ç›´æŽ¥åˆ¶çº¦å…³ç³»æ¥æºäºŽä»–ä»¬ä¹‹é—´çš„åˆä½œã€‚ fromï¼šæµ…è°ˆè¿›ç¨‹åŒæ­¥ä¸Žäº’æ–¥çš„æ¦‚å¿µ-å®‹æ²„å‰‘ åˆ†æžäº’æ–¥ï¼šç›¸é‚»å“²å­¦å®¶åªæœ‰ä¸€ä¸ªäººå¯ä»¥ä½¿ç”¨ç­·å­ åŒæ­¥ï¼š æƒ³è¦è¿›é¤çš„å“²å­¦å®¶åº”è¯¥æ‹¿åˆ°ä¸¤ä¸ªç­·å­ åŒä¸€æ—¶åˆ»è‡³å¤šæœ‰ä¸¤ä¸ªå“²å­¦å®¶ä¸€åŒè¿›é¤ æ­»é”ä¸Žé¥¥é¥¿é¿å… ppt IPCé—®é¢˜ï¼šè¯»è€…ä¸Žå†™è€…ä¸ºæ•°æ®åº“è®¿é—®å»ºæ¨¡ ï¼ˆä¼šä¸ä¼šäº§ç”Ÿé—®é¢˜ï¼šåœ¨ä¸æ˜¯writeræƒ³è¦æ”¾å¼ƒçš„æ—¶å€™å¼ºè¿«writeræ”¾å¼ƒï¼‰â€”â€”ç†è§£é”™è¯¯ï¼ŒPï¼šå¯ä¸å¯ä»¥å¾—åˆ°èµ„æºï¼Ÿå¯ä»¥ï¼ŒOKç»§ç»­æ‰§è¡Œï¼šä¸å¯ä»¥OKæˆ‘åŽ»é˜»å¡žè¿™ä¸ªâ€œæˆ‘â€æŒ‡çš„æ˜¯â€œè°ƒç”¨Pçš„é‚£ä¸ªè¿‡ç¨‹ã€‚ ä¿è¯å…¬å¹³è¿™ä¸ªï¼Œconcuræ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ ##IPCé—®é¢˜ï¼šç¡è§‰çš„ç†å‘å¸ˆ çŒ´å­è¿‡ç´¢æ¡¥æ¶ˆæ¯ä¼ é€’]]></content>
      <categories>
        <category>OS</category>
        <category>è¯¾</category>
      </categories>
      <tags>
        <tag>OS</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JUnitä¹‹ä¸€]]></title>
    <url>%2F2017%2F11%2F05%2FJUnit%E4%B9%8B%E4%B8%80%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯ä¸€ä¸ªç®€å•çš„JUnitå…¥é—¨ä»‹ç»ã€‚ junitæ˜¯ä¸€ä¸ªæµ‹è¯•æ¡†æž¶ï¼ŒæŠŠä¸€ä¸ªjavaå·¥ç¨‹æŒ‰ç…§JUnitè¿è¡Œçš„æ—¶å€™ä¼šå¯åŠ¨è¿™äº›æ£€æµ‹ï¼Œä½†æ˜¯è¿™å¹¶ä¸å½±å“è¿™ä¸ªé¡¹ç›®ä½œä¸ºä¸€ä¸ªJAVAç¨‹åºçš„æœ¬è´¨ã€‚è¿™ä¸ªç¨‹åºä»ç„¶å¯ä»¥ä»¥Java Applicationæ¥è¿è¡Œã€‚ åœ¨eclipseä¸­ä½¿ç”¨Junit4è¿›è¡Œå•å…ƒæµ‹è¯•å®‰è£…eclipseçš„æ—¶å€™ï¼Œåº”è¯¥å·²ç»æœ‰äº†junitçš„jaråŒ…ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œå¯ä»¥è‡ªå·±åŽ»mavenä»“åº“æœç´¢ä¸‹è½½ã€‚ åœ¨eclipseä¸­ä½¿ç”¨Junit4è¿›è¡Œå•å…ƒæµ‹è¯• ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä¼šæŠŠä¸Šè¿°çš„æ–¹æ³•è‡ªå·±å®žè·µå¹¶å†™åœ¨ä¸‹é¢ï¼š ä¸è¦ç›´æŽ¥finishã€‚ç‚¹å‡»nextï¼Œä½ å°†å¯ä»¥é€‰æ‹©å¯¹å“ªäº›æ–¹æ³•è¿›è¡Œæµ‹è¯•ï¼Œeclipseå°±ä¼šè‡ªåŠ¨å¸®ä½ å‘½åï¼ˆwhich is very essentialï¼‰ çœ‹ï¼]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
        <category>å®žéªŒå®¤</category>
      </categories>
      <tags>
        <tag>å®žéªŒå®¤</tag>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
        <tag>æ¨¡æ‹Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç½‘ç»œåº”ç”¨å±‚ä¹‹ç•ªå¤–äºŒ]]></title>
    <url>%2F2017%2F11%2F04%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E5%B1%82%E7%95%AA%E5%A4%96%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[å‰è¨€å…¶å®žè¿™é‡Œè¯¥æ˜¯è¿è¾“å±‚ç•ªå¤–â€¦.ä½†æ˜¯è¿™æ˜¯åº”ç”¨å±‚ä½œä¸šå•¦ã€‚ å¤šç”¨æˆ·å¹¶å‘è®¿é—®ä¸Žå¯é æ–‡ä»¶ä¼ è¾“ï¼Œä¸èƒ½æœ‰ä¸‹è½½å¤§å°çš„é™åˆ¶ã€‚ ä¸ºäº†ç”¨UDPå®žçŽ°å¤šç”¨æˆ·å¹¶å‘è®¿é—®ï¼Œä¸€å®šæ˜¯éœ€è¦ä½¿ç”¨å¤šä¸ªsocketã€‚ä»¿ç…§FTPçš„åè®®è®¾è®¡ï¼šä½¿ç”¨ä¸€ä¸ªUDPçš„socketåœ¨masterè¿›è¡Œç›‘å¬ï¼Œè¿™ä¸ªsocketç»‘å®šä¸€ä¸ªç¡®å®šçš„ç«¯å£å·ï¼Œç”¨æˆ·å®¢æˆ·æœºè¿žæŽ¥æœåŠ¡å™¨å‘è¯·æ±‚ä½¿ç”¨ã€‚ è€ƒè™‘çš„è¯·æ±‚æ¯”è¾ƒå°ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªåŒ…ä¼ é€å®Œæˆï¼š Serveråœ¨ç«¯å£å·Xè¿›è¡Œç›‘å¬ã€‚ å°†æœ‰ä¸€ä¸ªNã€‚ä¸€ä¸ªclientè¦æ±‚è¿žæŽ¥ï¼Œå‘é€è¯·æ±‚ä¹‹åŽç«‹å³forkä¸€ä¸ªå­è¿›ç¨‹ï¼Œä»ç„¶ä½¿ç”¨è¿™ä¸ªsocketï¼Œç«‹å³è¿›å…¥å‡†å¤‡æŽ¥æ”¶çš„çŠ¶æ€ã€‚Serveræ”¶åˆ°äº†ï¼Œç«‹å³forkä¸€ä¸ªå­çº¿ç¨‹ï¼Œmasterç»§ç»­ç›‘å¬ï¼Œç¡®ä¿å…¶ä»–clientçš„è¯·æ±‚èƒ½è¢«æŽ¥æ”¶åˆ°ã€‚å­çº¿ç¨‹æ–°å»ºä¸€ä¸ªUDPçš„socketï¼Œå‡†å¤‡è¿›è¡ŒæŽ¥æ”¶ã€‚ç”±äºŽUDPçš„ä¸å¯é ï¼Œå¸Œæœ›åœ¨ä¼ è¾“æ•°æ®çš„æ—¶å€™ï¼ŒServeråº”è¯¥é¦–å…ˆï¼Œåœ¨forkå‡ºå­çº¿ç¨‹ä¹‹åŽç«‹å³å¯¹å‘½ä»¤è¯·æ±‚è¿›è¡Œåˆ†æžï¼Œå‘Šè¯‰clientä¸€å…±è¦ç©¿å¤šå°‘ä¸ªåŒ…ã€‚ï¼ˆå› ä¸ºåœ¨nç»“æŸä¹‹åŽï¼Œclientçš„å­çº¿ç¨‹å°±ä¼šç»“æŸã€‚å¦‚æžœä¸é‡‡ç”¨nç»“æŸå­çº¿ç¨‹å°±ç»“æŸï¼Œè‚¯å®šéœ€è¦æœ‰ä¸€ä¸ªä¾‹å¦‚ï¼Œé‡Œæœ€åŽä¸€ä¸ªåŒ…recvä¹‹åŽå¤šä¹…endã€‚è¿™æ ·åº”è¯¥æ˜¯ä¸å¤ªå¯é çš„â€¦å¯¹äºŽserverï¼Œéœ€è¦æœ‰è¶…æ—¶é‡ä¼ ã€‚emmmm å…¶å®žè¿™æ ·ä¹Ÿè¡Œï¼š clientå­çº¿ç¨‹ç«‹å³ç­‰å¾…serverä¼ å›žçš„æ•°æ®ã€‚åŒæ—¶å¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¦‚æžœè¶…è¿‡äº†ä¸€å®šæ—¶é—´ï¼Œåæ­£ä¹Ÿæ˜¯åŒä¸€ä¸ªsocketï¼Œå°±å†é‡ä¼ ï¼Œç„¶åŽåŽ»ç­‰ã€‚ serverå‘¢ï¼Œåœ¨å­çº¿ç¨‹forkå‡ºä¹‹åŽå°±åŽ»åˆ†æžå‘½ä»¤ï¼Œç„¶åŽå¼€å§‹ä¼ åŒ…ã€‚æ¯ä¸€ä¸ªåŒ…æœ‰ä¸€ä¸ªåºåˆ—å·ã€‚é‡‡ç”¨é€‰æ‹©é‡ä¼ çš„æœºåˆ¶è¿›è¡Œæ–‡ä»¶ä¿¡æ¯çš„ä¼ è¾“ã€‚å½“å‘é€ç«¯çš„æ‰€æœ‰å‘å‡ºçš„åŒ…å·²ç»å‘é€å®Œæ¯•å¹¶ä¸”æ‰€æœ‰çš„ä¸€å‘é€åŒ…éƒ½å¾—åˆ°å›žæ‰§ç¡®è®¤ä¹‹åŽï¼Œå‘æŽ¥æ”¶ç«¯å‘é€æœ€ç»ˆçš„å‘é€å®Œæ¯•åŒ…ã€‚è¿™ä¸ªåŒ…åœ¨å‘é€å®Œä¹‹åŽï¼ŒclientæŽ¥å—åˆ°ä¹‹åŽå¿…é¡»ç»™ACKã€‚serveræ”¶åˆ°ACKä¹‹åŽæ‰èƒ½å…³é—­ã€‚ æœ‰çŠ¶å†µï¼šå¦‚æžœclientæ²¡æŽ¥åˆ°ä¿¡æ¯æˆ–è€…ä¿¡æ¯é”™äº†ï¼ŒæŒ‰ç…§é€‰æ‹©é‡ä¼ ï¼Œä¸ä¼šæœ‰åŠ¨ä½œï¼Œserveré‡ä¼ æ²¡æ¯›ç—…ï¼›å¦‚æžœclientç»™çš„ACKä¸¢äº†ï¼Œserverä¸èƒ½ç¡®å®šclientå·²ç»æ”¶åˆ°ï¼Œä¹Ÿä¼šé‡ä¼ ï¼Œæ‰€ä»¥clientä¸å¯èƒ½åœ¨å‘é€å®ŒACKå°±å…³é—­ï¼Œè€Œæ˜¯å½±è¯¥ç­‰å¾…serverçš„å›žæ‰§ï¼Œè®©serverçŸ¥é“æˆ‘å·²ç»çŸ¥é“æˆ‘æ‹¿åˆ°å®Œæ•´çš„åŒ…äº†ã€‚ä¸€æ—¦ç­‰åˆ°ï¼Œç«‹å³å…³é—­ã€‚æ‰€ä»¥clientè¿™è¾¹å¯¹äºŽæœ€åŽä¸€ä¸ªåŒ…çš„åŠ¨ä½œæ˜¯ï¼šrecv-&gt;æ”¶åˆ°é”™æŠ¥ï¼Œä¸åŠ¨ï¼Œç­‰é‡ä¼ /æ”¶åˆ°å¯¹çš„åŒ…ï¼Œå›žå¤ACKåŒæ—¶å¯åŠ¨ä¸€ä¸ªè¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œå¼€å§‹æŽ¥æ”¶serverçš„å›žæ‰§ï¼Œä¸ç®¡æŽ¥å—åˆ°äº†ä»€ä¹ˆï¼Œå…³é—­ã€‚ï¼ˆå› ä¸ºè¿™ä¸ªæ—¶å€™serveråªè¦æ”¶åˆ°äº†clientçš„ä¸œè¥¿å°±è¯æ˜Žclientè‚¯å®šå·²ç»çŸ¥é“åŒ…å·²ç»ä¼ å®Œäº†ï¼‰å› ä¸ºserveræœ€ç»ˆåªå‘é€ä¸€æ¬¡ï¼Œå¦‚æžœclientè¿žç€å¾ˆå¤šæ¬¡è¶…æ—¶é‡ä¼ éƒ½æ²¡æœ‰æ”¶åˆ°å›žåº”ï¼Œå¾ˆå¤§å¯èƒ½å·²ç»serverå…³é—­äº†ï¼Œä¸ºäº†ä¸é™·å…¥æ— ä¼‘æ­¢çš„é‡ä¼ ï¼Œclientå…³é—­ã€‚ serverçš„åŠ¨ä½œæ˜¯-&gt;å‘é€æœ€åŽä¸€ä¸ªç»“æŸåŒ…-&gt;è¶…æ—¶é‡ä¼ /æŽ¥æ”¶åˆ°clientçš„ä¿¡æ¯-&gt;å‘é€ä¸€ä¸ªACKï¼Œå…³é—­ã€‚ serverä¹ŸçŸ¥é“clientè¿™æ—¶serverä¹Ÿå·²ç»å…³é—­ æœ€ç»ˆäº¤ä»˜ è®¡ç®—æœºç½‘ç»œä¹¦é¢ä½œä¸šï¼šç½‘ç»œåè®®è®¾è®¡ yayi2456 &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;æœ¬åè®®ä»¿ç…§äº†FTPåè®®ä»¥å…è®¸å¤šå®¢æˆ·æœºçš„å¹¶è¡Œæ“ä½œï¼Œä½¿ç”¨é€‰æ‹©é‡ä¼ çš„æ–¹æ³•åœ¨UDPçš„åŸºç¡€ä¸Šè¿›è¡Œä¸€å®šç¨‹åº¦çš„å¯é æ€§çš„ä¿è¯ä¸Žæ•ˆçŽ‡çš„ä¿è¯ï¼ŒåŠ å…¥å…¶ä»–æœºåˆ¶ä¿è¯å¤§æ–‡ä»¶çš„å¯é ä¼ è¾“ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;serverç«¯çš„ä¸»socketç»‘å®šä¸€ä¸ªç«¯å£å·ï¼Œè¿›è¡Œå¯¹å®¢æˆ·è¯·æ±‚çš„ç›‘å¬ã€‚ä¸€æ—¦ç›‘å¬åˆ°å®¢æˆ·æœºçš„è¯·æ±‚ï¼Œç«‹å³forkä¸€ä¸ªå­çº¿ç¨‹ï¼Œåœ¨å­çº¿ç¨‹ä¸­é‡æ–°ç»‘å®šä¸€ä¸ªsocketï¼Œç”±è¿™ä¸ªsocketä¸Žå®¢æˆ·æœºè¿›è¡Œé€šä¿¡ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;clientç«¯æ ¹æ®ç¨‹åºå¹¶è¡Œåº¦å¯é€‰æ‹©æ˜¯å¦éœ€è¦åœ¨å­çº¿ç¨‹å‘å‡ºè¯·æ±‚ï¼Œè¿™å–å†³äºŽä¸åŒçš„åº”ç”¨ç¨‹åºçš„åŠ¨ä½œï¼Œä¸åšè®¨è®ºã€‚æåˆ°clientçš„åŠ¨ä½œæ—¶ï¼Œå¹¶ä¸æŒ‡å®šæ˜¯åœ¨å“ªä¸ªè¿›ç¨‹ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;å°†è¯¥åè®®æè¿°å¦‚ä¸‹ï¼š &nbsp;&nbsp;&nbsp;&nbsp;serverç›‘å¬ç«¯å£Aï¼Œä¸€æ—¦ç›‘å¬åˆ°clientçš„è¯·æ±‚ï¼Œç«‹å³forkå­çº¿ç¨‹ã€‚åœ¨å­çº¿ç¨‹ä¸­å¯¹è¯¥è¯·æ±‚è¿›è¡Œåˆ†æžï¼Œå¹¶å†³å®šéœ€è¦å‘é€ç»™clientçš„æ•°æ®ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;clientå‘serverå‘é€è¯·æ±‚ï¼Œå¹¶å¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“è¶…è¿‡ä¸€å®šæ—¶é—´ä»æœªæ”¶åˆ°serverä¼ å›žçš„ç¬¬ä¸€ä¸ªåŒ…ï¼Œclienté‡æ–°å‘é€è¯·æ±‚ä¿¡æ¯ã€‚ä½¿recvbaseä¸º0ï¼Œæ”¶åˆ°ç¬¬ä¸€ä¸ªæ•°æ®åŒ…ä¹‹åŽï¼Œrecv=(recv+1)%(2*N)ï¼Œè¯¥å®šæ—¶å™¨å…³é—­ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;æ³¨ï¼šåœ¨serveræ”¶åˆ°è¯·æ±‚ä¹‹åŽï¼Œå¹¶æ²¡æœ‰ç«‹å³å‘é€ACKé€šçŸ¥clientè‡ªå·±å·²ç»æ”¶åˆ°äº†è¯·æ±‚ã€‚åŽŸå› åœ¨äºŽserveræœ€ç»ˆä¸€å®šä¼šå‘é€æ•°æ®ç»™clientï¼Œåªéœ€è¦æŠŠç¬¬ä¸€ä¸ªæ•°æ®åŒ…ä½œä¸ºserveræ”¶åˆ°çš„ç¡®è®¤ä¿¡æ¯å³å¯ï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†å¯é æ€§ä¿è¯æ‰€èŠ±è´¹çš„é¢å¤–çš„æ—¶é—´ã€‚ä½†æ˜¯ç”±äºŽserverå¯¹å‡†å¤‡å‘é€çš„æ•°æ®éœ€è¦åšä¸€å®šçš„å¤„ç†ï¼Œè¿™ä¸ªæ—¶å»¶å¯èƒ½ä¼šç¨é•¿ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;serverå¼€å§‹å‘clientå‘é€åŒ…ã€‚é‡‡ç”¨é€‰æ‹©é‡ä¼ æœºåˆ¶ï¼Œserverä¸ºæ¯ä¸€ä¸ªåŒ…é™„ä¸Šä¸€ä¸ªåºå·ï¼ŒåŒæ—¶åˆ©ç”¨UDPå¤´æœ¬èº«å…·æœ‰çš„checksumå­—æ®µè¿›è¡Œä¸€å®šç¨‹åº¦çš„æ£€é”™åˆ¤æ–­ã€‚serveræ¯æ¬¡æœ€å¤šä¼ é€Nä¸ªæŠ¥æ–‡æ®µï¼Œåè®®ä¸­å…·æœ‰2*Nä¸ªåºå·ã€‚åˆå§‹æ—¶ï¼Œå‘é€ç¼“å†²åŒºä¸­çš„sendbaseæ˜¯0ï¼Œserveræ¯ä¼ é€ä¸€ä¸ªæŠ¥æ–‡æ®µå°±ä¼šå¯åŠ¨ä¸€ä¸ªå¯¹åº”äºŽè¯¥æŠ¥æ–‡æ®µçš„å®šæ—¶å™¨ï¼Œå½“æŸä¸ªæŠ¥æ–‡æ®µçš„å®šæ—¶å™¨è¶…æ—¶ä¹‹åŽï¼Œserverå¯¹è¯¥æŠ¥æ–‡æ®µè¿›è¡Œé‡ä¼ ï¼›å½“serveræ”¶åˆ°äº†æŸä¸ªåºå·çš„æŠ¥æ–‡æ®µçš„ACKä¹‹åŽï¼Œå°†è¯¥åºå·ç½®ä¸ºâ€œå·²ç¡®è®¤â€ï¼Œå¦‚æžœè¯¥åºå·æ˜¯sendbaseï¼Œé‚£ä¹ˆå°†sendbase=(sendbase+1)%(2*N)ï¼Œå¦‚æžœsendbaseæ˜¯â€œå·²ç¡®è®¤â€ï¼Œå†å°†sendbase=(sendbase+1)%(2*N)ï¼Œç›´åˆ°sendbaseæ˜¯â€œå·²å‘é€ä½†æœªç¡®è®¤â€æˆ–æ˜¯â€œå¯ç”¨â€ã€‚åŒæ—¶ï¼Œå½“sendbaseæ”¹å˜æ—¶ï¼Œå¦‚æžœåŒ…å°šæœªå‘é€å®Œï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ–°çš„â€œå¯ç”¨â€æ¥å‘é€æ–°çš„æŠ¥æ–‡æ®µã€‚ &nbsp;&nbsp;&nbsp;&nbsp;clientæŽ¥å—åˆ°ç¬¬ä¸€ä¸ªæ•°æ®åŒ…ä¹‹åŽå…³é—­ç¬¬ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¹¶å‘æœåŠ¡å™¨å‘é€å¯¹ç¬¬ä¸€ä¸ªæ•°æ®åŒ…å¯¹åº”çš„åºå·çš„ACKï¼ŒéšåŽå¼€å§‹æŽ¥æ”¶å…¶ä»–æ•°æ®åŒ…ï¼Œæ¯æŽ¥æ”¶åˆ°ä¸€ä¸ªæ£€éªŒå’Œæ²¡æœ‰é”™çš„æ•°æ®åŒ…ï¼Œè¿”å›žä¸€ä¸ªå¯¹åº”è¯¥æ•°æ®åŒ…åºå·çš„ACKåŒ…ã€‚æ— è®ºæ˜¯ä¸æ˜¯serverç«¯æ²¡æœ‰æŽ¥æ”¶åˆ°ä¸Šä¸€ä¸ªå¯¹åº”è¯¥åºå·çš„ACKï¼Œè¿”å›žä¸€ä¸ªACKï¼Œå¯¹äºŽæœ€å¤§ä¸º2*Nçš„ç©ºé—´æ¥è¯´ï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚å¯¹äºŽåœ¨[recvbase,recvbase+N-1]ç©ºé—´ä¸­çš„åºå·å¯¹åº”çš„åŒ…åŠ ä»¥è§£æžé€ç»™åº”ç”¨å±‚ä½¿ç”¨æˆ–è€…æ˜¯ç¼“å­˜ä¹‹åŽå°†å¯¹åº”çš„åºå·æ ‡ä¸ºâ€œæŽ¥æ”¶å·²ç¡®è®¤â€ï¼Œè€Œå¦å¤–çš„åºå·å¯¹åº”çš„æ•°æ®åŒ…åªè¿”å›žACKï¼Œå¯¹æ•°æ®åŒ…ç›´æŽ¥ä¸¢å¼ƒã€‚æ¯æ¬¡æŽ¥æ”¶åˆ°ä¸€ä¸ªè¢«â€œæŽ¥æ”¶å·²ç¡®è®¤â€çš„æ•°æ®åŒ…ï¼Œå¦‚æžœè¯¥æ•°æ®åŒ…çš„åºå·æ˜¯recvbaseï¼Œrecv=(recv+1)%(2*N)ï¼Œå¦‚æžœè¿™æ—¶recvbaseå¯¹åº”åºå·ä»æ˜¯â€œæŽ¥æ”¶å·²ç¡®è®¤â€ï¼Œrecv=(recv+1)%(2*N)ï¼Œç›´åˆ°recvbaseå¯¹åº”åºå·æ˜¯â€œæœŸå¾…ä½†æœªæ”¶åˆ°â€æˆ–æ˜¯â€œå¯ç”¨â€ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;åœ¨æ‰€æœ‰çš„æœ‰ç”¨æ•°æ®åŒ…ä¼ é€å®Œæˆä¹‹åŽï¼Œserveréœ€è¦å‘ŠçŸ¥clientï¼Œæœ‰ç”¨çš„æ•°æ®å·²ç»ä¼ é€å®Œäº†ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;åœºæ™¯åˆ†æžå¦‚ä¸‹ï¼š &nbsp;&nbsp;&nbsp;&nbsp;å½“serverçš„æ‰€æœ‰å‘å‡ºçš„åŒ…å·²ç»å‘é€å®Œæ¯•å¹¶ä¸”æ‰€æœ‰çš„å·²å‘é€åŒ…éƒ½å¾—åˆ°å›žæ‰§ACKä¹‹åŽï¼Œå‘clientå‘é€æœ€ç»ˆçš„å‘é€å®Œæ¯•åŒ…ã€‚è¿™ä¸ªåŒ…åœ¨å‘é€å®Œä¹‹åŽï¼ŒclientæŽ¥æ”¶åˆ°ä¹‹åŽå¿…é¡»ç»™ACKã€‚serveræ”¶åˆ°ACKä¹‹åŽæ‰èƒ½å…³é—­ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´clientä¸çŸ¥é“è‡ªå·±å·²ç»æ‹¿åˆ°å®Œæ•´çš„æ•°æ®è€Œé™·å…¥ç©ºè½¬ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;å¦‚æžœclientæ²¡æŽ¥åˆ°æœ€ç»ˆåŒ…ä¿¡æ¯æˆ–è€…ä¿¡æ¯é”™äº†ï¼ŒæŒ‰ç…§é€‰æ‹©é‡ä¼ ï¼Œclientä¸ä¼šæœ‰åŠ¨ä½œï¼Œserverç­‰å¾…è¶…æ—¶ä¹‹åŽé‡ä¼ ï¼›å¦‚æžœclientå›žå¤çš„ACKä¸¢äº†ï¼Œserverä¸èƒ½ç¡®å®šclientå·²ç»æ”¶åˆ°ï¼Œå¿…é¡»é‡ä¼ æ¥ç¡®è®¤clientå·²ç»çŸ¥é“è‡ªå·±å¯ä»¥å…³é—­è¿žæŽ¥äº†ï¼Œæ‰€ä»¥clientä¸å¯èƒ½åœ¨å‘é€å®ŒACKå°±å…³é—­ï¼Œè€Œæ˜¯è¯¥ç­‰å¾…serverçš„å›žæ‰§ï¼Œè®©serverçŸ¥é“clientå·²ç»çŸ¥é“clientæ‹¿åˆ°å®Œæ•´çš„åŒ…äº†ï¼Œå¦åˆ™å¯èƒ½ä¼šä½¿serveré™·å…¥æ— å°½çš„é‡ä¼ ã€‚ä¸€æ—¦ç­‰åˆ°serverçš„å›žæ‰§ï¼Œclientç«‹å³å…³é—­ã€‚è‹¥è®¸ä¹…éƒ½æœªç­‰åˆ°å›žæ‰§ï¼Œå…³é—­ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;ä¸‹é¢å¯¹æœ€åŽçš„åŠ¨ä½œè¿›è¡Œæè¿°ï¼š &nbsp;&nbsp;&nbsp;&nbsp;serverçš„åŠ¨ä½œæ˜¯ï¼šå‘é€æœ€åŽä¸€ä¸ªç»“æŸåŒ…ï¼Œå¯åŠ¨å®šæ—¶å™¨ï¼Œè‹¥è¶…æ—¶åˆ™è¿›è¡Œé‡ä¼ ï¼›ç›´åˆ°æŽ¥æ”¶åˆ°clientçš„ä¿¡æ¯ä¹‹åŽï¼Œå…³é—­å®šæ—¶å™¨ï¼Œserverå‘é€ä¸€ä¸ªACKï¼Œç«‹å³å…³é—­ã€‚ &nbsp;&nbsp;&nbsp;&nbsp;clientæœ€ç»ˆçš„åŠ¨ä½œæ˜¯ï¼šç­‰å¾…æŽ¥æ”¶æ•°æ®ï¼Œå¦‚æžœæ”¶åˆ°é”™è¯¯çš„åŒ…ï¼Œç­‰é‡ä¼ ï¼›å¦‚æžœæ”¶åˆ°å¯¹çš„åŒ…ï¼Œå›žå¤ACKåŒæ—¶å¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¯åŠ¨è¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œå¹¶å¼€å§‹æŽ¥æ”¶serverçš„å›žæ‰§ï¼Œä¸ç®¡æŽ¥å—åˆ°äº†ä»€ä¹ˆï¼Œå…³é—­ã€‚è‹¥è¶…æ—¶ä¸€å®šæ¬¡æ•°ä¹‹åŽä»æœªæŽ¥æ”¶åˆ°serverçš„å›žæ‰§ï¼Œå› ä¸ºserveræœ€ç»ˆåªå‘é€ä¸€æ¬¡ï¼Œå¦‚æžœclientè¿žç€å¾ˆå¤šæ¬¡è¶…æ—¶é‡ä¼ éƒ½æ²¡æœ‰æ”¶åˆ°å›žåº”ï¼Œå¾ˆå¤§å¯èƒ½å·²ç»serverå…³é—­äº†ï¼Œä¸ºäº†ä¸é™·å…¥æ— ä¼‘æ­¢çš„é‡ä¼ ï¼Œclientå…³é—­ã€‚ ä»Žå®è§‚çš„è§’åº¦æ¥çœ‹ï¼Œå®¢æˆ·æœºä¸ŽæœåŠ¡å™¨çš„äº¤äº’æ˜¯ï¼š æ‰©å±•FSMï¼š serverï¼š clientï¼š]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
        <category>å¤§ä¸‰çš„è¯¾</category>
        <category>ä½œä¸š</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œè¯¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç½‘ç»œç•ªå¤–ä¸‰]]></title>
    <url>%2F2017%2F11%2F04%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%95%AA%E5%A4%963%2F</url>
    <content type="text"><![CDATA[ç¬¬äºŒæ¬¡ä¹¦é¢ä½œä¸š åœ¨ç›®å‰çš„æŠ¥æ–‡äº¤æ¢ç½‘ç»œä¸­ï¼ˆå¦‚Internetï¼‰ï¼Œä¸»è¦é‡‡ç”¨å­˜è´®è½¬å‘å¼äº¤æ¢ã€‚æºä¸»æœºé€šå¸¸å°†åº”ç”¨å±‚è¾ƒé•¿çš„æ¶ˆæ¯ï¼ˆä¾‹å¦‚ï¼Œå›¾åƒã€è§†é¢‘ç­‰ï¼‰åˆ†æˆå°çš„æŠ¥æ–‡æ®µåœ¨ç½‘ç»œä¸­è¿›è¡Œä¼ è¾“ï¼ŒæŽ¥æ”¶ç«¯å†å°†æŠ¥æ–‡æ®µç»„åˆæˆåŽŸå§‹çš„æ¶ˆæ¯ï¼Œæäº¤ç»™åº”ç”¨å±‚ã€‚ä¸‹é¢æˆ‘ä»¬ç»™å‡ºäº†æ¶ˆæ¯ç›´æŽ¥ä¼ è¾“ï¼ˆä¸åˆ†æŠ¥æ–‡æ®µï¼‰å’Œåˆ†æˆæŠ¥æ–‡æ®µä¼ è¾“çš„ç¤ºæ„å›¾ï¼Œå‡è®¾æ¶ˆæ¯é•¿åº¦ä¸º8Ã—106 bitsï¼Œæ¯æ¡é“¾è·¯çš„ä¼ è¾“é€ŸçŽ‡ä¸º2Mbpsï¼Œå¿½ç•¥ä¼ æ’­å»¶æ—¶ã€æŽ’é˜Ÿå»¶æ—¶å’Œå¤„ç†æ—¶é—´ã€‚è¯·å›žç­”ä¸‹åˆ—é—®é¢˜ï¼š 1) å¦‚å›¾aæ‰€ç¤ºï¼Œå¦‚æžœæ¶ˆæ¯ä¸è¿›è¡Œåˆ†æ®µç›´æŽ¥è¿›è¡Œä¼ è¾“ï¼Œæ¯å°äº¤æ¢è®¾å¤‡å‡é‡‡å–å­˜å‚¨è½¬å‘å¼äº¤æ¢ï¼Œè¯·è®¡ç®—æ¶ˆæ¯ä»Žæºä¸»æœºå‘å‡ºåˆ°ç›®çš„ä¸»æœºå®Œå…¨æŽ¥æ”¶æ‰€éœ€çš„æ—¶é—´ï¼› ç­”ï¼š$t=3*8Mb/2Mbps=12s$ 2) å¦‚å›¾bæ‰€ç¤ºï¼Œå¦‚æžœæ¶ˆæ¯è¢«åˆ†æˆ800ä¸ªæŠ¥æ–‡æ®µè¿›è¡Œä¼ è¾“ï¼ˆå¿½ç•¥å„å±‚çš„å°è£…ï¼‰ï¼Œæ¯ä¸ªæŠ¥æ–‡æ®µé•¿10000 bitsï¼Œè¯·è®¡ç®—æ¶ˆæ¯ä»Žæºä¸»æœºå‘å‡ºåˆ°ç›®çš„ä¸»æœºå®Œå…¨æŽ¥æ”¶æ‰€éœ€çš„æ—¶é—´ï¼› ç­”ï¼š$t=3*10000/2M+799*10000/2M=802*0.01M/2M=4.01s$ 3) æ¯”è¾ƒæ¶ˆæ¯äº¤æ¢å’ŒæŠ¥æ–‡äº¤æ¢çš„ä¼˜ç¼ºç‚¹ï¼Œé™¤äº†ä¼ è¾“å»¶æ—¶æ–¹é¢çš„è€ƒè™‘ï¼Œé‡‡ç”¨æŠ¥æ–‡äº¤æ¢è¿˜æœ‰å“ªäº›å…¶ä»–æ–¹é¢çš„è€ƒè™‘ï¼Ÿ ç­”ï¼šæ¶ˆæ¯äº¤æ¢çœåŽ»äº†å¯¹åˆ†ç‰‡æ•°æ®è¿›è¡Œå¤„ç†åˆå¹¶çš„æ—¶é—´ã€å‡å°‘äº†é¦–éƒ¨çš„æ•°æ®ä¼ è¾“ï¼Œä½†æ˜¯æ—¶å»¶é•¿ï¼Œå¯èƒ½ä¼šé•¿æ—¶é—´å ç”¨è·¯ç”±å™¨çš„å¤§é‡ç¼“å­˜ç©ºé—´ã€‚æŠ¥æ–‡äº¤æ¢å¤§å¤§å‡å°‘äº†æ—¶å»¶ï¼ŒåŒæ—¶ç”±äºŽæ•°æ®çš„å‡å°‘æ£€é”™ä¹Ÿå˜å¾—æ›´åŠ å®¹æ˜“ï¼Œé”™è¯¯å‘ç”ŸçŽ‡å‡å°ï¼Œå¯é æ€§æå‡ï¼Œä½†æ˜¯éœ€è¦é¢å¤–ä¼ é€é¦–éƒ¨æ•°æ®ï¼Œå¹¶ä¸”éœ€è¦æ³¨æ„æŠ¥æ–‡çš„é¡ºåºåˆå¹¶ï¼Œè¿˜ä¼šå¸¦æ¥æŽ’é˜Ÿæ—¶å»¶ã€‚é‡‡ç”¨æŠ¥æ–‡äº¤æ¢é™¤äº†å¯¹æ—¶å»¶æ–¹é¢çš„è€ƒè™‘ï¼Œè¿˜æœ‰å¯¹å‘é€ä¼˜å…ˆçº§ä»¥åŠæ•°æ®å¯é æ€§çš„è€ƒè™‘ã€‚å¦å¤–ï¼Œè¿‡é•¿çš„æ¶ˆæ¯å µå¡žè·¯ç”±å™¨å¯èƒ½å¯¼è‡´å…¶ä»–æ¶ˆæ¯ä¸èƒ½åŠæ—¶é€å¾€ç›®çš„åœ°è€Œå¸¦æ¥ä¸€ç³»åˆ—é—®é¢˜ã€‚ å‘é€è€…Aå’ŒæŽ¥æ”¶è€…Bä¹‹é—´ä½¿ç”¨TCPåè®®è¿›è¡Œé€šä¿¡ï¼ˆAå‘é€æ•°æ®ï¼ŒBå›žé€ACKï¼‰ã€‚å‡è®¾TCPè¿žæŽ¥å»ºç«‹ä¹‹åŽAç«‹å³å¼€å§‹å‘é€æ•°æ®ï¼ˆç¬¬ä¸€ä¸ªæ•°æ®æ®µéšä¸‰æ¬¡æ¡æ‰‹ä¸­çš„æœ€åŽä¸€ä¸ªACKä¸€åŒå‘é€ï¼Œåˆå§‹åºåˆ—å·ä¸º1ï¼‰ã€‚é“¾è·¯å¸¦å®½ï¼ˆä¼ è¾“é€ŸçŽ‡ï¼‰ä¸º100 Mbpsï¼Œå¾€è¿”å»¶è¿ŸRTTä¸º10msï¼ŒMSSä¸º1000å­—èŠ‚ï¼Œæœ€åˆçš„æ‹¥å¡žçª—å£è®¾æˆ1ä¸ªMSSï¼Œå‡è®¾æŽ¥æ”¶ç«¯æœ‰è¶³å¤Ÿå¤§çš„ç¼“å­˜ç©ºé—´ï¼Œæ‹¥å¡žæŽ§åˆ¶çš„åˆå§‹é˜ˆå€¼è®¾ä¸º64ã€‚è¯•å›žç­”ä¸‹åˆ—é—®é¢˜ï¼š1) å‡è®¾Aç¼“å†²åŒºä¸­æœ‰7000å­—èŠ‚æ•°æ®è¦å‘Bå‘é€ï¼Œå‘é€çš„æ¯ä¸ªæ•°æ®æ®µå‡åŒ…å«1000å­—èŠ‚æ•°æ®ï¼Œè¯·ç”»å‡ºAã€Bä¹‹é—´çš„äº¤äº’è¿‡ç¨‹ï¼Œå¹¶è®¡ç®—æ‰€éœ€çš„æ—¶é—´ï¼ˆä»Žå‘èµ·è¿žæŽ¥å¼€å§‹è®¡ç®—ï¼Œè¦æ±‚ç»™å‡ºè®¡ç®—è¿‡ç¨‹ï¼‰ã€‚ ä»Žå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼šä¸€å…±ç»è¿‡äº†4æ¬¡RTTä»¥åŠ3æ®µå°†æ•°æ®æŠ¥é€å‡ºçš„æ—¶é—´ï¼ŒåŠ ä¸ŠTCP/IPé¦–éƒ¨å­—èŠ‚æ•°è®¤ä¸ºæ˜¯40ï¼Œå› æ­¤ï¼šæ—¶é—´ï¼š$t=4*RTT+3*((40+1000)*8/100M)=40+0.2496ms=40.2496ms$ 2) å¿«é€Ÿé‡ä¼ æœºåˆ¶æ˜¯å¯¹TCPæ€§èƒ½çš„ä¼˜åŒ–ï¼Œè€ƒè™‘ç¬¬ä¸€é—®ä¸­çš„ä¼ è¾“æƒ…å†µï¼Œå¦‚æžœä¼ è¾“è¿‡ç¨‹ä¸­æœ‰æ•°æ®æ®µä¸¢å¤±ï¼Œé‚£ä¹ˆç¬¬å‡ ä¸ªæ•°æ®æ®µçš„ä¸¢å¤±æœ‰å¯èƒ½è§¦å‘Açš„å¿«é€Ÿé‡ä¼ ï¼Ÿè§£é‡ŠåŽŸå› ã€‚ ç­”ï¼šæ‰¿è½½æ•°æ®çš„ç¬¬å››ï¼ˆseq=3002ï¼‰ä¸ªï¼šå¦‚æžœç¬¬ä¸€ä¸ªæ•°æ®åŒ…å‘ç”Ÿä¸¢å¤±ï¼ŒBä¸ä¼šå‘é€ACKï¼Œå°†ä¼šå› æ­¤è¶…æ—¶å¼•å‘æ…¢å¯åŠ¨ï¼›å¦‚æžœç¬¬äºŒä¸ªä¸¢å¤±ï¼Œåªä¼šå‘é€ä¸€ä¸ªå†—ä½™ACKï¼Œç„¶åŽè¶…æ—¶è¿›å…¥æ…¢å¯åŠ¨ã€‚å¦‚æžœç¬¬ä¸‰ä¸ªä¸¢å¤±ï¼ŒæŽ¥ä¸‹æ¥å¯ä»¥è¿žç»­å‘é€2ä¸ªæŠ¥æ–‡æ®µï¼Œç”±äºŽç¬¬ä¸‰ä¸ªåŒ…æ— æ³•è¢«ç¡®è®¤ï¼Œåªèƒ½å›žæ”¶ä¸¤ä¸ªå†—ä½™ACKã€‚å¦‚æžœç¬¬å››ä¸ªä¸¢å¤±ï¼Œ5ã€6ã€7éƒ½æ­£ç¡®åˆ°è¾¾ï¼Œå°†ä¼šå¼•èµ·3ä¸ªå†—ä½™ACKï¼Œä¼šå¼•å‘å¿«é€Ÿé‡ä¼ ã€‚äº”ã€å…­ã€ä¸ƒä¸¢å¤±éƒ½ä¸èƒ½å¼•å‘å¿«é€Ÿé‡ä¼ äº†ã€‚ 3) å‡è®¾å‘é€ç«¯å‘é€ä¸€ç³»åˆ—æ•°æ®æ®µï¼ˆ1ã€2ã€3â€¦â€¦nï¼‰ï¼Œä½†Aä¸€ç›´æœªæ”¶åˆ°ä»»ä½•ç¡®è®¤ï¼ˆACKï¼‰ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæ•°æ®æ®µçš„é‡ä¼ å®šæ—¶å™¨ä¼šé¦–å…ˆè¶…æ—¶ï¼ŒAå°†TCPçš„æ‹¥å¡žçª—å£è®¾ç½®æˆ1ä¸ªMSSï¼Œå¹¶é‡ä¼ ç¬¬ä¸€ä¸ªæ•°æ®æ®µã€‚å¦‚æžœæˆ‘ä»¬çŽ°åœ¨ä¿®æ”¹TCPåè®®ï¼Œåœ¨ä¸Šè¿°æƒ…å†µä¸‹ä¸é‡ä¼ ç¬¬ä¸€ä¸ªæ•°æ®æ®µï¼Œè€Œæ”¹ä¸ºå‘é€ç¬¬n+1ä¸ªæ•°æ®æ®µï¼Œè¯·ä½ åˆ†æžåœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¿™ç§åšæ³•æœ‰åˆ©ï¼Œåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¸åˆ©ã€‚ ç­”ï¼šå¦‚æžœæŽ¥æ”¶æ–¹å…¶å®žå…¨éƒ¨æ”¶åˆ°äº†åŒ…ï¼Œåªæ˜¯å‘é€æ–¹çš„å®šæ—¶å™¨æ—¶é—´è®¾ç½®å¤ªçŸ­æˆ–æ˜¯çªç„¶æ‹¥æŒ¤çš„ç½‘ç»œå¯¼è‡´åŒ…ä¼ è¾“å‡ç¼“ï¼Œè¿™æ—¶å‘é€ç¬¬n+1ä¸ªæ•°æ®æ®µæ˜¯æœ‰åˆ©çš„ã€‚å› ä¸ºè¿™æ—¶å‰é¢æ•°æ®æ®µçš„ACKä¼šç›¸ç»§åˆ°è¾¾ï¼Œn+1åŒ…æ˜¯æœ€ç»ˆä¸€å®šä¼šå‘é€å‡ºåŽ»çš„åŒ…ï¼Œå› æ­¤æ‰€æœ‰å·¥ä½œéƒ½ä¸æ˜¯æ— ç”¨åŠŸï¼›å¦‚æžœé‡ä¼ 1åŒ…ï¼Œé‚£ä¹ˆåœ¨1åŒ…åŽŸæœ¬çš„ACKåˆ°è¾¾ä¹‹åŽï¼Œè¿™ä¸ªè¢«é‡ä¼ çš„åŒ…å°±æ˜¯å†—ä½™åŒ…ï¼Œå°†ä¼šè¢«ä¸¢å¼ƒè¿˜ä¼šæµªè´¹èµ„æºã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œæ¯”å¦‚æœ‰éƒ¨åˆ†åŒ…ç”šè‡³å…¨éƒ¨åŒ…æ²¡æœ‰æ”¶åˆ°ï¼Œè¿™ç§æœºåˆ¶ä¼¼ä¹Žå¹¶ä¸èƒ½æœ‰æ•ˆåœ°è§£å†³é—®é¢˜ï¼šæ¯”å¦‚æœ‰ä¸€ä¸ªåŒ…xï¼ˆ0&lt;=x&lt;=nï¼‰æœªæ”¶åˆ°ï¼Œè¿™æ—¶æ— è®ºé‡ä¼ å¤šå°‘æ¬¡n+1åŒ…ï¼Œæœ€ç»ˆå¯èƒ½æ”¶åˆ°çš„éƒ½æ˜¯ACK=xï¼Œé™·å…¥æ— å°½çš„å¾ªçŽ¯ã€‚ ç¬¬ä¸‰æ¬¡ä¹¦é¢ä½œä¸š]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
        <category>å¤§ä¸‰çš„è¯¾</category>
        <category>ä½œä¸š</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œè¯¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¦†åƒç§‹1]]></title>
    <url>%2F2017%2F11%2F03%2F%E8%A6%86%E5%8D%83%E7%A7%8B1%2F</url>
    <content type="text"><![CDATA[å¤œè‰²å‡‰å°†å†›åºœçš„æµ·æ£ å¼€äº†ã€‚ ç²‰ç²‰å«©å«©ï¼Œä¸€ç°‡ä¸€ç°‡çš„ï¼Œç»†é£Žå¹æ¥ï¼ŒèŠ±æœµè½»è½»è½åœ¨åœ°ä¸Šï¼ŒæŠŠè¿™ä¸ªå°å›­è¡¬å‡ºå‡ åˆ†è¯—æ„ã€‚ åªæ˜¯åºœä¸Šå…‰æ™¯å´ä¸å¦‚è¿™æµ·æ£ ç¹ç››ã€‚ å‰æ—¥é‡Œå‰çº¿ä¼ å›žæ¥æ¶ˆæ¯ï¼Œè¯´æ˜¯è¿™å®…é™¢çš„ä¸»äººè¢«ä¿˜äº†ã€‚è¢«ä¿˜äº†ï¼Œæ˜¯ä¸è¦ç´§ï¼Œè¦ç´§çš„æ˜¯ä»–å¸®ç€æ•Œå†›æˆªæ–­äº†å·±æ–¹ç²®è‰ï¼Œæ€äº†ä¸€åå‰¯å°†ã€‚ çš‡å¸çŸ¥é“ä¹‹åŽé¾™é¢œå¤§æ€’ï¼Œç›´æŽ¥ä¸‹ä»¤å°äº†å°†å†›åºœã€‚ç®¡ä½ æ˜¯çœŸé™è¿˜æ˜¯å‡æ„ã€‚ å¤§è‡£ä»¬éƒ½ä»¥ä¸ºï¼ŒåŠŸé«˜ç›–ä¸»ï¼Œè€å°†å†›å³ä½¿ä¸é™ï¼Œå›žæ¥ä¹Ÿé£Žå…‰ä¸äº†å‡ æ—¥äº†ï¼Œæ²¡å·®ã€‚ å¹³æ°‘æ…·æ…¨æ¿€æ˜‚ï¼Œå¸‚é¢ä¸Šçš„ä¹¦é‡Œï¼ŒèŒ¶é¦†é‡Œï¼Œç”šè‡³é£Žæœˆé‡Œéƒ½æ˜¯å¯¹è€å°†å†›å›å›½çš„ä¸è€»ï¼Œè¿™äº›æ¨¡ç³Šçš„é¢å­”åœ¨èˆŒç¿èŽ²èŠ±çš„æ—¶å€™ï¼Œé€‰æ‹©æ€§çš„å¿˜è®°äº†è€å°†å†›å½“å¹´æˆ˜ç»©çš„è¾‰ç…Œã€‚ å½“è¡—æœˆè‰²åº”å¦‚æ°´â€œåƒéœœâ€”â€”â€ï¼Œæ‰“æ‰®ç²¾è‡´çš„å¥³äººç‹¬è‡ªä»Žå»Šä¸­èµ°æ¥ï¼Œåœ¨å‡ æ­¥ä¹‹å¤–ç«™å®šï¼Œå”¤ã€‚ ååœ¨å°äº­ä¸­çš„å¥³å­©å¾ªç€å£°éŸ³å¿½åœ°å›žå¤´ï¼ŒæŠ¬ç€è„¸å«ï¼šâ€œå¨˜â€”â€”â€ã€‚]]></content>
      <categories>
        <category>æˆ‘çš„æ•…äº‹</category>
        <category>æž¯éª¨æµæ²™</category>
        <category>è¦†åƒç§‹</category>
      </categories>
      <tags>
        <tag>åƒéœœ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç½‘ç»œè¿è¾“å±‚]]></title>
    <url>%2F2017%2F11%2F02%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%BF%90%E8%BE%93%E5%B1%82%2F</url>
    <content type="text"><![CDATA[è¿™äº›ä¸œè¥¿æ˜¯å¾ˆç®€å•ï¼Œå¯æ˜¯æƒ³æ¥æƒ³åŽ»è¿˜æ˜¯å†³å®šè®°å½•ä¸€ä¸‹ï¼Œä»¥å…ä»¥åŽé‡åˆ°åƒC++è¯­æ³•ä¸çŸ¥é“ä¸€æ ·çš„å°´å°¬ã€‚ æ¦‚è¿°ä¸Žè¿è¾“å±‚æœåŠ¡è¿è¾“å±‚çš„åè®®æä¾›çš„æ˜¯é€»è¾‘é€šä¿¡ï¼Œå¹¶ä¸æ˜¯ç›´æŽ¥ç›¸è¿žçš„ã€‚ çŽ°åœ¨æˆ‘ä»¬èŠçš„æ˜¯å¯¹ç­‰å±‚é€šä¿¡ï¼Œæœ¬æœºçš„è¿è¾“å±‚å‘æ•°æ®ç»™å…¶ä»–æœºå™¨çš„è¿è¾“å±‚ã€‚è¿è¾“å±‚åè®®åœ¨ç«¯ç³»ç»Ÿé‡Œé¢ï¼Œå¹¶ä¸æ˜¯åœ¨è·¯ç”±å™¨é‡Œã€‚ å®žé™…ä¸Šï¼Œå½“åº”ç”¨ç¨‹åºå¸Œæœ›èƒ½ä¸Žå…¶ä»–è®¾å¤‡è¿›è¡Œé€šä¿¡ï¼Œè°ƒç”¨è¿è¾“å±‚ï¼Œç»™è¿è¾“å±‚ä¸€å †ä¿¡æ¯ã€‚è¿è¾“å±‚å¯èƒ½ä¼šæŠŠè¿™äº›ä¿¡æ¯åˆ†æ®µï¼Œç„¶åŽåŠ ä¸Šå¤´éƒ¨ä¿¡æ¯æˆä¸ºæŠ¥æ–‡æ®µã€‚æŠ¥æ–‡æ®µäº¤ç»™ç½‘ç»œå±‚ï¼Œç½‘ç»œå±‚å†å°è£…æˆæ•°æ®æŠ¥å†å‘ç›®çš„åœ°å‘é€ã€‚åˆ°äº†ç›®çš„åœ°ä¹‹åŽåšä¸€ä¸ªç›¸åçš„åŠ¨ä½œï¼Œé€ç»™åº”ç”¨å±‚ä½¿ç”¨ã€‚éœ€è¦åŒºåˆ†æ¸…æ¥šçš„æ˜¯ï¼Œåˆ¶å®šç›®çš„åœ°ã€å†³å®šæŠ¥æ–‡æ®µæ€Žä¹ˆäº§ç”Ÿã€å†³å®šæŠ¥æ–‡æ®µå¦‚ä½•åˆå¹¶éƒ½æ˜¯è¿è¾“å±‚çš„å·¥ä½œï¼Œç½‘ç»œå±‚ç›¸å½“äºŽé€ä¿¡çš„é‚®å·®ï¼Œåªè´Ÿè´£ä¼ è¾“ã€‚ä½†æ˜¯è¯åˆè¯´å›žæ¥äº†ï¼Œç½‘ç»œå±‚æ›´åŠ åº•å±‚ï¼Œç½‘ç»œå±‚æä¾›äº†æ€Žæ ·çš„æœåŠ¡ã€æœ‰å¤šå¤§çš„å¸¦å®½éƒ½é™åˆ¶äº†è¿è¾“å±‚çš„æœåŠ¡ã€‚ çŽ°åœ¨å› ç‰¹ç½‘çš„è¿è¾“å±‚ä¸»è¦æœ‰ä¸¤ä¸ªåè®®ï¼šUDPã€TCPã€‚UDPæ˜¯ä¸å¯é çš„ã€å¤šç›®çš„åœ°çš„ã€æ— åºçš„ä¼ è¾“ï¼›TCPæ˜¯é¢å‘è¿žæŽ¥çš„å¯é çš„ä¼ è¾“ã€‚å…·ä½“ç‰¹æ€§å°†åœ¨åŽé¢è®²åˆ°ã€‚ å› ç‰¹ç½‘çš„ç½‘ç»œå±‚åè®®æ˜¯IPåè®®ï¼ˆç½‘é™…åè®®ï¼‰ã€‚IPéžå¸¸ä¸å¯é ï¼Œä»–æ˜¯å°½åŠ›è€Œä¸ºäº¤ä»˜æœåŠ¡ï¼Œä¸€ä¸ç¡®ä¿æŠ¥æ–‡æ®µçš„äº¤ä»˜ï¼ŒäºŒä¸ä¿è¯æŠ¥æ–‡æ®µäº¤ä»˜çš„æŒ‰åºï¼Œä¸‰ä¸ä¿è¯æŠ¥æ–‡æ®µäº¤ä»˜çš„å®Œæ•´æ€§ï¼Œè¢«ç§°ä¸ºä¸å¯é æœåŠ¡ã€‚ TCPä¸ŽUDPçš„åŸºæœ¬èŒè´£æ˜¯å°†ä¸¤ä¸ªç«¯ç³»ç»Ÿä¹‹é—´çš„IPäº¤ä»˜æœåŠ¡æ‰©å±•ä¸ºè¿è¡Œåœ¨ä¸¤ä¸ªç«¯ç³»ç»Ÿä¹‹ä¸Šçš„ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„ä¿¡æ¯äº¤ä»˜æœåŠ¡ã€‚å°†ä¸»æœºä¹‹é—´çš„äº¤ä»˜æ‰©å±•ä¸ºè¿›ç¨‹ä¹‹é—´çš„äº¤ä»˜å°±æ˜¯è¿è¾“å±‚çš„å¤šè·¯å¤ç”¨ä¸Žå¤šè·¯åˆ†è§£ã€‚ è¿è¾“å±‚çš„å¤šè·¯å¤ç”¨ä¸Žå¤šè·¯åˆ†è§£å¤šè·¯å¤ç”¨ä¸Žå¤šè·¯åˆ†è§£æœåŠ¡æ˜¯æ‰€æœ‰è®¡ç®—æœºç½‘ç»œéƒ½éœ€è¦çš„ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œå®žçŽ°è¿è¾“å±‚çš„æœåŠ¡éœ€è¦å€ŸåŠ©äºŽsocketï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¯¹åº”ä¸€ä¸ªæˆ–å‡ ä¸ªsocketï¼ˆï¼Ÿï¼‰ã€‚åœ¨sendç«¯ï¼Œè¿è¾“å±‚åœ¨æŠ¥æ–‡æ®µä¸­åŠ äº†é¦–éƒ¨ä¿¡æ¯ä¹‹åŽï¼ŒæŠŠå„è¿›ç¨‹äº§ç”Ÿçš„æ•°æ®æ— å·®åˆ«çš„äº¤ç»™ç½‘ç»œå±‚ï¼›åœ¨revç«¯ï¼Œè¿è¾“å±‚ä»Žç½‘ç»œå±‚é‚£é‡Œæ‹¿å‡ºæ•°æ®ï¼Œè§£æžæŠ¥æ–‡æ®µçš„é¦–éƒ¨ä¿¡æ¯ä»Žè€Œ==å®šä½socket==ï¼ŒæŠŠåˆ†è§£åŽçš„æŠ¥æ–‡æ®µä¿¡æ¯ç»™å¯¹åº”çš„socketã€‚ ä¸ºäº†å®žçŽ°è¿™ç§æœåŠ¡ï¼Œåœ¨é¦–éƒ¨ä¿¡æ¯é‡Œé¢ä¸€å®šå°è£…æœ‰ç«¯å£å·ã€‚ç«¯å£å·æ˜¯ä¸€ä¸ª16bitçš„æ•°ï¼Œåœ¨0-65535ä¹‹é—´ï¼Œå…¶ä¸­0-1023çš„ç«¯å£å·æ˜¯å‘¨çŸ¥ç«¯å£å·ï¼Œä»–ä»¬è¢«ä¿ç•™ç»™å‘¨çŸ¥åº”ç”¨å±‚åè®®æ¥ä½¿ç”¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒæœåŠ¡å™¨ç«¯éƒ½æ˜¯ä¸€ä¸ªå›ºå®šçš„ç«¯å£å·ï¼Œè€Œå®¢æˆ·ç«¯åˆ™æ˜¯éšæœºåˆ†é…ã€‚å…³äºŽç«¯å£å·çš„æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥è®¿é—®RFC 3232èŽ·å¾—ã€‚ 1. æ— è¿žæŽ¥çš„é¦–å…ˆäº†è§£UDPçš„å¥—æŽ¥å­—æ ‡å¿—æ–¹æ³•ï¼šUDPçš„socketä»¥ä¸€ä¸ªäºŒå…ƒç»„(dstaddr,dstport)æ¥æ ‡è¯†ï¼Œä¸Žæºä¿¡æ¯æ— å…³ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ä¸Žä¸€ä¸ªæœºå™¨æ— è®ºæ˜¯ä»Žä»€ä¹ˆåœ°æ–¹å‘é€è¿‡æ¥çš„æ•°æ®ï¼Œåªè¦ç»™çš„æ˜¯åŒä¸€ä¸ªportï¼Œéƒ½å°†è¢«åŒä¸€ä¸ªsocketå¤„ç†ã€‚è¿™æ ·ï¼Œå®¹æ˜“ç†è§£ï¼Œåœ¨UDPä¸­ï¼Œæ¯ä¸€ä¸ªportä¼šå¯¹åº”ä¸€ä¸ªè‡ªå·±çš„ç¼“å†²åŒºã€‚ å…³äºŽè¿™ä¸ªç¼“å†²åŒºï¼ŒUDPä¸å¯é ä¹Ÿä¼šä½“çŽ°åœ¨è¿™é‡Œï¼Œåœ¨å‘é€UDPåŒ…çš„æ—¶å€™ä¸èƒ½è¿‡å¤§ï¼Œä¹Ÿæ˜¯å‡ºäºŽå¯¹ç¼“å†²åŒºå¤§å°çš„è€ƒè™‘ã€‚å¦‚æžœæ–°åˆ°æ¥çš„åŒ…å¤ªå¤§äº†ã€ä¸èƒ½å¡žè¿›ç¼“å†²åŒºäº†ï¼Œè¿™ä¸ªåŒ…ä¼šè¢«ç›´æŽ¥æŠ›å¼ƒã€‚appå±‚ä¸ä¼šçŸ¥é“ï¼Œåªæœ‰é€šè¿‡å‘é€ç«¯çš„è¶…æ—¶é‡ä¼ æœºåˆ¶å¯¹åŒ…è¿›è¡Œé‡ä¼ ã€‚ 2. é¢å‘è¿žæŽ¥çš„TCPçš„å¥—æŽ¥å­—æ ‡å¿—æ–¹æ³•ä¸ŽUDPä¸åŒï¼ŒTCOä½¿ç”¨(srcaddr,srcport,dstaddr,dstport)ï¼Œè¿™æ ·ï¼Œåªæœ‰å››ä¸ªå€¼éƒ½ç›¸åŒæ‰ä¼šè¢«å®šå‘åˆ°åŒä¸€ä¸ªsocketï¼Œæ”¾åˆ°åŒä¸€ä¸ªç¼“å†²åŒºã€‚ è¿™é‡Œåªæ˜¯ç®€å•ä¸€æï¼šå…³äºŽå®‰å…¨æ€§çš„é—®é¢˜ã€‚æ”»å‡»è€…å¯ä»¥åˆ©ç”¨åœ¨æŸä¸ªç«¯å£ç›‘å¬çš„æœ‰ç¼ºé™·çš„åº”ç”¨ç¨‹åºæ”»é™·ç›®çš„ä¸»æœºã€‚æˆ‘ä¸äº†è§£å®‰å…¨ï¼Œè¿™é‡Œåªæ˜¯å¤è¿°äº†ã€Šè‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ä¸­çš„è§£é‡Šã€‚ ä½¿ç”¨nmapæ—¢å¯ä»¥æ‰«æåˆ°å› ç‰¹ç½‘ä¸­ä»»ä¸€å°ä¸»æœºï¼Œé¡ºåºçš„æ‰«æä¸»æœºçš„å„ä¸ªç«¯å£ï¼Œå¯¹TCP/UDPï¼Œå¯»æ‰¾èƒ½æŽ¥æ”¶TCPè¿žæŽ¥/èƒ½å¯¹UDPæŠ¥æ–‡æ®µè¿›è¡Œå¤„ç†çš„ç«¯å£å·ï¼Œå¹¶è¿”å›žæ‰“å¼€çš„ã€å…³é—­çš„ã€ä¸å¯è¾¾çš„ç«¯å£å·åˆ—è¡¨ã€‚ 3. Web Serverä¸ŽTCPå…¶å®žæ²¡ä»€ä¹ˆæ–°ä¸œè¥¿ï¼Œåˆ—ä¸¾ï¼š è¿žæŽ¥å¥—æŽ¥å­—ä¸Žè¿›ç¨‹ä¹‹é—´å¹¶éžä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚å…ˆè¿›çš„é«˜æ€§èƒ½Web serveråªæœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä½†æ˜¯ä¸ºæ¯ä¸€ä¸ªè¿žæŽ¥çš„æ–°å®¢æˆ·ï¼ˆä¸æ˜¯å®¢æˆ·æœºå–”ï¼‰åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ã€‚ éžæŒç»­HTTPä¼šä¸¥é‡å½±å“web serverçš„æ€§èƒ½ã€‚ï¼ˆåœ¨åº”ç”¨å±‚ä¸­æ¶‰åŠï¼‰ï¼Œæœ‰äº›OSæŠ€å·§å¯ä»¥å‡è½»è¿™ä¸ªé—®é¢˜çš„å½±å“ã€‚ï¼ˆå‚è§[Nielsen 1997,Nahum 2002]ï¼‰ ä»–çš„å¤ç”¨ä¸Žåˆ†è§£æ˜¯è¿™æ ·çš„ï¼š UDPæ¦‚è¿°UDPå¾ˆå¼±ï¼Œé™¤äº†ä¸Šä¸€èŠ‚æåˆ°çš„å¤ç”¨åˆ†è§£æœºåˆ¶ä»¥åŠå°‘é‡çš„å·®é”™æ£€éªŒä¹‹å¤–ï¼ŒåŸºæœ¬æ²¡æœ‰åŠŸèƒ½äº†ï¼Œå¦‚æžœç¨‹åºå‘˜é€‰æ‹©äº†UDPï¼Œé‚£åŸºæœ¬ä¸Šå°±æ˜¯åœ¨ä¸ŽIPæ‰“äº¤é“äº†ã€‚ ä»¥ä¸€ä¸ªDNSæŸ¥è¯¢ä¸ºä¾‹ï¼šåº”ç”¨å±‚ç»™å‡ºäº†ä¸€ä¸ªæŸ¥è¯¢æŠ¥æ–‡äº¤ç»™è¿è¾“å±‚ï¼ŒUDPåŠ äº†é¦–éƒ¨æ®µï¼Œäº¤ç»™ç½‘ç»œå±‚ï¼Œç½‘ç»œå±‚å°†ä»–å°è£…è¿›ä¸€ä¸ªIPæ•°æ®æŠ¥ï¼Œå‘é€ç»™ä¸€ä¸ªåå­—æœåŠ¡å™¨ã€‚DNSå¦‚æžœæ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„å›žåº”ï¼Œè¦ä¹ˆå‘å¦ä¸€ä¸ªæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¦ä¹ˆå‘ŠçŸ¥è°ƒç”¨å®ƒçš„åº”ç”¨ç¨‹åºæ²¡æœ‰å“åº”ã€‚ 1. UDPç‰¹ç‚¹ æ— è¿žæŽ¥ï¼š ä¸¤ä¸ªUDPä¹‹é—´æ²¡æœ‰æ¡æ‰‹ï¼› UDPæŠ¥æ–‡æ®µå½¼æ­¤ç‹¬ç«‹ ä¸å¯é ï¼š æ²¡æœ‰ç¡®è®¤æŽ¥æ”¶ï¼› æ²¡æœ‰é‡ä¼ ï¼› æ²¡æœ‰æ£€æŸ¥åŒ…ä¸¢å¤±ä¸ŽåŒ…å¤±åº æ£€éªŒå’Œåªè¦†ç›–éƒ¨åˆ†ä¿¡æ¯ æ²¡æœ‰æ‹¥å¡žæŽ§åˆ¶ UDPå¾ˆå¼±ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ›´åŠ å¯é çš„TCPå‘¢ï¼Ÿ å…³äºŽä½•æ—¶å‘é€ä»€ä¹ˆæ ·çš„æ•°æ®çš„æŽ§åˆ¶æ›´ä¸ºç²¾ç»†ã€‚UDPæ˜¯åªè¦åº”ç”¨å±‚äº¤ä»˜ï¼ŒUDPå°±ç«‹å³ç»™ç½‘ç»œå±‚ï¼Œè€ŒTCPæœ‰ä¸€ä¸ªæ‹¥å¡žæŽ§åˆ¶æœºåˆ¶ï¼Œå¯èƒ½ä¼šéåˆ¶å‘é€æ–¹ï¼Œæ˜¯æ•°æ®ä¼ è¾“å˜å¾—ç¼“æ…¢ã€‚ æ— éœ€å»ºç«‹è¿žæŽ¥ï¼Œå‡å°‘æ—¶å»¶ã€‚ æ— è¿žæŽ¥çŠ¶æ€ï¼Œä¸éœ€è¦ç»´æŠ¤è¿žæŽ¥çŠ¶æ€ã€‚è¿žæŽ¥çŠ¶æ€åŒ…æ‹¬æŽ¥æ”¶å’Œå‘é€æ•°æ®ç¼“å­˜ã€æ‹¥å¡žæŽ§åˆ¶å‚æ•°ã€åºå·ä»¥åŠç¡®è®¤å·çš„å‚æ•°ç­‰ã€‚æŸäº›åº”ç”¨ç¨‹åºè¿è¡Œåœ¨UDPä¹‹ä¸Šå¯ä»¥æ”¯æŒæ›´å¤šçš„æ´»è·ƒç”¨æˆ·ã€‚ åˆ†ç»„é¦–éƒ¨å¼€é”€å° UDPçš„è¿™äº›ç‰¹ç‚¹ä½¿å¾—ï¼š DNSç®€å•æŸ¥è¯¢ï¼› æµåª’ä½“åº”ç”¨ï¼› P2Påº”ç”¨ ç½‘ç»œç®¡ç†åº”ç”¨ï¼šé€šäº§å·¥ä½œåœ¨é«˜åŽ‹çŠ¶æ€ä¹‹ä¸‹ï¼› è·¯ç”±è½¬æ¢åè®® ç­‰å°†æœ‰æ›´ä½³çš„é€‚ç”¨åº¦ã€‚ çŽ°ä»Šï¼Œç”±äºŽå‡ºäºŽå®‰å…¨è€ƒè™‘ï¼ŒæŸäº›æœºæž„é˜»å¡žUDPæµé‡ï¼Œè€Œä¸”å½“ä¸¢åŒ…çŽ‡ä½Žæ—¶ï¼ŒTCPå°†æ›´å¤šçš„ç”¨äºŽæµåª’ä½“åº”ç”¨ã€‚ ç„¶è€Œï¼Œç”±äºŽUDPæ²¡æœ‰æ‹¥å¡žæŽ§åˆ¶æœºåˆ¶ï¼Œå½“ç½‘ç»œç¹å¿™æ—¶ï¼Œè·¯ç”±å™¨ä¼šæœ‰å¤§é‡çš„åˆ†ç»„æº¢å‡ºï¼Œå‡ ä¹Žæ²¡æœ‰UDPåˆ†ç»„èƒ½å¤ŸæˆåŠŸé€šè¿‡è·¯ç”±å™¨åˆ°è¾¾ç›®çš„åœ°ã€‚è€Œä¸”ï¼Œå…·æœ‰æ‹¥å¡žæŽ§åˆ¶æœºåˆ¶çš„TCPå‘é€æ–¹ä¼šå‡æ…¢è‡ªå·±çš„é€ŸçŽ‡ã€‚UDPæ²¡æœ‰æ‹¥å¡žæŽ§åˆ¶æœºåˆ¶ä¸ä»…é€ æˆäº†UDPä¼šè¯ä¹‹é—´çš„é«˜ä¸¢åŒ…çŽ‡ï¼Œä¹ŸæŒ¤åž®äº†TCPä¼šè¯ã€‚å¾ˆå¤šç ”ç©¶äººå‘˜å·²ç»æå‡ºäº†æ–°çš„æœºåˆ¶ï¼Œä½¿æ‰€æœ‰æ•°æ®æºæ‰§è¡Œè‡ªé€‚åº”çš„æ‹¥å¡žæŽ§åˆ¶ã€‚ å¸Œæœ›ä½¿ç”¨UDPå®žçŽ°å¯é ä¼ è¾“çš„è¯éœ€è¦åœ¨åº”ç”¨å±‚åè®®ä¸ŠåŠ ä¸Šå¯é æ€§ä¿è¯ã€‚è¿™ç§æ–¹æ³•æ—¢å¯ä»¥ä¿è¯å¯é ä¼ è¾“ï¼Œåˆå¯ä»¥æ‹’ç»æ‹¥å¡žæŽ§åˆ¶çš„å½±å“ã€‚ è¡¨1ï¼šæµè¡Œçš„å› ç‰¹ç½‘åº”ç”¨åŠå…¶ä¸‹åè®® åº”ç”¨ åº”ç”¨å±‚åè®® ä¸‹å±‚è¿è¾“åè®® ç”µå­é‚®ä»¶ SMTP TCP è¿œç¨‹ç»ˆç«¯è®¿é—® Talnet TCP Web HTTP TCP æ–‡ä»¶ä¼ è¾“ FTP TCP è¿œç¨‹æ–‡ä»¶æœåŠ¡å™¨ NFS é€šå¸¸UDP æµå¼å¤šåª’ä½“ é€šå¸¸ä¸“ç”¨ UDPæˆ–TCP å› ç‰¹ç½‘ç”µè¯ é€šå¸¸ä¸“ç”¨ UDPæˆ–TCP ç½‘ç»œç®¡ç† SNMP é€šå¸¸UDP è·¯ç”±é€‰æ‹©åè®® RIP é€šå¸¸UDP åå­—è½¬æ¢ DNS é€šå¸¸UDP 2. UDPæŠ¥æ–‡ é•¿åº¦ï¼šæŒ‡æ˜Žäº†åŒ…æ‹¬é¦–éƒ¨ä¿¡æ¯åœ¨å†…çš„UDPæŠ¥æ–‡æ®µé•¿åº¦ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼šByteï¼‰ï¼› ä¸‹é¢é‡ç‚¹è¯´æ£€éªŒå’Œï¼š åœ¨è®¡ç»„é‡Œé¢å°±å­¦äº†å‡ ä¸ªæ£€é”™æ–¹æ³•ï¼Œå¯¹äºŽä¸€ä¸ªæ£€é”™æœºåˆ¶ï¼šæ•°æ®=å†—ä½™ä½ å®žé™…æ•°æ®ã€‚å†³å®šæ£€é”™èƒ½åŠ›çš„æ˜¯å†—ä½™ä½æ•°ä¸Žç®—æ³•ã€‚å¯¹äºŽUDPï¼Œä»–æä¾›çš„æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æ£€é”™æœºåˆ¶ï¼Œè€Œä¸”åªèƒ½æ£€é”™ï¼Œä¸èƒ½ä¿®æ”¹é”™è¯¯ã€‚ Persudo Headerpersudo headerç»“æž„æ˜¯è¿™æ ·çš„ï¼š åœ¨å‘é€ç«¯ï¼Œé¦–å…ˆä¼šå°†æŠ¥æ–‡æ®µä¸­çš„checksumæ¸…é›¶ï¼Œç„¶åŽæŠŠæŠ¥æ–‡æ®µä¸Žpersudo headerçš„æ•°æ®å½“ä½œ16bitçš„å¾ˆå¤šæ•°æ®ï¼Œå¯¹ä»–ä»¬è¿›è¡Œæ±‚å’Œè¿ç®—ï¼Œå°†å¾—å‡ºçš„16bitç»“æžœæ±‚åç»™checksumå­—æ®µã€‚ åœ¨æŽ¥æ”¶ç«¯ï¼Œäº§ç”Ÿæ–°çš„ä¼ªé¦–éƒ¨ï¼Œç„¶åŽåªéœ€è¦å°†è¿™äº›æ•°æ®å…¨éƒ¨æ±‚å’Œï¼Œæœ€ç»ˆå¦‚æžœæ˜¯16ä¸ª1ï¼Œè¯´æ˜Žå¯èƒ½æ˜¯æ²¡é”™çš„ï¼Œä½†æ˜¯ä¹Ÿå¯èƒ½å‘ç”Ÿçš„é”™è¯¯å·²ç»è¶…å‡ºäº†æ£€é”™èƒ½åŠ›ï¼Œå¦‚æžœä¸æ˜¯16ä¸ª1ï¼Œé‚£è¯´æ˜Žä¸€å®šæ˜¯é”™äº†ã€‚ checksumæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå¯¹äºŽæ˜Žç¡®é”™è¯¯çš„ä¿¡æ¯ï¼ŒUDPä¼šè¦ä¹ˆä¸¢å¼ƒï¼›è¦ä¹ˆæŠŠæ•°æ®ç»™åº”ç”¨å±‚ï¼Œä½†æ˜¯ç»™åº”ç”¨å±‚è­¦å‘Šè¯´æ•°æ®æ˜¯é”™çš„ã€‚ å…¶å®žä¼ªé¦–éƒ¨ç ´åäº†åˆ†å±‚ç»“æž„ï¼Œåœ¨è¿è¾“å±‚äº§ç”Ÿäº†ç½‘ç»œå±‚çš„ä¿¡æ¯ã€‚ UDPæ ¡éªŒå’Œè¦†ç›–çš„èŒƒå›´è¶…å‡ºäº†UDPæ•°æ®æŠ¥æœ¬èº«ï¼Œä½¿ç”¨ä¼ªé¦–éƒ¨çš„ç›®çš„æ˜¯æ£€éªŒUDPæ•°æ®æŠ¥æ˜¯å¦çœŸæ­£åˆ°è¾¾ç›®çš„åœ°ï¼Œæ­£ç¡®çš„ç›®çš„åœ°åŒ…æ‹¬äº†ç‰¹å®šçš„ä¸»æœºå’Œè¯¥ä¸»æœºä¸Šç‰¹å®šçš„ç«¯å£ checksumæœºåˆ¶åœ¨ipv4ä¸‹æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯åœ¨ipv6ä¸‹æ˜¯å¿…é¡»çš„ã€‚ åœ¨checksumä¸­çœ‹åˆ°äº†ç«¯å¯¹ç«¯åŽŸåˆ™ã€‚ç«¯å¯¹ç«¯åŽŸåˆ™æ˜¯ä¸€ä¸ªè¢«å—èµžæ‰¬çš„åŽŸåˆ™ï¼Œè¯¥åŽŸåˆ™è¡¨è¿°ä¸ºæŸç§åŠŸèƒ½å¿…é¡»åŸºäºŽç«¯å¯¹ç«¯å®žçŽ°ï¼šâ€ä¸Žåœ¨è¾ƒé«˜çº§åˆ«æä¾›è¿™äº›åŠŸèƒ½çš„ä»£ä»·ç›¸æ¯”ï¼Œåœ¨è¾ƒä½Žçº§åˆ«ä¸Šè®¾ç½®çš„åŠŸèƒ½å¯èƒ½æ˜¯å†—ä½™æˆ–å‡ ä¹Žæ²¡æœ‰ä»·å€¼çš„ã€‚â€œåœ¨è¿™é‡Œï¼Œç”±äºŽä¸èƒ½ä¿è¯ä»Žç½‘ç»œåˆ°ç‰©ç†åˆ°é“¾è·¯éƒ½æœ‰æœ‰æ•ˆçš„æ£€é”™æœºåˆ¶ï¼Œç”šè‡³åœ¨æŸäº›è·¯ç”±å™¨çš„å†…å­˜ä¸­ä¹Ÿå¯èƒ½å¼•å…¥æ¯”ç‰¹å·®é”™ï¼Œå®žçŽ°ç«¯å¯¹ç«¯çš„é”™è¯¯æ£€æµ‹æœºåˆ¶æ˜¯æœ‰å¿…è¦çš„ã€‚ å¯é æ•°æ®ä¼ è¾“åŽŸç†åœ¨è¿™ä¸€èŠ‚é‡Œï¼Œå°†æ‰€æœ‰çš„åº•å±‚æ•°æ®ä¼ è¾“è§†ä¸ºä¸å¯é çš„ï¼Œå¯èƒ½ä¼šå‘ç”Ÿæ•°æ®çš„ä¸¢å¤±ã€å·®é”™ã€å¤±åºç­‰ã€‚ è¿™é‡Œè®¨è®ºçš„æ˜¯æ™®éçš„è®¡ç®—æœºç½‘ç»œä½¿ç”¨çš„ç†è®ºï¼Œå°†ä»¥åˆ†ç»„ä»£æ›¿æŠ¥æ–‡æ®µè¢«ä½¿ç”¨ã€‚åŒæ—¶ï¼Œåªè€ƒè™‘å•å‘æ•°æ®ä¼ è¾“ï¼Œå…¶å®žåŒå‘æ•°æ®ä¼ è¾“å¹¶ä¸ä¼šæ›´éš¾ã€‚ æž„é€ å¯é æ•°æ®ä¼ è¾“åè®®rdt1.0ï¼šä¿¡é“å®Œå…¨å¯é å‡å¦‚ä¿¡é“å®Œå…¨å¯é ï¼ŒUDPå®Œå…¨å¯é ã€‚å‘é€æ–¹åªè¦æŽ¥æ”¶åˆ°rdt_sendå°±åšå¤„ç†å¹¶è°ƒç”¨udp_sendï¼ŒæŽ¥æ”¶æ–¹åªè¦æŽ¥æ”¶åˆ°rdt_rcvå°±å¤„ç†ã€‚æœ‰é™çŠ¶æ€æœºï¼ˆFSMï¼‰å›¾å¦‚ä¸‹ï¼š å‘é€ç«¯ï¼š æŽ¥æ”¶ç«¯ï¼š rdt2.0ï¼šä¿¡é“å…·æœ‰æ¯”ç‰¹å·®é”™è‡ªåŠ¨é‡ä¼ è¯·æ±‚ï¼ˆAutomatic Repeat reQuestï¼‰ï¼šåœ¨æŽ¥æ”¶æ–¹ç¡®è®¤æŽ¥æ”¶åˆ°æ­£ç¡®çš„æŠ¥æ–‡ä¹‹åŽç»™å‡ºè‚¯å®šç¡®è®¤ï¼ŒæŽ¥å—åˆ°ä¸æ­£ç¡®çš„æŠ¥æ–‡ä¹‹åŽç»™å‡ºå¦å®šç¡®è®¤ã€‚ å®žé™…ä¸Šï¼Œè¿™ç§æœºåˆ¶éœ€è¦å…¶ä»–çš„æ”¯æŒï¼š å·®é”™æ£€æµ‹ æŽ¥æ”¶æ–¹åé¦ˆï¼šå¦‚æžœæ­£ç¡®ï¼Œè¿”å›žACKï¼Œä¸æ­£ç¡®è¿”å›žNAKã€‚ é‡ä¼ ï¼šå‘é€æ–¹åœ¨æŽ¥æ”¶åˆ°NAKæ—¶é‡ä¼ ã€‚ FSMï¼š å‘é€æ–¹ï¼š æŽ¥æ”¶æ–¹ï¼š ä½†æ˜¯ï¼Œå¦‚æžœACKæˆ–è€…NCKçš„åŒ…é”™è¯¯äº†æ€Žä¹ˆåŠžå‘¢ï¼Ÿä¸€èˆ¬æœ‰ä¸‰ç§è§£å†³æ–¹æ³•ï¼š å‘é€è¯·æ±‚ï¼Œè¯¢é—®ä¸Šä¸€ä¸ªå·®é”™åŒ…çš„å†…å®¹ã€‚è¿™æ ·å¾ˆå®¹æ˜“é™·å…¥è¯¢é—®çš„æ­»å¾ªçŽ¯ã€‚ å¢žåŠ è¶³å¤Ÿçš„æ£€é”™çº é”™èƒ½åŠ›ã€‚å¯¼è‡´å†—ä½™æ•°æ®è¿‡å¤šã€‚ ç›´æŽ¥é‡ä¼ ã€‚å¯èƒ½ä¼šå¼•å…¥å†—ä½™åˆ†ç»„ï¼Œä½¿å¾—æŽ¥æ”¶æ–¹ä¸çŸ¥é“è¿™ä¸ªåŒ…æ˜¯æ–°åŒ…è¿˜æ˜¯é‡ä¼ åŒ…ã€‚ å¯¹äºŽç¬¬ä¸‰ç§æ–¹æ³•ï¼Œå¯ä»¥å¼•å…¥åºåˆ—å·çš„æ¦‚å¿µæ¥è§£å†³é—®é¢˜ã€‚å¯¹äºŽæˆ‘ä»¬çŽ°åœ¨è®¨è®ºçš„åœç­‰åè®®ï¼Œåªéœ€è¦ä¸¤ä¸ªåºå·å³1bitå³å¯ã€‚ è¿™ä¸ªç‰ˆæœ¬æ˜¯rdt2.1ï¼Œæ–°çš„FSMæ˜¯è¿™æ ·çš„ï¼š å‘é€æ–¹ï¼š æŽ¥æ”¶æ–¹ï¼š å…¶å®žï¼Œå¦‚æžœä¸ä½¿ç”¨NAKï¼Œè€Œæ˜¯å¯¹ä¸Šæ¬¡çš„æŽ¥æ”¶å†å‘é€ä¸€ä¸ªACKï¼Œä¹Ÿèƒ½èµ·åˆ°åŒæ ·çš„æ•ˆæžœï¼Œè¿™æ ·ï¼Œæœ‰äº†rdt2.2ç‰ˆæœ¬ï¼š å‘é€æ–¹ï¼š æŽ¥æ”¶æ–¹ï¼š æ¯”ç‰¹äº¤æ›¿åè®®â€”â€”rdt3.0ï¼šä¿¡é“å¯èƒ½ä¸¢åŒ…ã€äº§ç”Ÿæ¯”ç‰¹å·®é”™å¦‚æžœäº§ç”Ÿäº†ä¸¢åŒ…ï¼ŒæŽ¥æ”¶ç«¯æ˜¯ä¸ä¼šçŸ¥é“çš„ï¼Œåªèƒ½åœ¨å‘é€ç«¯å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚ä¸€ä¸ªæ˜¯å‘é€ç«¯ä¸»åŠ¨å‘é€çš„æ•°æ®ä¸¢å¤±ï¼Œå’ŒæŽ¥æ”¶ç«¯æ²¡æœ‰å…³ç³»ï¼Œä¸€ä¸ªæ˜¯æŽ¥æ”¶ç«¯å·²ç»æ”¶åˆ°äº†åŒ…ï¼Œä½†æ˜¯å‘é€çš„ç¡®è®¤ä¿¡æ¯ä¸¢å¤±ã€‚ å‘é€æ–¹éœ€è¦é‡ä¼ ï¼Œåº”è¯¥åšåˆ°ï¼š æ¯æ¬¡å‘é€æ•°æ®ä¹‹åŽå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ å“åº”å®šæ—¶å™¨ä¸­æ–­ åœæ­¢å®šæ—¶å™¨ åœ¨é‡ä¼ ä¸­ï¼Œå»¶æ—¶æ—¶é—´çš„è®¾ç½®æ˜¯å¾ˆé‡è¦çš„ã€‚è¿‡é•¿çš„å»¶è¿Ÿæ—¶é—´å°†å½±å“åº”ç”¨å±‚çš„ä½“éªŒï¼Œæžœæ–­çš„å»¶è¿Ÿæ—¶é—´å°†ä¼šå¼•å…¥å†—ä½™æ•°æ®åˆ†ç»„ã€‚rdt2.2å·²ç»æœ‰èƒ½åŠ›å¤„ç†å†—ä½™æ•°æ®åˆ†ç»„ï¼šå½“åœ¨ç­‰å¾…1çš„æ—¶å€™åˆä¼ æ¥äº†0ï¼ŒæŽ¥æ”¶ç«¯ä¼šç›´æŽ¥ä¸¢å¼ƒè¿™äº›æ•°æ®ã€‚è€Œå¯¹äºŽåœç­‰åè®®ï¼Œä¸ä¼šæœ‰åœ¨ç­‰1çš„æ—¶å€™æ­£å¥½å‘é€äº†1çš„å†—ä½™åŒ…çš„æƒ…å†µã€‚ å‘é€æ–¹ï¼š æµæ°´çº¿å¯é æ•°æ®ä¼ è¾“åè®®rdt3.0å¯¹äºŽé”™è¯¯å¤„ç†å·²ç»æ¯”è¾ƒå®Œå–„äº†ï¼Œä½†æ˜¯ä»–çš„é—®é¢˜åœ¨äºŽä»–æ˜¯ä¸€ä¸ªåœç­‰åè®®ã€‚åœç­‰åè®®å¯¹é“¾è·¯çš„åˆ©ç”¨çŽ‡ä½Žåˆ°ä»¤äººå‘æŒ‡ï¼ å¯¹äºŽä¸€ä¸ªé€Ÿåº¦æ˜¯1Gbpsçš„é“¾è·¯ï¼Œå‘é€ä¸€ä¸ªå¤§å°1000Byteçš„åŒ…ï¼š è¿›å…¥æ‰€éœ€æ—¶é—´ï¼š$$t=\frac{L}{R}=\frac{8000bit/pkt}{10^9bit/s}=8us/pkt$$ å‡è®¾ä¼ è¾“æ‰€éœ€æ—¶é—´æ˜¯15msï¼Œé‚£ä¹ˆä¿¡é“çš„åˆ©ç”¨çŽ‡æ˜¯ï¼š $$U_sender=\frac{\frac{L}{R}}{RTT+\frac{L}{R}}=\frac{0.008}{30.008}=0.00027$$ ä¸ºäº†æé«˜ä¼ è¾“æ•ˆçŽ‡ï¼Œåœç­‰åè®®éœ€è¦è¢«æ‘’å¼ƒã€‚çŽ°åœ¨ä½¿ç”¨çš„æŠ€æœ¯è¢«ç§°ä¸ºæµæ°´çº¿ã€‚ä½¿ç”¨æµæ°´çº¿æŠ€æœ¯ï¼Œ1ä¸ªbitçš„åºå·æ˜¯ä¸å¤Ÿç”¨çš„ï¼Œåœ¨åŽé¢æˆ‘ä»¬å°†è®²åˆ°å¯¹äºŽnä¸ªåŒæ—¶å‘å‡ºçš„åŒ…ï¼Œéœ€è¦2*nä¸ªåºåˆ—å·ã€‚è€Œä¸”ï¼Œåœ¨å‘é€ç«¯å’ŒæŽ¥æ”¶ç«¯éƒ½éœ€è¦æœ‰ç¼“å­˜æœºåˆ¶æ¥æš‚æ—¶å­˜å‚¨ï¼šå‘é€ç«¯éœ€è¦å­˜å‚¨å·²ç»å‘é€ä½†æ˜¯æ²¡æœ‰ç¡®è®¤æŽ¥æ”¶çš„æ•°æ®ï¼ŒæŽ¥æ”¶ç«¯éœ€è¦å­˜å‚¨å·²ç»æ­£ç¡®æŽ¥æ”¶çš„æ•°æ®ã€‚ è¿™ä¸€èŠ‚å¹¶æ²¡æœ‰å®Œæ•´çš„è®¨è®ºæµæ°´çº¿æœºåˆ¶ä¸‹çš„åè®®ï¼Œä»Žä¸‹ä¸€å°èŠ‚å¼€å§‹ï¼Œå¯¹ç¼“å­˜çš„å¤„ç†ã€åºåˆ—å·çš„å¤„ç†è¿›è¡Œè®¨è®ºã€‚ å›žé€€Næ­¥ï¼šGBNå…è®¸å‘é€æ–¹è¿žç»­å‘é€Nä¸ªæ•°æ®åŒ…ï¼ŒæŽ¥æ”¶æ–¹æŒ‰åºæŽ¥æ”¶æ•°æ®åŒ…ï¼Œå¤±åºçš„åŒ…ä¼šè¢«ä¸¢å¼ƒã€‚ï¼ˆè¿™æ—¶ç”±äºŽæ²¡æœ‰è€ƒè™‘åŒå‘ä¼ è¾“ï¼Œè€Œä¸”æŽ¥æ”¶ç«¯çš„æœºåˆ¶ï¼Œåœ¨æŽ¥æ”¶ç«¯çš„ç»“æž„æš‚ä¸”ä¸æï¼‰ åœ¨å‘é€æ–¹å°†ä¼šæœ‰ä¸€ä¸ªç¼“å†²åŒºï¼ŒæŠŠç»“æž„æŠ½è±¡æˆè¿™æ ·ï¼š åœ¨è¿™æ¬¡ä¼ è¾“çš„è¿‡ç¨‹ä¸­åªèƒ½ä½¿ç”¨[send_base,sendbase+N-1]ä¹‹é—´çš„åºå·ã€‚æ‰©å±•FSMå¦‚å›¾ï¼š å‘é€ç«¯ï¼š æŽ¥æ”¶ç«¯ï¼š åœ¨è¿™ä¸ªFSMä¸­å­˜åœ¨å˜é‡ï¼Œåˆå§‹åŒ–æ˜¯éœ€è¦çš„ã€‚åœ¨å‘é€ç«¯ï¼Œå½“ä¸Šå±‚è¯·æ±‚å‘é€æ•°æ®æ—¶ï¼Œæœ‰ä¸€ä¸ªåˆ¤æ–­ï¼šå¦‚æžœè¿˜å¯ä»¥ç»§ç»­å‘é€ï¼ˆnextseqnum&lt; base+Nï¼‰ï¼Œå°±ç»§ç»­å‘é€ï¼Œå¦‚æžœåœ¨å‘é€è¿™ä¸ªä¹‹å‰æ‰€æœ‰çš„åŒ…éƒ½å·²ç»è¢«ç¡®è®¤è¿‡äº†ï¼Œå°±éœ€è¦å¼€ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä»Žè¿™é‡Œå¯ä»¥çœ‹å‡ºï¼šè®¡æ—¶å™¨ä»¥æœ€å·¦è¾¹ç•Œå¯åŠ¨ã€‚å¦‚æžœä¸èƒ½å†å‘é€äº†ï¼Œæ‹’ç»å‘é€æ•°æ®ã€‚è¿™æ—¶å¯èƒ½æœ‰ä¸‰ç§å¤„ç†æ–¹å¼ï¼šå°†è¯¥æ•°æ®è¿”å›žç»™ä¸Šå±‚ï¼Œéšå«åœ°è¡¨ç¤ºå·²ç»ä¸èƒ½å†ä¼ äº†ï¼›ç¼“å­˜è¿™äº›æ•°æ®ï¼›ä½¿ç”¨åŒæ­¥æœºåˆ¶åªå…è®¸ä¸Šå±‚åœ¨çª—å£ä¸æ»¡çš„æ—¶å€™æ‰èƒ½è°ƒç”¨rdt_sendã€‚æ•°æ®å‘é€å‡ºåŽ»ä¹‹åŽï¼Œå¦‚æžœæŒ‰æ—¶æŽ¥æ”¶åˆ°äº†ä¸€ä¸ªACKï¼Œæ¯”å¦‚è¯´æ˜¯ACK(i)ï¼Œé‚£ä¹ˆè¯´æ˜Žä»Žbaseåˆ°iéƒ½å·²ç»è¢«ç¡®è®¤äº†ã€‚å‡å¦‚è¿™æ—¶å·²ç»æ²¡æœ‰æœªç¡®è®¤åŒ…äº†ï¼Œè®¡æ—¶å™¨åœæ­¢ï¼Œå¦åˆ™ï¼Œé‡æ–°ä¸ºæ–°çš„æœ€å·¦åŒ…å¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ã€‚å¦‚æžœACKæŸåäº†ï¼Œä»€ä¹ˆä¹Ÿä¸åšã€‚å› ä¸ºæœ‰å®šæ—¶è£…ç½®ï¼Œåªéœ€ç­‰å¾…é‡ä¼ ã€‚è¿™ä¸Žrdt3.0çš„æœºåˆ¶æ˜¯ç›¸åŒçš„ã€‚å¥½äº†ï¼Œtimeoutäº†ï¼Œå°†çŽ°åœ¨æ‰€æœ‰çš„æœªç¡®è®¤å…¨éƒ¨é‡ä¼ ï¼Œç„¶åŽé‡å¯å®šæ—¶å™¨ã€‚ åœ¨æŽ¥æ”¶ç«¯ï¼ŒåŒæ ·åˆå§‹åŒ–ã€‚æŽ¥æ”¶ç«¯åªä¼šç­‰å¾…éœ€è¦ç­‰å¾…çš„æŒ‰åºçš„åŒ…ï¼Œå¦‚æžœä¸æ˜¯æŒ‰åºçš„ï¼Œä¸äºˆæŽ¥æ”¶ï¼Œå¹¶å°†ä¸Šä¸€ä¸ªç¡®è®¤ä¿¡æ¯ç»™å‘é€æ–¹ã€‚ç±»ä¼¼äºŽrdt2.0çš„å¤„ç†æ–¹å¼ã€‚å‘é€æ–¹æ”¶åˆ°çš„è¿™ä¸ªåŒ…å¹¶ä¸ä¼šå¯¹å‘é€æ–¹æœ‰ä»€ä¹ˆå½±å“ï¼Œåªæ˜¯ç”±äºŽtimerä¸èƒ½è¢«åœæ­¢æˆ–é‡å¯ï¼Œä¸€å®šæ—¶é—´ä¹‹åŽä¾¿ä¼šè§¦å‘é‡ä¼ ã€‚ä½†æ˜¯å¯¹äºŽé‚£äº›ACKä¸¢å¤±çš„åŒ…æœ‰é‡å¤§æ„ä¹‰ï¼šæŽ¨åŠ¨sendbaseå‘å‰ã€‚å¦‚æžœæŽ¥å—ç«¯æ”¶åˆ°äº†ä¸€ä¸ªæŒ‰åºçš„ã€åœ¨æ£€é”™èƒ½åŠ›ä¹‹å†…æ²¡æœ‰é”™è¯¯çš„åŒ…ï¼Œæ‰å¯¹ä»–è¿›è¡Œå¤„ç†ï¼Œæ›´æ–°è‡ªå·±çš„æœŸæœ›åŒ…åºå·ï¼Œå¹¶å‘å‘é€æ–¹å‘å‡ºè‡ªå·±çš„ç¡®è®¤ä¿¡æ¯ã€‚ è¿™ç§æ–¹å¼çš„å¼Šç«¯åœ¨äºŽå¤±åºæ•°æ®çš„ä¸¢å¼ƒã€‚ å‡å¦‚å‘é€æ–¹ä¸€å£æ°”å‘é€äº†Nä¸ªåŒ…ï¼Œæ°å·§ç¬¬ä¸€ä¸ªåŒ…åäº†ï¼Œå…¶ä»–éƒ½å¥½çš„ï¼Œç”±äºŽæŽ¥æ”¶ç«¯æ‹’ç»æŽ¥å—ç¬¬ä¸€ä¸ªåçš„åŒ…ï¼Œå…¶ä»–åŒ…ä¹Ÿè¢«ä¸¢å¼ƒäº†ï¼Œåªèƒ½é‡ä¼ æ‰€æœ‰çš„Nä¸ªåŒ…ã€‚æˆ–è€…ï¼Œå…¶å®žè¿™Nä¸ªåŒ…éƒ½å¥½å¥½çš„åˆ°äº†æŽ¥æ”¶ç«¯ï¼ŒæŽ¥æ”¶ç«¯è¿”å›žäº†Nä¸ªç¡®è®¤åŒ…ã€‚ emmmå…¶å®žè¿™é‡Œåšçš„æ¯”è¾ƒå¥½ï¼Œå› ä¸ºåå›žäº†Nå°±ä»£è¡¨Nä»¥åŠä»¥å‰çš„éƒ½å·²ç»æ”¶åˆ°äº†ã€‚ Go-Back-NåŠ¨ç”» é€‰æ‹©é‡ä¼ å¯¹ä¸Šä¸€å°èŠ‚æœ€åŽæå‡ºçš„å›žé€€Næ­¥çš„å¼Šç«¯ï¼Œåœ¨é€‰æ‹©é‡ä¼ ä¹‹ä¸­å¾—åˆ°äº†è§£å†³ã€‚ä½†æ˜¯åº”è¯¥çŸ¥é“ï¼ŒåŠŸèƒ½çš„å¢žå¼ºéœ€è¦ç»“æž„çš„å¤æ‚ä½œä¸ºä»£ä»·ã€‚ å…è®¸å¤±åºï¼ŒæŽ¥æ”¶æ–¹ä¼šå¯¹ä¸€äº›å¤±åºçš„åŒ…è¿›è¡Œç¼“å­˜ã€‚è¿™æ ·ï¼Œç¡®è®¤æŽ¥æ”¶çš„æœºåˆ¶ä¹Ÿéœ€è¦è¿›è¡Œä¿®æ”¹ã€æŽ¥æ”¶æ–¹ä¹Ÿéœ€è¦æ‹¥æœ‰ä¸€ä¸ªç¼“å­˜åŒºæ¥å®žçŽ°ã€‚ åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œå…¶å®žåœ¨ä¸Šä¸€èŠ‚æœ€åŽè¯´çš„é‚£ç‚¹ä¼˜ç‚¹æ˜¯ä¸å¯èƒ½å­˜åœ¨äº†ï¼Œå› ä¸ºéœ€è¦é€‰æ‹©é‡ä¼ ï¼Œå¿…ç„¶æ˜¯é€‰æ‹©ç¡®è®¤ã€‚è€Œä¸”ï¼Œæ¯ä¸ªåˆ†ç»„éƒ½å¿…é¡»æœ‰è‡ªå·±çš„å®šæ—¶å™¨ï¼Œè€Œä¸èƒ½åƒä¸Šé¢ä¸€æ ·æŒ‰æœ€å·¦æ¥åšå®šæ—¶å™¨ã€‚ åœ¨å‘é€ç«¯ï¼Œbaseåªèƒ½ç§»åŠ¨åˆ°æ²¡æœ‰å·²å‘é€ä½†æœªç¡®è®¤çš„æœ€å³ã€‚å¯¹äºŽä¸Šå›¾ï¼Œå‘é€ç«¯çš„ç»¿è‰²å¿…å®šå¯¹åº”æŽ¥æ”¶ç«¯çš„ç²‰è‰²æˆ–è€…æ— è‰²ï¼ŒæŽ¥æ”¶ç«¯çš„ç°è‰²å¿…å®šå¯¹åº”å‘é€ç«¯çš„é»„è‰²ï¼Œåœ¨sendbaseå³è¾¹ä¸å¯èƒ½æœ‰å¯¹åº”æŽ¥æ”¶ç«¯ç°è‰²çš„è‰²å—ã€‚ å‘é€æ–¹çš„åŠ¨ä½œä¸Žå‰é¢ç±»ä¼¼ï¼Œåªæ˜¯éœ€è¦å°†ç¡®è®¤æœºåˆ¶ä¿®æ”¹æˆå•ç‹¬ç¡®è®¤ï¼ŒæŽ¥æ”¶æ–¹çš„åŠ¨ä½œå¦‚ä¸‹ï¼š å¦‚æžœæ”¶åˆ°äº†[recvbase,recvbase+N-1]å†…çš„åŒ…ï¼Œæ˜¯æ­£å¸¸çš„ï¼ŒæŠŠæ”¶åˆ°çš„åŒ…çš„å¯¹åº”åºå·ACKï¼Œå¦‚æžœåœ¨è¿™ä¹‹å†…çš„æŸä¸ªåŒ…å‡ºäº†é—®é¢˜ä¸ç”¨ç®¡ï¼Œä¸¢æŽ‰ã€‚å¦‚æžœç­‰äºŽrecvbaseäº†ï¼Œå°±æ›´æ–°recvbaseã€‚ï¼ˆè¿™ä¹Ÿä½¿å¾—2.æ˜¯å¿…è¦çš„ï¼‰ æ”¶åˆ°äº†[recvbase-N,recvbase-1]ä¹‹å†…çš„åŒ…ï¼Œå¯èƒ½æ˜¯è¿™ä¹‹å†…çš„åŒ…å·²ç»è¢«æŽ¥æ”¶ç«¯ACKäº†ï¼Œä½†æ˜¯æ²¡æœ‰è¢«å‘é€ç«¯ACKï¼Œä¸€å®šéœ€è¦ä¼ ä¸€ä¸ªACKåŒ…ç»™å‘é€ç«¯ï¼Œå¦åˆ™ä¼šä½¿å¾—sendbaseæ— æ³•å‰è¿›ã€‚ å…¶ä»–æƒ…å†µå¿½ç•¥å³å¯ã€‚ æƒ…å†µ2.ä¹Ÿè¯´æ˜Žäº†ä¸ºä»€ä¹ˆéœ€è¦2*Nä¸ªåºå·ï¼š å°´å°¬çš„æƒ…å†µï¼šç©¶ç«Ÿæ˜¯é‡å¤åŒ…è¿˜æ˜¯æ–°åŒ…ï¼Ÿ åœ¨ä¹¦ä¸­æåˆ°äº†åˆ†ç»„é‡æŽ’ï¼Œæˆ‘ä¸æ˜¯ååˆ†ç†è§£ï¼š åˆ†ç»„é‡æ‹çš„ä¸€ä¸ªè¡¨çŽ°æ˜¯å…·æœ‰ç¡®è®¤å·xçš„æ—§å‰¯æœ¬å¯èƒ½ä¼šåœ¨ç½‘ç»œä¸­å‡ºçŽ°ï¼Œå³ä½¿çŽ°åœ¨å‘é€ç«¯ä¸ŽæŽ¥æ”¶ç«¯çš„çª—å£ä¸­å¯èƒ½éƒ½åŒ…å«xã€‚å¯¹äºŽåˆ†ç»„é‡æŽ’ï¼Œä¿¡é“å¯è¢«åŸºæœ¬çœ‹æˆæ˜¯åœ¨ç¼“å­˜åˆ†ç»„ï¼Œå¹¶åœ¨å°†æ¥çš„ä»»æ„æ—¶åˆ»è‡ªç„¶åœ°é‡Šæ”¾è¿™äº›åˆ†ç»„ã€‚å› ä¸ºåºåˆ—å·è¦è¢«é‡ç”¨ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µè¦ååˆ†å°å¿ƒã€‚å®žé™…é‡‡ç”¨çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ç›´åˆ°å‘é€æ–¹ç¡®è®¤ç½‘ç»œä¸­ä¸ä¼šåœ¨å­˜åœ¨xåˆ†ç»„ã€‚è¿™é€šè¿‡è®¾ç½®ä¸€ä¸ªåˆ†ç»„åœ¨ç½‘ç»œä¸­çš„æœ€å¤§å­˜æ´»æ—¶é—´æ¥é™å®šã€‚åœ¨é«˜é€Ÿç½‘ç»œçš„TCPæ‰©å±•ä¸­ï¼Œä¸€èˆ¬æ˜¯3minã€‚[sunshine 1978]æè¿°äº†ä¸€ç§ä½¿ç”¨åºå·çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿é‡æ–°æŽ’åºé—®é¢˜å®Œå…¨è¢«é¿å…ã€‚ Selective RepeatåŠ¨ç”» è¿™äº›éƒ½æžæ¸…æ¥šäº†ä¹‹åŽï¼ŒTCPéš†é‡ç™»åœº~ TCPï¼šTransport Control ProtocolTCPæ˜¯é¢å‘è¿žæŽ¥çš„åè®®ï¼Œè¿™æ˜¯å› ä¸ºTCPåœ¨ä¼ è¾“æ•°æ®ä¹‹å‰éœ€è¦è¿›è¡Œä¸‰æ¬¡â€œæ¡æ‰‹â€ï¼Œå®ƒä¼ è¾“çš„æ˜¯å­—èŠ‚æµï¼Œä¹Ÿå°±æ˜¯æ”¶TCPå¹¶ä¸ç®¡ä¼ è¾“å†…å®¹çš„æœ‰æ„ä¹‰çš„åˆ†å‰²ï¼Œåªæ˜¯å¤Ÿäº†å¯ä»¥å‡ºå‘çš„å­—èŠ‚æ•°ï¼ˆæˆ–è€…ä¸å¤Ÿï¼Œè¿™æ˜¯å…¶ä»–çš„æœºåˆ¶ï¼‰å°±ä¼šå°†è¿™ä¸ªæŠ¥æ–‡æ®µå‘å‡ºï¼Œè¿™å°±è¦æ±‚äº†æŽ¥å—çš„æ•°æ®å¿…é¡»èƒ½å¤ŸæŒ‰åºæŽ’åˆ—å¥½ã€‚ TCPçš„ä¼ è¾“æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š æµé‡æŽ§åˆ¶ æ‹¥å¡žæŽ§åˆ¶ ç‚¹å¯¹ç‚¹ å…¨åŒå·¥æœåŠ¡ æµæ°´çº¿æœºåˆ¶ TCPç§°å¾—ä¸Šæ˜¯æœ€å¤æ‚çš„åè®®ä¹‹ä¸€ï¼Œç”±äºŽTCPçš„åº•å±‚æ˜¯IPåè®®ï¼Œè€Œä¸Šé¢å·²ç»æåˆ°IPåè®®æ˜¯â€œå°½åŠ›è€Œä¸ºâ€æœåŠ¡ï¼Œå‡ ä¹Žæ²¡æœ‰å¯é æ€§çš„ä¿è¯ï¼Œæˆ‘ä»¬åªèƒ½å‡è®¾åº•å±‚æ˜¯å®Œå…¨ä¸å¯é çš„æœåŠ¡ï¼Œç”±æ­¤æž„å»ºå‡ºäº†TCPåè®®ã€‚ åŸºæœ¬æ¦‚å¿µä»‹ç»TCPè¿žæŽ¥å¹¶ä¸æ˜¯ä¸€æ¡å®žé™…çš„è¿žæŽ¥æˆ–æ˜¯ä¸€æ¡è™šç”µè·¯ï¼Œæ‰€è°“çš„TCPè¿žæŽ¥åªæ˜¯å­˜å‚¨åœ¨ç«¯åˆ°ç«¯ç³»ç»Ÿä¸­çš„è¿žæŽ¥çŠ¶æ€ï¼Œè€Œè·¯ç”±å™¨ã€é“¾è·¯å±‚äº¤æ¢æœºå¯¹TCPè¿žæŽ¥å®Œå…¨è§†è€Œä¸è§ï¼Œä»–ä»¬çœ‹åˆ°çš„åªæ˜¯æ•°æ®æŠ¥ã€‚ å…¨åŒå·¥æœåŠ¡ï¼ˆfull-dumplex serviceï¼‰ï¼šæŒ‡çš„æ˜¯åªèƒ½ABä¹‹é—´äº’ç›¸ä¼ è¾“ï¼Œæ˜¯ç‚¹å¯¹ç‚¹ï¼Œä¸å¯èƒ½æœ‰ç¬¬ä¸‰è€…åŠ å…¥çš„æƒ…å†µå‡ºçŽ°ã€‚ä¸Žå¤šæ’­æœ‰æ˜Žæ˜¾ä¸åŒã€‚ å®¢æˆ·è¿›ç¨‹ï¼šå‘èµ·è¿žæŽ¥çš„è¿›ç¨‹ï¼›æœåŠ¡å™¨è¿›ç¨‹ï¼šæŽ¥æ”¶è¿žæŽ¥çš„è¿›ç¨‹ ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·é¦–å…ˆå‘ä¸€æ¡ç‰¹æ®ŠæŠ¥æ–‡ï¼ŒæœåŠ¡å™¨ç”¨å¦ä¸€ä¸ªç‰¹æ®ŠæŠ¥æ–‡æ¥å“åº”ï¼Œæœ€åŽå®¢æˆ·ç”¨ç¬¬ä¸‰ä¸ªç‰¹æ®ŠæŠ¥æ–‡å“åº”ã€‚$\color{red}{å‰ä¸¤ä¸ªæŠ¥æ–‡ä¸æ‰¿è½½æœ‰æ•ˆè½½è·ï¼Œè€Œæœ€åŽä¸€ä¸ªå¯ä»¥æœ‰}$ å½“appå±‚ç»™è¿è¾“å±‚TCPä¸€äº›æ•°æ®ï¼Œä¼šè¢«æ”¾å…¥å‘é€ç¼“å­˜é‡Œï¼Œåœ¨TCPæ–¹ä¾¿çš„æ—¶å€™ï¼Œå°±ä¼šä»Žç¼“å­˜ä¸­æ‹¿å‡ºä¸€äº›æ•°æ®å‘é€ã€‚ æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦MSSï¼ˆMax Segment Sizeï¼‰å¸¸æ ¹æ®æœ€å¤§ä¼ è¾“å•å…ƒè®¾ç½®ï¼Œå…¸åž‹å€¼æ˜¯1460å­—èŠ‚ã€‚æ³¨æ„ä¸åŒ…æ‹¬å„ç§é¦–éƒ¨ï¼ŒåªåŒ…æ‹¬åº”ç”¨å±‚æ•°æ®å¤§å°ã€‚TCP/IPé¦–éƒ¨ä¸€èˆ¬æ˜¯40bytesã€‚ æœ€å¤§ä¼ è¾“å•å…ƒMTUï¼ˆMax Transmission Unitï¼‰ï¼šæœ¬åœ°ä¸»æœºå‘é€çš„æœ€å¤§é“¾è·¯å±‚å¸§é•¿åº¦ TCPæŠ¥æ–‡æ®µï¼šTCPå°†è¿™æ¬¡è¦å‘é€çš„æ•°æ®ç”¨ä¸€ä¸ªTCPé¦–éƒ¨è¿›è¡Œå°è£…ã€‚ å°±åƒå‰é¢è¯´åˆ°çš„ï¼ŒMSSé™åˆ¶äº†TCPæŠ¥æ–‡æ®µçš„æœ€å¤§é•¿åº¦ã€‚å½“ä¸€ä¸ªå¤§æ–‡ä»¶è¢«å‘é€çš„æ—¶å€™ï¼Œå®ƒå°†è¢«åˆ†ä¸ºè®¸å¤šé•¿åº¦ä¸ºMSSçš„æŠ¥æ–‡æ®µå‘å‡ºã€‚å¦ä¸€æ–¹é¢ï¼Œå¯¹äºŽé‚£äº›ä¸éœ€è¦ä¼ é€’å¤§é‡æ•°æ®çš„äº¤äº’åº”ç”¨ï¼Œä¹Ÿå¯ä»¥å‘é€è¾ƒå°çš„æ•°æ®æ®µã€‚é‚£ä¹ˆä»€ä¹ˆå«TCPæ–¹ä¾¿çš„æ—¶å€™å‘¢ï¼Ÿä¸€èˆ¬æ¥è¯´ï¼ŒTCPä¼šåœ¨ä¸‰ç§æƒ…å†µä¸‹å‘é€æ•°æ®ï¼š segment full è¶…æ—¶ appå±‚çš„push å‘é€ä¸ŽæŽ¥æ”¶åŠ¨ç”» ä¸ªäººè§‰å¾—ï¼ˆæœªç»è¿‡èµ„æ–™æŸ¥è¯ï¼Œåªæ˜¯é™ˆè¿°æƒ³æ³•ï¼‰ï¼ŒTCPè¿žæŽ¥å°±åªæ˜¯ä¸€ç§è¿žæŽ¥çŠ¶æ€ï¼šrecvä¸Žsendéƒ½çŸ¥é“å¯¹æ–¹æ—¶åˆ»å‡†å¤‡ç€æŽ¥å—è‡ªå·±çš„æ•°æ®ï¼Œè‡ªå·±å‘å‡ºçš„æ•°æ®å¯ä»¥è¯´é€åˆ°æ­£ç¡®çš„åœ°æ–¹ï¼Œè¿™å°±å¤Ÿäº†ã€‚TCPè¿žæŽ¥ç»„æˆåŒ…æ‹¬ï¼šè¿™å¯¹ä¸»æœºå„è‡ªçš„ï¼šç¼“å­˜ã€å˜é‡ã€è¿›ç¨‹è¿žæŽ¥çš„å¥—æŽ¥å­—ã€‚ TCPæŠ¥æ–‡æ®µä¸ŽUDPçš„æŠ¥æ–‡æ®µå¯¹æ¯”èµ·æ¥ï¼ŒTCPæŠ¥æ–‡æ®µå¯ä»¥è¯´æ˜¯éžå¸¸å¤æ‚äº†ã€‚ æºç«¯å£å·ã€ç›®çš„ç«¯å£å·ï¼šTCPä½¿ç”¨å››å…ƒç»„ç¡®å®šä¸€ä¸ªè¿žæŽ¥ï¼Œè¯¥ä¿¡æ¯ç”¨äºŽå¤ç”¨åˆ†è§£ã€‚åºå·ã€ç¡®è®¤å·ï¼šåƒå‰é¢è®¨è®ºåˆ°çš„ä¿è¯å¯é æ€§çš„æœºåˆ¶ä¸€æ ·ï¼ŒTCPä½¿ç”¨åºå·æ¥ç¡®å®šæ¯ä¸€ä¸ªå­—èŠ‚ï¼Œæ³¨æ„TCPä¸ºæ¯ä¸€ä¸ªå­—èŠ‚åˆ†é…ä¸€ä¸ªåºåˆ—å·ï¼Œè€Œä¸æ˜¯åƒrdtä¸€æ ·ä¸ºæ¯ä¸€ä¸ªåŒ…åˆ†é…ä¸€ä¸ªåºå·ã€‚è¿™ä¸ªæœºåˆ¶å°†åœ¨åŽé¢æåˆ°ã€‚ç¡®è®¤å·ï¼šTCPç¡®è®¤å·²æŒ‰åºæ”¶åˆ°çš„ä¸‹ä¸€ä¸ªå­—èŠ‚ã€‚æŽ¥æ”¶çª—å£ï¼šç”¨äºŽæµé‡æŽ§åˆ¶ï¼ŒæŽ¥æ”¶æ–¹å‘ŠçŸ¥å‘é€æ–¹é†‰å€’è¿˜èƒ½ç»™æˆ‘å‘é€å¤šå°‘å­—èŠ‚ã€‚é¦–éƒ¨é•¿åº¦ï¼šä¸€èˆ¬æ˜¯20å­—èŠ‚ï¼Œæ¯”UDPå¤š12å­—èŠ‚ï¼ˆByteï¼‰ã€‚é€‰é¡¹å¯ä»¤TCPé¦–éƒ¨é•¿åº¦å‘ç”Ÿæ”¹å˜ï¼Œé¦–éƒ¨é•¿åº¦æŒ‰ç…§32bitçš„å­—ä¸ºå•ä½ã€‚å› ç‰¹ç½‘æ£€éªŒå’Œï¼šåŒUDPã€‚checksumç´§æ€¥æ•°æ®æŒ‡é’ˆï¼šæŒ‡å‘appå±‚æ ‡è¯†çš„ç´§æ€¥æ•°æ®çš„å°¾å­—èŠ‚ã€‚å½“ç´§æ€¥æ•°æ®å­˜åœ¨å¹¶å­˜åœ¨ç´§æ€¥æ•°æ®æŒ‡é’ˆçš„æ—¶å€™ï¼ŒTCPå¿…é¡»é€šçŸ¥ä¸Šå±‚ã€‚è¯¥å­—æ®µä¸€èˆ¬ä¸ç”¨ã€‚é€‰é¡¹ï¼šç”¨äºŽåŒæ–¹åå•†MSSçš„å¤§å°ã€æ—¶é—´æˆ³ç­‰ã€‚å¯å‚è€ƒRFC 854ä¸ŽRFC 1323äº†è§£ç»†èŠ‚ã€‚URGï¼šurgentï¼Œç´§æ€¥ã€‚æŒ‡ç¤ºå­˜åœ¨ç´§æ€¥æ•°æ®ã€‚ACKï¼šæŒ‡ç¤ºè¯¥æŠ¥æ–‡æ®µåŒ…æ‹¬ä¸€ä¸ªå¯¹å·²ç»è¢«æˆåŠŸæŽ¥æ”¶çš„æŠ¥æ–‡æ®µçš„ç¡®è®¤ã€‚PSHï¼šè¦æ±‚å°†æ•°æ®ç«‹å³ç»™APPå±‚ã€‚RSTï¼šåœ¨è¿žæŽ¥å‡ºçŽ°é—®é¢˜æ—¶é‡ç½®ã€‚SYNï¼šè¿žæŽ¥å»ºç«‹è¯·æ±‚ã€‚FINï¼šç»ˆæ­¢è¿žæŽ¥è¯·æ±‚ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šTCPçš„ç¡®è®¤æ˜¯ç´¯ç§¯ç¡®è®¤ï¼Œä¹Ÿå°±æ˜¯åªä¼šç¡®è®¤åˆ°æœ‰åºçš„å­—èŠ‚æµçš„ä¸‹ä¸€ä¸ªã€‚å¯¹äºŽé‚£äº›å¤±åºçš„åŒ…ï¼Œé€‰æ‹©æƒäº¤ç»™äº†å®žçŽ°TCPçš„ç¼–ç¨‹äººå‘˜ï¼š ç«‹å³ä¸¢å¼ƒ ç¼“å­˜ï¼šè¿™æ˜¯å®žé™…ä¸­åšçš„ã€‚ $\color{green}{å…³äºŽç©¶ç«Ÿç¼“å­˜æ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼Œéœ€è¦å†æŸ¥é˜…èµ„æ–™ã€‚}$ ç¨å¸¦ç¡®è®¤ï¼šä¸€æ–¹å‘å¦ä¸€æ–¹å‘é€ä¿¡æ¯æ—¶é¡ºå¸¦ç¡®è®¤å¦ä¸€æ–¹å‘è‡ªå·±å‘é€çš„ä¿¡æ¯ã€‚æ¯ä¸€æ¬¡å‘é€çš„TCPæŠ¥æ–‡æ®µéƒ½å¿…é¡»æœ‰SEQä¸ŽACKå­—æ®µã€‚å½“æ²¡æœ‰æ–°æ•°æ®åˆ°è¾¾æ—¶ï¼ŒSEQå°±ä¸ºä¸‹ä¸€ä¸ªæœŸå¾…çš„å­—èŠ‚çš„åºå·ã€‚ å¾€è¿”æ—¶é—´ä¼°è®¡ä¸Žè¶…æ—¶å¾€è¿”æ—¶é—´ï¼ˆRTTï¼‰çš„ä¼°è®¡æ˜¯ä¸ºäº†èƒ½å¤Ÿè®¾ç½®ä¸€ä¸ªè‰¯å¥½çš„è¶…æ—¶é‡ä¼ çš„æ—¶é—´ï¼Œä»¥é¿å…æ—¶é—´å¤ªçŸ­å¸¦æ¥çš„ä¸å¿…è¦çš„é‡ä¼ ä»¥åŠæ—¶é—´å¤ªé•¿è€Œå½±å“åº”ç”¨å±‚çš„ä½“éªŒã€‚ SampleRTTæŒ‡çš„æ˜¯æŸTCPæŠ¥æ–‡æ®µä»Žè¢«å‘å‡ºåˆ°æ”¶åˆ°ç¡®è®¤ä¹‹é—´çš„æ—¶é—´é—´éš”ã€‚ TCPåœ¨ä»»æ„ä¸€ä¸ªæ—¶åˆ»ï¼Œåªä¸ºå½“å‰å·²ç»å‘é€ä½†ä»æœªç¡®è®¤çš„ä¸€ä¸ªTCPæŠ¥æ–‡æ®µè®¡ç®—SampleRTTï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„SampleRTTå€¼ã€‚TCPä¸ä¼šä¸ºé‡ä¼ çš„æŠ¥æ–‡æ®µè®¡ç®—RTTï¼Œå®ƒåªä¼šå¯¹ç¬¬ä¸€æ¬¡ä¸Šä¼ è¾“çš„æŠ¥æ–‡æ®µè®¡ç®—ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ ç”±äºŽè·¯ç”±å™¨çš„é˜»å¡žä»¥åŠç³»ç»Ÿè´Ÿè½½çš„å˜åŒ–ï¼ŒSampleRTTå°†ä¼šéšä¹‹æ³¢åŠ¨ï¼Œå› æ­¤é‡‡å–äº†ä¸€ç§å¯¹SRTTå–å¹³å‡çš„æ–¹æ³•ï¼Œå§”ä¼šä¸€ä¸ªEstimatedRTTã€‚$$ERTT=(1-\alpha)*ERTT+\alpha*SRTT$$ $\alpha$é€šå¸¸å–0.125ï¼Œæ•…ï¼š$$ERTT=0.875*ERTT+0.125*SRTT$$ è¿™ç§æŒ‡æ•°åŠ æƒå¹³å‡ç§»åŠ¨å°†ä½¿å¾—ä¹‹å‰çš„SRTTçš„æƒå€¼å¿«é€Ÿå‡å°ã€‚ DevRTTæ˜¯RTTçš„åå·®ï¼Œç”¨äºŽä¼°ç®—SRTTåç¦»ERTTçš„ç¨‹åº¦ï¼š $$DRTT=(1-\beta)*DRTT+\beta* | SRTT-ERTT|$$ $\beta$é€šå¸¸å–å€¼0.25ï¼Œæ•…ï¼š $$DRTT=0.75*DRTT+0.25*|SRTT-ERTT|$$ $$\color{red}{åƒä¸‡ä¸è¦å¿˜è®°ç»™å…¬å¼é‡Œé¢çš„markdownç¬¦å·åŠ è½¬ä¹‰è°¢è°¢}$$ æœ€ç»ˆçš„è¶…æ—¶æ—¶å»¶åº”è¯¥è®¾ç½®ä¸ºï¼š$$TimeoutInterval=ERTT+4*DRTT$$ æŽ¨èçš„åˆå§‹TIæ˜¯1sã€‚ å¿«é€Ÿé‡ä¼ ï¼šå½“å‘é€æ–¹è¿žç»­ä¸‰æ¬¡æ”¶åˆ°å¯¹åŒä¸€ä¸ªå­—èŠ‚çš„ç¡®è®¤æ¶ˆæ¯ï¼Œé»˜è®¤ä¸ºæ˜¯å¯¹ä¸‹ä¸€ä¸ªå­—èŠ‚çš„NAKï¼Œå°†ä¼šå¿½ç•¥å®šæ—¶å™¨ï¼Œç«‹å³å¯¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µè¿›è¡Œé‡ä¼ ã€‚å¯¹äºŽæœ‰é—®é¢˜çš„æŠ¥æ–‡æ®µï¼ŒTCPå¹¶ä¸ç®¡æ˜¯ä¸¢å¤±ã€æ•°æ®é”™è¯¯ã€ACKæŸåï¼Œéƒ½ä»¥é‡ä¼ æŠ¥æ–‡æ®µæ¥è§£å†³é—®é¢˜ã€‚TCPä½¿ç”¨æµæ°´çº¿ï¼Œå¯ä»¥æ˜¾è‘—çš„å¢žåŠ åžåé‡ã€‚ä¸€ä¸ªå‘é€æ–¹å¯ä»¥å…·æœ‰çš„æœªè¢«ç¡®è®¤çš„æŠ¥æ–‡æ®µæ•°é‡ç”±æµé‡æŽ§åˆ¶ä¸Žæ‹¥å¡žæŽ§åˆ¶æœºåˆ¶å†³å®šã€‚ å¯é æ•°æ®ä¼ è¾“TCPçš„å¯é æ•°æ®ä¼ è¾“æœåŠ¡ä¿è¯å¦ä¸€ä¸ªè¿›ç¨‹ä»Žå…¶æŽ¥æ”¶ç¼“å†²ä¸­è¯»å‡ºçš„æ•°æ®æ— æŸåæ— é—´éš”éžå†—ä½™çš„æŒ‰åºå­—èŠ‚æµã€‚ æå‡ºé—®é¢˜ï¼šå¯¹äºŽé‚£äº›è¢«æŽ¥æ”¶æ–¹ç¼“å­˜ä½†æ˜¯ç”±äºŽæ— åºä¸èƒ½ç¡®è®¤çš„åŒ…ï¼Œæœ‰ä»€ä¹ˆæœºåˆ¶å‘¢ï¼Ÿï¼ˆè¿™ä¸ªä¸åŒäºŽå›žé€€Næ­¥ï¼Œäº¦ä¸åŒäºŽé€‰æ‹©é‡ä¼ ï¼ˆé€‰æ‹©é‡ä¼ Nä¸ªå®šæ—¶å™¨ï¼‰ï¼‰ ç®€åŒ–çš„TCPå‘é€æ–¹åŠ¨ä½œ12345678910111213141516171819202122232425262728293031sendbase = initial_sequence number nextseqnum = initial_sequence number loop (forever) &#123; switch(event) /* event: data received from application above create TCP segment with sequence number nextseqnum compute timeout interval for segment nextseqnum start timer for segment nextseqnum TCPåªä¼šä¸ºç¬¬ä¸€ä¸ªè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ pass segment to IP */ ; nextseqnum = nextseqnum + length(data) ; /*event: timer timeout for segment with sequence number y retransmit segment with sequence number y compute new timeout interval for segment y restart timer for sequence number y */ //event: ACK received, with ACK field value of y ; if (y &gt; sendbase) &#123; /* cumulative ACK of all data up to y */ cancel all timers for segments with sequence numbers &lt; y ; sendbase = y ; &#125; else &#123; /* a duplicate ACK for already ACKed segment å¿«é€Ÿé‡ä¼ æœºåˆ¶*/ increment number of duplicate ACKs received for y ; if (number of duplicate ACKS received for y == 3) &#123; /* TCP fast retransmit */ resend segment with sequence number y ; restart timer for segment y ; &#125; &#125; /* end of loop forever */ &#125; è¶…æ—¶é—´éš”åŠ å€å‰é¢è®²åˆ°TimeoutIntervalæ ¹æ®ERTTä¸ŽDRTTæŽ¨å¯¼å‡ºï¼Œå…¶å®žè¿™åªæ˜¯åœ¨é¦–æ¬¡å‘å‡ºæŠ¥æ–‡æ®µçš„æ—¶é—´é—´éš”ã€‚ä¹‹åŽæ¯è¶…æ—¶ä¸€æ¬¡ï¼Œè¿™ä¸ªæ—¶é—´é—´éš”éƒ½ä¼šè¢«è®¾ç½®ä¸ºåŽŸæ¥çš„2å€ã€‚è¿™ä¹Ÿç®—æ˜¯æ‹¥å¡žæŽ§åˆ¶çš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºå½“æ•°æ®æŠ¥ä¸¢å¤±æ—¶ï¼Œå¾ˆå¯èƒ½æ˜¯å› ä¸ºç½‘ç»œçš„æ‹¥å µã€‚åœ¨åŽé¢å°†ä¼šæ›´åŠ è¯¦ç»†çš„ä»‹ç»TCPæ‹¥å¡žæŽ§åˆ¶æœºåˆ¶ã€‚ å¿«é€Ÿé‡ä¼ å°±åƒå‰é¢å·²ç»æåˆ°çš„ï¼Œ3ä¸ªå¯¹åŒä¸€æ•°æ®çš„å†—ä½™ACKæ¿€å‘å¿«é€Ÿé‡ä¼ ã€‚ GoBackN or Selective Repeatï¼ŸTCPçœ‹èµ·æ¥æ›´åƒæ˜¯Go Back Nï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªå®šæ—¶å™¨ï¼Œä½†æ˜¯TCPåˆä¼šåœ¨æŽ¥æ”¶æ–¹æä¾›ç¼“å­˜æœºåˆ¶ï¼Œè€Œä¸”æ¯æ¬¡é‡ä¼ éƒ½åªä¼šé‡ä¼ ä¸€ä¸ªæŠ¥æ–‡æ®µã€‚ å¯¹TCPæå‡ºçš„ä¸€ç§ä¿®æ”¹æ„è§æ˜¯é€‰æ‹©ç¡®è®¤ï¼Œä¹Ÿå°±æ˜¯å…è®¸TCPå¯¹å¤±åºæŠ¥æ–‡æ®µæœ‰é€‰æ‹©çš„ç¡®è®¤ã€‚è¿™ç§æœºåˆ¶æˆ‘ä»¬ä¸è®¨è®ºã€‚ äº‘å·½ï¼šyunxunï¼Œæ„å¤–å‘çŽ°äº†ä¸€ä¸ªå¾ˆå¥½å¬çš„è¯ï¼ æµé‡æŽ§åˆ¶emmmè¿™é‡Œæ˜¯æƒ³ç›´æŽ¥åµŒå…¥jsçš„ï¼Œæ²¡æƒ³åˆ°å¤±è´¥äº†ã€‚å°±å…ˆè¿™ä¹ˆæ”¾ç€ï¼Œåœ¨æ–‡ç« æœ€åŽå¯ä»¥çœ‹åˆ°ã€‚ éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œæµé‡æŽ§åˆ¶ä¸Žæ‹¥å¡žæŽ§åˆ¶å¹¶ä¸æ˜¯åŒä¸€ä¸ªæ¦‚å¿µã€‚æµé‡æŽ§åˆ¶æ˜¯ä¸ºäº†ä½¿æŽ¥æ”¶æ–¹çš„ç¼“å­˜åŒºä¸ä¼šæº¢å‡ºï¼Œæ‹¥å¡žæŽ§åˆ¶åˆ™æ˜¯ä¸ºäº†é™ä½Žç½‘ç»œçš„è´Ÿæ‹…ã€‚ TCPçš„å‘é€ç«¯ç»´æŠ¤æŽ¥æ”¶çª—å£rwndï¼ŒæŽ¥æ”¶çª—å£å°†æŒ‡ç¤ºç»™å‘é€æ–¹æŽ¥æ”¶æ–¹è¿˜èƒ½æœ€å¤šæ”¶åˆ°å¤šå°‘å­—èŠ‚çš„æ•°æ®ã€‚å®šä¹‰ï¼šLastByteReadï¼šæŽ¥æ”¶æ–¹çš„åº”ç”¨è¿›ç¨‹ä»Žç¼“å­˜ä¸­è¯»å‡ºçš„æœ€åŽä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚LastByteRcvdï¼šä»Žç½‘ç»œåˆ°è¾¾æŽ¥æ”¶æ–¹å¹¶æ”¾å…¥æŽ¥æ”¶ç¼“å­˜çš„æœ€åŽä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚æŽ¥æ”¶ç¼“å­˜RecvBufferã€‚ç”±äºŽTCPä¸å…è®¸æº¢å‡ºï¼šLastByteRcvd-LastByteRead&lt;=RecvBufferæŽ¥æ”¶çª—å£çš„å¤§å°ï¼šrwnd=RecvBuffer-(LastByteRcvd-LastByteRead) LastByteSentï¼šå‘é€æ–¹ç»´æŠ¤çš„å·²ç»å‘é€çš„æœ€åŽä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚LastByteACKedï¼šè¢«ç¡®è®¤çš„æœ€åŽä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚ æ ¹æ®æŽ¥æ”¶æ–¹çš„åŠ¨ä½œï¼Œç”±äºŽè¢«Readçš„ä¸€å®šæ˜¯å·²ç»æŽ¥æ”¶æ–¹è¢«ACKedçš„ï¼ˆä½†æ˜¯å‘é€æ–¹å¯èƒ½ä¼šå› ä¸ºå…¶ä»–é—®é¢˜è¿˜æ²¡æœ‰è¢«ACKï¼‰ï¼Œå› æ­¤ï¼Œåªéœ€è¦ä¿è¯LastByteSent-LastByteACKed&lt;=rwndï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æŽ¥æ”¶æ–¹çš„ç¼“å†²åŒºä¸ä¼šæº¢å‡ºã€‚ åŠ¨ä½œï¼šæŽ¥æ”¶æ–¹æ¯æ¬¡ACKï¼Œéƒ½å‘Šè¯‰å‘é€æ–¹è‡ªå·±çš„rwndï¼Œå‘é€æ–¹å°†æœ€å¤šå‘é€rwndå­—èŠ‚çš„æ•°æ®ã€‚ ä»”ç»†æƒ³ä¸€æƒ³ï¼Œå…¶å®žè¿™ä¸ªçœŸçš„æ˜¯æœ‰ç”¨çš„å—ï¼Ÿå¦‚æžœä¸€ä¸ªåŒ…ACKäº†Nå­—èŠ‚ï¼Œä½†æ˜¯ACKæŸåæŽ‰äº†ï¼Œè¿™æ—¶å¯ä»¥çœ‹åˆ°rwndæŒ‡ç¤ºæœ‰é¢å¤–çš„ç©ºé—´ï¼Œä½†æ˜¯åœ¨å‘é€æ–¹å´æ²¡æœ‰é¢å¤–çš„ç©ºé—´äº†ï¼ˆsent-acked=rwndï¼‰ï¼Œè¿™æ—¶åº”ä¸åº”è¯¥ç»§ç»­å‘é€å‘¢ï¼Ÿ è¿™ç§æ–¹æ³•å…¶å®žæœ‰ä¸€ä¸ªé—®é¢˜ï¼šæŽ¥æ”¶æ–¹ACKçš„æ—¶å€™ï¼Œå‘Šè¯‰å‘é€æ–¹è‡ªå·±çš„rwnd=0ï¼Œè¿‡äº†ä¸€ä¼šå„¿ï¼ŒAPPå±‚æ‹¿èµ°äº†ä¸€äº›æ•°æ®ï¼Œè¿™æ—¶rwndæœ‰ç©ºé—´äº†ï¼Œä½†æ˜¯å‘é€æ–¹å´ä¸çŸ¥é“æœ‰ç©ºé—´äº†ï¼Œä¸ä¼šå‘é€æ•°æ®ã€‚è¿™å°±ä¼šå½¢æˆæ­»é”ã€‚æœ‰ä¸¤ç§å¯èƒ½çš„è§£å†³æ–¹æ³•ï¼Œä½†æ˜¯TCPè¦æ±‚æŽ¥æ”¶æ–¹å°½å¯èƒ½ç®€å•ï¼ŒäºŽæ˜¯è¿™ä¸ªä»»åŠ¡è½åœ¨äº†å‘é€æ–¹ã€‚å‘é€æ”¾åœ¨è¢«å‘ŠçŸ¥å¯¹æ–¹çš„rwnd=0ä¹‹åŽä¸€æ®µè¿‡æ—¶é—´å°†å¼€å§‹å‘æŽ¥æ”¶æ–¹å‘é€åªå«æœ‰ä¸€ä¸ªå­—èŠ‚çš„æŽ¢æµ‹æŠ¥æ–‡ï¼Œè¿™äº›æŠ¥æ–‡æ®µå°†ä¼šè¢«æŽ¥æ”¶æ–¹ç¡®è®¤ï¼Œç›´åˆ°å‘é€æ–¹æŽ¥æ”¶åˆ°äº†ä¸€ä¸ªrwnd!=0çš„æŠ¥æ–‡æ®µACKã€‚ UDPä¸æä¾›æµé‡æŽ§åˆ¶ã€‚ TCPè¿žæŽ¥ç®¡ç†è¿žæŽ¥å»ºç«‹ ä¸‰æ¬¡æ¡æ‰‹å¦‚ä¸Šï¼š å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªä¸æ‰¿è½½æ•°æ®çš„SYNè¢«ç½®ä¸º1çš„æŠ¥æ–‡æ®µSYNæŠ¥æ–‡æ®µã€‚client_isnæ˜¯éšæœºç”Ÿæˆï¼Œä¸ºäº†æ¶ˆé™¤åˆ†ç»„é‡ä¼ å¸¦æ¥çš„é”™è¯¯ï¼ˆå–å†³äºŽç½‘ç»œæ—¶å»¶ï¼‰ã€‚æœ‰ä¸€äº›åœ¨å¦‚ä½•é€‰å–client_isnæ–¹é¢çš„æœ‰è¶£ç ”ç©¶ã€‚ æœåŠ¡å™¨ç«¯å‘é€SYNACKæŠ¥æ–‡æ®µï¼šä¸€æ—¦æœåŠ¡å™¨ç«¯æŽ¥æ”¶åˆ°äº†ä¸Šä¸€ä¸ªæŠ¥æ–‡ï¼Œå°±å¼€å§‹å‡†å¤‡ä¸ºè¿™æ¡è¿žæŽ¥åˆ†é…ç¼“å­˜ä¸Žå˜é‡ï¼Œå¹¶å‘é€ä¸€ä¸ªå…è®¸è¿žæŽ¥çš„æŠ¥æ–‡æ®µï¼šSYNè¢«ç½®ä¸º1è¡¨ç¤ºè¯·æ±‚è¿žæŽ¥ã€‚ï¼ˆTCPè¿žæŽ¥äº’ä¸å¹²æ‰°ï¼Œå®žé™…ä¸Šå­˜åœ¨ä¸¤æ¡è¿žæŽ¥ï¼Œåœ¨å…³é—­è¿žæŽ¥æ—¶æ›´èƒ½ä½“çŽ°å‡ºï¼‰ï¼ŒseqæŒ‡æ˜Žäº†è‡ªå·±çš„åˆå§‹åºå·ï¼ŒACKæ˜¯å¯¹å‰é¢ä¸€ä¸ªè¯·æ±‚è¿žæŽ¥æŠ¥æ–‡æ®µçš„ç¡®è®¤ã€‚æ­¤åŽï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥å‘æœåŠ¡å™¨ç«¯å‘é€ä¿¡æ¯äº†ã€‚ å®¢æˆ·æœºä¸ºè¿™æ¡è¿žæŽ¥åˆ†é…å˜é‡ä¸Žç¼“å­˜ï¼Œå¹¶å‘é€ç¡®è®¤æŠ¥æ–‡ï¼šæ˜¯å®¢æˆ·ç«¯ç¡®è®¤æœåŠ¡å™¨ç«¯è¿žæŽ¥çš„æ™®é€šæŠ¥æ–‡æ®µï¼Œè¿™ä¸ªæŠ¥æ–‡æ®µå¯ä»¥æ‰¿è½½æ•°æ®ï¼ˆå› ä¸ºclient-&gt;serverçš„è¿žæŽ¥å·²ç»å»ºç«‹ï¼‰ã€‚æ­¤åŽï¼ŒæœåŠ¡å™¨ç«¯å°±å¯ä»¥å‘å®¢æˆ·ç«¯å‘é€ä¿¡æ¯äº†ã€‚ client_isnä»¥åŠserver_isnä¸€èˆ¬æœ‰è‡ªå·±å¯¹åº”çš„counteräº§ç”Ÿï¼Œä»Žè€Œç¡®ä¿ç›¸è¿‘æ—¶é—´åˆ›ç«‹çš„è¿žæŽ¥çš„seqä¸åŒã€‚ å¯ä»¥æƒ³è±¡ï¼Œå¦‚æžœåœ¨Aåˆ°Bçš„ä½¿ç”¨åˆ°äº†seq=Nçš„è¿žæŽ¥åˆšåˆšå…³é—­ï¼Œæ–°å¼€çš„Aåˆ°Bçš„ç›¸åŒç«¯å£å·çš„è¿žæŽ¥åˆä½¿ç”¨äº†åºå·Nï¼Œè€Œç”±äºŽç½‘ç»œæ—¶å»¶çš„å…³ç³»ï¼Œä¸Šä¸€ä¸ªè¿žæŽ¥çš„Nè¿˜å­˜åœ¨äºŽç½‘ç»œä¹‹ä¸­ï¼Œå°±æœ‰å¯èƒ½å‡ºçŽ°ä¸Šä¸€ä¸ªNè¢«è¯¯å½“ä½œè¿™æ¬¡çš„Nè¢«æŽ¥æ”¶ACKï¼Œå¯¼è‡´åº”ç”¨å±‚èŽ·å–æ•°æ®é”™è¯¯çš„æƒ…å†µå‘ç”Ÿã€‚ ä¸Šé¢çš„æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ‰“å¼€è¿‡ç¨‹ï¼Œå®žé™…ä¸Šï¼Œæ‰“å¼€è¿‡ç¨‹å¯èƒ½ä¼šå‡ºçŽ°å„ç§å¹ºè›¾å­ï¼Œæ¯”å¦‚ï¼š Simultaneous Open ï¼šå®žé™…ä¸Šï¼Œè¿™ç§æ‰“å¼€æ˜¯æˆåŠŸçš„ã€‚ä¸¤ç«¯éƒ½æœ‰å„è‡ªçš„è¿žæŽ¥ï¼Œå®žé™…ä¸Šæ‰€èµ·çš„æ•ˆæžœæ˜¯ä¸€æ ·çš„ã€‚è¿™é‡Œçš„ç¬¬äºŒä¸ªæŠ¥æ–‡ä¹‹æ‰€ä»¥æ²¡æœ‰seqï¼Œæ˜¯å› ä¸ºseqæ˜¯ç»™å¯¹æ–¹ACKä½¿ç”¨çš„ï¼Œç”±äºŽè¿™é‡Œçš„æ¯ä¸€æ¡è¿žæŽ¥æ˜¯å•å‘çš„ï¼Œå°±ä¸éœ€è¦ç»™å‡ºä¸€ä¸ªæ–°çš„seqã€‚ åŠæ‰“å¼€ï¼šåŠæ‰“å¼€æ˜¯å¤±è´¥çš„æ‰“å¼€ï¼Œæ˜¯å› ä¸ºä¸€æ–¹çš„è¿žæŽ¥å»ºç«‹èµ·æ¥ä¹‹åŽå¦ä¸€æ–¹æ²¡æœ‰å†å›žæ¶ˆæ¯ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸‰æ¡æŠ¥æ–‡ä¸è§äº†ã€‚æ¯”å¦‚æœºå™¨éžæ­£å¸¸å…³æœºç­‰éƒ½å¯èƒ½ä¼šå¯¼è‡´åŠæ‰“å¼€ã€‚æ•°é‡è¾ƒå¤§çš„ç‰ˆæ‰“å¼€å°†ä¼šå½±å“æ•ˆçŽ‡ä¸Žç©ºé—´ã€‚æ€Žä¹ˆæ¶ˆé™¤åŠæ‰“å¼€çš„è¿žæŽ¥å‘¢ï¼Ÿå¯ä»¥å®šæ—¶æ£€æŸ¥ï¼Œå‘å¯¹æ–¹å‘é€æŠ¥æ–‡ï¼Œå¦‚æžœä¸å¦‚å›žåº”ï¼Œå°±æŠŠå·±æ–¹çš„è¿žæŽ¥å…³é—­ã€‚ è¿žæŽ¥å…³é—­å‚ä¸ŽTCPè¿žæŽ¥çš„ä»»æ„ä¸€æ–¹éƒ½èƒ½éšæ—¶ç»ˆæ­¢è¿žæŽ¥ï¼Œè¿žæŽ¥ç»“æŸä¹‹åŽï¼Œä¸ºè¿žæŽ¥ç»´æŠ¤è€Œå­˜å‚¨çš„å˜é‡ä¸Žç¼“å­˜éƒ½å°†è¢«é‡Šæ”¾ã€‚çº¢è‰²éƒ¨åˆ†ä¹‹åŽï¼Œclientä¸å†å‘é€æŠ¥æ–‡æ®µï¼Œä½†æ˜¯è¿˜å¯ä»¥æŽ¥æ”¶ï¼›ç»¿è‰²ä¹‹åŽï¼Œserverä¸å†å‘é€æŠ¥æ–‡æ®µï¼Œè¿žæŽ¥æ­£å¼å…³é—­ã€‚ åŠå…³é—­ï¼šåŠå…³é—­æ˜¯æ­£å¸¸çŽ°è±¡ï¼ŒæŒ‡çš„å°±æ˜¯A-&gt;Bçš„è¿žæŽ¥å…³é—­ä¹‹åŽï¼ŒAä¸ä¼šå†å‘é€ä½†æ˜¯è¿˜èƒ½æŽ¥æ”¶ï¼ŒBåˆ°Açš„ä¹Ÿå…³é—­äº†ä¹‹åŽæ‰éƒ½æ¶ˆåœä¸‹æ¥ã€‚ TCPè¿žæŽ¥çŠ¶æ€åºåˆ—å®¢æˆ·æœºçš„TCPçŠ¶æ€åºåˆ—ï¼š ä¸ºä»€ä¹ˆç›´åˆ°ç­‰å¾…ä¸€ä¸ªIPæ•°æ®æŠ¥åœ¨Internetä¸Šå¯èƒ½å­˜æ´»çš„æœ€å¤§æ—¶é—´é•¿çš„ä¸¤å€ï¼ˆå³120ç§’ï¼‰åŽï¼Œä¸€ä¸ªè¿žæŽ¥æ‰èƒ½ä»ŽTIME_WAITçŠ¶æ€è½¬ç§»åˆ°CLOSEDçŠ¶æ€ï¼Ÿå½“è¿žæŽ¥çš„æœ¬åœ°ä¸€æ–¹å·²ç»å‘å‡ºä¸€ä¸ªACKæ•°æ®æ®µå“åº”å¯¹æ–¹çš„FINæ•°æ®æ®µæ—¶ï¼Œå®ƒå¹¶ä¸çŸ¥é“è¿™ä¸ªACKæ•°æ®æ®µæ˜¯å¦æˆåŠŸåœ°è¢«ä¼ é€’ã€‚ç»“æžœæ˜¯ï¼Œå¦ä¸€æ–¹å¯èƒ½æœ‰é‡ä¼ ä¸€ä¸ªFINæ•°æ®æ®µï¼Œè€Œè¿™ä¸ªç¬¬2ä¸ªFINæ•°æ®æ®µå¯èƒ½åœ¨ç½‘ä¸­è¢«å»¶è¿Ÿã€‚å¦‚æžœå…è®¸è¿žæŽ¥ç›´æŽ¥è½¬ç§»åˆ°CLOSEDçŠ¶æ€é‚£ä¹ˆå¯ä»¥ä¼šæœ‰å¦ä¸€å¯¹åº”ç”¨è¿›ç¨‹ä¼šæ‰“å¼€åŒä¸€ä¸ªè¿žæŽ¥ï¼ˆå³ä½¿ç”¨åŒä¸€å¯¹ç«¯å£å·ï¼‰ï¼Œè€Œå‰é¢è¿žæŽ¥å®žä¾‹ä¸­è¢«å»¶è¿Ÿçš„FINæ•°æ®æ®µè¿™æ—¶ä¼šç«‹å³ä½¿åŽæ¥çš„è¿žæŽ¥å®žä¾‹ç»ˆæ­¢ã€‚åŒæ—¶ä¹Ÿé¿å…äº†åˆ†ç»„é‡ä¼ å¸¦æ¥çš„é”™è¯¯ä¿¡æ¯ã€‚ æœåŠ¡å™¨çš„TCPçŠ¶æ€åºåˆ—ï¼š TCPå®šæ—¶å™¨æ€»ç»“Connection Establishment Timerï¼šå½“SYNåŒ…å‘å‡ºæ—¶ï¼Œè¿žæŽ¥å»ºç«‹å®šæ—¶å™¨å°±å¼€å§‹è®¡æ—¶ï¼Œå¦‚æžœåœ¨75ç§’å†…æœªæ”¶åˆ°å“åº”ï¼Œåˆ™è¿žæŽ¥å»ºç«‹å¤±è´¥ã€‚The Retransmission Timerï¼šé‡å‘å®šæ—¶å™¨æ˜¯TCPå‘é€æ•°æ®æ—¶è®¾ç½®çš„ï¼Œå¦‚æžœæ•°æ®åœ¨é‡å‘å®šæ—¶å™¨è¶…æ—¶æ—¶è¿˜æ²¡æœ‰è¿”å›žç¡®è®¤ï¼ŒTCPå°±é‡å‘æ•°æ®ã€‚å®šæ—¶å™¨çš„è®¾ç½®æ˜¯åŠ¨æ€çš„ï¼Œå®ƒåŸºäºŽTCPå¯¹å¾€è¿”æ—¶é—´ï¼ˆround-trip timeï¼‰çš„æµ‹è¯•ï¼Œé‡å‘æ—¶é—´è®¾åœ¨1åˆ°64ç§’Delayed ACK Timerï¼šå½“TCPå®žä½“æ”¶åˆ°æ•°æ®æ—¶å®ƒå¿…é¡»è¿”å›žç¡®è®¤ï¼Œä½†å¹¶ä¸éœ€è¦ç«‹å³å›žå¤ï¼Œå®ƒå¯ä»¥åœ¨500mså†…å‘é€ACKæŠ¥æ–‡ï¼Œå¦‚æžœåœ¨è¿™æ®µæ—¶é—´å†…å®ƒæ°å¥½æœ‰æ•°æ®è¦å‘é€ï¼Œå®ƒå°±å¯ä»¥åœ¨æ•°æ®å†…åŒ…å«ç¡®è®¤ä¿¡æ¯ï¼Œå› æ­¤éœ€è¦ACKå»¶æ—¶å®šæ—¶å™¨ã€‚The Persistence Timerï¼šç®¡ç†ä¸€ç§è¾ƒä¸ºå°‘è§çš„äº‹ä»¶ï¼Œå³æ­»é”æƒ…å†µã€‚ä¸ºäº†è®©å‘é€æ–¹æš‚åœå‘é€æ•°æ®ï¼ŒæŽ¥æ”¶æ–¹å‘é€ä¸€ä¸ªæŽ¥æ”¶çª—å£ä¸º0çš„ç¡®è®¤ã€‚åŽæ¥ï¼ŒæŽ¥æ”¶æ–¹åˆå‘é€äº†ä¸€ä¸ªæ›´æ–°äº†çª—å£å¤§å°çš„åˆ†ç»„ï¼Œä½†è¯¥åˆ†ç»„ä¸¢å¤±ï¼ŒäºŽæ˜¯ï¼ŒåŒæ–¹éƒ½å¤„äºŽç­‰å¾…ä¸ºäº†é˜²æ­¢ä¸Šè¿°äº‹æƒ…å‘ç”Ÿï¼Œå‘é€æ–¹åœ¨æ”¶åˆ°æŽ¥æ”¶æ–¹å‘æ¥ä¸€ä¸ªçª—å£ä¸º0çš„æ•°æ®æ—¶ï¼Œå°±å¯åŠ¨æŒç»­å®šæ—¶å™¨ï¼Œç­‰è¯¥å®šæ—¶å™¨è¶…æ—¶è¿˜æ²¡æœ‰æ”¶åˆ°å¯¹æ–¹ä¿®æ”¹çª—å£å¤§å°çš„æ•°æ®çš„è¯ï¼Œå‘é€æ–¹å°±å‘ä¸€ä¸ªæŽ¢æµ‹æ•°æ®ï¼Œå¯¹è¯¥æŽ¢æµ‹æ•°æ®çš„å“åº”åº”åŒ…å«äº†çª—å£å¤§å°ï¼Œè‹¥ä»ä¸º0ï¼Œåˆ™å®šæ—¶å™¨æ¸…0ï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œå¦åˆ™åˆ™å¯ä»¥å‘é€æ•°æ®ã€‚The Keep-Alive Timerï¼šå½“ä¸€ä¸ªè¿žæŽ¥é•¿æ—¶é—´é—²ç½®æ—¶ï¼Œä¿æŒå­˜æ´»å®šæ—¶å™¨ä¼šè¶…æ—¶è€Œä½¿ä¸€æ–¹åŽ»æ£€æµ‹å¦ä¸€æ–¹æ˜¯å¦ä»ç„¶å­˜åœ¨ï¼Œå¦‚æžœå®ƒæœªå¾—åˆ°å“åº”ï¼Œä¾¿ç»ˆæ­¢è¯¥è¿žæŽ¥The Quiet Timerï¼šå½“TCPè¿žæŽ¥æ–­å¼€åŽï¼Œä¸ºé˜²æ­¢è¯¥è¿žæŽ¥ä¸Šçš„æ•°æ®è¿˜åœ¨ç½‘ç»œä¸Šï¼Œå¹¶è¢«åŽç»­æ‰“å¼€çš„ç›¸åŒçš„è¿žæŽ¥æŽ¥æ”¶ï¼Œè¦è®¾ç½®é—²ç½®å®šæ—¶å™¨ä»¥é˜²æ­¢åˆšåˆšæ–­å¼€è¿žæŽ¥çš„ç«¯å£å·è¢«ç«‹å³é‡æ–°ä½¿ç”¨ SYNæ´ªæ³›æ”»å‡»åœ¨ä¸Šé¢æåˆ°äº†ï¼šåŠOpenã€‚å…¶å®žè¿™ç§æƒ…å†µå¤§éƒ½åœ¨ä¸€åˆ†é’Ÿä¹‹åŽè¢«æœåŠ¡å™¨ç«¯å‘çŽ°å¹¶æ–­å¼€è¿žæŽ¥ï¼Œå›žæ”¶èµ„æºäº†ã€‚ä½†æ˜¯è¿™ä¸€åˆ†å¤šé’Ÿçš„æ—¶é—´çš„èµ„æºæµªè´¹å°†ä¸ºç»å…¸çš„Dosæ”»å‡»å³SYNæ´ªæ³›æ”»å‡»åˆ›é€ äº†çŽ¯å¢ƒã€‚åœ¨è¿™ç§æ”»å‡»æ¨¡å¼ä¸­ï¼Œæ”»å‡»è€…å‘é€å¤§é‡çš„SYNæŠ¥æ–‡æ®µè€Œä¸å‘é€æœ€ç»ˆçš„ACKï¼Œå¯¼è‡´å¤§é‡çš„åŠè¿žæŽ¥å ç”¨æœåŠ¡å™¨çš„èµ„æºã€‚çŽ°åœ¨æœ‰ä¸€ç§æœ‰æ•ˆçš„è§£å†³æ–¹å¼ï¼šSYN cookieSYN cookieçš„å·¥ä½œæ–¹å¼æ˜¯ï¼šå½“serveræŽ¥æ”¶åˆ°ä¸€ä¸ªSYNï¼Œä»–å¹¶ä¸ç«‹å³ä¸ºè¿™ä¸ªè¿žæŽ¥åˆ†é…ç¼“å­˜ä¸Žå˜é‡ï¼Œè€Œæ˜¯ä½¿ç”¨è¿™ä¸ªTCPæŠ¥æ–‡æ®µæºå¸¦çš„æºipä¸Žæºportä¿¡æ¯ï¼Œè¿è¡Œä¸€ä¸ªä»…æœ‰serverçŸ¥é“çš„ä¸€ä¸ªæ•£åˆ—å‡½æ•°å¾—åˆ°ä¸€ä¸ªåˆå§‹åºåˆ—å·ï¼Œè¿™ç§ç²¾å¿ƒåˆ¶ä½œçš„åˆå§‹åºåˆ—å·è¢«ç§°ä¸ºcookieã€‚serverä»…ä»…æ˜¯å‘é€ä¸€ä¸ªå…·æœ‰è¯¥åºå·çš„SYNACKã€‚è¯¥åºå·ä¹Ÿä¸ä¼šè¢«ä¿å­˜ã€‚å¦‚æžœä¸€æ®µæ—¶é—´ä¹‹åŽæŽ¥æ”¶åˆ°äº†åŒä¸€ä¸ªæºipä¸Žæºportçš„ACKæŠ¥æ–‡æ®µï¼Œserverå‘çŽ°äºŒè€…å¹¶æ²¡æœ‰è¿žæŽ¥ï¼ŒäºŽæ˜¯å†æ¬¡è¿è¡Œæ•£åˆ—å‡½æ•°ï¼Œå¾—åˆ°çš„åºå·å¦‚æžœåŠ ä¸€å°±æ˜¯æœ¬ACKæºå¸¦çš„åºå·ï¼Œserverå°±è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ­£å¸¸çš„clientï¼Œä¸ºä¹‹åˆ†é…èµ„æºï¼Œå»ºç«‹è¿žæŽ¥ï¼Œå¦åˆ™ï¼Œserverä¸ä¼šåˆ†é…èµ„æºï¼Œä¹‹å‰çš„æ”»å‡»æ²¡æœ‰ä»»ä½•å½±å“ã€‚ï¼ˆå“Žå‘€å…¶å®žä¹Ÿç¨ç¨å½±å“äº†å¤„ç†æ•ˆçŽ‡äº†å§ï¼‰ å…¶ä»–æƒ…å†µå‰é¢è€ƒè™‘çš„éƒ½æ˜¯ç‰¹åˆ«ç†æƒ³çš„æƒ…å†µï¼Œå¦‚æžœclientå‘serverä¸€ä¸ªå¹¶ä¸æŽ¥å—TCPè¿žæŽ¥çš„portå‘é€äº†ä¸€æ¡æŠ¥æ–‡å°†ä¼šæ€Žæ ·ï¼Ÿ serverå°†å‘é€ä¸€ä¸ªç‰¹æ®Šé‡ç½®æŠ¥æ–‡æ®µç»™clientï¼Œè¿™ä¸ªæŠ¥æ–‡æ®µå°†RSTæ ‡å¿—ä½ç½®ä¸º1ï¼Œå‘Šè¯‰clientè‡ªå·±æ²¡æœ‰é‚£ä¸ªportæŽ¥æ”¶TCPï¼Œè¯·ä»–ä¸è¦å†å‘é€äº†ã€‚ å¦‚æžœå‘é€çš„æ˜¯ä¸€ä¸ªUDPæŠ¥æ–‡æ®µï¼Œå¦‚æžœä¸åŒ¹é…ï¼Œserverå‘é€ä¸€ä¸ªICMPæ•°æ®æŠ¥ã€‚è¿™åœ¨ç½‘ç»œå±‚è¿›è¡Œè®¨è®ºã€‚ nmapå·¥ä½œåŽŸç†ï¼šnmapå‘æŸä¸€å°ä¸»æœºçš„ä¸€ä¸ªportå‘é€ä¸€ä¸ªSYNï¼ŒæŽ¥ä¸‹æ¥æœ‰ä¸‰ç§æƒ…å†µï¼šæ”¶åˆ°ä¸€ä¸ªSYNACKï¼Œåˆ™ä¼šæ ‡æ˜Žé‚£ä¸ªç«¯å£ä¸Šæœ‰ä¸€ä¸ªå·²ç»æ‰“å¼€çš„TCPåº”ç”¨ç¨‹åºï¼Œè¿”å›žâ€œæ‰“å¼€â€ï¼Œå¦‚æžœæ”¶åˆ°RSTï¼Œè¯´æ˜Žè¿™ä¸ªç«¯å£æ²¡æœ‰ä¸€ä¸ªTCPåº”ç”¨ç¨‹åºï¼Œå¦‚æžœä»€ä¹ˆéƒ½æ²¡æœ‰æ”¶åˆ°ï¼Œè¯´å¾ˆå¯èƒ½æ˜¯è¢«é˜²ç«å¢™ç»™å¢™äº†ã€‚nmapä¸‹è½½ TCP option å…ˆåªæ”¾ä¸€ä¸ªå›¾ã€‚ æ‹¥å¡žæŽ§åˆ¶åŽŸç†åœ¨è®¨è®ºTCPçš„æ‹¥å¡žæŽ§åˆ¶ä¹‹å‰ï¼Œé¦–å…ˆæ¥è®¨è®ºæ›´åŠ æ™®éçš„æ‹¥å¡žæŽ§åˆ¶åŽŸç†ã€‚ æˆ‘ä»¬æŠŠåˆ†ç»„é‡ä¼ ä½œä¸ºç½‘ç»œæ‹¥å¡žçš„ä¿¡å·ã€‚å®žé™…ä¸Šï¼Œåˆ†ç»„é‡ä¼ ä¸å…¨æ˜¯å› ä¸ºç½‘ç»œæ‹¥å¡žã€‚ ATMï¼šå¼‚æ­¥ä¼ è¾“ç½‘ç»œABRï¼šå¯ç”¨æ¯”ç‰¹çŽ‡ 1. ä¸¤ä¸ªå‘é€æ–¹ä¸Žä¸€ä¸ªæ— é™ç¼“å­˜çš„è·¯ç”±å™¨ä¸è€ƒè™‘åˆ†ç»„é‡ä¼ ã€æµé‡æŽ§åˆ¶ã€æ‹¥å¡žæŽ§åˆ¶ï¼Œå¿½ç•¥é¦–éƒ¨ä¿¡æ¯çš„é¢å¤–å¼€é”€ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œå‘é€æ–¹å®Œå…¨ä¸èŠ‚åˆ¶ï¼Œæ¯è¿žæŽ¥çš„åžåé‡å¦‚ä¸‹ï¼šåžåé‡ä¸å¯èƒ½æœ‰è¶…è¿‡R/2çš„ç¨³å®šçŠ¶æ€ï¼Œè¿™æ˜¯å› ä¸ºäºŒè€…å…±äº«ä¸€ä¸ªåžåé‡Rçš„é“¾è·¯ã€‚å½“å‘é€é€ŸçŽ‡åœ¨[0,R/2]æ—¶ï¼ŒæŽ¥æ”¶æ–¹çš„åžåçŽ‡ç­‰äºŽå‘é€æ–¹çš„å‘é€é€ŸçŽ‡ï¼Œä¹Ÿå°±æ˜¯å‘é€æ–¹çš„æ‰€æœ‰æ•°æ®ç»è¿‡æœ‰é™æ—¶é—´ä¼ è¾“ä¹‹åŽåˆ°è¾¾æŽ¥æ”¶æ–¹ã€‚ ä½†æ˜¯ï¼Œå†çœ‹é€Ÿåº¦ä¸Žå¹³å‡æ—¶å»¶çš„å…³ç³»ï¼šçœ‹èµ·æ¥åžåé‡æŽ¥è¿‘R/2æ˜¯ä»¶å¥½äº‹ï¼Œä½†æ˜¯ä»Žæ—¶å»¶çš„è§’åº¦æ¥çœ‹ï¼ŒæŽ¥è¿‘R/2çš„æ—¶å€™ï¼Œå¹³å‡æ—¶å»¶å°±ä¼šè¶Šæ¥è¶Šå¤§ã€‚ ä»£ä»·1ï¼šå·¨å¤§çš„æ—¶å»¶ã€‚ ï¼ˆä¸ºä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿåˆ°R/2çš„æ—¶å€™ä¸æ˜¯æ­£å¥½åˆ©ç”¨å®Œæ‰€æœ‰é“¾è·¯å—ï¼Ÿåˆæ²¡æœ‰é‡ä¼ ï¼Œæ—¶å»¶ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆå¤§ï¼Ÿï¼Ÿï¼Ÿ 2. ä¸¤ä¸ªå‘é€æ–¹ä»¥åŠä¸€ä¸ªå…·æœ‰æœ‰é™ç¼“å­˜çš„è·¯ç”±å™¨å‡è®¾ï¼šè·¯ç”±å™¨ç¼“å­˜å·²ç»æ»¡äº†çš„è¯ï¼Œæ–°æ¥çš„æ•°æ®åŒ…å°±ä¼šè¢«ä¸¢å¼ƒã€‚ ä¾›ç»™è½½è·ï¼šè¿è¾“å±‚å‘ç½‘ç»œä¸­å‘é€æŠ¥æ–‡æ®µçš„é€ŸçŽ‡ã€‚ ä»ç„¶ä½¿ç”¨ä¸Šé¢çš„å›¾ã€‚ å¦‚æžœæŽ§åˆ¶å¾—éžå¸¸å¥½ï¼Œyin=yout å¦‚æžœåªå¯¹ä¸¢å¤±çš„åŒ…è¿›è¡Œé‡ä¼ ï¼Œyin`&gt;yout å¯¹è¿Ÿåˆ°çš„åŒ…é‡ä¼ ï¼Œyin`è¿œå¤§äºŽyout ä»¥ä¸Šä¸‰ç§æƒ…å†µä¸‹çš„åžåé‡éšç€ä¾›ç»™è½½è·å˜åŒ–ï¼šï¼ˆæ‰€è°“åžåé‡ï¼Œå°±æ˜¯â˜žyoutå§ï¼‰ ç¬¬äºŒå›¾çš„R/3-R/2æ˜¯éƒ¨åˆ†é‡ä¼ ä¸¢å¤±å ç”¨çš„å¸¦å®½ï¼Œç¬¬ä¸‰å›¾çš„R/4-R/2æ˜¯éƒ¨åˆ†é‡ä¼ ä¸¢å¤±+å»¶æ—¶é‡ä¼ å¸¦æ¥çš„ä¸¢å¤±ã€‚ ä»£ä»·2ï¼šä¸å¿…è¦çš„é‡ä¼ å ç”¨å¸¦å®½ 3. å››ä¸ªå‘é€æ–¹ä»¥åŠæœ‰æœ‰é™ç¼“å­˜çš„å¤šå°è·¯ç”±å™¨åŠå¤šè·³è·¯å¾„ ä»Žè™šçº¿å¼€å§‹ï¼Œåžåé‡å°±å¼€å§‹ä¸‹é™ï¼Œä¸€ç›´åˆ°æœ€åŽå‡ ä¹Žä¸º0.è¿™æ—¶è·¯ç”±å™¨å‡ ä¹Žä¸€ç›´åœ¨ä¸¢å¤±é‡ä¼ ä¸¢å¤±é‡ä¼ ã€‚ æ‹¥å¡žæŽ§åˆ¶æ–¹æ³• ç«¯åˆ°ç«¯çš„æ‹¥å¡žæŽ§åˆ¶ï¼šIPåè®®å¹¶ä¸æä¾›å¯¹æ‹¥å¡žæŽ§åˆ¶çš„æ”¯æŒï¼Œå¦‚æžœè¦åœ¨è¿è¾“å±‚åšæ‹¥å¡žæŽ§åˆ¶ï¼Œä¹Ÿåªèƒ½é€šè¿‡è¡Œä¸ºæ¥åˆ¤æ–­ã€‚ä¾‹å¦‚3æ¬¡åŒä¸€æ•°æ®çš„ACKï¼Œè¢«è®¤ä¸ºæ˜¯ä¸¢å¤±æŠ¥æ–‡æ®µï¼Œè¿›è€Œä»¥ä¸ºç½‘ç»œæœ‰äº›ç¹å¿™ã€‚ ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡žæŽ§åˆ¶ï¼šè·¯ç”±å™¨å‘å‘é€æ–¹æä¾›æ˜¾å¼çš„æ‹¥å¡žä¿¡æ¯ã€‚è¿™ä¸ªä¿¡æ¯åªéœ€è¦ä¸€ä¸ªæ¯”ç‰¹ã€‚æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯ç›´æŽ¥åé¦ˆï¼Œè·¯ç”±å™¨ç›´æŽ¥å‘Šè¯‰å‘é€æ–¹æ‹¥å¡žï¼›å¦ä¸€ç§æ˜¯é—´æŽ¥åé¦ˆï¼Œè·¯ç”±å™¨æ ‡è®°æ•°æ®ï¼Œå½“æŽ¥æ”¶æ–¹æ”¶åˆ°è¢«æ ‡è®°çš„æ•°æ®ä¹‹åŽåœ¨ACKçš„æ—¶å€™å‘Šè¯‰å‘é€æ–¹ã€‚ ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡žæŽ§åˆ¶ï¼šATM ABRTCPæ‹¥å¡žæŽ§åˆ¶TCPçš„æ‹¥å¡žæŽ§åˆ¶çš„åŸºç¡€æ˜¯è®¤ä¸ºæ‰€æœ‰æ•°æ®åŒ…çš„ä¸¢å¤±éƒ½æ˜¯è·¯ç”±å™¨å› ä¸ºé˜»å¡žç»™æˆ‘ä¸¢æŽ‰äº†ã€‚å®žé™…ä¸Šï¼Œæœ‰çº¿ç½‘ç»œä¼ ä¸¢çš„å¯èƒ½æ€§å¾ˆå°ï¼Œæ‰€ä»¥è¿™ä¸ªåŸºç¡€æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ã€‚ä½†æ˜¯åœ¨æ— çº¿ç½‘ç»œä¸­ï¼ŒTCPçš„æ‹¥å¡žæŽ§åˆ¶åˆ™éœ€è¦æœ‰ä¸€å®šçš„æ”¹è¿›ã€‚ TCPæ‹¥å¡žæŽ§åˆ¶æ¦‚è¿°æ‹¥å¡žçª—å£cwndï¼šå‘é€æ–¹ç»´æŠ¤ä¸€ä¸ªå˜é‡ï¼Œä»–å¯¹ä¸€ä¸ªTCPå‘é€æ–¹èƒ½å¯¹ç½‘ç»œä¸­å‘é€æ•°æ®çš„é€ŸçŽ‡è¿›è¡Œäº†é™åˆ¶ã€‚ç‰¹åˆ«çš„ï¼š$$LastByteRcved-LastByteACKed&lt;=min{rwnd,cwnd}$$ cwndé™åˆ¶äº†å‘é€æ–¹æ¯æ¬¡å‘æŽ¥æ”¶æ–¹å‘é€çš„å­—èŠ‚æ•°é‡ï¼Œè€ƒè™‘ä¸€ä¸ªä¸¢åŒ…ä¸Žå‘é€æ—¶å»¶çš†å¿½ç•¥ä¸è®¡çš„è¿žæŽ¥ï¼Œç²—ç•¥çš„è®²ï¼Œå‘é€æ–¹å‘é€çš„é€ŸçŽ‡å¤§æ¦‚æ˜¯ï¼ˆcwnd/RTT)å­—èŠ‚/ç§’ã€‚å› æ­¤ï¼Œè°ƒæ•´cwndå¯ä»¥è°ƒæ•´å‘é€é€ŸçŽ‡ã€‚ é‚£ä¹ˆå‘é€æ–¹è¦æ€Žä¹ˆçŸ¥é“æœ‰äº†æ‹¥å¡žï¼Ÿç¬¬ä¸€å°±æ˜¯åƒå‰é¢æ‰€è¯´çš„ä¸¢åŒ…æˆ–æ˜¯è¿žç»­ä¸‰ä¸ªACKã€‚æœ‰æ²¡æœ‰å¯èƒ½ä¸¢åŒ…ä¸æ˜¯å› ä¸ºç½‘ç»œæ‹¥å¡žå‘¢ï¼Ÿå½“ç„¶æ˜¯å¯èƒ½çš„ï¼ å¯¹äºŽä¸ä¸¢åŒ…çš„ç†æƒ³æƒ…å†µä¸‹ï¼ŒTCPçš„å‘é€æ–¹å°†ä¼šæ”¶åˆ°å¯¹ä»¥å‰æœªç¡®è®¤æŠ¥æ–‡çš„ç¡®è®¤ï¼Œå®ƒä»¬ä½¿ç”¨è¿™äº›ç¡®è®¤æ¥å¢žåŠ cwndã€‚åˆ°è¾¾çš„é€ŸçŽ‡å°†ä¼šå½±å“cwndå¢žé•¿çš„é€ŸçŽ‡ï¼Œå› ä¸ºTCPä½¿ç”¨è§¦å‘ï¼ˆæˆ–è®¡æ—¶ï¼‰æ¥å¢žå¤§å®ƒçš„æ‹¥å¡žçª—å£é•¿åº¦ï¼ŒTCPæ˜¯è‡ªè®¡æ—¶çš„ã€‚ TCPæœ‰ä¸€äº›å¤„ç†æ–¹æ³•ï¼š ä¸€ä¸ªä¸¢å¤±çš„æŠ¥æ–‡æ®µæ„å‘³ç€é˜»å¡ž ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡æ®µæŒ‡ç¤ºç½‘ç»œæ­£åœ¨å‘æŽ¥æ”¶æ–¹äº¤ä»˜å‘é€æ–¹çš„æŠ¥æ–‡æ®µï¼Œå› æ­¤å½“å¯¹å…ˆå‰æœªç¡®è®¤çš„æŠ¥æ–‡æ®µåˆ°è¾¾æ—¶ï¼Œå¢žåŠ å‘é€é€ŸçŽ‡ å®½å¸¦æŽ¢æµ‹ã€‚ TCPæ‹¥å¡žæŽ§åˆ¶ç®—æ³•æ…¢å¯åŠ¨ï¼š ä¸€æ¡TCPè¿žæŽ¥å¼€å§‹æ—¶ï¼Œé¦–å…ˆcwndä¼šè¢«è®¾ç½®ä¸º1ä¸ªMSSã€‚1ä¸ªMSSçœŸçš„å¾ˆå°ï¼Œå› æ­¤TCPæ­¤åŽæ¯å½“ä¸€ä¸ªæŠ¥æ–‡æ®µé¦–æ¬¡è¢«ç¡®è®¤ï¼ˆæ³¨æ„ä¸æ˜¯æ”¶åˆ°ACKå“¦ï¼Œæ˜¯è¢«ç¡®è®¤å“¦ï¼‰å°±æŠŠMSSå¢žåŠ 1.è¿™æ ·1å˜2ï¼Œ2å˜4ï¼Œ4å˜8â€¦æŒ‡æ•°å¢žé•¿ã€‚ ä»€ä¹ˆæ—¶å€™åœæ­¢è¿™ç§çˆ†ç‚¸å¢žé•¿ï¼Ÿ å­˜åœ¨ä¸¢åŒ…äº‹ä»¶ï¼Œå°†ssthreshç½®ä¸ºcwnd/2ï¼Œå°†cwndé‡æ–°ç½®1ï¼Œé‡æ–°æ…¢å¯åŠ¨ï¼Œã€‚ å­˜åœ¨ä¸¢åŒ…äº‹ä»¶ï¼Œå°†cwndçš„å€¼ç½®ä¸ºssthreshï¼Œç»“æŸæ…¢å¯åŠ¨ï¼Œè¿›å…¥æ‹¥å¡žé¿å…é˜¶æ®µã€‚ æ£€æµ‹åˆ°3ä¸ªå†—ä½™ACKï¼Œæ‰§è¡Œå¿«é€Ÿé‡ä¼ ï¼Œè¿›å…¥å¿«é€Ÿæ¢å¤ã€‚ æ‹¥å¡žé¿å…ï¼š è¿›å…¥æ‹¥å¡žé¿å…ä¹‹åŽï¼Œç¦»æ‹¥å¡žå¯èƒ½å¹¶ä¸é¥è¿œã€‚æ¯ä¸ªRTTå°†å¢žåŠ ä¸€ä¸ªMSSã€‚ä¾‹å¦‚ä¸€ä¸ªRTTå‘äº†10ä¸ªåŒ…ï¼Œé‚£ä¹ˆè¿™åä¸ªåŒ…åªå°†cwndå¢žåŠ 1ä¸ªMSSã€‚ ä»€ä¹ˆæ—¶å€™ç»“æŸè¿™ç§çº¿æ€§å¢žé•¿ï¼Ÿ ä¸¢åŒ…ï¼Œå°†cwndè®¾ç½®ä¸º1ä¸ªMSSï¼Œsstreshè®¾ç½®ä¸ºcwnd/2ã€‚ ä¸‰ä¸ªå†—ä½™ACKï¼Œå°†cwndå‡åŠï¼ˆä¸‰ä¸ªå·²ç»æ”¶åˆ°çš„ACKè¦åŠ ä¸Š3ä¸ªMSSï¼‰ï¼Œå°†ssthreshæ›´æ–°ä¸ºcwnd/2ï¼Œè¿›å…¥å¿«é€Ÿæ¢å¤ å¿«é€Ÿæ¢å¤ï¼š å¯¹äºŽå¼•èµ·TCPè¿›å…¥å¿«é€Ÿæ¢å¤çš„æŠ¥æ–‡æ®µï¼Œå¯¹æ¯æ”¶åˆ°çš„ä¸€ä¸ªå†—ä½™ACKéƒ½åŠ ä¸€ä¸ªMSSã€‚è¿™ä¸ªé˜¶æ®µæ—¶è¯´æ˜Žç½‘ç»œå…¶å®žå¹¶ä¸æ˜¯ç‰¹åˆ«å µï¼Œåªæ˜¯ä¼ ä¸¢äº†ä¸€ä¸ªï¼Œä¸ç”¨å¤ªè¿‡é™åˆ¶ã€‚ç›´åˆ°æœ€ç»ˆä¸¢å¤±çš„æŠ¥æ–‡æ®µACKåˆ°è¾¾ï¼ŒTCPåœ¨é™ä½Žcwndä¹‹åŽè¿›å…¥æ‹¥å¡žé¿å…é˜¶æ®µã€‚å¦‚æžœå‡ºçŽ°è¶…æ—¶äº‹ä»¶ï¼Œå°†å°†cwndè®¾ç½®ä¸º1ä¸ªMSSï¼Œsstreshè®¾ç½®ä¸ºcwnd/2ï¼Œè¿›å…¥æ…¢å¯åŠ¨ã€‚å¦‚æžœå‡ºçŽ°å†—ä½™ä¸¢åŒ…äº‹ä»¶ï¼Œå°†cwndè®¾ç½®ä¸º1ä¸ªMSSï¼Œsstreshè®¾ç½®ä¸ºcwnd/2ã€‚ TCP Tahoeä¸ŽTCP RenoTahoeä¸ç®¡å‘ç”Ÿä»€ä¹ˆäº‹ä»¶ï¼Œéƒ½ä¼šæ— æ¡ä»¶çš„å°†cwndå˜ä¸º1ï¼Œç„¶åŽé‡æ–°æ…¢å¯åŠ¨ã€‚Renoç»¼åˆäº†å¿«é€Ÿæ¢å¤ã€‚ Tahoeçš„è¿‡ç¨‹ï¼šåœ¨4æ—¶è¾¾åˆ°åˆå§‹é˜ˆå€¼ï¼Œåœ¨8æ—¶æœ‰ä¸‰ä¸ªå†—ä½™ACKï¼Œåœ¨10.5æ—¶è¾¾åˆ°é˜ˆå€¼ã€‚Tahoeä¸èƒ½å®¹å¿ä¸¢åŒ…ï¼Œä¸€æ—¦ä¸¢åŒ…ï¼Œå°±ä¼šè¿›å…¥æ…¢å¯åŠ¨ã€‚ 123456789/* slowstart is over */ /* cwnd &gt; threshold */Until (loss event) &#123; every w segments ACKed: cwnd ++; &#125;//æ‹¥å¡žæŽ§åˆ¶é˜¶æ®µ;threshold = cwnd /2;cwnd = 1;perform slowstart//é‡æ–°æ…¢å¯åŠ¨; Renoè¿‡ç¨‹ï¼šåœ¨4æ—¶è¾¾åˆ°åˆå§‹é˜ˆå€¼ï¼Œåœ¨8æ—¶æœ‰ä¸‰ä¸ªå†—ä½™ACKï¼Œä¹‹åŽå‡å°cwndï¼Œè¿›å…¥å¿«é€Ÿæ¢å¤ã€‚Renoåˆ†è¶…æ—¶ä¸¢åŒ…ä¸Žå†—ä½™ä¸¢åŒ…ï¼Œå†—ä½™ä¸¢åŒ…è¿›å…¥å¿«é€Ÿæ¢å¤ï¼Œè¶…æ—¶æ…¢å¯åŠ¨ã€‚ 123456789101112/* slowstart is over */ /* cwnd &gt; threshold */Until (loss event) &#123; every w segments ACKed: cwnd ++ &#125;//æ‹¥å¡žæŽ§åˆ¶;threshold = cwnd /2If (loss detected by timeout) &#123;//è¿›å…¥æ…¢å¯åŠ¨; cwnd = 1 perform slowstart &#125;If (loss detected by triple duplicate ACK)//è¿›å…¥å¿«é€Ÿæ¢å¤ cwnd = cwnd /2 äºŽæ˜¯å‘çŽ°ï¼šä»€ä¹ˆå¯¹è¶…æ—¶éƒ½æ˜¯æ²¡æœ‰å®¹å¿åº¦çš„ï¼Œç›´æŽ¥ä¼šæ…¢å¯åŠ¨ã€‚ä½†æ˜¯å¯¹äºŽ3ä¸ªå†—ä½™ACKçš„è¡¨çŽ°ä¸ªä¸ä¸€æ ·ï¼Œä¸€èˆ¬è¿›å…¥å¿«é€Ÿæ¢å¤ã€‚ å…¬å¹³æ€§ï¼šTCPä¸ŽUDPTCPæ˜¯è‡ªå¾‹çš„ï¼Œå¦‚æžœUDPä¸è‡ªå¾‹ï¼Œå¯èƒ½ä¼šæŒ¤è·¨TCPã€‚å› æ­¤åœ¨ä½¿ç”¨UDPçš„APPå±‚åº”è¯¥åšç±»ä¼¼çš„â€å¹³æ»‘ã€ç¼“æ…¢å˜åŒ–â€œçš„æ‹¥å¡žæœºåˆ¶ï¼Œä¿è¯å…¬å¹³ã€‚ ç«¯å£ä¸Žè¿›ç¨‹æœ€åŽï¼Œæˆ‘éœ€è¦è¡¥å……ä¸€ä¸‹ç«¯å£å·ä¸Žè¿›ç¨‹ä¹‹é—´çš„å…³ç³»ï¼š é¦–å…ˆï¼šç¼“å†²åŒºå¯¹åº”çš„æ˜¯è°ï¼Ÿåœ¨ä¸Šä¸€ç¯‡ä¸­å°±åº”è¯¥æ˜Žç¡®ï¼Œæ˜¯socketã€‚ ç«¯å£å·æ˜¯ä»€ä¹ˆï¼Ÿ åœ¨ç½‘ç»œæŠ€æœ¯ä¸­ï¼Œç«¯å£å¤§è‡´æœ‰ä¸¤ç§æ„æ€ï¼šä¸€æ˜¯ç‰©ç†æ„ä¹‰ä¸Šçš„ç«¯å£ï¼Œæ¯”å¦‚ï¼ŒADSL Modemã€é›†çº¿å™¨ã€äº¤æ¢æœºã€è·¯ç”±å™¨ç”¨ äºŽè¿žæŽ¥å…¶ä»–ç½‘ç»œè®¾å¤‡çš„æŽ¥å£ï¼Œå¦‚RJ-45ç«¯å£ã€SCç«¯å£ç­‰ç­‰ã€‚äºŒæ˜¯é€»è¾‘æ„ä¹‰ä¸Šçš„ç«¯å£ï¼Œä¸€èˆ¬æ˜¯æŒ‡TCP/IPåè®®ä¸­çš„ç«¯å£ï¼Œç«¯å£å·çš„èŒƒå›´ä»Ž0åˆ°65535ï¼Œæ¯”å¦‚ç”¨äºŽæµè§ˆç½‘é¡µæœåŠ¡çš„80ç«¯å£ï¼Œç”¨äºŽFTPæœåŠ¡çš„21ç«¯å£ç­‰ç­‰ã€‚æˆ‘ä»¬è¿™é‡Œå°†è¦ä»‹ç»çš„å°±æ˜¯é€»è¾‘æ„ä¹‰ä¸Šçš„ç«¯å£ã€‚ æœåŠ¡å™¨ä¸€èˆ¬é€šè¿‡çŸ¥åç«¯å£å·æ¥è¯†åˆ«ã€‚ä¾‹å¦‚ï¼Œå¯¹äºŽæ¯ä¸ªTCP/IPå®žçŽ°æ¥è¯´ï¼ŒFTPæœåŠ¡å™¨çš„TCPç«¯å£å·éƒ½æ˜¯21ï¼Œæ¯ä¸ªTelnetæœåŠ¡å™¨çš„TCPç«¯å£å·éƒ½æ˜¯23ï¼Œæ¯ä¸ªTFTP(ç®€å•æ–‡ä»¶ä¼ é€åè®®)æœåŠ¡å™¨çš„UDPç«¯å£å·éƒ½æ˜¯69ã€‚ä»»ä½•TCP/IPå®žçŽ°æ‰€æä¾›çš„æœåŠ¡éƒ½ç”¨çŸ¥åçš„1ï½ž1023ä¹‹é—´çš„ç«¯å£å·ã€‚è¿™äº›çŸ¥åç«¯å£å·ç”±Internetå·åˆ†é…æœºæž„ï¼ˆInternetAssignedNumbersAuthority,IANAï¼‰æ¥ç®¡ç†ã€‚ ç«¯å£å·çš„ä½œç”¨æ­£æ˜¯ä¸ºäº†åŒºåˆ†ä¸åŒçš„ç½‘ç»œæœåŠ¡ã€‚ ä¸Šé¢çš„æ¯”è¾ƒå®˜æ–¹ï¼Œä¸‹é¢å°†ç”±æˆ‘è‡ªå·±å†™çš„ç¨‹åºæ¥â€”â€” TCPé‡Œé¢ï¼Œä¸€ä¸ªç«¯å£å·å¯ä»¥è¢«å¤šä¸ªsocketç»‘å®šã€‚è€ŒUDPä¸è¡Œï¼Œæˆ‘çš„ç†è§£æ˜¯æ•°æ®ä¸çŸ¥é“è¦ç»™è°ã€‚ å·²ç»è¢«ç»‘å®šä¹‹åŽï¼Œå†æ¬¡è¦æ±‚ç»‘å®šï¼š è¿™æ˜¯å†æ¬¡è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶å®žè¿™ä¸ªå¹¶ä¸æ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸èƒ½ç»‘å®šåŒä¸€ä¸ªç«¯å£å·ï¼Œè€Œæ˜¯ä¸¤ä¸ªUDPçš„socketä¸èƒ½ç»‘å®šåŒä¸€ä¸ªç«¯å£ã€‚è·Ÿè¿›ç¨‹æ²¡æœ‰ä»€ä¹ˆå…³ç³»ã€‚forkå­çº¿ç¨‹çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„socketç»‘å®šå…¶ä»–çš„ç«¯å£å·ã€‚ ç«¯å£è¿™ä¸ªæ¦‚å¿µå°±æ˜¯è®¡ç®—æœºç½‘ç»œé¢†åŸŸçš„æ¦‚å¿µï¼Œæœ‰ç½‘å‹ç›´è¨€è¯´è¿›ç¨‹ä¸Žç«¯å£å·æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œå…¶å®žæ˜¯å¯¹çš„ã€‚ thanks for ur help! [1] è¿›ç¨‹ä¸Žç«¯å£æ˜ å°„ [2] ç«¯å£å·æ˜¯ä»€ä¹ˆï¼Ÿ [3]IBM Knowledge Center è¿™ä¸ªæœ‰å¾ˆå¤šä¸œè¥¿ï¼Œä¸æ­¢ç«¯å£å· [4]TCP åœ¨æœ€åŽçš„å¤ä¹ æ—¶åˆ»ï¼ UDPçš„æºç«¯å£å·ï¼šå³ä½¿ä¸ç”¨ACKï¼Œä½†æ˜¯äº¤äº’æ€»è¦æœ‰ä¸ªæ¥æºå§ã€‚æœåŠ¡å™¨ç»™clientå‘ä¸œè¥¿å¾—ç›´åˆ°æºç«¯å£å·å•Šã€‚]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
        <category>å¤§ä¸‰çš„è¯¾</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œè¯¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¡ç®—æœºç½‘ç»œç½‘ç»œå±‚]]></title>
    <url>%2F2017%2F11%2F02%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%2F%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%BD%91%E7%BB%9C%E5%B1%82%2F</url>
    <content type="text"><![CDATA[#]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
        <category>å¤§ä¸‰çš„è¯¾</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œè¯¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[the Oneä½¿ç”¨è®°å½•]]></title>
    <url>%2F2017%2F11%2F01%2Fthe%20One%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%951%2F</url>
    <content type="text"><![CDATA[ä¸€ä¸ªå°tipï¼šä½¿ç”¨linuxå‘½ä»¤è¡Œè¿›å…¥å¸¦ç©ºæ ¼çš„æ–‡ä»¶ï¼Œå¦‚æžœç›´æŽ¥cd filenameè¿›å…¥çš„è¯æ˜¯ä¸è¡Œçš„ï¼Œé‚£åº”è¯¥æ€Žä¹ˆè¿›å…¥å‘¢ï¼Ÿ cd â€œfilenameâ€å°±å¥½å•¦ï¼ åˆä¸€ä¸ªå°tipï¼šä¸ä¸‹å¿ƒå…³æŽ‰äº†eclipseçš„é¡¹ç›®å·¥ç¨‹ç›®å½•æ€Žä¹ˆåŠžï¼Ÿ Window-&gt;Show View-&gt;Others-&gt;General-&gt;Project Explorer emmmï¼Œmarkdownè¡Œå†…ä»£ç å½¢å¼ï¼š``åŒ…èµ·æ¥å°±è¡Œ ä»Žgithubä¸‹è½½the-oneçŠ¹è®°æˆ‘åˆå­¦gitçš„æ—¶å€™ä¹Ÿæ˜¯å‚»å‚»çš„ï¼Œè¿™é‡Œå°±æ”¾å‡ºæ¥å…·ä½“æ“ä½œæ–¹æ³•äº†ï¼ é¦–å…ˆéœ€è¦ä¸€ä¸ªGitBashã€‚åœ¨gitbashé‡Œä½¿ç”¨cdå‘½ä»¤è¿›å…¥æƒ³å­˜æ”¾the oneçš„æ–‡ä»¶å¤¹ï¼Œç„¶åŽè¾“å…¥å‘½ä»¤ï¼šgit clone https://github.com/akeranen/the-one.wiki.gitï¼Œå‰é¢ä¸¤ä¸ªæ˜¯å‘½ä»¤ï¼Œæœ€åŽä¸€ä¸ªæ˜¯å‚æ•°ï¼Œä»£è¡¨çš„æ˜¯è¿™ä¸ªä»“åº“çš„åœ°å€ã€‚è¿™ä¸ªä¸‹è½½ä¸‹æ¥çš„æ˜¯masterâ€¦.åº”è¯¥æ˜¯ä¸è¡Œçš„â€¦.ä¸‹è½½v1.6å§ã€‚ ç­‰åˆ°å®Œæˆä¹‹åŽå°±ä¼šå‘çŽ°åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢å¤šäº†å¥½å¤šä¸œè¥¿å‘€ï¼ doneï¼ å°†é¡¹ç›®importè¿›Eclipseå¹¶è¿è¡Œeclipseï¼Œä½¿ç”¨javaçš„å­©å­åº”è¯¥æ²¡æœ‰ä¸çŸ¥é“çš„å§ã€‚å“¦å¯¹ï¼Œthe oneæ˜¯javaä»£ç ç¼–å†™ã€‚ åˆ°äº†è¿™ä¸€æ­¥å°±å‡ºäº†ä¸€ç‚¹å°é—®é¢˜â€¦ä¸€ç›´æ˜¯ä½¿ç”¨eclipseçš„File-&gt;importåŠŸèƒ½å‘workspaceå¯¼å…¥å¤–éƒ¨çš„é¡¹ç›®çš„ï¼Œå¯¼å…¥the oneçš„æ—¶å€™ç«Ÿç„¶å‘Šè¯‰æˆ‘æœªæ‰¾åˆ°é¡¹ç›®æ–‡ä»¶ï¼æˆ‘å°è¯•ä½¿ç”¨File-&gt;Open Project From FileSystemæ¥ï¼Œè¿™æ¬¡å¯ä»¥äº†ã€‚the one æˆåŠŸå‡ºçŽ°åœ¨äº†project exploreré‡Œé¢ï¼ä½†æ˜¯ï¼æœ‰é”™è¯¯ï¼ è¿™ä¸ªåº”è¯¥åœ¨è¯´æ˜Žæ–‡æ¡£é‡Œé¢è¯´äº†ï¼Œ1.1ä»¥åŽç‰ˆæœ¬çš„javaè¦ç¼–è¯‘theoneéœ€è¦æ·»åŠ ä¸€äº›liabraryåˆ°é¡¹ç›®çš„build pathï¼Œä½†æ˜¯æˆ‘çœ‹äº†æˆ‘çš„build pathï¼Œå·²ç»æ·»åŠ äº†å‘€ï¼Ÿæ€Žä¹ˆè¿˜æœ‰é”™ï¼Ÿ click here åœ¨ä¸Šè¿°ç½‘ç«™ï¼Œç¬¬äºŒä¸ªå›žç­”è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ç”±äºŽJUnit3.0ä¸Ž4.0éƒ½åœ¨ï¼Œæˆ‘å°±éƒ½åˆ é™¤äº†ï¼Œç„¶åŽé‡æ–°æ·»åŠ äº†JUnit4.0.doneï¼ å¦‚å›¾ï¼ŒçŽ°åœ¨æ•´ä¸ªé¡¹ç›®éƒ½å·²ç»æ²¡æœ‰é”™è¯¯äº†ï¼ é€‰æ‹©æ•´ä¸ªé¡¹ç›®ï¼Œå³å‡»Run As-&gt;JUnit TestæˆåŠŸï¼ the oneæ¶‰åŠåˆ°äº†JUnitï¼Œå¦‚æžœä¸äº†è§£JUnitï¼Œéœ€è¦å…ˆäº†è§£ä¸€ä¸‹~ click here~ JUnitä¹‹ä¸€ åœ¨æˆ‘ä»¥JUnit Testæ¥è¿è¡Œæ—¶ï¼Œtheoneå‡ºçŽ°äº†ä¸¤ä¸ªfailã€‚è¿™è¡¨æ˜Žâ€¦.å¯èƒ½æ˜¯æœ‰bugçš„å•Šâ€¦.mark å¥½å§ï¼Œæˆ‘å…ˆå¿½ç•¥äº†ï¼Œ ç„¶åŽ runäº†ä¸‹ï¼ˆä¸»ç±»æ˜¯core.DNTSimï¼‰ï¼Œå‘çŽ°å…¶å®žå¯ä»¥å‡ºæ¥ä¸œè¥¿ã€‚ç”±äºŽå¯èƒ½éœ€è¦å‘½ä»¤è¡Œå‚æ•°ï¼Œæˆ‘åˆä½¿ç”¨cmdæ¥ç¼–è¯‘è¿è¡Œï¼Œç»“æžœâ€¦ ä½†æ˜¯eclipseæˆåŠŸäº†å‘€ï¼Ÿæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªåœ¨eclipseè®¾ç½®å‘½ä»¤è¡Œå‚æ•°çš„æ–¹æ³•ï¼Œä¼å›¾å…ˆè·³è¿‡jdkç‰ˆæœ¬å¸¦æ¥çš„ï¼ˆï¼Ÿï¼‰ç¼–è¯‘é—®é¢˜ã€‚ DTNSimçš„API Run-&gt;Run Configurations-&gt;DTNSim-&gt;Argumets:åŠ ä¸Šä½ æƒ³è¦çš„å‚æ•°ã€‚å³å¯ï¼š å¥½äº†ï¼Œè‡³æ­¤ï¼Œç¨‹åºåˆæ­¥å¯ä»¥è¿è¡Œä½¿ç”¨äº†ã€‚ è§£å†³é—®é¢˜æ—¶é—´ å¥½çš„ï¼ŒçŽ°åœ¨æ˜¯è§£å†³é—®é¢˜æ—¶é—´å•Šã€‚ è¯¢é—®äº†è€å¸ˆï¼Œè€å¸ˆè¯´è¿™ä¸ªå¯èƒ½æ˜¯JUnitåŒ…åŠ è½½ä¸æ­£ç¡®ã€‚ä½†æ˜¯æˆ‘é‡æ–°å†™äº†ä¸€ä¸ªå·¥ç¨‹ï¼Œä½¿ç”¨ä¸€æ ·çš„æ–¹æ³•ï¼Œé‚£ä¸ªæ˜¯æ²¡é”™çš„ã€‚ æ‰€ä»¥æˆ‘æƒ³æ˜¯ä¸æ˜¯ç‰ˆæœ¬é—®é¢˜ã€‚ äºŽæ˜¯æˆ‘ä¸‹è½½äº†v1.6ã€‚ä½¿ç”¨åŒæ ·çš„æ–¹æ³•importè¿›æ¥ï¼Œè¿™æ¬¡é”™è¯¯æ›´å¤šï¼ä½†æ˜¯æˆ‘å‘çŽ°è¿™æ¬¡æœ€åˆæ˜¯æ²¡æœ‰æ·»åŠ READMEé‡Œé¢è¯´è¦è‡ªå·±æ·»åŠ çš„2ä¸ªjaråŒ…çš„ï¼Œæ‰€æœ‰æ„Ÿè§‰æœ‰å¸Œæœ›ï¼ æ·»åŠ jaråŒ…ï¼š Projectå³é”®-&gt; build path -&gt; configure build path-&gt;libraries-&gt;add jars-&gt;the-one-1.6.0-&gt;lib å¥½äº†ï¼ŒæŠŠè¿™ä¸¤ä¸ªjaréƒ½æ·»è¿›æ¥ã€‚ JUnitçš„æ·»åŠ æ–¹æ³•è¿˜ä¸Žä¸Šé¢ä¸€æ ·ï¼Œè®°å¾—è¦æ·»åŠ çš„æ˜¯4.0 æ²¡é”™äº†ã€‚ ç„¶åŽæ¥æµ‹è¯•ä¸€ä¸‹ã€‚ è¿˜æœ‰é”™:-)ã€‚ æ—¢ç„¶æ˜¯æœ‰é”™çš„ï¼Œé‚£å°±åªèƒ½ä¸€ç‚¹ä¸€ç‚¹åˆ†æžæ˜¯æ€Žä¹ˆå›žäº‹äº†ã€‚ é¦–å…ˆï¼Œæˆ‘åˆè¿è¡Œäº†1.6çš„compileï¼Œè¿˜æ˜¯ä¸è¡Œï¼Œè¿™æ¬¡æˆ‘å†³å®šæŠŠç”µè„‘é‡Œé¢çš„jdkæ¢æˆ8ã€‚ å¦‚å›¾ï¼Œé…ç½®å¥½çš„çŽ¯å¢ƒå˜é‡åœ¨cmdç«Ÿç„¶æ²¡æœ‰æ›´æ¢ï¼è¿™ä¹Ÿæ˜¯å¯¼è‡´javacä¸èƒ½ç”¨çš„ä¸€ä¸ªåŽŸå› ã€‚å¦‚æžœä½ ç¡®è®¤è‡ªå·±é…çš„çŽ¯å¢ƒå˜é‡è‚¯å®šæ˜¯å¯¹çš„ï¼Œå…³æŽ‰cmdé‡æ–°æ‰“å¼€ï¼Œå°±å¯ä»¥äº†ã€‚ çŽ¯å¢ƒå˜é‡é…ç½®åº”å¦‚ä¸‹ï¼šè¿™æ¬¡compileçš„ç»“æžœã€‚ï¼ˆjdk9ä¸æ”¯æŒé‚£ä¸ªé€‰é¡¹äº†ï¼Ÿå¥½äº†ï¼Œè¿™æ¬¡ä½¿ç”¨one.batä¹Ÿå¯ä»¥è¿è¡Œäº†ã€‚ï¼ˆjdk9ï¼šexmï¼Ÿï¼Ÿï¼Ÿ butâ€¦.eclipseæµ‹è¯•è¿˜æ˜¯æ²¡è¿‡â€¦. C:\ProgramData\Oracle\Java\javapath äº†è§£è¿è¡Œæ–¹æ³•ä¸Žé…ç½®ä¿¡æ¯å°†å‚æ•°è®¾ç½®ä¸ºï¼š[-b times] [ur conf_files] -båŽå¿…é¡»è·Ÿä¸€ä¸ªæ•°å­—ï¼Œè¿™ä¸ªæ•°å­—è¡¨ç¤ºsimulationå°†ä¼šåœ¨batch modeï¼ˆæ‰¹å¤„ç†ï¼‰ä¸‹è¿è¡Œï¼Œä¸ä¼šå‡ºçŽ°å¯è§†åŒ–ç•Œé¢ï¼Œè€Œæ˜¯æ‰“å°ä¿¡æ¯ã€‚åŽé¢çš„æ•°å­—ä»£è¡¨è¿è¡Œæ¬¡æ•°æˆ–è€…æ˜¯num1:num2çš„å½¢å¼æ¥ç¡®å®šä¸€ä¸ªèŒƒå›´ã€‚ conf_filesæ˜¯ä¸€ç³»åˆ—ä½ è‡ªå·±å†™çš„conf fileçš„æ–‡ä»¶åï¼Œæ•°é‡ä»»æ„ã€‚å¦‚æžœæ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Œä¼šä½¿ç”¨default_setting.txtã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœå¤šä¸ªconfè®¾è®¡åŒä¸€ä¸ªå±žæ€§ï¼Œé‚£ä¹ˆåœ¨åŽé¢çš„è®¾å®šå°†ä¼šè¦†ç›–å‰é¢çš„è®¾å®šã€‚ Confæ–‡ä»¶ ä»¥ä¸‹è¯‘è‡ªREADME æ‰€æœ‰çš„æ¨¡æ‹Ÿå‚æ•°éƒ½æ˜¯é€šè¿‡condæ–‡ä»¶ç»™å‡ºçš„ã€‚confæ–‡ä»¶å°±æ˜¯æ™®é€šçš„txtæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶é‡Œæœ‰ä¸€äº›ket-valueå¯¹ã€‚å¤§å¤šæ•°å˜é‡çš„è¯­æ³•éƒ½æ˜¯ï¼šNamespace.key = valueä¾‹å¦‚ï¼škeyçš„å‰ç¼€æ˜¯namespaceå‘½åç©ºé—´ï¼Œç„¶åŽåŠ ä¸€ä¸ª.ç‚¹ï¼Œç„¶åŽæ˜¯keyçš„åå­—ã€‚keyå’Œvalueè¢«ç­‰äºŽå·=éš”å¼€ã€‚å‘½åç©ºé—´éœ€è¦ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œè€Œä¸”namespaceå’Œkeyéƒ½ä»¥CamelCaseæ–¹å¼å‘½åï¼Œå¤§å°å†™æ•æ„Ÿã€‚namespaceå®½æ¾åœ°å®šä¹‰äº†è®¾ç½®å½±å“çš„æŸéƒ¨åˆ†æ¨¡æ‹ŸçŽ¯å¢ƒsimulation environmentã€‚è®¸å¤šï¼ˆå¹¶éžæ‰€æœ‰ï¼‰namespaceçš„åå­—ä¸Žæ­£åœ¨è¯»çš„classçš„åå­—ä¸€æ ·ã€‚ç‰¹åˆ«æ˜¯åŠ¨ä½œæ¨¡å—(movement models)ï¼ŒæŠ¥å‘Šæ¨¡å—(report modules)ä»¥åŠè·¯ç”±æ¨¡å—(routing modules)éµç…§äº†è¿™ä¸ªä¹ æƒ¯ã€‚æœ‰æ—¶namespaceè¢«ç”¨æˆ·å®šä¹‰ï¼Œegï¼šä½¿ç”¨ç½‘ç»œæŽ¥å£ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©ä»»ä½•æ ‡è¯†ç¬¦ï¼Œåœ¨è¯¥åç§°ç©ºé—´ä¸­å®šä¹‰ç‰¹å®šäºŽæŽ¥å£çš„è®¾ç½®ï¼Œå¹¶åœ¨é…ç½®æ¯ä¸ªç»„åº”ä½¿ç”¨çš„æŽ¥å£æ—¶ç»™å‡ºåç§°ç©ºé—´çš„åç§°ã€‚ æ•°å­—å¯ä»¥ä½¿ç”¨.ä½œä¸ºå°æ•°ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨kilo(k)ï¼Œmega(m)ï¼Œgiga(G)ä½œä¸ºåŽç¼€ã€‚boolæŽ¥å—â€trueâ€,â€falseâ€,â€0â€,â€1â€ã€‚ è®¸å¤šè®¾ç½®ç¡®å®šäº†å¯»æ‰¾å¤–éƒ¨æ–‡ä»¶çš„è·¯å¾„ã€‚è·¯å¾„å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä½†æ˜¯è·¯å¾„çš„åˆ†éš”ç¬¦å¿…é¡»æ˜¯â€/â€œã€‚Unixä¸ŽWindowséƒ½æ˜¯ã€‚ æœ‰äº›å˜é‡åŒ…å«ä»¥é€—å·éš”å¼€çš„å€¼ï¼Œå¯¹ä»–ä»¬æ¥è¯´ï¼Œè¯­æ³•æ˜¯ï¼šNamespace.key = value1,value2,etc. å¯¹äºŽè¿è¡Œç´¢å¼•ï¼ˆrun-indexedï¼‰å€¼ï¼Œè¯­æ³•æ˜¯ï¼šNamespace.key=[runvalue;run2value;run3value;etc]ã€‚æ¯ä¸€ä¸ªrunvalueå¯ä»¥æ˜¯ä¸€ä¸ªè¢«é€—å·åˆ†éš”çš„å€¼ã€‚ è®¾ç½®æ–‡ä»¶å¯ä»¥æœ‰æ³¨é‡Šï¼Œä»¥#å¼€å¤´ã€‚ ä¸€äº›å€¼ï¼ˆscenario and report names at the momentï¼‰æ”¯æŒâ€value fillingâ€ã€‚æœ‰è¿™ä¸ªç‰¹æ€§åšæ”¯æ’‘ï¼Œå¯ä»¥ä»Žè®¾ç½®çš„å€¼åŠ¨æ€åœ°æž„é€ ï¼Œä¾‹å¦‚ï¼Œscenario nameã€‚è¿™åœ¨ä½¿ç”¨run-indexingçš„æ—¶å€™éžå¸¸æœ‰ç”¨ã€‚Just put setting key names in the value part prefixed and suffixed by two percent (%) signs. These placeholders are replaces by the current setting value from the configuration file. See the included snw_comparison_settings.txt for an example. è¿™ä¸ªæœºåˆ¶åƒæ˜¯ï¼šæ¯”å¦‚ï¼Œå®Œå–„javaçš„çŽ¯å¢ƒå˜é‡çš„æ—¶å€™ï¼šJAVA_HOME=C:/Program Files/Java/path=%JAVA_HOME%jre/â€¦â€ default_settings.txtè¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æžœå®ƒå­˜åœ¨ï¼Œåœ¨è¿è¡Œçš„æ—¶å€™ä¸€å®šä¼šè¢«readã€‚æ­¤åŽç»™çš„æ–‡ä»¶å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè®¾ç½®æ›´å¤šçš„ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥è¦†ç›–æŽ‰é»˜è®¤è®¾ç½®çš„ä¸€äº›å®šè¥¿ã€‚ Run indexingrun indexå¯ä»¥è®©ä½ åªä½¿ç”¨ä¸€ä¸ªconfæ–‡ä»¶å°±èƒ½è¿è¡Œå¾ˆå¤šä¸ªä¸åŒçš„é…ç½®configurationï¼Œæ–¹æ³•æ˜¯ï¼Œä½ æä¾›ä¸€ä¸ªsettingçš„æ•°ç»„ï¼Œä¸ºåœ¨ä¸åŒçš„confæ–‡ä»¶ä¹‹é—´éœ€è¦æ”¹å˜çš„å˜é‡ã€‚ä¾‹å¦‚ï¼šå¦‚æžœæƒ³ç”¨5ä¸ªä¸ä¸€æ ·çš„éšæœºæ•°ç”Ÿæˆå™¨ç§å­æ¥ç”Ÿæˆmovment modelsæ¥è¿è¡Œæ¨¡æ‹Ÿå™¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¿™æ ·defineè®¾ç½®æ–‡ä»¶ï¼šMovementModel.rngSeed = [1;2;3;4;5]çŽ°åœ¨ï¼Œä½ ä½¿ç”¨å‚æ•°-b 5 my_config.txtè¿è¡Œã€‚ warp-aroundï¼šç±»ä¼¼äºŽOSé‡Œé¢çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šused values is the value at index (runIndex%arrayLength)ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥å¾ˆè½»æ˜“çš„è¿è¡Œå¾ˆå¤šæŽ’åˆ—ã€‚ æ¨¡å—ä»¬Movement modelsåœ¨æ¨¡æ‹Ÿä¸­ï¼Œè¿åŠ¨æ¨¡åž‹æŽ§åˆ¶ç€èŠ‚ç‚¹çš„è¿åŠ¨ã€‚è¿åŠ¨æ¨¡åž‹æä¾›äº†coordinatesåæ ‡ã€é€Ÿåº¦ã€åœé¡¿æ—¶é—´ã€‚åŸºæœ¬çš„å®‰è£…åŒ…æ‹¬ï¼šrandom waypoint,map based movement,shorest path map based movement,map route movement,external movementã€‚é™¤äº†externalçš„æ‰€æœ‰è¿™äº›è¿åŠ¨æ¨¡åž‹ï¼Œéƒ½æœ‰å¯æŽ§çš„é€Ÿåº¦ä»¥åŠåœé¡¿æ—¶é—´åˆ†å¸ƒã€‚å¯ä»¥ç»™å‡ºæœ€å¤§å€¼ä»¥åŠæœ€å°å€¼ï¼Œè¿åŠ¨æ¨¡åž‹ä½¿å¾—å€¼åœ¨ç»™å®šè¿”å›žä¹‹é—´uniformly distributedå‡åŒ€åˆ†å¸ƒã€‚åœ¨externalé‡Œé¢ï¼Œé€Ÿåº¦ä»¥åŠåœé¡¿æ—¶é—´éƒ½ç”±æ–‡ä»¶ä¸­çš„ç»™å®šå€¼è§£é‡Šæ‰§è¡Œï¼ˆinterpretedï¼‰ã€‚ å¦‚æžœä¸€ä¸ªèŠ‚ç‚¹ä½¿ç”¨äº†éšæœºèˆªç‚¹è¿è¡Œæ¨¡åž‹ï¼ˆrandom waypoint:RandomWaypointï¼‰ï¼Œè¿™ä¸ªèŠ‚ç‚¹åœ¨æ¨¡æ‹ŸåŒºä¸­è¢«ç»™äºˆä¸€ä¸ªéšæœºçš„åæ ‡ã€‚èŠ‚ç‚¹ç›´æŽ¥ä»¥æ’å®šçš„é€Ÿåº¦åˆ°è¾¾ç»™å®šçš„ç›®çš„åœ°ï¼Œç„¶åŽåœé¡¿ä¸€æ®µæ—¶é—´ï¼Œç„¶åŽèŽ·å¾—æ–°çš„ç›®çš„åœ°ã€‚è¿™ä¸ªè¿‡ç¨‹åœ¨æ•´ä¸ªæ¨¡æ‹Ÿçš„è¿‡ç¨‹ä¸­æŒç»­è¿›è¡Œï¼ŒèŠ‚ç‚¹åœ¨è¿™äº›zig-zagï¼ˆèœ¿èœ’çš„ï¼‰è·¯å¾„ä¸Šèµ° åŸºäºŽåœ°å›¾çš„è¿åŠ¨æ¨¡åž‹å°†èŠ‚ç‚¹çš„è¿åŠ¨é™åˆ¶åœ¨é¢„å…ˆå®šä¹‰å¥½çš„è·¯å¾„ä¸Šã€‚å¯ä»¥å®šä¹‰ä¸ä¸€æ ·çš„è·¯å¾„ï¼Œå¯ä»¥å®šä¹‰å¯¹å…¨ä½“èŠ‚ç‚¹éƒ½æœ‰æ•ˆçš„è·¯å¾„ã€‚è¿™æ ·çš„è¯ï¼Œæ¯”å¦‚è¯´ï¼Œæ±½è½¦æ‰ä¸ä¼šç›´æŽ¥å¼€è¿›é—¨é‡Œæˆ–è€…æ˜¯å¼€åˆ°äººè¡Œé“ä¸Šã€‚ åŸºæœ¬çš„åŸºäºŽåœ°å›¾çš„è¿åŠ¨æ¨¡åž‹ï¼ˆmap-based:MapBasedMovementï¼‰åˆå§‹æ—¶æŠŠèŠ‚ç‚¹ä»¬åˆ†å¸ƒåœ¨ä¸¤ä¸ªç›¸é‚»çš„åœ°å›¾èŠ‚ç‚¹ä¹‹é—´ï¼Œç„¶åŽèŠ‚ç‚¹ä»¬å¼€å§‹è¿åŠ¨ï¼Œä»Žä¸€ä¸ªadjacent map nodeåˆ°å¦ä¸€ä¸ªã€‚å½“èŠ‚ç‚¹åˆ°è¾¾ä¸‹ä¸€ä¸ªåœ°å›¾èŠ‚ç‚¹çš„æ—¶å€™ï¼Œä»–éšæœºé€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚ä½†æ˜¯åªæœ‰å½“è¿™æ˜¯å”¯ä¸€çš„é€‰é¡¹ï¼ˆå³ï¼Œé¿å…å›žåˆ°å®ƒæ¥è‡ªçš„åœ°æ–¹ï¼‰æ—¶æ‰é€‰æ‹©å®ƒæ¥è‡ªçš„åœ°å›¾èŠ‚ç‚¹ã€‚ä¸€æ—¦èŠ‚ç‚¹ç§»åŠ¨äº†10-100ä¸ªåœ°å›¾èŠ‚ç‚¹ï¼Œå®ƒæš‚åœä¸€æ®µæ—¶é—´ï¼Œç„¶åŽå†æ¬¡å¼€å§‹ç§»åŠ¨ã€‚ æ›´åŠ å¤æ‚çš„ç‰ˆæœ¬çš„åŸºäºŽåœ°å›¾çš„è¿åŠ¨(ShortestPathMapBasedMovement)ä½¿ç”¨äº†Dijkstraçš„æœ€çŸ­è·¯å¾„ç®—æ³•æ¥å¯»æ‰¾ä»–åœ¨æ•´ä¸ªåœ°å›¾èŒƒå›´å†…çš„è·¯å¾„ã€‚ä¸€æ—¦ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¾¾äº†ä»–çš„ç›®çš„åœ°ï¼Œä»–ç­‰ä¸€æ®µæ—¶é—´ï¼Œé€‰æ‹©ä¸‹ä¸€ä¸ªéšæœºçš„åœ°å›¾èŠ‚ç‚¹ï¼Œç”¨æœ€çŸ­è·¯å¾„èµ°è¿‡åŽ»ã€‚ï¼ˆè¿™ä¸ªç®—æ³•åªå¯¹valid map nodesèµ·ä½œç”¨ï¼‰ å¯¹äºŽåŸºäºŽæœ€çŸ­è·¯å¾„çš„è¿åŠ¨æ¨¡åž‹ï¼Œåœ°å›¾çš„æ•°æ®ä¿¡æ¯è¿˜åŒ…æ‹¬POIsï¼ˆpoint of interestsï¼‰ã€‚instead ofä¸ºä¸‹ä¸€ä¸ªç›®çš„åœ°é€‰æ‹©ä»»æ„éšæœºåœ°å›¾èŠ‚ç‚¹ï¼Œç§»åŠ¨æ¨¡åž‹å¯ä»¥è¢«é…ç½®ä¸ºä»¥å¯é…ç½®çš„æ¦‚çŽ‡ç»™å‡ºå±žäºŽæŸä¸ªPOIç»„çš„POIã€‚å¯ä»¥æœ‰æ— é™æ•°é‡çš„POIç»„ï¼Œå¹¶ä¸”æ‰€æœ‰ç»„å¯ä»¥åŒ…å«ä»»ä½•æ•°é‡çš„POIã€‚æ‰€æœ‰èŠ‚ç‚¹ç»„å¯¹äºŽæ‰€æœ‰POIç»„å¯èƒ½å…·æœ‰ä¸åŒçš„æ¦‚çŽ‡ã€‚POIå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿä¾‹å¦‚å•†åº—ï¼Œé¤é¦†å’Œæ—…æ¸¸æ™¯ç‚¹ã€‚ åŸºäºŽè·¯çº¿çš„è¿åŠ¨æ¨¡åž‹ï¼ˆMapRouteMovementï¼‰å¯ä»¥ç”¨äºŽå¯¹éµå¾ªç‰¹å®šè·¯çº¿çš„èŠ‚ç‚¹å»ºæ¨¡ã€‚ï¼ˆä¾‹å¦‚ï¼Œå…¬å…±æ±½è½¦æˆ–ç”µè½¦çº¿è·¯ã€‚ï¼‰åªéœ€è¦å®šä¹‰è·¯çº¿ä¸Šçš„åœé ç‚¹ï¼Œç„¶åŽä½¿ç”¨è¯¥è·¯çº¿çš„èŠ‚ç‚¹å°±ä¼šç»ç”±æœ€çŸ­è·¯å¾„ï¼Œä»Žä¸€ä¸ªç«™ç‚¹åˆ°å¦ä¸€ä¸ªç«™ç‚¹ï¼Œå¹¶åœ¨æ¯ä¸€ä¸ªstopåœç•™è®¾ç½®å¥½çš„æ—¶é—´ã€‚ æ‰€æœ‰çš„è¿åŠ¨æ¨¡åž‹éƒ½å¯ä»¥å†³å®šä»€ä¹ˆæ—¶å€™èŠ‚ç‚¹æ˜¯æ´»è·ƒçš„ï¼ˆä»–è¿åŠ¨ï¼Œå¯ä»¥è¢«è¿žæŽ¥ï¼‰ï¼Œä»€ä¹ˆæ—¶å€™ä¸æ´»è·ƒã€‚æ‰€æœ‰æ¨¡åž‹ï¼Œé™¤äº†externalï¼Œå¯ä»¥ç»™å‡ºå¤šä¸ªæ—¶é—´é—´éš”ï¼ˆtime intervalï¼‰ï¼Œåœ¨é‚£ä¸ªç»„çš„èŠ‚ç‚¹åªä¼šåœ¨é‚£äº›æ—¶å€™æ¯”è¾ƒæ´»è·ƒã€‚ æ‰€æœ‰åŸºäºŽåœ°å›¾çš„è¿åŠ¨æ¨¡åž‹éƒ½é€šè¿‡ï¼ˆWKTï¼‰æ ¼å¼çš„ä¸€ä¸ªå­é›†æ‰€è§„èŒƒçš„æ–‡ä»¶ä¸­èŽ·å–è¾“å…¥ä¿¡æ¯ã€‚æ˜ å°„è·¯å¾„æ•°æ®çš„è§£æžå™¨æ”¯æŒWKTæ–‡ä»¶çš„LINESTRINGå’ŒMULTILINESTRINGæŒ‡ä»¤ã€‚å¯¹äºŽç‚¹æ•°æ®ï¼ˆä¾‹å¦‚POIï¼‰ï¼Œä¹Ÿæ”¯æŒPOINTæŒ‡ä»¤ã€‚ ï¼ˆMULTIï¼‰LINESTRINGä¸­çš„ç›¸é‚»èŠ‚ç‚¹è¢«è®¤ä¸ºå½¢æˆä¸€ä¸ªè·¯å¾„ï¼Œå¹¶ä¸”å¦‚æžœæŸäº›è¡ŒåŒ…å«ä¸€äº›å…·æœ‰å®Œå…¨ç›¸åŒåæ ‡çš„é¡¶ç‚¹ï¼Œè·¯å¾„ä»Žè¿™äº›åœ°æ–¹åŠ å…¥ï¼ˆè¿™æ˜¯å¦‚ä½•åˆ›å»ºäº¤å‰ç‚¹ï¼‰ã€‚ WKTæ–‡ä»¶å¯ä»¥ä½¿ç”¨ä»»ä½•åˆé€‚çš„åœ°ç†ä¿¡æ¯ç³»ç»Ÿï¼ˆGISï¼‰ç¨‹åºä»ŽçŽ°å®žä¸–ç•Œçš„åœ°å›¾æ•°æ®è¿›è¡Œç¼–è¾‘å’Œç”Ÿæˆã€‚åŒ…å«åœ¨æ¨¡æ‹Ÿå™¨å‘è¡Œç‰ˆä¸­çš„åœ°å›¾æ•°æ®ä½¿ç”¨å…è´¹çš„åŸºäºŽJavaçš„OpenJUMP GISç¨‹åºè¿›è¡Œè½¬æ¢å’Œç¼–è¾‘ã€‚ ä¸ä¸€æ ·çš„åœ°å›¾å¯ä»¥é€šè¿‡åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­å­˜å‚¨å±žäºŽä¸åŒç±»åž‹çš„è·¯å¾„æ¥å®šä¹‰ã€‚POIsç®€å•çš„ç”¨WTK POINTå®šä¹‰ï¼Œè€ŒPOIç»„é€šè¿‡å°†æ‰€æœ‰çš„å±žäºŽåŒä¸€ä¸ªç»„çš„POIså­˜å‚¨åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­æ¥å®šä¹‰ã€‚æ‰€æœ‰çš„POIä¹Ÿå¿…é¡»æ˜¯åœ°å›¾æ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä»–ä»¬å¯ä»¥ä½¿ç”¨è·¯å¾„è¿›è¡Œè®¿é—®ã€‚ç”¨LINESTRINGå®šä¹‰è·¯çº¿çš„åœé ç‚¹ï¼Œåœé ç‚¹æŒ‰ç…§å®ƒä»¬åœ¨LINESTRINGä¸­å‡ºçŽ°çš„é¡ºåºè¿›è¡ŒéåŽ†ã€‚ä¸€ä¸ªWKTæ–‡ä»¶å¯ä»¥åŒ…å«å¤šä¸ªè·¯ç”±ï¼Œå¹¶æŒ‰ç…§å®ƒä»¬åœ¨æ–‡ä»¶ä¸­å‡ºçŽ°çš„é¡ºåºå°†å®ƒä»¬æä¾›ç»™èŠ‚ç‚¹ã€‚ ä½¿ç”¨å¤–éƒ¨ç§»åŠ¨æ•°æ®ï¼ˆExternalMovementï¼‰çš„å®žéªŒç§»åŠ¨æ¨¡åž‹ä»Žæ–‡ä»¶è¯»å–æ—¶é—´æˆ³èŠ‚ç‚¹ä½ç½®ï¼Œå¹¶ç›¸åº”åœ°ç§»åŠ¨æ¨¡æ‹Ÿä¸­çš„èŠ‚ç‚¹ã€‚æœ‰å…³æ ¼å¼çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è¾“å…¥åŒ…ä¸­çš„ExternalMovementReaderç±»çš„javadocsã€‚ä¸€ä¸ªåˆé€‚çš„å®žéªŒè½¬æ¢å™¨è„šæœ¬ï¼ˆtransimsParserã€‚plï¼‰çš„TRANSIMSæ•°æ®åŒ…å«åœ¨toolkitæ–‡ä»¶å¤¹ä¸­ã€‚ è¦ä½¿ç”¨çš„è¿åŠ¨æ¨¡åž‹æ˜¯ä½¿ç”¨â€œmovementModelâ€è®¾ç½®ä¸ºæ¯ä¸ªèŠ‚ç‚¹ç»„å®šä¹‰çš„ã€‚è®¾ç½®çš„å€¼å¿…é¡»æ˜¯movementåŒ…ä¸­çš„æœ‰æ•ˆè¿åŠ¨æ¨¡åž‹ç±»åˆ«åç§°ã€‚åœ¨MovementModelç±»ä¸­è¯»å–æ‰€æœ‰è¿åŠ¨æ¨¡åž‹é€šç”¨çš„è®¾ç½®ï¼Œå¹¶åœ¨ç›¸åº”çš„ç±»ä¸­è¯»å–è¿åŠ¨æ¨¡åž‹ç‰¹å®šçš„è®¾ç½®ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…javadocæ–‡æ¡£å’Œç¤ºä¾‹é…ç½®æ–‡ä»¶ã€‚ è·¯ç”±æ¨¡å—ä»¥åŠæ¶ˆæ¯çš„åˆ›å»ºè·¯ç”±æ¨¡å—å®šä¹‰äº†åœ¨æ¨¡æ‹Ÿä¸­æ¶ˆæ¯å¦‚ä½•è¢«å¤„ç†ã€‚6ä¸ªåŸºæœ¬ä¸»åŠ¨è·¯ç”±æ¨¡å—ï¼ˆFirst Contact,Spray and Wait,Direct delivery, PRoPHET and MaxPropï¼‰ï¼Œä¸€ä¸ªè¢«åŠ¨è·¯ç”±ç”¨äºŽå¤–éƒ¨è·¯ç”±çš„æ¨¡æ‹Ÿã€‚ä¸»åŠ¨è·¯ç”±æ¨¡å—æ˜¯ç”¨äºŽDTNè·¯ç”±çš„ä¼—æ‰€å‘¨çŸ¥çš„è·¯ç”±ç®—æ³•çš„å®žçŽ°ã€‚ä¹Ÿæœ‰è¿™äº›æ¨¡åž‹çš„å˜ä½“å’ŒåŒ…å«åœ¨æœ€æ–°ç‰ˆæœ¬ä¸­çš„å‡ ä¸ªä¸åŒçš„æ¨¡åž‹ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è·¯ç”±ç¨‹åºåŒ…ä¸­çš„ç±»ã€‚ è¢«åŠ¨è·¯ç”±å™¨ä¸“é—¨ç”¨äºŽä¸Žå…¶ä»–ï¼ˆDTNï¼‰è·¯ç”±ä»¿çœŸå™¨äº¤äº’æˆ–è¿è¡Œä»¿çœŸï¼Œè€Œä¸éœ€è¦ä»»ä½•è·¯ç”±åŠŸèƒ½ã€‚è·¯ç”±å™¨é™¤éžç”±å¤–éƒ¨äº‹ä»¶å‘½ä»¤ï¼Œå¦åˆ™ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚è¿™äº›å¤–éƒ¨äº‹ä»¶ç”±å®žçŽ°EventQueueæŽ¥å£çš„ç±»æä¾›ç»™æ¨¡æ‹Ÿå™¨ã€‚ æœ‰ä¸¤ä¸ªåŸºæœ¬çš„ç±»å¯ä»¥ç”¨ä½œæ¶ˆæ¯äº‹ä»¶çš„æ¥æºï¼šExternalEventsQueueå’ŒMessageEventGeneratorã€‚å‰è€…å¯ä»¥ç”¨ä¸€ä¸ªåˆé€‚çš„è„šæœ¬ï¼ˆä¾‹å¦‚ï¼Œtoolkitæ–‡ä»¶å¤¹ä¸­çš„createCreates.plè„šæœ¬ï¼‰æˆ–é€šè¿‡å°†ä¾‹å¦‚dtnsim2çš„è¾“å‡ºè½¬æ¢æˆåˆé€‚çš„å½¢å¼æ¥ä»Žæ‰‹åŠ¨åˆ›å»ºçš„æ–‡ä»¶ä¸­è¯»å–äº‹ä»¶ã€‚æœ‰å…³æ ¼å¼çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…è¾“å…¥åŒ…ä¸­çš„StandardEventsReaderç±»ã€‚ MessageEventGeneratoræ˜¯ä¸€ä¸ªç®€å•çš„æ¶ˆæ¯ç”Ÿæˆå™¨ç±»ï¼Œå®ƒåˆ›å»ºå…·æœ‰å¯é…ç½®æ¶ˆæ¯åˆ›å»ºé—´éš”ï¼Œæ¶ˆæ¯å¤§å°å’Œæº/ç›®æ ‡ä¸»æœºèŒƒå›´çš„å‡åŒ€åˆ†å¸ƒçš„æ¶ˆæ¯åˆ›å»ºæ¨¡å¼ã€‚å¯ä»¥ä½¿ç”¨MessageBurstGeneratorå’ŒOne {Fromï¼ŒTo} EachMessageGeneratorç±»åˆ›å»ºæ›´å…·ä½“çš„æ¶ˆæ¯ä¼ é€’åœºæ™¯ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…javadocsã€‚ è¯¥toolkitæ–‡ä»¶å¤¹åŒ…å«ä¸€ä¸ªç”¨äºŽdtnsim2è¾“å‡ºçš„å®žéªŒè§£æžå™¨è„šæœ¬ï¼ˆdtnsim2parser.plï¼‰ï¼ˆæ›¾ç»æ˜¯ä¸€ä¸ªæ›´å¼ºå¤§çš„åŸºäºŽJavaçš„è§£æžå™¨ï¼Œä½†æ˜¯ç”±äºŽè¿™ä¸ªæ›´å®¹æ˜“æ‰©å±•çš„è„šæœ¬è€Œè¢«ä¸¢å¼ƒï¼‰ã€‚è¯¥è„šæœ¬éœ€è¦dtnsim2çš„ä»£ç çš„ä¸€äº›è¡¥ä¸ï¼Œå¯ä»¥ä»Žtoolkit / dtnsim2patchesæ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°ã€‚è¦ä½¿ç”¨çš„è·¯ç”±æ¨¡å—æ˜¯æŒ‰è®¾ç½®â€œè·¯ç”±å™¨â€çš„æ¯ä¸ªèŠ‚ç‚¹ç»„å®šä¹‰çš„ã€‚æ‰€æœ‰è·¯ç”±å™¨éƒ½ä¸èƒ½æ­£å¸¸äº¤äº’ï¼ˆä¾‹å¦‚ï¼ŒPRoPHETè·¯ç”±å™¨åªèƒ½ä¸Žå…¶ä»–PRoPHETè·¯ç”±å™¨ä¸€èµ·å·¥ä½œï¼‰ï¼Œæ‰€ä»¥é€šå¸¸å¯¹æ‰€æœ‰ç»„ä½¿ç”¨ç›¸åŒï¼ˆæˆ–å…¼å®¹ï¼‰è·¯ç”±å™¨æ˜¯æœ‰æ„ä¹‰çš„ã€‚ æŠ¥å‘Šå¯ä»¥ä½¿ç”¨æŠ¥å‘Šåˆ›å»ºæ¨¡æ‹Ÿè¿è¡Œçš„æ‘˜è¦æ•°æ®ï¼Œè¿žæŽ¥å’Œæ¶ˆæ¯çš„è¯¦ç»†æ•°æ®ï¼Œé€‚åˆä½¿ç”¨ä¾‹å¦‚Graphvizè¿›è¡ŒåŽå¤„ç†çš„æ–‡ä»¶ï¼ˆåˆ›å»ºå›¾è¡¨ï¼‰ä»¥åŠä¸Žå…¶ä»–ç¨‹åºæŽ¥å£ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æŠ¥å‘ŠåŒ…ç±»çš„javadocsã€‚ å¯¹äºŽä»»ä½•æ¨¡æ‹Ÿè¿è¡Œå¯ä»¥æœ‰ä»»æ„æ•°é‡çš„æŠ¥å‘Šï¼Œå¹¶ä¸”ä½¿ç”¨â€œReport.nrofReportsâ€è®¾ç½®æ¥å®šä¹‰è¦åŠ è½½çš„æŠ¥å‘Šçš„æ•°é‡ã€‚æŠ¥å‘Šç±»åˆ«åç§°ä½¿ç”¨â€œReport.reportNâ€è®¾ç½®å®šä¹‰ï¼Œå…¶ä¸­Næ˜¯ä»Ž1å¼€å§‹çš„æ•´æ•°å€¼ã€‚è®¾ç½®çš„å€¼å¿…é¡»æ˜¯æ¥è‡ªæŠ¥å‘ŠåŒ…çš„æœ‰æ•ˆæŠ¥å‘Šç±»åˆ«åç§°ã€‚æ‰€æœ‰æŠ¥å‘Šçš„è¾“å‡ºç›®å½•ï¼ˆå¯ä»¥ä½¿ç”¨â€œè¾“å‡ºâ€è®¾ç½®å¯¹æ¯ä¸ªæŠ¥å‘Šç±»åˆ«é‡å†™ï¼‰å¿…é¡»ä½¿ç”¨Report.reportDir -settingè¿›è¡Œå®šä¹‰ã€‚å¦‚æžœæŠ¥å‘Šç±»åˆ«æœªæä¾›â€œè¾“å‡ºâ€è®¾ç½®ï¼Œåˆ™ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶åç§°ä¸ºâ€œReportClassName_ScenarioName.txtâ€ã€‚ æ‰€æœ‰æŠ¥å‘Šéƒ½æœ‰è®¸å¤šå¯é…ç½®çš„è®¾ç½®ï¼Œå¯ä»¥ä½¿ç”¨ReportClassName.settingKey -syntaxæ¥å®šä¹‰ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…Reportç±»çš„javadocså’Œç‰¹å®šæŠ¥å‘Šç±»ï¼ˆæŸ¥æ‰¾â€œè®¾ç½®idâ€å®šä¹‰ï¼‰ã€‚ ä¸»æœºç»„ä¸€ä¸ªhost groupæ˜¯ä¸€ç»„åˆ†äº«åŒæ ·çš„è¿åŠ¨å’Œè·¯ç”±è®¾ç½®çš„ä¸»æœºã€‚ä¸åŒçš„ç»„çš„è®¾ç½®å€¼ä¸ä¸€æ ·ï¼Œè¿™æ ·çš„è¯ï¼Œå®ƒä»¬å¯ä»¥è¡¨ç¤ºä¸åŒç±»åž‹çš„èŠ‚ç‚¹ã€‚å¯ä»¥åœ¨â€œç»„â€ï¼ˆGroupï¼‰å‘½åç©ºé—´ä¸­å®šä¹‰åŸºæœ¬è®¾ç½®ï¼Œä¸åŒçš„èŠ‚ç‚¹ç»„å¯ä»¥è¦†ç›–è¿™äº›è®¾ç½®æˆ–åœ¨å…¶ç‰¹å®šçš„å‘½åç©ºé—´ï¼ˆç»„1ï¼Œç»„2ç­‰ï¼‰ä¸­å®šä¹‰æ–°çš„è®¾ç½®ã€‚ the settingsæœ‰å¾ˆå¤šè®¾ç½®å¯ä»¥è¢«è®¾ç½®ã€‚éžå¸¸å¤šï¼Œè¿™é‡Œä¸æäº†ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç±»ï¼Œå°¤å…¶æ˜¯reportï¼Œroutingå’Œmovement classçš„javadocã€‚å¦è¯·å‚é˜…åŒ…å«è®¾ç½®æ–‡ä»¶çš„ç¤ºä¾‹ã€‚ä¹Ÿè®¸æœ€é‡è¦çš„è®¾ç½®å¦‚ä¸‹ã€‚ è„šæœ¬è®¾ç½®ï¼ˆScenario settingï¼‰123456789101112131415161718192021Scenario.name //è„šæœ¬çš„åå­—ï¼Œæ‰€æœ‰æŠ¥å‘Šé»˜è®¤ä»¥æ­¤ä¸ºå‰ç¼€Scenario.simulateConnections //connectionæ˜¯å¦åº”è¯¥è¢«æ¨¡æ‹Ÿã€‚å¦‚æžœåªå¯¹è¿åŠ¨æ¨¡åž‹æ„Ÿå…´è¶£ï¼Œè¿™ä¸ªå¯ä»¥è¢«disableï¼Œä»¥èŽ·å¾—æ›´å¿«çš„æ¨¡æ‹Ÿé€Ÿåº¦ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ˜¯enableçš„ã€‚Scenario.updateInterval //æ¯æ¬¡æ›´æ–°æ—¶éœ€è¦å‡ ç§’ã€‚å¢žåŠ æ•°å€¼ä½¿æ¨¡æ‹Ÿæ›´å¿«ï¼Œä½†æ˜¯å¯èƒ½ä»¥ç²¾åº¦æŸå¤±ä¸ºä»£ä»·ã€‚0.1-2 are goodScenario.endTime //How many simulated seconds to simulate.Scenario.nrofHostGroups //çŽ°åœ¨åœ¨æ¨¡æ‹Ÿä¸­æœ‰å‡ ä¸ªhosts group æŽ¥å£è®¾ç½®ï¼ˆç”¨æ¥å®šä¹‰nodeå¯èƒ½ä¼šä½¿ç”¨åˆ°çš„æŽ¥å£ï¼‰12345678type //è¿™ä¸ªæŽ¥å£ä½¿ç”¨äº†ä»€ä¹ˆç±»ï¼ˆæ¥è‡ªæŽ¥å£ç›®å½•ï¼‰//å…¶ä½™è®¾ç½®æ˜¯ç‰¹å®šäºŽç±»çš„ã€‚å¯ä»¥æ˜¯ä¾‹å¦‚ï¼štransmitRange //æŽ¥å£èŒƒå›´ï¼ˆmetersï¼‰transmitSpeed //æŽ¥å£çš„ä¼ è¾“é€Ÿåº¦ï¼ˆbytes per secondï¼‰ ä¸»æœºç»„è®¾ç½®ï¼ˆåœ¨Groupæˆ–GroupNçš„å‘½åç©ºé—´ä½¿ç”¨ï¼‰]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
        <category>å®žéªŒå®¤</category>
      </categories>
      <tags>
        <tag>å®žéªŒå®¤</tag>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
        <tag>æ¨¡æ‹Ÿå™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®žéªŒå®¤å¿ƒæƒ…å…¨è®°å½•]]></title>
    <url>%2F2017%2F11%2F01%2FCN1%2F</url>
    <content type="text"><![CDATA[åˆä¸€ä¸ªå°æ—¶è¿‡åŽ»äº†å‘¢ã€‚ ç¬¬ä¸€ä¸ªçœ‹åˆ°çš„æ–‡æ¡£æ˜¯ï¼šã€Šç§»åŠ¨P2Pç½‘ç»œä¸­ååŒç¼“å­˜çš„ç ”ç©¶ã€‹ï¼Œè¿™ä¸ªæ¯”è¾ƒæµ…æ˜¾æ¯”è¾ƒå‚»ï¼Œä¸æ˜¯æˆ‘éœ€è¦çš„ï¼Œä¸»è¦è®²çš„æ˜¯ä¸€äº›æ˜¾è€Œæ˜“è§çš„ç†æƒ³åŒ–çš„ç¼“å­˜ç­–ç•¥ï¼Œå¹¶æ²¡æœ‰æ¶‰åŠåˆ°ä¸€ä¸ªå¤æ‚ç½‘ç»œã€‚ä¸»è¦è®²çš„æ˜¯ç¼“å­˜çš„æŽ¥å…¥æŽ§åˆ¶ç­–ç•¥ï¼šä»€ä¹ˆä¸œå››èƒ½è¿›ç¼“å­˜ï¼Ÿç¼“å­˜æ›¿æ¢ç­–ç•¥ä»¥åŠç¼“å­˜çš„ä¸€è‡´æ€§ã€‚]]></content>
      <categories>
        <category>è®¡ç®—æœºç½‘ç»œ</category>
        <category>å®žéªŒå®¤</category>
      </categories>
      <tags>
        <tag>å®žéªŒå®¤</tag>
        <tag>è®¡ç®—æœºç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>%2F2017%2F11%2F01%2FCloud%20RAN%20for%20Mobile%20Networks%E2%80%94%E2%80%94A%20Technology%20Overview%2F</url>
    <content type="text"><![CDATA[å‰è¨€ç§»åŠ¨æ•°æ®çš„ä¼ è¾“å®¹é‡æ­£åœ¨è¿žç»­å¢žåŠ ã€‚æ ¹æ®Ciscoçš„é¢„æµ‹ï¼Œåœ¨æ™ºèƒ½æ‰‹æœºä¸Žç©¿æˆ´è®¾å¤‡çš„æŽ¨åŠ¨ä¸‹ï¼Œä»Ž2012åˆ°2017å¹´å®¹é‡å°†å¢žé•¿13-foldã€‚å› æ­¤ï¼Œç§»åŠ¨ç½‘ç»œè¿è¥å•†éœ€è¦å¢žåŠ ç½‘ç»œçš„capacityæ¥æ»¡è¶³æ—¥ç›Šå¢žé•¿çš„ç”¨æˆ·éœ€æ±‚ã€‚å½“LTEï¼ˆlong term evolutionï¼‰çš„spectral efficiencyæ ‡å‡†æ­£é€¼è¿‘Shanonæžé™ï¼Œå¢žåŠ ç½‘ç»œcapacityçš„æœ€å¥½æ–¹æ³•è¦ä¹ˆæ˜¯å¢žåŠ åŸºç«™è¦†ç›–åŒºåŸŸï¼Œåˆ›å»ºä¸€ä¸ªç»“æž„å¤æ‚çš„å¤šå…ƒå°åŸºç«™ç½‘ç»œï¼ˆHetSNetsï¼‰è¦ä¹ˆæ˜¯ä½¿ç”¨åƒå¤šç”¨æˆ·å¤šè¾“å…¥å¤šè¾“å‡ºï¼ˆMIMOï¼‰æˆ–æ˜¯Massive MIMOè¿™æ ·çš„å¤šæ ¹å¤©çº¿åœ¨åŒä¸€é¢‘çŽ‡æ—¶æ®µæœåŠ¡äºŽå¤šä¸ªç”¨æˆ·çš„æŠ€æœ¯ã€‚ç„¶è€Œï¼Œè¿™å°†å¯¼è‡´æ›´å¤§çš„çš„å°åŸºç«™åŒºé—´å¹²æ‰°æ°´å¹³ï¼ˆGrowing inter-cell interference levelsï¼‰ä»¥åŠæ›´å¤šçš„èŠ±è´¹ã€‚ ç§»åŠ¨ç½‘ç»œçš„TCOï¼ˆtotal cost of ownershipï¼‰åŒ…æ‹¬äº†CAPEXï¼ˆCAPital Expenditureï¼‰å’ŒOPEXï¼ˆOPerating EXpenditureï¼‰ã€‚capexä¸»è¦æŒ‡å…³äºŽç½‘ç»œæž„å»ºçš„èŠ±è´¹ï¼Œç½‘ç»œæž„å»ºå¯èƒ½ä¼šä»Žç½‘ç»œè§„åˆ’ä¸€ç›´åˆ°ç½‘å€éœ€æ±‚ï¼ŒRFç¡¬ä»¶ï¼Œbasebandç¡¬ä»¶ï¼ˆåŸºå¸¦ï¼‰ï¼Œè½¯ä»¶è®¸å¯ï¼Œleased lineè¿žæŽ¥ï¼ˆä¸“ç”¨ç½‘ç»œè¿žæŽ¥ï¼‰ï¼Œå®‰è£…ï¼Œcivil costï¼ˆæ°‘ç”¨èŠ±è´¹ï¼‰ï¼Œç½‘ç«™æ”¯æŒï¼Œåƒä¾›ç”µæˆ–è€…æ˜¯å†·å´ï¼ˆcoolingï¼‰ã€‚OPEXåŒ…æ‹¬éœ€è¦åŽ»æ“çºµç½‘ç»œçš„èŠ±è´¹ï¼Œæ¯”å¦‚ï¼Œç«™ç‚¹å‡ºç§Ÿï¼Œä¸“ç”¨ç½‘ç»œï¼Œç”µåŠ›ï¼Œè¿è¥ä¸Žä¿æŒï¼Œå‡çº§ã€‚CAPEXä¸ŽOPEXåœ¨æ›´å¤šbase stationè¢«éƒ¨ç½²ä¹‹åŽéƒ½æ˜¾è‘—å¢žåŠ äº†ã€‚æ›´å…·ä½“åœ°è¯´ï¼ˆmore specificallyï¼‰ï¼ŒCAPEXå¢žåŠ æ˜¯å› ä¸ºåŸºç«™æ˜¯æ— çº¿ç½‘ç»œinfrastructureåŸºç¡€è®¾æ–½ä¸­æœ€æ˜‚è´µçš„ç»„æˆæˆåˆ†ï¼Œè€ŒOPEXå¢žåŠ æ˜¯å› ä¸ºåŸºç«™è¦†ç›–åŒºéœ€è¦ç›¸å½“å¤šçš„ç”µåŠ›åŽ»é©±åŠ¨ï¼Œæ¯”å¦‚ï¼Œä¸­å›½ç§»åŠ¨ä¼°è®¡æœ‰72%çš„ç”µåŠ›èŠ±è´¹åœ¨åŸºç«™è¦†ç›–åŒºåŸŸï¼ˆcell sitesï¼‰ã€‚ç§»åŠ¨ç½‘ç»œè¿è¥å•†éœ€è¦æ”¯ä»˜ç½‘ç»œå»ºé€ ï¼Œè¿è¥ï¼Œä¿æŒå’Œå‡çº§çš„è´¹ç”¨ï¼›åŒæ—¶äººå‡æ”¶å…¥ï¼ˆARPUï¼‰éšä¹‹æ—¶é—´çš„å¢žé•¿ä¿æŒä¸å˜ç”šè‡³æœ‰æ‰€ä¸‹é™ï¼Œå› ä¸ºå…¸åž‹çš„ç”¨æˆ·å¯¹æ•°æ®çš„éœ€æ±‚è¶Šæ¥è¶Šå¤šå´å¸Œæœ›ä¸ºç§»åŠ¨æµé‡ä»˜æ›´å°‘çš„è´¹ç”¨ã€‚åƒå›¾1ä¸­æ‰€ç¤ºï¼Œå¦‚æžœè¡¥æ•‘æŽªæ–½ï¼Œç§»åŠ¨ç½‘ç»œè¿è¥å•†å°†æœ‰å¯èƒ½é¢å¯¹å…¥ä¸æ•·å‡ºçš„å±€é¢ã€‚ å› æ­¤ï¼Œåœ¨ç§»åŠ¨ç½‘ç»œé¢†åŸŸï¼Œä¼˜åŒ–äº†èŠ±è´¹å’Œèƒ½æºæ¶ˆè€—çš„æ–°åž‹å»ºæž„æ–¹å¼å˜å¾—å¿…éœ€ã€‚ C-RANæ˜¯ä¸€ç§æ–°åž‹çš„ç§»åŠ¨ç½‘ç»œç»“æž„ï¼Œæœ‰ç€æŽ¥å—ä¸Šè¿°æ‰€æœ‰æŒ‘æˆ˜çš„èƒ½åŠ›ã€‚è¿™ä¸ªæ¦‚å¿µæœ€åˆåœ¨è®ºæ–‡9ä¸­è¢«æå‡ºå¹¶ä¸”åœ¨6ä¸­è¢«è¯¦ç»†æè¿°ã€‚åœ¨C-RANä¸­ï¼Œbaseband processingï¼ˆåŸºå¸¦å¤„ç†ï¼‰è¢«ä¸­å¿ƒåŒ–ï¼Œè¢«è¢«æ”¾åœ¨ä¸€ä¸ªè™šæ‹Ÿçš„BBU poolä¸­è¢«è¯¸å¤šsiteåˆ†äº«ã€‚è¿™æ„å‘³ç€å®ƒå¯èƒ½èƒ½å¤Ÿé€‚åº”nonuniform trafficéžå‡åŒ€æµé‡å¹¶æ›´åŠ æœ‰æ•ˆçŽ‡åœ°åˆ©ç”¨ä¸€äº›èµ„æºï¼Œæ¯”å¦‚ï¼ŒåŸºç«™ã€‚ç”±äºŽè¿™ä¸ªç‰¹æ€§åœ¨C-RANç»“æž„ä¸­å°†ç”¨åˆ°æ¯”ä¼ ç»Ÿç»“æž„æ›´å°‘çš„BBUï¼Œè€Œä¸”C-RANè¿˜æœ‰é™ä½Žç½‘ç»œè¿è¥è´¹ç”¨çš„æ½œèƒ½ï¼Œè¿™æ˜¯å› ä¸ºç”µåŠ›ä¸Žèƒ½é‡çš„æ¶ˆè€—ç›¸è¾ƒäºŽä¼ ç»Ÿçš„RANç»“æž„å·²ç»è¢«å‡å°‘äº†ã€‚æ–°çš„BBUå¯ä»¥æ›´è½»æ˜“åœ°è¢«æ·»åŠ è¢«å‡çº§ï¼Œä»Žè€Œæ”¹å–„ç½‘ç»œçš„ç¨³å®šæ€§å¹¶ä½¿å¾—ç½‘ç»œæ›´å®¹æ˜“è¢«ç»´æŠ¤ã€‚è™šæ‹ŸåŒ–çš„BBU poolå¯ä»¥è¢«å¤šä¸ªä¸åŒçš„ç½‘ç»œè¿è¥å•†æ‰€åˆ†äº«ï¼Œå…è®¸ä»–ä»¬é€šè¿‡äº‘æœåŠ¡æ¥ç§ŸRANã€‚ç”±äºŽå¤šä¸ªç½‘ç«™çš„BBUåœ¨åŒä¸€ä¸ªpoolä¸­co-locatedï¼ˆåä½œï¼‰ï¼Œä»–ä»¬å½¼æ­¤ä¹‹é—´å¯ä»¥ä»¥æ›´å°çš„å»¶è¿Ÿæ—¶é—´è¿›è¡Œé€šä¿¡ï¼Œè¿™æ ·ï¼Œè¢«ä»‹ç»ç»™LTE-Advancedæ¥å¢žåŠ spectral efficiencyå’Œthroughputåžåé‡çš„æœºæ¢°è£…ç½®ï¼Œæ¯”å¦‚è¯´å¢žå¼ºç‰ˆçš„ICICä¸ŽCoMPéƒ½è¢«facilitatedï¼Œåœ¨ä¸¤ä¸ªåŸºç«™è¦†ç›–åŒºå†…å®žè¡Œçš„è´Ÿè½½å¹³è¡¡æ–¹æ³•ä¹Ÿè¢«facilitatedã€‚è€Œä¸”ï¼Œç½‘ç»œçš„è¡¨çŽ°ä¹Ÿè¢«æ”¹å–„ï¼Œä¾‹å¦‚é€šè¿‡å‡å°‘BBU poolå†…éƒ¨çš„ç§»äº¤æ“ä½œçš„å»¶æ—¶ã€‚æ®China MObile Research Instituteçš„çŒœæƒ³ï¼ŒC-RANç»“æž„è¢«ç§»åŠ¨ç½‘ç»œè¿è¥å•†è®¾ä¸ºäº†ç›®æ ‡ï¼Œä¾‹å¦‚IBMã€Alcatel-Lucentã€åŽä¸ºã€ZYTEã€è¯ºåŸºäºšè¥¿é—¨å­ç½‘ç»œã€Intelå’ŒTexas instrumentsã€‚è€Œä¸”ï¼Œåœ¨2020å¹´çš„æ°´å¹³ä¸Šæ¥çœ‹ï¼ŒC-RANè¢«è§†ä¸ºæ˜¯å…¸åž‹çš„åœ¨5Gä¸­æ”¯æŒsoft and green technologiesçš„å®žçŽ°ã€‚ç„¶è€Œï¼ŒC-RANå¹¶ä¸æ˜¯å”¯ä¸€å¯ä»¥å¯¹æŠ—ä¸Šè¿°è¿è¥å•†ä»¬é¢ä¸´çš„æŒ‘æˆ˜çš„é€‰æ‰‹ï¼Œå…¶ä»–è§£å†³æ–¹å¼ï¼ŒåŒ…æ‹¬small cellsã€being part of HetSNets and Massive MIMOã€‚small cellsçš„éƒ¨ç½²æ˜¯æˆ·å¤–hot spoté—¹åŒºå’Œå®¤å†…coverage scenarioså¹³å‡æ–¹æ¡ˆ ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[åºåˆ—æ¯”è¾ƒ]]></title>
    <url>%2F2017%2F10%2F31%2F%E5%BA%8F%E5%88%97%E6%AF%94%E8%BE%83%2F</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159#include&lt;iostream&gt;#include&lt;string&gt;#include&lt;cstring&gt;#include&lt;stack&gt;using namespace std;class Pixel &#123;public: int a, b; Pixel(int x, int y) &#123; a = x; b = y; &#125;&#125;;int min(int a, int b, int c) &#123; if (a &lt; b) &#123; if (c &lt; a)return c; else if (c &gt;= a)return a; &#125; else &#123; if (c &lt; b)return c; else return b; &#125;&#125;int alpha(char fir, char sec) &#123; if (fir == sec)return 0; else return 1;&#125;/*int S(int m, int n, string a, string b, int beta) &#123; for (int i = 0; i &lt;= m; i++) M[i][0] = i*beta; for (int i = 0; i &lt;= n; i++) M[0][i] = i*beta; for (int i = 1; i &lt;= m; i++) for (int j = 1; j &lt;= n; j++) M[i][j] = min(alpha(a[i-1],b[j-1]) + M[i-1][j-1], beta + M[i-1][j], beta + M[i][j-1]); return M[m ][n];&#125;void back(int m, int n, string A,string B,int*result,int beta) &#123; if (m&lt;A.length()&amp;&amp;n&lt;B.length()&amp;&amp;M[m][n] +alpha(A[m],B[n])== M[m+1][n+1]) &#123; result[m] = 0; back(m + 1, n + 1, A,B,result,beta); &#125; else if (m&lt;A.length()&amp;&amp;n&lt;=B.length()&amp;&amp;M[m][n]+beta == M[m + 1][n]) &#123; result[m ] = 1; back(m +1, n, A,B,result,beta); &#125; else if(m&lt;=A.length()&amp;&amp;n&lt;B.length()) &#123; result[m] = -1; back(m, n + 1, A,B,result,beta); &#125;&#125;*/int SL(int m, int n, string a, string b, int beta) &#123; int**M = new int*[2]; M[0] = new int[b.length() + 1]; M[1] = new int[b.length() + 1]; for (int i = 0; i &lt;= n; i++) &#123; M[0][i] = beta*i; &#125; M[1][0] = beta; for (int i = 1; i &lt;= m; i++) &#123; M[1][0] = i*beta; for (int j = 1; j &lt;= n; j++) &#123; M[1][j] = min(alpha(a[i - 1], b[j - 1]) + M[0][j - 1], beta + M[1][j - 1], beta + M[0][j]); &#125; for (int j = 0; j &lt;= n; j++) &#123; M[0][j] = M[1][j]; &#125; &#125; int re = M[0][n]; delete[]M; return re;&#125;void DACA(int o,int r,int x, int y, string a, string b, stack&lt;Pixel&gt;*P,int beta) &#123; if (x-o &lt;= 1 || y-r &lt;= 2) &#123; int**M = new int*[x+1]; for(int i = 0; i &lt; x -o+ 1; i++) &#123; M[i] = new int[y -r+ 1]; M[i][0] = beta*i; &#125; for (int i = 0; i &lt;= y-r; i++) M[0][i] = i*beta; for (int i = 1; i &lt;= x-o; i++) for (int j = 1; j &lt;= y-r; j++) &#123; M[i][j] = min(alpha(a[i - 1], b[j - 1]) + M[i - 1][j - 1], beta + M[i][j - 1], beta + M[i - 1][j]); &#125; for (int i = x-o; i &gt;= 0; ) &#123; int j = y - r; for (j=y-r; j &gt;= 0; ) &#123; if (i&gt;=1&amp;&amp;j&gt;=1&amp;&amp;M[i][j] == alpha(a[i-1], b[j-1]) + M[i - 1][j - 1]) &#123; Pixel*p = new Pixel(i - 1+o, j - 1+r); P-&gt;push(*p); i = i - 1; j = j - 1; &#125; else if (i&gt;=1&amp;&amp;j&gt;=0&amp;&amp;M[i][j] == beta + M[i - 1][j]) &#123; Pixel*p = new Pixel(i - 1+o, j+r); P-&gt;push(*p); i -= 1; &#125; else if (i&gt;=0&amp;&amp;j&gt;=1&amp;&amp;M[i][j] == beta + M[i][j - 1]) &#123; Pixel*p = new Pixel(i+o, j - 1+r); P-&gt;push(*p); j -= 1; &#125; else break; &#125; if (j == 0 &amp;&amp; i == 0)break; &#125; return; &#125; string a2; cout &lt;&lt; "here:" &lt;&lt;( y-r) / 2 &lt;&lt; "," &lt;&lt; y-r &lt;&lt; endl; string b2 =b.substr((y-r) / 2 , y-r); int q[2] = &#123; 0,0 &#125;; int min; for (int i = 0; i &lt;= x-o; i++) &#123; a2 = a.substr(i, x-o); q[0]=SL(i, (y-r) / 2, a, b, 1); cout &lt;&lt; "done!"; q[0]+=SL(x-o - i, y-r - (y-r) / 2, a2, b2, 1); cout &lt;&lt; "done!" &lt;&lt; endl; if (i == 0)min = q[0]; else &#123; if (min &gt; q[0]) &#123; min = q[0]; q[1] = i; &#125; &#125; &#125; min = q[1]+o; Pixel*p = new Pixel(min, (y - r) / 2 + r); P-&gt;push(*p); DACA(o,r,min, (y-r) / 2+r, a, b, P, beta); cout &lt;&lt; "and here:" &lt;&lt; min &lt;&lt; "," &lt;&lt; x &lt;&lt; endl; a2 = a.substr(min-o , x-o); cout &lt;&lt; "???"; cout &lt;&lt; "hhhh" &lt;&lt; x - min &lt;&lt; ";;;" &lt;&lt; y - y / 2; DACA(min,(y-r)/2+r,x , y , a2, b2, P, beta);&#125;int main() &#123; string A, B; while (cin &gt;&gt; A &gt;&gt; B) &#123; stack&lt;Pixel&gt;*P = new stack&lt;Pixel&gt;(); cout &lt;&lt; SL(A.length(), B.length(), A, B,1); cout &lt;&lt; endl; DACA(0,0,A.length(), B.length(), A, B, P, 1); cout &lt;&lt; "LLLLL" &lt;&lt; endl; while(!(P-&gt;empty())) &#123; Pixel p = (P-&gt;top()); P-&gt;pop(); cout &lt;&lt; "(" &lt;&lt; p.a &lt;&lt; "," &lt;&lt; p.b &lt;&lt; ")"; &#125; delete P; cout &lt;&lt; "what!" &lt;&lt; endl; &#125;&#125;]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[èƒŒåŒ…é—®é¢˜åˆæ¶‰]]></title>
    <url>%2F2017%2F10%2F31%2F%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ç®—æ³•ä¸Šæœºè€ƒè¯•ï¼Œæ€Žä¹ˆè¯´ï¼Œè™½ç„¶æ²¡åšå‡ºæ¥ä½†æ˜¯æ”¶èŽ·å¾ˆå¤šï¼Ÿå¥½å§ä¹Ÿåªèƒ½è¿™ä¹ˆå®‰æ…°è‡ªå·±äº† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164#include&lt;iostream&gt;#include&lt;algorithm&gt;using namespace std;//ç¡¬å¸ã€‚å­˜å‚¨ç¡¬å¸çš„ä»·å€¼åŠå…¶å¯¹åº”ä¸ªæ•°class Coins&#123;public: int value; int num;&#125;;//æ›´å°å€¼å‡½æ•°ã€‚è‹¥å€¼ä¸º0ï¼Œä»£è¡¨ä¸å¯èƒ½ï¼Œè¿”å›žå¦ä¸€ä¸ªå€¼ï¼Œå¦åˆ™è¿”å›žæ›´å°å€¼int mini(int a, int b) &#123; if (a == 0)return b; if (b == 0)return a; if (a &gt; b)return b; else return a;&#125;//int max(int a,int b)&#123;// if(a&gt;b)return a;// else return b;//&#125;//int comp(const void *a,const void *b)&#123;// Coins* A=(Coins*)a,*B=(Coins*)b;// if(A-&gt;value&gt;B-&gt;value)return -1;// else if (A-&gt;value&lt;B-&gt;value)return 1;// else return 0;//&#125;//æ‰¾é›¶é’±çš„å‡½æ•°ï¼Œcoinså­˜å‚¨äº†å„ç§ç¡¬å¸çš„é¢å€¼ä¸Žä¸ªæ•°ï¼Œnæ˜¯ç¡¬å¸ç§æ•°ï¼ˆcoinsçš„é•¿åº¦ï¼‰ï¼Œmæ˜¯æ‰¾é›¶çš„é’±æ•°ã€‚int GetCoin(Coins*coins, int n, int m) &#123; //æ–°å»ºä¸€ä¸ªäºŒç»´æ•°ç»„ç”¨äºŽå­˜å‚¨åœ¨æ¯ä¸€ä¸ªè¦æ‰¾çš„é’±æ•°ä¸‹ç”¨iç§ç¡¬å¸æœ€å°‘ç”¨å‡ ä¸ªç¡¬å¸ int**M = new int*[2]; M[0] = new int [m + 1]; M[1] = new int [m + 1]; //åˆå§‹æ—¶ï¼Œç”¨0ä¸ªç¡¬å¸æ‰¾é™¤0ä»¥å¤–çš„é’±æ•°ï¼Œä¸å¯èƒ½ã€‚ //ä¸”ç”¨0ä½œä¸ºåˆå§‹å€¼ä¾¿äºŽåŽç»­è®¡ç®—ã€‚ for (int i = 0; i &lt;= m; i++) &#123; M[0][i] = 0; M[1][i] = 0; &#125; for (int i = 0; i &lt; n; i++) &#123; //å¯¹å‰iç§ç¡¬å¸ for (int j = 0; j &lt;= m; j++) &#123; //è¦æ‰¾jçš„é›¶é’± int dola = M[0][j]; //ä¿å­˜æœªæ›´æ–°ä¹‹å‰çš„å€¼ for (int k = 1; k &lt;= coins[i].num; k++) &#123; //å¯¹è¿™ç§ç¡¬å¸çš„æ¯ä¸ªæ•°é‡ if ((j - k*(coins[i].value) &lt; 0)) &#123; //è‹¥kä¸ªç¡¬å¸æ€»é’±æ•°å¤§äºŽjï¼Œä¸å¯èƒ½ã€‚break M[0][j] = M[0][j]; M[1][j] = M[0][j]; break; &#125; if ((M[0][j - k*(coins[i].value)] != 0)) //å¦åˆ™ã€‚è‹¥æ»¡è¶³æ¡ä»¶ï¼Œè¯´æ˜Žåœ¨M[0][j-k*(coins[i].value)]å¤„æœ‰æ»¡è¶³æ¡ä»¶çš„è§£ï¼Œä¸ŽM[0][j]è®¡ç®—æ›´å¥½çš„å€¼ã€‚æ­¤æ—¶è¿™é‡Œä¸€å®šæœ‰éž0è§£ M[0][j] = mini(M[0][j], k + M[0][j - k*(coins[i].value)]); else if ((M[0][j - k*(coins[i].value)] == 0)) &#123;//å¦åˆ™ï¼Œä¸ä¸€å®šå­˜åœ¨éž0è§£ if (k*(coins[i].value) == j) &#123;//è‹¥å­˜åœ¨kä¸ªç¡¬å¸æ­£å¥½æ‰¾jå…ƒï¼Œæ›´æ–°è§£ M[0][j] = mini(M[0][j], k); //M[1][j] = M[0][j]; //M[0][j] = dola; //break;ä¸è¡Œï¼ &#125; else M[0][j] = M[0][j];//å¦åˆ™ï¼Œä¸æ›´æ–°è§£ &#125; &#125; //å°†M[0]è½¬ç§»åˆ°M[1]ï¼ŒM[0]æ¢å¤åŽŸå€¼ç»§ç»­ä¸‹ä¸€è½®è®¡ç®—ã€‚è¿™æ ·å¯ä»¥é˜²æ­¢å¯¹ç¡¬å¸iä½¿ç”¨çš„æ•°ç›®å¤šäºŽçŽ°æœ‰æ•°ç›®çš„æƒ…å†µ M[1][j] = M[0][j]; M[0][j] = dola;// cout &lt;&lt; M[1][j] &lt;&lt; " ,"; &#125; for (int j = 0; j &lt;= m; j++)M[0][j] = M[1][j];//æŠŠæ–°å€¼ç»™M[0]ï¼Œè¿›è¡Œå¯¹ä¸‹ä¸€ç§ç¡¬å¸çš„åˆ†æžã€‚ // cout &lt;&lt; endl; &#125; return M[0][m];//è¿”å›žæœ€ä¼˜è§£&#125;//int Getcoin(int*coins,int m,int n,int**M,int**N)&#123;// int*resu = new int[n], *resunum = new int[n];// for(int i=0;i&lt;=m;i++)&#123;N[0][i]=0;// M[0][i]=0;&#125;// for(int i=0;i&lt;2;i++)&#123;N[i][0]=0;// M[i][0]=0;&#125;// for(int i=1;i&lt;=n;i++)&#123;// for(int j=1;j&lt;=m;j++)&#123;// //cout &lt;&lt; "the j" &lt;&lt; j &lt;&lt; endl;// if (coins[i - 1] &gt; j) &#123; M[1][j] = M[0][j]; N[1][j] = N[0][j]; &#125;// else&#123;// M[1][j]=max(M[0][j],coins[i-1]+M[0][j-coins[i-1]]);// if(M[1][j]==M[0][j])N[1][j]=N[0][j];// else if(M[1][j]==coins[i-1]+M[0][j-coins[i-1]]) N[1][j]=1+N[0][j-coins[i-1]];// else N[1][j] = N[0][j] &lt; N[0][j - coins[i - 1]] ? N[0][j] : 1+N[0][j - coins[i - 1]];// &#125;// &#125;// for (int j = 0; j &lt;= m; j++) &#123;// M[0][j] = M[1][j];// N[0][j] = N[1][j];// cout &lt;&lt; "(" &lt;&lt; M[0][j] &lt;&lt; "," &lt;&lt; N[0][j] &lt;&lt; ")";// &#125;// cout &lt;&lt;i&lt;&lt;" , "&lt;&lt;coins[i-1]&lt;&lt; endl;// resu[i - 1] = M[0][m];// resunum[i - 1] = N[0][m];//// &#125;// int min=-1;//// for (int i = 0; i &lt; n; i++) &#123;//// cout &lt;&lt; "(" &lt;&lt; resu[i] &lt;&lt; "," &lt;&lt; resunum[i] &lt;&lt; ")";// if (resu[i] == m) &#123;// if (min == -1)min = resunum[i];// if (resunum[i] &lt; min)min = resunum[i];// &#125;// &#125;// return min;// //&#125;int main() &#123; int n; cin &gt;&gt; n; Coins*coins = new Coins[n]; for (int i = 0; i &lt; n; i++) &#123; cin &gt;&gt; coins[i].value &gt;&gt; coins[i].num; &#125; int m; cin &gt;&gt; m; //å¦‚æžœè¦æ‰¾çš„é’±æ•°æ˜¯0ï¼Œæœ€å°‘éœ€è¦0ä¸ªç¡¬å¸ if (m == 0) &#123; cout &lt;&lt; 0; return 0; &#125; // qsort(coins,n,sizeof(coins[0]),comp); // int sum=0; // for(int i=0;i&lt;n;i++) // sum+=coins[i].num; // int*Mycoin=new int[sum]; // int soum=sum; // sum=coins[0].num; ///* for(int i=0,j=0;i&lt;soum;i++)&#123; // if(i==sum)&#123;sum+=coins[j+1].num;j++;&#125; // Mycoin[i]=coins[j].value; // cout &lt;&lt; Mycoin[i] &lt;&lt; " "; // &#125;*/ // int k = 0; // for (int i = 0; i&lt;n; i++) &#123; // for (int j = 0; j &lt; coins[i].num;j++) &#123; // Mycoin[k] = coins[i].value; // cout &lt;&lt; Mycoin[k] &lt;&lt; " "; // k++; // &#125; // &#125; // cout &lt;&lt; "totally" &lt;&lt; soum &lt;&lt; endl; // int**M=new int*[2]; // for(int i=0;i&lt;2;i++)M[i]=new int[m+1]; // int**N=new int*[2]; // for(int i=0;i&lt;2;i++)N[i]=new int[m+1]; // pp=Getcoin(Mycoin,m,soum,M,N); //cout &lt;&lt; pp &lt;&lt; endl; int pp; pp = GetCoin(coins, n, m); //è‹¥æœ€ç»ˆè¿”å›ž0å³ä¸ºä¸å¯èƒ½ï¼Œè¾“å‡º-1ã€‚ if (pp != 0)cout &lt;&lt; pp; else cout &lt;&lt; -1;&#125;]]></content>
      <tags>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å½’å¹¶ã€å¿«æŽ’ã€å †æŽ’åº]]></title>
    <url>%2F2017%2F10%2F31%2F%E5%BD%92%E5%B9%B6%E3%80%81%E5%BF%AB%E6%8E%92%E3%80%81%E5%A0%86%E6%8E%92%E5%BA%8F%2F</url>
    <content type="text"><![CDATA[å½’å¹¶æŽ’åºç®—æ³•æ˜¯åˆ†æ²»ç­–ç•¥çš„ä¸€ç§ä½“çŽ°ã€‚æ‰€è°“åˆ†æ²»ç­–ç•¥å°±æ˜¯æŠŠä¸€ä¸ªå¤§é—®é¢˜åˆ†è§£æˆå‡ ä¸ªè¾ƒå°çš„éƒ¨åˆ†ï¼Œé€šè¿‡é€’å½’åˆ†åˆ«è§£å†³å‡ ä¸ªå°é—®é¢˜ï¼Œç„¶åŽå†åœ¨çº¿æ€§æ—¶é—´å†…å°†å‡ ä¸ªå°é—®é¢˜çš„è§£åˆå¹¶æˆä¸€ä¸ªå®Œæ•´çš„è§£ã€‚ å½’å¹¶å½’å¹¶æŽ’åºä¹Ÿæ˜¯ä¸€ç§æŽ’åºç®—æ³•ã€‚é—®é¢˜ï¼šå°†nä¸ªæ•°ç”±ä»Žå°åˆ°å¤§åœ°æŽ’åºã€‚å½’å¹¶æå‡ºçš„è§£å†³æ˜¯ï¼š å°†è¿™åˆ—æ•°åˆ†æˆä¸¤åŠ é€’å½’åœ°å°†æ¯ä¸€åŠæŽ’åº å°†ä¸¤ä¸ªæœ‰åºåˆ—åˆå¹¶æˆä¸€æ•´åˆ— å½’å¹¶æŽ’åºåœ¨åšä¸²çš„åˆ‡åˆ†æ—¶ä¸è€ƒè™‘å¤§å°å› ç´ ï¼Œåªä»Žä¸­é—´åˆ‡åˆ†ã€‚äºŽæ˜¯åœ¨åˆå¹¶æ—¶ä¾¿éœ€è¦å¯¹ä¸¤ä¸ªæœ‰åºä¸²åšä¸€å®šå¤„ç†æ‰èƒ½ä¿è¯ç»“æžœä¸²çš„æœ‰åºæ€§ã€‚ä¸ºæ­¤ï¼Œä¸€ä¸ªå®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„æ•°ç»„å­˜å‚¨æœ‰åºåˆ—ã€‚å¦‚å›¾ï¼š æ¯æ¬¡éƒ½æ¯”è¾ƒ1ä¸²ä¸Ž2ä¸²å½“å‰ä½ç½®å…ƒç´ å¤§å°ï¼Œå°†è¾ƒå°çš„é‚£ä¸€ä¸ªè¾“å‡ºåˆ°TMPæ•°ç»„ä¸­å½“å‰ä½ç½®å¹¶åŠ ä¸€ï¼Œå°†è¾“å‡ºä¸²çš„å½“å‰ä½ç½®åŠ ä¸€ã€‚ç›´åˆ°ä¸¤ä¸ªä¸²éƒ½è¾“å‡ºå®Œæ¯•ã€‚è¿™ç§æ–¹å¼æ‰€ç”¨çš„é¢å¤–ç©ºé—´æ˜¯O(n)ï¼Œåªéœ€è¦O(n)æ¬¡æ¯”è¾ƒã€‚ å®žé™…ä¸Šï¼Œå½’å¹¶æŽ’åºä¸€èˆ¬æ˜¯é€’å½’è¿›è¡Œä¸€ç›´åˆ°æ¯ä¸ªä¸²çš„é•¿åº¦æ˜¯1ï¼Œä¸»è¦è¿ç®—è¿‡ç¨‹å…¨éƒ¨è½åœ¨åˆå¹¶ä¸Šé¢ã€‚ä¸‹é¢ç”±é€’å½’å¼åˆ†æžå½’å¹¶æŽ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ã€‚ å½’å¹¶æ—¶é—´ç©ºé—´å¤æ‚åº¦åˆ†æžï¼š è®¾T(n)è¡¨ç¤ºè¯¥ç®—æ³•åœ¨è§„æ¨¡ä¸ºnçš„è¾“å…¥å®žä¾‹ä¸Šæœ€åçš„è¿è¡Œæ—¶é—´ï¼Œå‡è®¾næ˜¯2çš„æ•´æ•°æ¬¡å¹‚ï¼Œå¯ä»¥å¾—åˆ°é€’æŽ¨å…¬å¼å¦‚ä¸‹ï¼š åˆ™æœ‰é€’æŽ¨å…³ç³»ï¼š å°†è¿™äº›æ—¶é—´éƒ½åŠ åœ¨ä¸€èµ·å³ä¸ºnlog2Nã€‚å³å½’å¹¶çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(nlogn)çº§åˆ«ã€‚ ä¸‹é¢å°†ä¸¥æ ¼è¯æ˜Žè¿™ä¸ªå‘½é¢˜ï¼š â€”â€”â€”â€”â€”â€”è¿™ä¸ªè¿‡ç¨‹çº¿çœç•¥â€”â€”â€”â€” å½’å¹¶çš„ä»£ç ï¼š 123456789101112131415Array.prototype.mergeSort=function(s,e,b)&#123; //start,end,temp if(s==null)s=0; if(e==null)e=this.length-1; if(b==null)b=new Array(this.length); if(s&gt;=e)return; var m=(s+e)&gt;&gt;1; //å–ä¸­é—´å€¼ this.mergeSort(s,m,b); this.mergeSort(m+1,e,b); for(var i=s,j=s,k=m+1;i&lt;=e;++i) b[i]=this[(k&gt;e||j&lt;=m&amp;&amp;this[j]&lt;this[k])?j++:k++]; for(var i=s;i&lt;=e;++i) this[i]=b[i];&#125; å¿«æŽ’å¿«æŽ’æä¾›çš„è§£å†³æ˜¯ï¼š é€‰æ‹©ä¸€ä¸ªæž¢è½´ï¼Œå°äºŽæž¢è½´çš„åˆ°å·¦è¾¹ï¼Œå¤§äºŽæž¢è½´çš„åˆ°å³è¾¹ å¯¹ä¸¤è¾¹åˆ†åˆ«é€’å½’åœ°ä½¿ç”¨å¿«æŽ’ åˆå¹¶ ä¸Žå½’å¹¶ç›¸ä¼¼çš„ä¸€ç‚¹æ˜¯ï¼ŒäºŒè€…éƒ½é‡‡ç”¨é€’å½’æ–¹æ³•è§£å†³é—®é¢˜ï¼Œä½†æ˜¯å½’å¹¶çš„æŽ’åºå·¥ä½œéƒ½ç•™åœ¨äº†åˆå¹¶è¿‡ç¨‹ä¸­å®Œæˆï¼Œè€Œå¿«æŽ’æ­£ä¸Žä¹‹ç›¸åï¼ŒæŽ’åºå·¥ä½œéƒ½åœ¨åˆ†å‰²çš„è¿‡ç¨‹ä¸­å®Œæˆã€‚ ä»Žå›¾ä¸­å¯ä»¥æ˜Žæ˜¾çœ‹å‡ºï¼Œå¿«æŽ’æœ€ç»ˆå¾—åˆ°çš„ä¸²å°±æ˜¯ä¸€ä¸ªæœ‰åºçš„ä¸²ã€‚ å¿«æŽ’æ—¶é—´ç©ºé—´å¤æ‚åº¦ï¼š å¿«æŽ’ç®—æ³•ä¾èµ–äºŽæž¢è½´PIVOTçš„é€‰æ‹©ã€‚å½“é€‰æ‹©çš„æž¢è½´è¶ŠæŽ¥è¿‘ä¸­é—´å€¼ï¼Œæ ‘è¶ŠæŽ¥è¿‘äºŽå®Œå…¨æ ‘çš„æ ‘é«˜ï¼Œç®—æ³•æ•ˆçŽ‡è¶Šé«˜ï¼Œæœ€å¥½å¯è¾¾åˆ°O(nlogn)ã€‚ç³Ÿç³•çš„æž¢è½´é€‰æ‹©å°†ä¼šä½¿æ•ˆçŽ‡æ€¥é€Ÿä¸‹é™ï¼Œç”šè‡³è¾¾åˆ°O(n*n)çš„çº§åˆ«ã€‚äºŽæ˜¯ï¼Œå½“ä¸€ä¸ªä¸²è¶Šæ˜¯æŽ¥è¿‘äºŽæ— åºï¼Œå¿«æŽ’çš„æ•ˆçŽ‡è¶Šé«˜ã€‚å¿«æŽ’çš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯O(nlogn)ï¼Œæ˜¯æ‰€æœ‰æŽ’åºç®—æ³•ä¸­å¹³å‡æ—¶é—´å¤æ‚åº¦æœ€å¥½çš„ç®—æ³•ã€‚å¿«æŽ’éœ€è¦æ ˆçš„è¾…åŠ©ï¼Œå…¶ç©ºé—´å¤æ‚åº¦æ˜¯O(logn)ã€‚ å¿«æŽ’çš„ä»£ç ï¼š 12345678910111213Array.prototype.quikSort=function(s,e)&#123; //start,end if(s==null)s=0; if(e==null)e=this.length-1; if(s&gt;=e)return; this.swap((s+e)&gt;&gt;1,e); var index=s-1; for(var i=s;i&lt;=e;++i) if(this[i]&lt;=this[e]) this.swap(i,++index); this.quickSort(s,index-1); this.quickSort(index+1,e);&#125; å †æŽ’åº å †æŽ’åºæ•°æ®ç»“æž„ç»“è¯¾çš„æ—¶å€™è¿˜è€ƒäº†å‘¢ã€‚æ€•æ˜¯å†™é”™äº†å§å½“æ—¶ã€‚å“Žé™ˆå¹´æ—§äº‹ï¼Œä¸æä¹Ÿç½¢ã€‚ påˆæŸ¥åˆ°è¯´ï¼Œå †çš„å»ºç«‹è¿‡ç¨‹å°±æ˜¯ä¸æ–­æ’å…¥çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å¯èƒ½æ ¹æœ¬ä¸æ˜¯å®Œå…¨å»ºå¥½äº†ä¸€ä¸ªå †æ‰åŽ»æ”¹å˜ï¼Œä¹Ÿè®¸æ˜¯è¾¹å»ºè¾¹æ”¹å˜ã€‚ï¼ˆæœ‰é“äº‘ç¬”è®°ä½ çš„markdownçœŸçš„é—®é¢˜è¿˜å¾ˆå¤§ å †æ˜¯ä¸€ç§æ•°æ®ç»“æž„ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€æ£µä»»ä¸€å­©å­ç»“ç‚¹éƒ½å°äºŽï¼ˆå¤§é¡¶å †ï¼‰æˆ–éƒ½å¤§äºŽï¼ˆå°é¡¶å †ï¼‰çˆ¶äº²ç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ã€‚è¿™æ ·æ ¹ç»“ç‚¹æ€»æ˜¯æ•´ä¸ªå †ä¸­æœ€å¤§æˆ–å°çš„ç»“ç‚¹ï¼Œæ¯æ¬¡åªéœ€å°†æ ¹å–å‡ºæ¥å³å¯ä¿è¯æœ‰åºã€‚ä½†æ˜¯ï¼Œæ¯æ·»åŠ æˆ–å‡å°‘ä¸€ä¸ªç»“ç‚¹éƒ½éœ€è¦å¯¹å †è¿›è¡Œå¿…è¦çš„ç»´æŠ¤ã€‚äºŽæ˜¯ï¼Œå †æŽ’åºä¸­æœ€å…³é”®çš„æ“ä½œå°±æ˜¯å°†ä¸€ä¸ªåºåˆ—è°ƒæ•´æˆä¸ºå †ã€‚ å †æŽ’åºç»™å‡ºçš„è§£å†³æ–¹æ³•ï¼š å°†åºåˆ—å»ºæˆå † è¿­ä»£åœ°å–æ ¹è¿›å…¥æœ‰åºé˜Ÿåˆ—å¹¶è°ƒæ•´å †ç›´åˆ°å †ä¸ºæœ‰åºåºåˆ— å †çš„äº§ç”Ÿè¿‡ç¨‹å…¶å®žå°±æ˜¯ä¸€ä¸ªè°ƒæ•´è¿‡ç¨‹ï¼Œä¸‹é¢ç»™å‡ºå †çš„è°ƒæ•´è¿‡ç¨‹ï¼ˆä»¥å¤§æ ¹å †ä¸ºä¾‹ï¼‰ï¼š æœ€ç»ˆå–å‡ºæ•°å­—çš„é¡ºåºå³ä¸ºæœ€ç»ˆé¡ºåºã€‚ å †æŽ’åºé€‚åˆäºŽç»“ç‚¹æ•°è¾ƒå¤šæƒ…å†µä¸‹çš„è¦æ±‚å‰å‡ ä¸ªç»“ç‚¹ã€‚å½“è®°å½•æ•°è¾ƒå°‘æ—¶ï¼Œä¸æŽ¨èä½¿ç”¨å †æŽ’åºã€‚ hashè¡¨+å †æŽ’åºæ˜¯å¤„ç†æµ·é‡æ•°æ®çš„ç»ä½³ç»„åˆã€‚ å †æŽ’åºæ—¶é—´ç©ºé—´å¤æ‚åº¦ å®Œå…¨äºŒå‰æ ‘é«˜åº¦log(n+1)ï¼Œå³å¯¹æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œè°ƒæ•´çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(logn)ï¼ŒåŒ…æ‹¬å»ºå †çš„æ—¶é—´è€—è´¹ä¸Žå–å€¼å’Œè°ƒæ•´ï¼Œæ•´ä¸ªç®—æ³•æ—¶é—´å¤æ‚åº¦æ˜¯O(nlogn)ã€‚é¢å¤–ç©ºé—´åªæœ‰tempç”¨æ¥å­˜å–å‡ºçš„æ•°ï¼ŒO(1)ã€‚ å †æŽ’åºçš„ä»£ç  12345678910111213141516Array.prototype.heapSort=function()&#123; for(var i=1;i&lt;this.length;++i)&#123; for(var j=i,k=(j-1)&gt;&gt;1;k&gt;=0;j=k,k=(k-1)&gt;&gt;1)&#123; if(this[k]&gt;=this[j])break; this.swap(j,k); &#125; &#125; for(var i=this.length-1;i&gt;0;--i)&#123; this.swap(0,i); for(var j=0;k=(j+1)&lt;&lt;1;k&lt;=i;j=k,k=(k+1)&lt;&lt;1)&#123; if(k==i||this[k]&lt;this[k-1])--k; if(this[k]&lt;=this[j])braek; this.swap(j,k); &#125; &#125;&#125; æœ¬ç¯‡æ–‡ç« ä¸­çš„ä»£ç éƒ¨åˆ†æ¥è‡ªäºŽä½œè€…twobinäºŽç½‘å€http://www.cnblogs.com/twobinçš„åšæ–‡ã€ŠæŽ’åºç®—æ³•æ€§èƒ½æ¯”è¾ƒã€‹ã€‚]]></content>
      <tags>
        <tag>æ•°æ®ç»“æž„</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linuxã€Vimã€Gitå¸¸ç”¨å‘½ä»¤â€”â€”ç®€æ˜Žæ‰¼è¦ç‰ˆ]]></title>
    <url>%2F2017%2F10%2F31%2FOS%2Flinux%E3%80%81vim%E3%80%81git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[ç¬¬ä¸€æ¬¡æ“ä½œç³»ç»Ÿå®žéªŒè¯¾è®°å½•ï¼š ä¸€ã€‚linuxä¸‹å¸¸ç”¨å‘½ä»¤äºŒã€‚vimç¼–è¾‘å™¨ç”¨æ³•å‘½ä»¤ é¦–å…ˆç¡®ä¿linuxä¸‹å®‰è£…æœ‰vimã€‚å¯ä»¥ä½¿ç”¨ä¸Šè¿°å‘½ä»¤sudo apt-get install vimæ¥ç¡®å®šã€‚å¦‚æžœå·²ç»å®‰è£…äº†vimï¼Œä¼šæ˜¾ç¤ºæ²¡æœ‰å˜åŒ–ï¼Œå¦åˆ™ä¼šå¸®ä½ å®‰è£…vimã€‚ ç„¶åŽå°±å¯ä»¥å¼€å§‹ä½¿ç”¨vimå•¦ï¼ ä½ ä½¿ç”¨ vim æˆ–vim filename.suffix è¿›å…¥äº†vimçš„å‘½ä»¤æ¨¡å¼ã€‚ åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œä¸èƒ½è¿›è¡Œæ–‡æœ¬ç¼–è¾‘æ“ä½œï¼Œéœ€è¦æŒ‰ä¸‹A/a/I/iè¿›å…¥æ’å…¥æ¨¡å¼ï¼Œåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹å¯ä»¥åƒnotepadä¸€æ ·è¿›è¡Œæ–‡æœ¬ç¼–è¾‘ã€‚ å¦‚æžœä½¿ç”¨ç¬¬äºŒç§å‘½ä»¤è¿›å…¥vimï¼Œvimå°†ä¼šè‡ªåŠ¨å¸®ä½ ç¡®å®šæ–‡ä»¶ç±»åž‹ã€‚è¿™æ ·è¯´å§ï¼Œæ¯”å¦‚ä½ åˆ›å»ºäº†ä¸€ä¸ªyayicpp.cppæ–‡ä»¶è¿›å…¥ç¼–è¾‘ï¼Œvimå°†ä¼šä½¿ä»£ç é«˜äº®ã€è¿›è¡Œæ‹¬å·åŒ¹é…ç­‰æ“ä½œã€‚ å¥½çš„ï¼è¿›å…¥æ–‡æœ¬ç¼–è¾‘æ¨¡å¼ä¹‹åŽï¼Œä½ è¿«ä¸åŠå¾…åœ°å†™äº†ä¸€æ®µhelloworldã€‚ä»£ç å®Œæˆä¹‹åŽï¼Œä½ è§‰å¾—åªæ‰“å°ä¸€è¡Œhelloworldä¸å¤ªå¤Ÿï¼Œä½ æƒ³çŸ¥é“æœ‰æ²¡æœ‰ç±»ä¼¼äºŽVSçŽ¯å¢ƒä¸­é‚£ç§Ctrl+Cå’ŒCtrl+Vçš„æ“ä½œã€‚ å…¶å®žæ˜¯æœ‰çš„ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦æŒ‰ä¸‹Escé‡æ–°è¿›å…¥å‘½ä»¤æ¨¡å¼ã€‚åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æœ‰å¾ˆå¤šåŠŸèƒ½ç»„åˆï¼Œä¸Šè¿°çš„å¤åˆ¶ç²˜è´´å°±æ˜¯å…¶ä¸­ä¸€ç§ï¼Œä½†æ˜¯è¿™é‡Œå¹¶ä¸æƒ³ä»¥å¤åˆ¶ç²˜è´´ä½œä¸ºç¬¬ä¸€ä¸ªè¢«ä»‹ç»çš„å‘½ä»¤ï¼Œè®©æˆ‘ä»¬å…ˆä»Žå…‰æ ‡çš„ç§»åŠ¨å¼€å§‹ã€‚ æŒ‰ä¸‹hé”®ï¼Œå…‰æ ‡å·¦ç§»ï¼›jå…‰æ ‡ä¸‹ç§»ï¼›kå…‰æ ‡ä¸Šç§»ï¼›lå…‰æ ‡å³ç§»ã€‚ æŒ‰ä¸‹dé”®è¿›å…¥åˆ é™¤æ¨¡å¼ï¼Œè¿™æ—¶æŒ‰ä¸‹hå¯åˆ é™¤å…‰æ ‡å·¦ä¾§çš„ä¸€ä¸ªå­—ç¬¦ï¼ŒæŒ‰ä¸‹jå¯åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œä»¥åŠä¸‹é¢ä¸€è¡Œï¼›æŒ‰ä¸‹kå¯åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œä¸Žå…¶ä¸Šé¢ä¸€è¡Œï¼›æŒ‰ä¸‹lå¯åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„å­—ç¬¦ã€‚åŒå‡»dé”®åˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œã€‚ æŒ‰ä¸‹ué”®å¯ä»¥æ’¤é”€å‰ä¸€æ­¥æ‰€åšçš„æ”¹å˜ã€‚ æŒ‰ä¸‹Vï¼ˆShift+vï¼‰æˆ–æ˜¯vå¯ä»¥è¿›å…¥åˆ°ä¸€ä¸ªé€‰æ‹©çš„å¯è§†åŒ–ç•Œé¢ï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨hjklæŽ§åˆ¶é€‰æ‹©èŒƒå›´ï¼ŒvæŒ‰ç…§å­—ç¬¦é€‰æ‹©ï¼ŒVæŒ‰ç…§è¡Œæ•°é€‰æ‹©ã€‚é€‰æ‹©å®Œæˆä¹‹åŽæŒ‰ä¸‹yå°±å¯ä»¥å¤åˆ¶é€‰å®šå†…å®¹ã€‚æŒ‰ä¸‹på°±å¯ä»¥å°†å¤åˆ¶å†…å®¹ç²˜è´´åˆ°é€‰å®šçš„ä½ç½®ã€‚ æŒ‰ä¸¤ä¸‹yå¯ä»¥å¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œã€‚ å†™åˆ°è¿™é‡Œï¼Œä½ è§‰å¾—å¯ä»¥äº†ï¼Œå¯ä»¥ä»Žvimé‡Œé¢é€€å‡ºæ¥äº†ã€‚ åœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥å†’å·ï¼Œè¿›å…¥æœ€åŽè¡Œæ¨¡å¼ã€‚åœ¨æœ€ä½Žç«¯å‡ºçŽ°äº†å…‰æ ‡ã€‚ åœ¨å…‰æ ‡ä½ç½®è¾“å…¥wï¼Œä¿å­˜æ–‡ä»¶ã€‚ è¾“å…¥qï¼Œé€€å‡ºã€‚ è¿™äº›å‘½ä»¤å¯ä»¥è¿›è¡Œç»„åˆwqã€‚wqå¯ä»¥ç”¨xæ›¿ä»£ã€‚ ä½ è¿›å…¥äº†æœ€åŽè¡Œæ¨¡å¼ï¼Œåˆä¸æƒ³é€€å‡ºäº†ï¼Œæƒ³ç»§ç»­ç¼–è¾‘ã€‚ æŒ‰ä¸‹Escæˆ–è€…Backspaceå¯ä»¥å›žåˆ°å‘½ä»¤æ¨¡å¼ã€‚ ä¸‰ã€‚gitåˆæ­¥ä½¿ç”¨gitæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œæ˜¯Linuså†™çš„ã€‚è¿™ä¸ªäººemmmmmâ€¦æŠ€æœ¯å¤©æ‰æœ‰äº›ç‹‚å¦„ã€‚]]></content>
      <tags>
        <tag>Linux</tag>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ ‘èŽ“æ´¾è§£æžåŸŸåå¤±è´¥å¯¼è‡´apt-get updateä¸å¯ç”¨]]></title>
    <url>%2F2017%2F10%2F31%2F%E6%A0%91%E8%8E%93%E6%B4%BE%E8%A7%A3%E6%9E%90%E5%9F%9F%E5%90%8D%E5%A4%B1%E8%B4%A5%E5%AF%BC%E8%87%B4apt-get%20update%E4%B8%8D%E5%8F%AF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[æ£é¼“äº†ä¸€ä¸‹åˆï¼ŒæŸ¥äº†nå¤šç½‘ç«™ã€‚ä»Žåˆ é™¤æ–‡ä»¶åˆ°ä¿®æ”¹æºï¼Œç»ˆäºŽå‘çŽ°ä¸€ç›´æç¤ºè§£æžåŸŸåå¤±è´¥çš„åŽŸå› æ˜¯æ ‘èŽ“æ´¾æ²¡æœ‰è¿žä¸Šç½‘orzâ€¦æ²¡æœ‰HDMIï¼Œæˆ‘æ˜¯é€šè¿‡æ ‘èŽ“æ´¾çš„WiFiå’Œç”µè„‘è¿žä¸Šï¼Œç”µè„‘æ’äº†ç½‘çº¿ã€‚åŽæ¥æŠŠç½‘çº¿ç»™äº†æ ‘èŽ“æ´¾ï¼Œç”µè„‘è¿žæ ‘èŽ“æ´¾çš„WiFiï¼Œç”µè„‘ç›´æŽ¥è·³å‡ºäº†å­¦æ ¡ç½‘ç»œçš„ç™»å½•ç•Œé¢ï¼Œåœ¨ç”µè„‘ä¸Šé¢ç™»å½•ä¹‹åŽï¼Œè¿™æ¬¡å¼€å§‹æ›´æ–°è½¯ä»¶æºã€‚ é™¤äº†è¿™ä¸ªï¼Œæˆ‘è¿˜æŒ‰ç…§ç½‘ä¸Šå„è·¯å¤§ç¥žçš„è¯´æ³•ï¼Œæ”¹äº†å¥½å‡ ä¸ªåœ°æ–¹ï¼Œè¿™é‡Œä¸€ä¸€è®°ä¸‹æ¥ï¼Œä»¥ä¾¿ä»¥åŽæŸ¥æ‰¾ã€‚ åˆ é™¤æŸä¸ªç›®å½•çš„å†…å®¹ï¼Œåªè®°å¾—æ˜¯/ect/apt/â€¦/partialä»€ä¹ˆçš„ ä¿®æ”¹/etc/apt/resolv.confçš„å†…å®¹ï¼Œæ•°å­—æ”¹æˆ8.8.8.8 ä¿®æ”¹æºã€‚æ®è¯´ç»™çš„æºæ˜¯å›½å¤–æºï¼Œé€Ÿåº¦æ…¢ã€‚å›½å†…æœ‰å¾ˆå¤šæºå¯ç”¨ï¼Œç½‘å€å¦‚ä¸‹ï¼šhttp://shumeipai.nxez.com/2013/08/31/raspbian-chinese-software-source.html é™¤æ­¤ä¹‹å¤–ï¼Œå€’æ˜¯äº†è§£äº†ä¸€äº›äº›å…³äºŽè¿œç¨‹ä¸Žvncã€‚å®žçŽ°è¿™ä¸¤è€…éœ€è¦å®‰è£…ä¸œè¥¿ï¼Œå¹¶ä¸æ˜¯è£…äº†ç³»ç»Ÿå°±å¯ä»¥è¿žè¿œç¨‹çš„ã€‚è¿™ä¸ªç™¾åº¦ä¸€ä¸‹å¾ˆå¤šæ•™ç¨‹ã€‚ å¦å¤–æ˜¯åœ¨Linuxå‘½ä»¤è¡Œä¸‹çš„vi(vim)ä¸Žnanoç¼–è¾‘å™¨ã€‚ç›¸è¾ƒè€Œè¨€å½“ç„¶æ˜¯nanoå¥½ç”¨ã€‚ç”¨nanoç¼–è¾‘/etc/apt/sæ–‡ä»¶å‘½ä»¤ï¼šsudo nano /etc/apt/sç”¨viç¼–è¾‘åªéœ€å°†nanoæ”¹ä¸ºvinanoå†…æœ‰æç¤ºï¼Œåªéœ€æŒ‰ç…§æç¤ºæ¥å°±å¥½ï¼Œè€Œviå°±æ¯”è¾ƒå¤æ‚ã€‚http://shumeipai.nxez.com/2013/12/26/linux-on-vim-editor-tutorials.htmlè¯¥ç½‘å€å†…å®¹è¯¦å°½ã€‚æ³¨æ„çš„æ˜¯ï¼Œviå‘½ä»¤æ¨¡å¼ä¸æ˜¯å‘½ä»¤è¡Œç•Œé¢ï¼ŒæŒ‰ä¸‹escå¹¶ä¸ä¼šæœ‰ç•Œé¢ä¸Šçš„å˜åŒ–ï¼Œå¹¶ä¸æ˜¯æ•™ç¨‹é”™äº†ã€‚ Linuxä¸‹çš„æ–‡ä»¶ç›¸å…³å‘½ä»¤]]></content>
      <tags>
        <tag>ç‰©è”ç½‘</tag>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨MFCä¸­åˆ›å»ºæŽ§åˆ¶å°]]></title>
    <url>%2F2017%2F10%2F31%2F%E5%9C%A8MFC%E4%B8%AD%E5%88%9B%E5%BB%BA%E6%8E%A7%E5%88%B6%E5%8F%B0%2F</url>
    <content type="text"><![CDATA[è·ç¦»ä¸Šæ¬¡å†™å·²ç»ä¸€å‘¨äº†ã€‚æµ‘æµ‘å™©å™©çš„æ„šäººèŠ‚ï¼Œæµ‘æµ‘å™©å™©çš„ä¸€å‘¨ã€‚ä½†æ˜¯ä¾ç„¶è¦åŠ æ²¹å•Š~è¦æ˜Žç¡®è‡ªå·±æƒ³è¦çš„æ˜¯ä»€ä¹ˆï¼å¼€å¼€å¿ƒå¿ƒåœ°ã€å……å®žåœ°æ´»ç€æ‰æœ€é‡è¦ï¼åŠ æ²¹ï¼ æˆ‘ç”¨çš„VSæ˜¯2015ç‰ˆï¼Œä¹‹å‰æ‰¾äº†ä¸€äº›åœ¨MFCä¸­åŒæ—¶æ˜¾ç¤ºçª—å£ä¸Žå‘½ä»¤è¡Œçš„æ–¹æ³•ï¼Œæˆ‘å¯ä»¥ç”¨çš„åªè®°ä½äº†ä¸€ä¸ªï¼Œå…ˆè®°å½•å¦‚ä¸‹ï¼š åœ¨Ã—.cppçš„InitInstance()ä¸­çš„CWinAPPEx::InitInstance()å‰åŠ ä¸Šä»¥ä¸‹ï¼š 123#ifdef _DEBUG AllocConsole()#endif ä»¥åŽå¯ä»¥ä½¿ç”¨_cprintf()æ‰“å°å­—ç¬¦ä¸²ï¼Œéœ€è¦åœ¨ä½¿ç”¨è¯¥å‡½æ•°çš„æ–‡ä»¶æ·»åŠ å¤´æ–‡ä»¶ï¼š 1#include&lt;conio.h&gt; åˆ‡è®°ï¼è¿™ä¸ªå¤´æ–‡ä»¶å¿…é¡»è¦åœ¨#includeâ€stdafx.hâ€è¯­å¥ä¹‹åŽå†™ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼ ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š 1234CString str="";USES_CONVERSION;LPSTR lp=T2A(str);_cprintf(lp); è¿™æ®µä»£ç å®Œæˆäº†å°†CStringç±»åž‹çš„strè¾“å‡ºçš„ä»»åŠ¡ã€‚]]></content>
      <tags>
        <tag>MFC</tag>
        <tag>å¯è§†åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OS Lab1]]></title>
    <url>%2F2017%2F10%2F31%2FOS%2FOS-Lab12%2F</url>
    <content type="text"><![CDATA[OSLab1ï¼šMITçš„Lab1è¿™ä¸ªä½œä¸šçœŸçš„éžå¸¸ä»¤äººå¿ƒçƒ¦ï¼ŒçŽ°åœ¨åˆ°äº†æ£€æŸ¥ä½œä¸šçš„ç´§è¦å…³å¤´å•¦ï¼]]></content>
      <tags>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[first try]]></title>
    <url>%2F2017%2F10%2F29%2Ffirst-try%2F</url>
    <content type="text"><![CDATA[yayiâ€™s new blogwhat !ä½ ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šäº‹å•Šï¼ï¼Ÿ]]></content>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F10%2F29%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
  <entry>
    <title><![CDATA[Lab5_Document]]></title>
    <url>%2F2017%2F01%2F05%2FOS%2FLab5_Document%2F</url>
    <content type="text"><![CDATA[Lab5-DocumentFile system preliminariesSectors and Blockså¤§å¤šæ•°ç£ç›˜å¹¶ä¸æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œè¯»å†™ï¼Œè€Œæ˜¯ä»¥512å­—èŠ‚ä¸ºå•ä½çš„æ‰‡åŒºè¿›è¡Œã€‚æ–‡ä»¶ç³»ç»Ÿç»å¸¸æ˜¯ä»¥å—ä¸ºå•ä½ç”³è¯·ä½¿ç”¨ç£ç›˜ã€‚æ‰‡åŒºå¤§å°æ˜¯ç£ç›˜çš„æ€§è´¨ï¼Œå—åˆ™æ˜¯osä½¿ç”¨ç£ç›˜çš„ä¸€ä¸ªæ–¹é¢ã€‚æ–‡ä»¶ç³»ç»Ÿçš„å—å¤§å°å¿…é¡»æ˜¯æ‰‡åŒºå¤§å°çš„æ•´æ•°å€ã€‚ åœ¨unixçš„x86ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨çš„å—å¤§å°æ˜¯512å­—èŠ‚ã€‚çŽ°ä»Šç”±äºŽå­˜å‚¨ä»‹è´¨çš„æ—¥ç›Šå»‰ä»·ä»¥åŠå¯¹å­˜å‚¨ç©ºé—´å¤§ç²’åº¦çš„æ“ä½œçš„é«˜æ•ˆæ€§ï¼Œå¤šæ•°oséƒ½æ˜¯ç”¨äº†æ›´å¤§çš„å—ã€‚josä½¿ç”¨4kçš„å—ï¼Œæ­£å¥½å’Œé¡µå¤§å°ä¸€æ ·ã€‚ Superblocksæ–‡ä»¶ç³»ç»Ÿä¸€èˆ¬ä¼šæŠŠæ–‡ä»¶çš„meta-dataä¿å­˜åœ¨ä¸€ä¸ªä¾¿äºŽè®¿é—®çš„åœ°æ–¹ï¼Œè¿™äº›dataåŒ…æ‹¬å—å¤§å°ã€ç£ç›˜å¤§å°ç­‰æ•°æ®ï¼Œä¿å­˜è¿™äº›meta-dataçš„åœ°æ–¹è¢«ç§°ä¸ºè¶…çº§å—ã€‚ è¿™é‡Œçš„æ–‡ä»¶ç³»ç»Ÿåªæœ‰ä¸€ä¸ªè¶…çº§å—ï¼Œä»–å°†ä¼šåœ¨block1ã€‚çœŸæ­£çš„æ–‡ä»¶ç³»ç»Ÿä¸€èˆ¬ä¼šæœ‰å¾ˆå¤šä¸ªè¶…çº§å—ï¼Œè¿™æ ·å½“æŸä¸€ä¸ªè¶…çº§å—å´©æºƒçš„æ—¶å€™ï¼Œå…¶ä»–çš„è¶…çº§å—è¿˜èƒ½æ­£å¸¸ä½¿ç”¨ã€‚ ä¸‹é¢æ¥çœ‹ä¸€ä¸‹è¶…çº§å—çš„æ•°æ®ç»“æž„struct Superï¼Œå®ƒåœ¨inc/fs.hä¸­ã€‚ File Meta-dataä¸€ä¸ªæ–‡ä»¶çš„meta-dataåœ¨è¿™é‡Œæ˜¯ä½¿ç”¨struct Fileè¿›è¡Œæè¿°çš„ï¼Œä¸‹é¢æ˜¯Fileçš„ç»“æž„ï¼š æ›´åŠ ç›´è§‚çš„æ˜¯è¿™æ ·ï¼š ç”±äºŽæˆ‘ä»¬çš„æ–‡ä»¶ç³»ç»Ÿæ²¡æœ‰inodeï¼Œå› æ­¤å°†metadatå­˜åœ¨ç£ç›˜çš„ç›®å½•å…¥å£å¤„ã€‚ åœ¨è¿™é‡Œçš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼ŒFileç»“æž„å°†ä¼šè¢«ç”¨åˆ°å†…å­˜ä»¥åŠç£ç›˜ä¸Šã€‚ä»Žä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒFileç»“æž„ä¸­æœ‰ä¸€ä¸ªå¤§å°æ˜¯10çš„æ•°ç»„f_firectä»¥åŠä¸€ä¸ª32ä½æ•°t_indirectã€‚ä»–ä»¬åˆ†åˆ«å­˜å‚¨ç€æ–‡ä»¶æ•°æ®çš„ä½ç½®ä¿¡æ¯ã€‚å…¶ä¸­æ–‡ä»¶æ”¯æŒdirectçš„40kBæ–‡ä»¶ï¼Œå¦‚æžœå¤§å°å¤§äºŽ40KBï¼Œå¯ä»¥åˆ©ç”¨indirectå—çš„ä¸€å…±1024ä¸ªå…¶ä»–blockæ¥å­˜å‚¨æ–‡ä»¶ï¼Œä¸€å…±æ˜¯4M+4Kçš„æ–‡ä»¶å¤§å°ã€‚å®žé™…ä¸Šï¼Œæ–‡ä»¶ç³»ç»Ÿä¸ºäº†æ”¯æŒå¤§æ–‡ä»¶ï¼Œå¯èƒ½ä¼šæ”¯æŒ2æˆ–æ˜¯3ä¸ªindirectå—ã€‚ Directories versus Regular Filesåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ä¸€å…±åˆ†ä¸ºä¸¤ç§æ–‡ä»¶èŠ‚ç‚¹ï¼Œä¸€ç§æ˜¯ç›®å½•èŠ‚ç‚¹ï¼Œå¦ä¸€ç§æ˜¯æ–‡ä»¶èŠ‚ç‚¹ã€‚ä¸Šè¿°çš„Fileç»“æž„çš„f_typeåŸŸä¾¿æ˜¯ç”¨æ¥åŒºåˆ†è¿™ä¸¤ç§èŠ‚ç‚¹çš„ã€‚è¿™é‡Œçš„æ–‡ä»¶ç³»ç»Ÿå¯¹å¾…æ–‡ä»¶ä¸Žç›®å½•åŸºæœ¬ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œæ–‡ä»¶ç³»ç»Ÿä¸ä¼šå¯¹ä¸Žæ–‡ä»¶å…³è”çš„å—è¿›è¡Œè§£é‡Šï¼Œè€Œä¼šå¯¹ç›®å½•â€”â€”ä¸€å †æ–‡ä»¶ç»“æž„è¿›è¡Œè§£é‡Šã€‚ è¶…çº§å—ä¸­åŒ…å«æ ¹ç›®å½•çš„Fileç»“æž„ã€‚ The File SystemDisk Accessæˆ‘ä»¬å°†ä¼šæŠŠIDEç£ç›˜é©±åŠ¨ä½œä¸ºç”¨æˆ·å±‚é¢æ–‡ä»¶ç³»ç»Ÿè¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œç¨å¾®ä¿®æ”¹å†…æ ¸ä»£ç æ¥ä½¿å¾—æ–‡ä»¶ç³»ç»Ÿè¿›ç¨‹æ‹¥æœ‰ç‹¬è‡ªè®¿é—®ç£ç›˜çš„æƒé™ã€‚ åªè¦æˆ‘ä»¬æ˜¯ä¾èµ–PIO-basedç£ç›˜ï¼Œä¸ä½¿ç”¨ç£ç›˜çš„ä¸­æ–­ï¼Œå®Œæˆç£ç›˜è®¿é—®æ˜¯å¾ˆå®¹æ˜“çš„ã€‚ä½¿ç”¨ä¸­æ–­é©±åŠ¨çš„è®¾å¤‡é©±åŠ¨ä¹Ÿå¾ˆç®€å•ï¼Œä½†æ˜¯ç”±äºŽkerneléœ€è¦æ•èŽ·å¹¶å¤„ç†è¿™äº›ä¸­æ–­ï¼Œå°±ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚ x86å¤„ç†å™¨åœ¨eflagså¯„å­˜å™¨ä¸Šæä¾›äº†IOPLä½ï¼Œä»–å†³å®šäº†ä¸€ä¸ªè¿›ç¨‹èƒ½ä¸èƒ½æ‰§è¡Œä¸€ié¢ç‰¹æ®Šçš„è®¾å¤‡æŒ‡ä»¤ã€‚ç”±äºŽæˆ‘ä»¬éœ€è¦è®¿é—®çš„æ‰€æœ‰IDEç£ç›˜å¯„å­˜å™¨éƒ½ä½äºŽx86çš„IOç©ºé—´ä¸­ï¼Œè€Œä¸æ˜¯è™šæ‹Ÿåœ°å€ç©ºé—´é‡Œé¢ï¼Œæ‰€ä»¥ç»™æ–‡ä»¶ç³»ç»ŸçŽ¯å¢ƒæä¾›IOç‰¹æƒæ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå…è®¸æ–‡ä»¶ç³»ç»Ÿè®¿é—®è¿™äº›å¯„å­˜å™¨ã€‚ å®žé™…ä¸Šï¼ŒEFLAGSå¯„å­˜å™¨ä¸­çš„IOPLä½ä¸ºå†…æ ¸æä¾›äº†ä¸€ä¸ªç®€å•çš„â€œå…¨æœ‰æˆ–å…¨æ— â€æ–¹æ³•æ¥æŽ§åˆ¶ç”¨æˆ·æ¨¡å¼ä»£ç æ˜¯å¦å¯ä»¥è®¿é—®IOç©ºé—´ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¸Œæœ›åªæœ‰æ–‡ä»¶ç³»ç»Ÿè¿›ç¨‹å¯ä»¥è®¿é—®IOç©ºé—´ã€‚ Exercise 1 ç›´æŽ¥ç»™å‡ºä»£ç ï¼š exe1å®Œæˆä¹‹åŽï¼Œå¯ä»¥é€šè¿‡fs/io.cçš„æµ‹è¯•ï¼š Question Do you have to do anything else to ensure that this I/O privilege setting is saved and restored properly when you subsequently switch from one environment to another? Why? æ²¡æœ‰ã€‚å› ä¸ºå®ƒæ˜¯åœ¨eflagsä¸­å­˜åœ¨çš„ï¼Œåœ¨è¿›ç¨‹é—´åˆ‡æ¢æ—¶å¯¹åº”çš„å¯„å­˜å™¨çŠ¶æ€ä¼šè¢«ä¿å­˜å¥½ï¼Œéšç€åˆ‡æ¢ä¸€åŒè¢«å¤ä½ã€‚ The Block Cacheåœ¨æˆ‘ä»¬çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå°†ä¼šå®žçŽ°ä¸€ä¸ªç®€å•çš„cacheã€‚æˆ‘ä»¬çš„æ–‡ä»¶ç³»ç»Ÿåªèƒ½å¤„ç†3GBä»¥åŠæ›´å°çš„ç£ç›˜ï¼Œåœ¨è¯¥æ–‡ä»¶ç³»ç»Ÿè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸Šç•™äº†ä»ŽDISKMAPåˆ°DISKMAP+DISKMAXçš„3GBå¤§å°çš„ç©ºé—´ï¼Œä»¥æ­¤ä½œä¸ºç£ç›˜çš„å†…å­˜ç©ºé—´æ˜ å°„ã€‚diskaddrå‡½æ•°å¯ä»¥å°†ç£ç›˜çš„å—å·ç¿»è¯‘æˆä¸ºè™šæ‹Ÿåœ°å€ï¼šå…¶ä¸­BLKSIZEæ˜¯å—å¤§å°ï¼Œè¿™é‡Œä¸Žé¡µå¤§å°ç›¸åŒã€‚çœ‹åˆ°ï¼Œè¯¥å‡½æ•°æ‹’ç»ç¿»è¯‘å—0ä¸Žå—1çš„è™šæ‹Ÿåœ°å€ã€‚æ—¢ç„¶æˆ‘ä»¬çš„æ–‡ä»¶ç³»ç»Ÿè¿›ç¨‹å·²ç»æœ‰äº†è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼ŒæŽ¥ä¸‹æ¥éœ€è¦åšçš„å°±åªæ˜¯å®žçŽ°æ–‡ä»¶è®¿é—®ã€‚ç”±äºŽçŽ°ä»£ç£ç›˜å¤§äºŽ3GBï¼Œå› æ­¤åœ¨32ä½æœºå™¨ä¸Šçš„çœŸæ­£çš„æ–‡ä»¶ç³»ç»Ÿå®žçŽ°ä¼šå¾ˆéº»çƒ¦ã€‚ è¿™ç§ç¼“å†²åŒºé«˜é€Ÿç¼“å­˜ç®¡ç†æ–¹æ³•åœ¨64ä½åœ°å€ç©ºé—´çš„æœºå™¨ä¸Šä»ç„¶æ˜¯åˆç†çš„ã€‚ï¼ˆï¼Ÿï¼‰ å½“ç„¶ï¼ŒæŠŠæ•´ä¸ªç¡¬ç›˜è¯»è¿›å†…å­˜æ˜¯å¾ˆè’å”çš„åšæ³•ï¼Œå› æ­¤æˆ‘ä»¬å®žçŽ°äº†ä¸€ä¸ªdemand pagingæœºåˆ¶ã€‚å®ƒåªæ˜¯å…è®¸æˆ‘ä»¬åœ¨å‘ç”Ÿç¼ºé¡µä¸­æ–­çš„æ—¶å€™æŠŠç¼ºé¡µå¯¹åº”çš„ç¡¬ç›˜çš„å†…å®¹è¯»è¿›å†…å­˜ã€‚ åœ¨å†™exer2ä¹‹å‰ï¼Œé¦–å…ˆè¯»è¯»å†™ç¡¬ç›˜çš„ä»£ç ï¼šè¿™æ˜¯è¯»ç¡¬ç›˜çš„ä»£ç ã€‚å‚æ•°åˆ†åˆ«æ˜¯åˆ†åŒºå·ã€è¯»å…¥åœ°å€ä»¥åŠåˆ†åŒºæ•°ã€‚ è¿™æ˜¯å†™ç¡¬ç›˜çš„ä»£ç ã€‚å‚æ•°åˆ†åˆ«æ˜¯åˆ†åŒºå·ã€æºè™šæ‹Ÿåœ°å€ä»¥åŠåˆ†åŒºæ•°ã€‚ Exercise 2æ ¹æ®æç¤ºå†™å‡ºä»£ç ï¼šbc_pgfaultï¼šflush_blockï¼š å®Œæˆä¹‹åŽï¼Œmake gradeï¼š è¿™é‡Œå®Œæˆä¹‹åŽï¼Œå¯ä»¥åŽ»æŸ¥çœ‹fs_initå‡½æ•°ï¼Œäº†è§£å—ç¼“å­˜çš„ä½¿ç”¨æ–¹æ³•ï¼š inité¦–å…ˆæ‰¾ä¸€ä¸ªå¯ç”¨çš„ç£ç›˜ï¼Œå‡½æ•°ide_probe_disk1å¦‚ä¸‹ï¼šè¿™ä¸ªå‡½æ•°æŸ¥æ‰¾ä¸€ä¸ªå¯ä»¥å¤„äºŽreadyçŠ¶æ€çš„ç£ç›˜å—ï¼Œä¼˜å…ˆé€‰æ‹©ç£ç›˜å—1ã€‚é¦–å…ˆç­‰å¾…ç£ç›˜å—0readyï¼ŒéšåŽæ£€æŸ¥ç­‰å¾…ç£ç›˜å—1readyã€‚å¦‚æžœæ—¶é—´ç”¨å°½å—1ä»æœªreadyï¼Œå°±åˆ‡å›žå—0ï¼Œå¦åˆ™ä½¿ç”¨å—1ã€‚ éšåŽåˆå§‹åŒ–bcï¼Œè¯»å…¥è¶…çº§å—è¿›cacheã€è®¾ç½®cacheä¸­çš„pgfaultå¤„ç†å‡½æ•°ã€æ£€æŸ¥bcå¯ç”¨ã€‚ ç„¶åŽè®¾ç½®è¶…çº§å—çš„ç»“æž„æŒ‡é’ˆsuperæŒ‡å‘è¶…çº§å—åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œå¹¶æ£€æŸ¥è¶…çº§å—éƒ¨åˆ†æ˜¯å¦æœ‰æ•ˆï¼š æœ€åŽè®¾ç½®bitmapçš„ç»“æž„æŒ‡é’ˆæŒ‡å‘ä½å›¾åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œå¹¶æ£€æŸ¥bitmapï¼Œä¿è¯å—0ï¼Œ1ä»¥åŠbitmapéƒ¨åˆ†æ˜¯freeçš„ã€‚ The Block Bitmapåœ¨fs_initè®¾ç½®äº†ä½å›¾æŒ‡é’ˆä¹‹åŽï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠä½å›¾å½“ä½œbitçš„ä¸€ä¸ªæ•°ç»„äº†ã€‚æ¯ä¸€ä¸ªbitä»£è¡¨ç£ç›˜ä¸Šçš„ä¸€ä¸ªblockã€‚ Exercise 3åœ¨å†™å‡½æ•°alloc_blockä¹‹å‰ï¼Œé¦–å…ˆæŸ¥çœ‹å‡½æ•°free_blockï¼š ç›¸ä¼¼çš„ï¼Œç»“åˆcheck_bitmapä¸­çš„ä»£ç ï¼Œå¯ä»¥å†™å‡ºï¼š å®Œæˆä¹‹åŽï¼š File Operationsåœ¨å‘ä¸‹è¿›è¡Œä¹‹å‰ï¼Œé¦–å…ˆæ¥çœ‹fs/fs.cä¸­å·²ç»å†™å¥½çš„exe3å°†ä¼šç”¨åˆ°çš„ä½†æ˜¯å°šæœªæåˆ°è¿‡çš„å†…å®¹ï¼š Exercise 4file_block_walk and file_get_block in fs/fs.cfile_block_walkæ˜¯ä»Žä¸€ä¸ªæŒ‡å®šçš„æ–‡ä»¶ä¸­æ‰¾åˆ°ä¸€ä¸ªæŒ‡å®šçš„å—ï¼Œå¹¶å°†è¿™ä¸ªå—åœ¨ç£ç›˜ä¸­çš„å—å·æ”¾åœ¨ppdiskbnoä¸­ã€‚å¦‚æžœä¸æˆåŠŸåˆ™è¿”å›žå¯¹åº”çš„é”™è¯¯ä»£ç ã€‚ file_get_blockæ˜¯ä»Žä¸€ä¸ªæŒ‡å®šçš„æ–‡ä»¶ä¸­æ‰¾åˆ°ä¸€ä¸ªæŒ‡å®šçš„å—ï¼Œå¹¶åœ¨å¿…è¦çš„æ—¶å€™ç”³è¯·æ–°çš„å—ï¼Œå°†å¯¹åº”å—çš„è¢«æ˜ å°„çš„è™šæ‹Ÿåœ°å€æ”¾åœ¨blk[0]ä¸­ã€‚å¦‚æžœä¸æˆåŠŸï¼Œåˆ™è¿”å›žå¯¹åº”çš„é”™è¯¯ä»£ç ã€‚ å®ŒæˆåŽï¼š The file system interfaceçŽ°åœ¨æ–‡ä»¶ç³»ç»Ÿå·²ç»æœ‰äº†å¿…è¦çš„åŠŸèƒ½ï¼Œä¸‹é¢éœ€è¦å…è®¸å…¶ä»–è¿›ç¨‹æ¥ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿã€‚ç”±äºŽå…¶ä»–è¿›ç¨‹ä¸èƒ½ç›´æŽ¥è°ƒç”¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦æš´éœ²æ–‡ä»¶ç³»ç»Ÿè¿›ç¨‹çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰ã€‚ä¸‹å›¾æ˜¯è°ƒç”¨æ–‡ä»¶ç³»ç»ŸæœåŠ¡çš„è¿‡ç¨‹ï¼š readè¯»å–æ–‡ä»¶ï¼Œç„¶åŽäº¤ç»™devfile_readè¯»å–ç£ç›˜ä¸Šçš„æ–‡ä»¶ã€‚devfileä¸€ç±»çš„å‡½æ•°å®žçŽ°äº†æ–‡ä»¶ç³»ç»Ÿæ“ä½œçš„å®¢æˆ·æœåŠ¡ã€‚åœ¨è¯·æ±‚ä¸­ç»‘å®šå‡½æ•°ï¼Œè°ƒç”¨fsipcå‘é€IPCè¯·æ±‚ï¼Œå¹¶è§£åŒ…è¿”å›žç»“æžœã€‚fsipcå‡½æ•°å¤„ç†å‘serverå‘é€è¯·æ±‚å’ŒæŽ¥å—åº”ç­”çš„å¸¸è§ç»†èŠ‚ã€‚æ–‡ä»¶ç³»ç»ŸæœåŠ¡å™¨ä»£ç åœ¨fs/serv.cä¸­ã€‚å®ƒåœ¨å‘é€å‡½æ•°ä¸­å¾ªçŽ¯ï¼Œæ— ä¼‘æ­¢åœ°é€šè¿‡IPCæŽ¥æ”¶è¯·æ±‚ï¼Œå°†è¯¥è¯·æ±‚åˆ†æ´¾ç»™ç›¸åº”çš„å¤„ç†å‡½æ•°ï¼Œå¹¶é€šè¿‡IPCå‘å›žç»“æžœã€‚åœ¨é˜…è¯»ç¤ºä¾‹ä¸­ï¼Œserveå°†è°ƒåº¦åˆ°serve_readï¼Œå®ƒå°†å¤„ç†ç‰¹å®šäºŽè¯»å–è¯·æ±‚çš„IPCç»†èŠ‚ï¼Œä¾‹å¦‚è§£åŽ‹ç¼©è¯·æ±‚ç»“æž„ï¼Œæœ€åŽè°ƒç”¨file_readæ¥å®žé™…æ‰§è¡Œæ–‡ä»¶è¯»å–ã€‚JOSçš„IPCæœºåˆ¶è®©ä¸€ä¸ªçŽ¯å¢ƒå‘é€ä¸€ä¸ªå•ä¸€çš„32ä½æ•°å­—ï¼Œå¹¶å¯é€‰æ‹©å…±äº«ä¸€ä¸ªé¡µé¢ã€‚ä¸ºäº†ä»Žå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæˆ‘ä»¬ä½¿ç”¨32ä½æ•°çš„è¯·æ±‚ç±»åž‹ï¼ˆæ–‡ä»¶ç³»ç»ŸæœåŠ¡å™¨çš„RPCç¼–å·ï¼Œå°±åƒsyscallsçš„ç¼–å·ä¸€æ ·ï¼‰ï¼Œå¹¶å°†å‚æ•°å­˜å‚¨åˆ°è”åˆFsipcä¸­çš„è¯·æ±‚ä¸Šè¯¥é¡µé¢é€šè¿‡IPCå…±äº«ã€‚åœ¨å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬æ€»æ˜¯åœ¨fsipcbufå…±äº«é¡µé¢;åœ¨æœåŠ¡å™¨ç«¯ï¼Œæˆ‘ä»¬å°†ä¼ å…¥çš„è¯·æ±‚é¡µé¢æ˜ å°„åˆ°fsreqï¼ˆ0x0ffff000ï¼‰ã€‚æœåŠ¡å™¨ä¹Ÿé€šè¿‡IPCå‘é€å›žåº”ã€‚æˆ‘ä»¬ä½¿ç”¨32ä½æ•°å­—ä½œä¸ºå‡½æ•°çš„è¿”å›žç ã€‚å¯¹äºŽå¤§å¤šæ•°RPCï¼Œè¿™æ˜¯ä»–ä»¬æ‰€æœ‰çš„è¿”å›žã€‚ FSREQ_READå’ŒFSREQ_STATä¹Ÿä¼šè¿”å›žæ•°æ®ï¼Œä»–ä»¬åªæ˜¯å†™å…¥å®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„é¡µé¢ã€‚åœ¨å“åº”IPCä¸­ä¸éœ€è¦å‘é€æ­¤é¡µé¢ï¼Œå› ä¸ºå®¢æˆ·ç«¯é¦–å…ˆå°†å…¶ä¸Žæ–‡ä»¶ç³»ç»ŸæœåŠ¡å™¨å…±äº«ã€‚æ­¤å¤–ï¼ŒFSREQ_OPENåœ¨å›žå¤ä¸­ä¸Žå®¢æˆ·åˆ†äº«äº†ä¸€ä¸ªæ–°çš„â€œFdé¡µé¢â€ã€‚æˆ‘ä»¬å¾ˆå¿«ä¼šè¿”å›žåˆ°æ–‡ä»¶æè¿°ç¬¦é¡µé¢ã€‚ åœ¨å†™exe5ä¹‹å‰ï¼Œå‚è€ƒå…¶ä»–çš„servç±»å‡½æ•°ï¼š é¦–å…ˆèŽ·å¾—å¯¹åº”çš„OpenFileç»“æž„ï¼ŒéšåŽåˆ©ç”¨OpenFileä¸­çš„ä¿¡æ¯èŽ·å¾—Fileä¿¡æ¯ï¼Œè°ƒç”¨FSä¸­çš„å‡½æ•°ï¼Œå®Œæˆä»»åŠ¡ã€‚ OpenFileç»“æž„çš„å®šä¹‰å¦‚ä¸‹ï¼š openfile_lookupå‡½æ•°ä»Žå…¨å±€çš„æ•°ç»„ä¸­æ ¹æ®æ‰“å¼€fileçš„idèŽ·å¾—å¯¹åº”çš„fileï¼Œç±»ä¼¼äºŽenvçš„èŽ·å¾—ã€‚ Fdç»“æž„è®°å½•äº†æŸä¸€ä¸ªæ‰“å¼€æ–‡ä»¶çš„æ‰“å¼€æ–¹å¼ä¸Žåç§»é‡ç­‰æ•°æ®ã€‚æ¯ä¸ªæ‰“å¼€çš„æ–‡ä»¶æœ‰ä¸€ä¸ªFdç»“æž„ï¼Œå°±åƒæ˜¯unixä¸­çš„æ–‡ä»¶æè¿°ç¬¦ä¸€æ ·ã€‚è¿™ä¸ªç»“æž„ç”±è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œè€Œä¸”ä¸Žæ‰€æœ‰æ‰“å¼€è¯¥æ–‡ä»¶çš„è¿›ç¨‹åˆ†äº«ã€‚ æœ¬å‡½æ•°ä¸­ä½¿ç”¨file_readï¼Œè¿™ä¸ªå‡½æ•°ï¼šå®ƒä»ŽæŒ‡å®šæ–‡ä»¶çš„æŒ‡å®šåç§»å‡ºè¯»å–countå­—èŠ‚çš„æ•°æ®æ”¾åˆ°ç»™å®šçš„bufä¸­ã€‚ å…³äºŽexeä¸­çš„è”åˆFsipcï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°çš„ä¸€éƒ¨åˆ†å¦‚ä¸‹ï¼šå…¶ä¸­å¯¹äºŽreadï¼Œreq_fileidæ˜¯å¯¹åº”æ–‡ä»¶çš„idï¼Œreq_næ˜¯è¯»å–æ–‡ä»¶çš„åç§»é‡ï¼›readRetä¸­çš„bufåˆ™æ˜¯åœ¨è¿›è¡Œæ–‡ä»¶çš„è¯»æ“ä½œçš„æ—¶å€™ï¼Œfile_readæ”¾å…¥æ•°æ®çš„bufã€‚å¯¹äºŽwriteï¼Œä¹Ÿæ˜¯å¯¹åº”çš„å­—æ®µã€‚ Exercise 5 å®ŒæˆåŽï¼Œå¯ä»¥é€šè¿‡serve_open/file_stat/file_closeä»¥åŠfile_readï¼š å¯¹åº”çš„file_writeæ˜¯ï¼šä»–å·²ç»å®Œæˆäº†å¿…è¦æ—¶æ‰©å±•çš„åŠŸèƒ½ã€‚ä¸Žreadç±»ä¼¼ï¼Œfile_writeæ˜¯å°†bufä¸­çš„å†…å®¹æ”¾å…¥å¯¹åº”æ–‡ä»¶çš„æŒ‡å®šåç§»ä½ç½®ã€‚ç±»ä¼¼çš„ï¼Œå¯ä»¥å†™å‡ºexe6ä¸­çš„serv_writeå‡½æ•°ã€‚ åœ¨å†™devfile_writeå‡½æ•°ä¹‹å‰ï¼Œé¦–å…ˆçœ‹devfile_readå‡½æ•°ï¼šå®ƒä½¿ç”¨fspicå‘é€è¯·æ±‚ï¼Œå¾—åˆ°å›žç­”å¹¶å°†fsipcï¼ˆserveï¼‰åšçš„å·¥ä½œï¼šè¯»å‡ºçš„æ•°æ®å–å›žã€‚å¯ä»¥çœ‹åˆ°çš„æ˜¯ï¼Œfsipcï¼ˆserveï¼‰æ‰€åšçš„äº‹æƒ…æ­£æ˜¯æˆ‘ä»¬åœ¨å‰é¢æ‰€åšçš„ï¼Œserve_readä¸­æ‰€åšçš„äº‹ã€‚ fsipcå‡½æ•°è´Ÿè´£å‘é€requestä¸ŽæŽ¥å—requestï¼Œå…¶å‡½æ•°ä½“å¦‚ä¸‹ï¼šæ­£å¦‚å‰é¢çš„å›¾ä¸­æ‰€ç¤ºï¼ŒfsipcéšåŽä½¿ç”¨IPCä¸Žæ–‡ä»¶ç³»ç»Ÿè¿›ç¨‹ä¼ é€’æ•°æ®ï¼Œæ–‡ä»¶ç³»ç»Ÿè¿›ç¨‹åœ¨serveä¸­æŽ¥æ”¶æ•°æ®å¹¶è¿›è¡Œæ›´ä¸Šå±‚çš„è°ƒç”¨å¤„ç†ï¼Œä¸ºäº†æ›´å¥½åœ°å†™å‡ºwriteå‡½æ•°ï¼Œä¸‹é¢æ¥çœ‹serveå‡½æ•°çš„å¤„ç†æ–¹å¼ï¼š å…¶ä¸­çš„handlersæ˜¯å‡½æ•°æŒ‡é’ˆï¼šå…¶ä¸­å†³å®šäº†å„ç§é™¤äº†openä¹‹å¤–çš„å¤„ç†æ–¹å¼ã€‚å¯¹äºŽwriteï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨fsipcbufä¸­è®¾ç½®çš„å‚æ•°å°†ä¼šåœ¨ä¹‹åŽç”¨äºŽè°ƒç”¨serve_eriteå‡½æ•°ã€‚ Exercise 6 å®Œæˆä¹‹åŽï¼š Spawning Processesåœ¨lib/spawn.cä¸­ï¼Œå·²æœ‰çš„ä»£ç å¯ä»¥å®Œæˆåˆ›å»ºæ–°è¿›ç¨‹ï¼ŒåŠ è½½ç¨‹åºé•œåƒï¼Œä½¿å­è¿›ç¨‹å¼€å§‹è·‘ç¨‹åºç­‰ã€‚æˆ‘ä»¬ä½¿ç”¨spawnè€Œä¸æ˜¯ç”¨å‘unixä¸€æ ·çš„execï¼Œè¿™æ˜¯å› ä¸ºspawnå°†å¯ä»¥æ›´åŠ å®¹æ˜“åœ°è¢«å®žçŽ°ã€‚ åœ¨env.cä¸­ï¼šç‰¹æƒçº§è®¾ç½®ã€‚ Exercise 7 å®Œæˆä¹‹åŽï¼š Sharing library state across fork and spawnUinxæ–‡ä»¶æè¿°ç¬¦æ˜¯ä¸€ä¸ªé€šç”¨çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬ç®¡é“ï¼ŒæŽ§åˆ¶å°çš„IOç­‰ã€‚æ¯ç§è¿™æ ·çš„è®¾å¤‡éƒ½åŒ…å«ä¸€ä¸ªå¯¹åº”çš„Devç»“æž„ï¼ŒåŒ…å«ä¸€ä¸ªæŒ‡å‘å®žçŽ°äº†readã€writeç­‰å‡½æ•°çš„æŒ‡é’ˆã€‚lib/fd.cå®žçŽ°äº†åƒunixä¸€æ ·çš„æ–‡ä»¶æè¿°ç¬¦æŽ¥å£ã€‚æ¯ä¸ªfdç»“æž„ä»£è¡¨ä»–çš„è®¾å¤‡ç±»åž‹ï¼Œfdä¸­çš„å¤§éƒ¨åˆ†å‡½æ•°éƒ½åªæ˜¯å°†ä»»åŠ¡åˆ†é…åˆ°å¯¹åº”devçš„å‡½æ•°ã€‚ lib/fd.cè¿˜åœ¨æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºçŽ¯å¢ƒçš„åœ°å€ç©ºé—´ä¸Šç»´æŠ¤æ–‡ä»¶æè¿°ç¬¦ï¼Œä»ŽFSTABLEå¼€å§‹ï¼Œè¿™ä¸ªåŒºåŸŸä¿ç•™äº†ä¸€ä¸ªpageçš„ç©ºé—´ï¼Œå…è®¸æ¯ä¸€ä¸ªè¿›ç¨‹åŒæ—¶æœ€å¤šæ‰“å¼€ï¼ˆMAXFDï¼‰32ä¸ªæ–‡ä»¶ã€‚åªæœ‰æŸä¸€ä¸ªæ–‡ä»¶è¢«æ‰“å¼€ï¼Œå¯¹åº”çš„Fdæ‰ä¼šè¢«mapåˆ°åœ°å€ç©ºé—´ä¸­åŽ»ã€‚æ¯ä¸€ä¸ªfdéƒ½æœ‰ä¸€ä¸ªå¯é€‰çš„data pageï¼Œä»ŽFILEDATAå¼€å§‹ï¼Œè®¾å¤‡å¯ä»¥é€‰æ‹©ä½¿ç”¨ã€‚ æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåœ¨forkä¸Žspawnä¹‹é—´å…±äº«file descriptorï¼Œä½†æ˜¯æ–‡ä»¶æè¿°ç¬¦æ˜¯è¢«ä¿å­˜åœ¨ç”¨æˆ·ç©ºé—´çš„å†…å­˜ä¹‹ä¸­ï¼Œåœ¨forkä¹‹ä¸­ï¼Œè¿™äº›å†…å­˜éœ€è¦è¢«æ ‡è®°ä¸ºcowï¼Œå› æ­¤çŠ¶æ€å°±ä¼šé‡å¤ï¼Œè€Œä¸æ˜¯å…±äº«è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿›ç¨‹æ— æ³•æ‰¾åˆ°å°šæœªæ‰“å¼€çš„æ–‡ä»¶ï¼Œç®¡é“ä¹Ÿä¸å¯èƒ½å·¥ä½œåœ¨forkä¸­,åœ¨spawnä¸­ï¼Œå†…å­˜å°†ä¼šè¢«ä¸¢åˆ°ä¸€æ—ã€‚ æˆ‘ä»¬éœ€è¦æ›´æ”¹forkï¼Œè®©å¥¹çŸ¥é“åœ¨ç‰¹å®šçš„åŒºé—´ä¸­å†…å­˜è¢«ç”¨äºŽâ€œlibrary operating systemâ€ï¼Œå¹¶ä¸”åº”è¯¥æ€»æ˜¯å…±äº«çš„ã€‚åœ¨é¡µè¡¨ä¸­è®¾ç½®ä¸€ä¸ªä½ï¼Œè®©forkçŸ¥é“è¿™ä»¶äº‹ï¼Œè€Œä¸æ˜¯å†ç¼–å†™ä»£ç ã€‚ åœ¨inc/lib.hä¸­å®šä¹‰äº†ä¸€ä¸ªæ–°çš„ä½ï¼šPTE_SHAREã€‚å®ƒæ˜¯Intelä¸ŽAMDæ‰‹å†Œä¸­æ ‡è®°ä¸ºâ€œå¯ç”¨äºŽè½¯ä»¶ä½¿ç”¨â€çš„ä¸‰ä¸ªPTEä½ä¹‹ä¸€ã€‚æˆ‘ä»¬å°†å»ºç«‹çº¦å®šï¼šå¦‚æžœæŸä¸€ä¸ªtable entryçš„è¿™ä¸€ä½è¢«ç½®ä½ï¼Œå°±ç›´æŽ¥ä»Žçˆ¶äº²æ‹·è´åˆ°å„¿å­ï¼Œä¸ç®¡æ˜¯åœ¨spawnè¿˜æ˜¯åœ¨forkã€‚è¿™ä¸Žcowæ˜¯å®Œå…¨ä¸åŒçš„ã€‚ Exercise 8ä¿®æ”¹åŽŸæ¥çš„duppageä»£ç ï¼Œå½“æŸä¸€ä¸ªé¡µé¢è¢«æ ‡è®°ä¸ºSHAREçš„æ—¶å€™æ—¶ï¼Œå°†åŒæ ·çš„æ˜ å°„æ˜ å°„åˆ°å¯¹åº”çš„envä¸Šã€‚ copy_share_pagesåƒæ˜¯åœ¨forkå‡½æ•°ä¸­å®žçŽ°çš„å¤åˆ¶æ˜ å°„çš„éƒ¨åˆ†ï¼Œåªæ˜¯è¿™é‡Œæ— æ³•è°ƒç”¨duppageï¼š å®Œæˆä¹‹åŽï¼š The keyboard interfaceä¸ºäº†ä½¿å¾—shellå¯ä»¥å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥ä¸œè¥¿ã€‚QEMUå·²ç»å¯ä»¥åœ¨CGAæ˜¾ç¤ºå™¨ä¸Šæ˜¾ç¤ºæˆ‘ä»¬çš„è¾“å…¥äº†ï¼Œä½†æ˜¯ç›®å‰æˆ‘ä»¬åªæ˜¯åœ¨å†…æ ¸ç›‘è§†å™¨ä¸Šè¿›è¡Œè¾“å…¥ã€‚åœ¨qemuä¸­ï¼Œè¾“å…¥åœ¨å›¾å½¢çª—å£çš„è¾“å…¥æ˜¾ç¤ºä¸ºä»Žé”®ç›˜åˆ°JOSçš„è¾“å…¥ï¼Œè€Œè¾“å…¥åˆ°æŽ§åˆ¶å°çš„è¾“å…¥åœ¨ä¸²è¡Œç«¯å£ä¸Šæ˜¾ç¤ºä¸ºå­—ç¬¦ã€‚ kern / console.cå·²ç»åŒ…å«äº†è‡ªå®žéªŒ1ä»¥æ¥å·²è¢«å†…æ ¸ç›‘è§†å™¨ä½¿ç”¨çš„é”®ç›˜å’Œä¸²å£é©±åŠ¨ç¨‹åºï¼Œä½†æ˜¯çŽ°åœ¨éœ€è¦å°†è¿™äº›é©±åŠ¨ç¨‹åºé™„åŠ åˆ°ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ã€‚ åœ¨å†™exe9ä¹‹å‰ï¼Œé¦–å…ˆçœ‹å°†ä¼šè¢«è°ƒç”¨çš„ä¸¤ä¸ªå‡½æ•°kern/condole.cï¼š kbd_intrï¼š serial_intrï¼š å…·ä½“æ“ä½œåå‘åº•å±‚ï¼Œè¿™é‡Œä¸åšè®¨è®ºã€‚ Exercise 9åªéœ€è¦æŒ‰ç…§æè¿°è°ƒç”¨å‡½æ•°ï¼š å®Œæˆä¹‹åŽï¼š åœ¨lib/console.cä¸­å®žçŽ°äº†è¾“å…¥è¾“å‡ºæ–‡ä»¶ç±»åž‹ï¼Œ kbd_intrå’Œserial_intrç”¨æœ€è¿‘è¯»å–çš„è¾“å…¥å¡«å……ä¸€ä¸ªç¼“å†²åŒºï¼Œè€ŒæŽ§åˆ¶å°æ–‡ä»¶ç±»åž‹åˆ™æ¶ˆè€—ç¼“å†²åŒºï¼ˆé™¤éžç”¨æˆ·é‡å®šå‘ï¼Œå¦åˆ™æŽ§åˆ¶å°æ–‡ä»¶ç±»åž‹é»˜è®¤ç”¨äºŽstdin / stdoutï¼‰ã€‚ The Shellè¿è¡Œuser/icodeã€‚icodeæ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œè®¾ç½®consoleä¸ºæ–‡ä»¶æè¿°ç¬¦0ä¸Ž1ï¼ˆæ ‡å‡†è¾“å…¥è¾“å‡ºï¼‰ï¼Œç„¶åŽä¼šspawn shã€‚éšåŽå¯ä»¥è¿è¡Œä¸€äº›å‘½ä»¤ã€‚ æ³¨æ„ï¼Œcprintfç›´æŽ¥æ‰“å°åˆ°æŽ§åˆ¶å°ï¼Œè€Œä¸ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦ä»£ç ã€‚è¿™å¯¹äºŽè°ƒè¯•æ¥è¯´å¾ˆå¥½ï¼Œä½†å¯¹äºŽå…¶ä»–ç¨‹åºçš„ç®¡é“æ¥è¯´å¹¶ä¸å¥½ã€‚è¦å°†è¾“å‡ºæ‰“å°åˆ°ç‰¹å®šçš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆä¾‹å¦‚ï¼Œ1ï¼Œæ ‡å‡†è¾“å‡ºï¼‰éœ€è¦ä½¿ç”¨fprintfï¼ˆ1ï¼Œâ€œâ€¦â€ï¼Œâ€¦ï¼‰ã€‚ printfï¼ˆâ€œâ€¦â€ï¼Œâ€¦ï¼‰æ˜¯æ‰“å°åˆ°FD1ã€‚ é¦–å…ˆæŸ¥çœ‹user/icode.cæ–‡ä»¶ï¼Œåœ¨å¯åŠ¨å®Œæˆä¹‹åŽï¼Œåˆå§‹åŒ–spawnï¼šspawnlå‡½æ•°åœ¨lib/spawn.cä¸­è¢«å®šä¹‰ï¼Œå®ƒå°†ä¼šå¤„ç†è¾“å…¥çš„æ‰§è¡Œç¨‹åºåä¸Žå‘½ä»¤è¡Œå‚æ•°å¹¶è°ƒç”¨spawnå‡½æ•°è¿›è¡Œæ‰§è¡Œã€‚åœ¨spawnå‡½æ•°ä¸­ï¼Œå°†éµå¾ªä»¥ä¸‹æ‰§è¡Œæ­¥éª¤ï¼š æ‰“å¼€ç¨‹åºæ–‡ä»¶ åƒä»¥å‰ä¸€æ ·è¯»ELFå¤´ï¼Œç„¶åŽæ£€æŸ¥å…¶IMAGE ä½¿ç”¨sys_exoforkåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ å°†child_tfè®¾ç½®ä¸ºå­©å­çš„Trapframe è°ƒç”¨init_stackå‡½æ•°æ¥åˆå§‹åŒ–å­çŽ¯å¢ƒçš„å †æ ˆ æ˜ å°„æ‰€æœ‰ç¨‹åºæ®µçš„p_type ELF_PROG_LOADè¿›å…¥æ–°çŽ¯å¢ƒçš„åœ°å€ç©ºé—´ã€‚å¯¹æ¯ä¸ªæ®µä½¿ç”¨Proghdrä¸­çš„p_flagså­—æ®µç¡®å®šå¦‚ä½•æ˜ å°„æ®µã€‚ è°ƒç”¨sys_env_set_trapframe(childï¼Œï¼†child_tf)æ¥è®¾ç½®å­è¿›ç¨‹ä¸­çš„æ­£ç¡®çš„eipå’Œespå€¼ã€‚ ç”¨sys_env_set_status()å¯åŠ¨å­è¿›ç¨‹ã€‚ è¿™ä¸ªexeå¯ä»¥å‚è€ƒwriteçš„å†™æ³•ï¼š å…¶ä¸­çš„dupå‡½æ•°åœ¨fd.cä¸­è¢«å®šä¹‰ï¼Œå…¶å‡½æ•°ä½“å¦‚ä¸‹ï¼šå®ƒå°†ä¸€ä¸ªfdå˜æˆå¦å¤–ä¸€ä¸ªfdçš„duplicateï¼Œå¯¹ä¸€ä¸ªæ“ä½œï¼Œä¹Ÿä¼šå½±å“å¦å¤–ä¸€ä¸ªã€‚ Exercise 10 å®Œæˆä¹‹åŽï¼š æœ¬å®žéªŒç»“æŸã€‚æœ€åŽmake gradeï¼š]]></content>
      <categories>
        <category>OS</category>
        <category>MIT Lab</category>
      </categories>
      <tags>
        <tag>OS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[all-archives]]></title>
    <url>%2Fall-archives%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽ]]></title>
    <url>%2Fabout%2Findex.html</url>
    <content type="text"><![CDATA[â•°(ï¿£Ï‰ï¿£ï½)ï¼ å°±ä¸è¯´ä»€ä¹ˆèƒ½è®¤è¯†å¤§å®¶å¾ˆå¼€å¿ƒä¹‹ç±»çš„åºŸè¯äº†ï¼ æˆ‘ç›®å‰è¿˜åœ¨å¤§å­¦å¥”æ³¢å¿™ç¢Œï¼ŒçœŸçš„å®Œå…¨æ˜¯å°ç™½å•¦ï¼ä¹‹å‰å­¦ä¹ ä¸“ä¸šè¯¾çš„æ—¶å€™å—åˆ°å¾ˆå¤šå¤§ç¥žåšä¸»çš„å¸®åŠ©ï¼Œä¸­æ–‡æ–‡æ¡£ç®€ç›´æ˜¯ç‘°å®ï¼ æ‰€ä»¥~å¸Œæœ›æˆ‘çš„ä¸œè¥¿æˆ–å¤šæˆ–å°‘ä¹Ÿèƒ½å¸®åŠ©åˆ°åˆ«äººï¼ éž èº¬~(â—â€™â—¡â€™â—)]]></content>
  </entry>
  <entry>
    <title><![CDATA[all-categories]]></title>
    <url>%2Fall-catagories%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[schedule]]></title>
    <url>%2Fschedule%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[categories]]></title>
    <url>%2Fcategories%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[tags]]></title>
    <url>%2Ftags%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[è¯»ä¹¦]]></title>
    <url>%2Freading%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[sitemap]]></title>
    <url>%2Fsitemap%2Findex.html</url>
    <content type="text"></content>
  </entry>
</search>
